"<?xml version=\"1.0\" encoding=\"UTF-8\"?>" + 
"<!DOCTYPE book PUBLIC \"-//OASIS//DTD DocBook XML V4.5//EN\" \"http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd\" [" + 
"<!ENTITY % BOOK_ENTITIES SYSTEM \"Development_Guide/en-US/Development_Guide.ent\">" + 
"<!ENTITY BOOKID \"Development_Guide\">" + 
"<!ENTITY PRODUCT \"Red Hat JBoss Portal\">" + 
"<!ENTITY TITLE \"Development Guide\">" + 
"<!ENTITY YEAR \"2013\">" + 
"<!ENTITY HOLDER \"Red Hat, Inc.\">" + 
"<!ENTITY BZPRODUCT \"JBoss Enterprise Portal Platform 6\">" + 
"<!ENTITY BZCOMPONENT \"docs-Developer_Guide\">" + 
"<!ENTITY BZURL \"<ulink url='https://bugzilla.redhat.com/enter_bug.cgi?product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1'>https://bugzilla.redhat.com/</ulink>\">" + 
"]>" + 
"<book>" + 
"	<bookinfo id=\"book-Development_Guide-Development_Guide\">" + 
"	<title>Development Guide</title>" + 
"	<subtitle>For use with Red Hat JBoss Portal 6.1.1</subtitle>" + 
"	<productname>Red Hat JBoss Portal</productname>" + 
"	<productnumber>6.1.1</productnumber>" + 
"	<edition>6.1.1</edition>" + 
"	<pubsnumber>1</pubsnumber>" + 
"	<abstract>" + 
"		<para>" + 
"			The Development Guide is intended for those developing portlet applications and gadgets for the product, and outlines options and strategies for successful deployment." + 
"		</para>" + 
"	</abstract>" + 
"" + 
"	<corpauthor>" + 
"		<inlinemediaobject>" + 
"			<imageobject>" + 
"				<imagedata fileref=\"Common_Content/images/title_logo.svg\" format=\"SVG\"/>" + 
"			</imageobject>" + 
"		</inlinemediaobject>" + 
"	</corpauthor>" + 
"	" + 
"		<xi:include xmlns:xi=\"http://www.w3.org/2001/XInclude\" href=\"Common_Content/Legal_Notice.xml\"/>" + 
"	" + 
"	<authorgroup>" + 
"	<author>" + 
"		<firstname>Jared</firstname><surname>Morgan</surname><email>jmorgan@redhat.com</email>" + 
"	</author>" + 
"</authorgroup>" + 
"</bookinfo>" + 
"	<preface id=\"pref-Development_Guide-Preface\">" + 
"	<title>Preface</title>" + 
"	" + 
"			<xi:include xmlns:xi=\"http://www.w3.org/2001/XInclude\" href=\"Common_Content/Conventions.xml\"/>" + 
"		" + 
"	" + 
"			<xi:include xmlns:xi=\"http://www.w3.org/2001/XInclude\" href=\"Common_Content/Feedback.xml\"/>" + 
"		" + 
"</preface>" + 
"	<part id=\"part-Architectural_and_Design_Choices\">" + 
"	<title>Architectural and Design Choices</title>" + 
"	<chapter id=\"chap-Architectural_Choices\">" + 
"	<title>Architectural Choices</title>" + 
"	<remark>" + 
"		Updated with latest content on confluence V.6 , Source: https://docs.jboss.org/author/display/GTNPORTAL36/GDG-Architectural+choices" + 
"	</remark>" + 
"	<para>" + 
"		Depending on your environment and goals, you have to decide which components make up the final portal. Some elements may already be in place, such as an identity server, and others may be a matter of choice. This section aims to guide you in making those decisions." + 
"	</para>" + 
"	<para role=\"RoleCreateBugPara\">" + 
"		<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18652-565914+%5BLatest%5D&amp;cf_build_id=18652-565914+05+Dec+2013+12%3A46+en-US+%5BLatest%5D&amp;comment=Title%3A+Architectural+Choices%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"	</para>" + 
"	<section id=\"Identity_server\" remap=\"TID_18653\">" + 
"		<title>Identity server</title>" + 
"		<para>" + 
"			Red Hat JBoss Portal (JBoss Portal) comes with a component named PicketLink IDM, which allows to store and retrieve users and groups from various identity sources. PicketLink IDM supports three general options:" + 
"		</para>" + 
"		<variablelist>" + 
"			<varlistentry>" + 
"				<term>Database</term>" + 
"				<listitem>" + 
"					<para>" + 
"						Users, groups and their relationships are stored in an RDBMS database. Table names and column names can be changed, but the overall relationship between tables remains the same. This solution suits identity servers that are build from scratch and will handle thousands of users." + 
"					</para>" + 
"				</listitem>" + 
"			</varlistentry>" + 
"			<varlistentry>" + 
"				<term>LDAP</term>" + 
"				<listitem>" + 
"					<para>" + 
"						Users, groups and their relationships are stored in an LDAP (or ActiveDirectory) server. The directory's structure can be adapted by configuration to the most common scenarios. This solution is particularly suited to environments that already use an LDAP server, environments that will share the identity server amongst multiple services (the website being one of them) or for very large sets of users (millions). When using LDAP with large number of users, it is recommended to use LDAP tools to do the provisioning of users." + 
"					</para>" + 
"				</listitem>" + 
"			</varlistentry>" + 
"			<varlistentry>" + 
"				<term>Custom</term>" + 
"				<listitem>" + 
"					<para>" + 
"						When retrieving users, groups and their relationship cannot be done by configuration, it is possible to use the Picketlink IDM Service Provider Interface (SPI) to implement custom methods which control retrieving and storing user information." + 
"					</para>" + 
"				</listitem>" + 
"			</varlistentry>" + 
"		</variablelist>" + 
"		<para>" + 
"			PicketLink IDM also supports mixed environments, which is very useful when an LDAP infrastructure is provided in read-only mode. Since a website may need to store additional information about users (such as their preferred language), LDAP and database services can be combined so that users' information is stored in an LDAP source and additional properties in a database. During calls to the identity API, the information from both sources is merged transparently." + 
"		</para>" + 
"		<para>" + 
"			For more information about PicketLink IDM, see the JBoss Portal <citetitle>Administration and Configuration Guide</citetitle>." + 
"		</para>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18653-565914+%5BLatest%5D&amp;cf_build_id=18653-565914+05+Dec+2013+12%3A46+en-US+%5BLatest%5D&amp;comment=Title%3A+Identity+server%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"	</section>" + 
"	<section id=\"Storage2\" remap=\"TID_18654\">" + 
"		<title>Storage</title>" + 
"		<para>" + 
"			The portal framework stores page compositions, portlet preferences and gadget code in a database through a Java Content Repository (JCR) API. A set of database servers and JDBC connectors are tested by Red Hat and details of supported configurations can be found on the JBoss Enterprise Portal Platform Supported Configurations page here; <ulink url=\"http://www.jboss.com/products/platforms/portals/testedconfigurations/\"/> page." + 
"		</para>" + 
"		<para>" + 
"			The database schema is automatically created during the initial start up of the portal, at which point it is required that the database users have sufficient rights to create tables. This privilege can be revoked after the initial start up. The database's content can be exported and imported without <varname>CREATE TABLE</varname> permission. The automatic creation of the database schema minimizes the manual effort involved in the installation of the product." + 
"		</para>" + 
"		<para>" + 
"			Since an RDBMS is not suited to the storage of large files, it is recommended to configure eXo JCR to store such files in the filesystem instead of a database, with metadata about the files stored in the database." + 
"		</para>" + 
"		<note>" + 
"			<para>" + 
"				If the website is running on a cluster, the filesystem must be accessible from all nodes and an NFS solution is required. For more details see \"value storage\" in the chapter<citetitle> eXo JCR</citetitle>." + 
"			</para>" + 
"		</note>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18654-565914+%5BLatest%5D&amp;cf_build_id=18654-565914+05+Dec+2013+12%3A46+en-US+%5BLatest%5D&amp;comment=Title%3A+Storage%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"	</section>" + 
"	<section id=\"Cluster2\" remap=\"TID_18655\">" + 
"		<title>Cluster</title>" + 
"		<para>" + 
"			Clustering to meet failover or load-balancing goals requires a more complex configuration than a single node configuration. There is a cost associated with clustering since Red Hat JBoss Portal 6.1 has some optimizations when running on a single node, but the product is designed to scale linearly so that performance is improved with each new node." + 
"		</para>" + 
"		<para>" + 
"			In a cluster environment, all critical components are synchronized across all nodes, while less critical components are de-prioritized to achieve better performance. It is important that custom applications behave in the same manner when replicating data across a cluster of nodes." + 
"		</para>" + 
"		<para>" + 
"			The number of nodes required will vary according to factors such as: infrastructure, performance criteria, and applications developed. Performance analysis with tools such as JMeter and Grinder is recommended for measuring the impact of heavy loads prior to production implementation." + 
"		</para>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18655-565914+%5BLatest%5D&amp;cf_build_id=18655-565914+05+Dec+2013+12%3A46+en-US+%5BLatest%5D&amp;comment=Title%3A+Cluster%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"	</section>" + 
"	<section id=\"sect-SSO\">" + 
"		<title>SSO</title>" + 
"		<para>" + 
"			If a website is a part of a global infrastructure, a deployment of Single-Sign-On (SSO) may be beneficial to end users. Various SSO solutions are supported by Red Hat JBoss Portal, as documented on the \"Supported Configurations\" page available at <ulink url=\"https://access.redhat.com/site/articles/119833\"/>." + 
"		</para>" + 
"		<para>" + 
"			In some cases it can be better to have the token manager service on a specific server." + 
"		</para>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18656-565914+%5BLatest%5D&amp;cf_build_id=18656-565914+05+Dec+2013+12%3A46+en-US+%5BLatest%5D&amp;comment=Title%3A+SSO%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"		<section id=\"Summary\" remap=\"TID_18657\">" + 
"			<title>Summary</title>" + 
"			<para>" + 
"				The infrastructure required is as follows:" + 
"			</para>" + 
"			<itemizedlist>" + 
"				<listitem>" + 
"					<para>" + 
"						A database." + 
"					</para>" + 
"				</listitem>" + 
"				<listitem>" + 
"					<para>" + 
"						LDAP (Optional)." + 
"					</para>" + 
"				</listitem>" + 
"				<listitem>" + 
"					<para>" + 
"						NFS (Optional, unless in a cluster configuration with default settings)." + 
"					</para>" + 
"				</listitem>" + 
"				<listitem>" + 
"					<para>" + 
"						An SSO token service (Optional)" + 
"					</para>" + 
"				</listitem>" + 
"				<listitem>" + 
"					<para>" + 
"						A cluster of nodes (Optional)." + 
"					</para>" + 
"				</listitem>" + 
"			</itemizedlist>" + 
"			<para>" + 
"				An example of the simplest configuration:" + 
"			</para>" + 
"			<figure id=\"fig-Simple_SSO_Setup\">" + 
"				<title>Simple SSO Example</title>" + 
"				<mediaobject>" + 
"					<imageobject role=\"html\">" + 
"						<imagedata align=\"center\" fileref=\"images/2922.png\" format=\"PNG\"/>" + 
"					</imageobject>" + 
"					<textobject>" + 
"						<phrase>Simple SSO Setup, featuring users connecting to a single JBoss Portal Platform node with a shared folder and a database server.</phrase>" + 
"					</textobject>" + 
"				</mediaobject>" + 
"			</figure>" + 
"			<para>" + 
"				An example of a more complex configuration:" + 
"			</para>" + 
"			<figure id=\"fig-Multi-node_SSO_Example\">" + 
"				<title>Multi-node SSO Example</title>" + 
"				<mediaobject>" + 
"					<imageobject role=\"html\">" + 
"						<imagedata align=\"center\" fileref=\"images/2841.png\" format=\"PNG\"/>" + 
"					</imageobject>" + 
"					<textobject>" + 
"						<phrase>Multi-node cluster consisting of three nodes, a primary database, LDAP server, SSO ticket server, load balancer, with NFS share connected to the three nodes.</phrase>" + 
"					</textobject>" + 
"				</mediaobject>" + 
"			</figure>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18657-565914+%5BLatest%5D&amp;cf_build_id=18657-565914+05+Dec+2013+12%3A46+en-US+%5BLatest%5D&amp;comment=Title%3A+Summary%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"	</section>" + 
"</chapter>" + 
"	<chapter id=\"chap-Design_Choices\">" + 
"	<title>Design Choices</title>" + 
"	<remark>" + 
"		Updated wtih latest content on confluence V2 , Source: https://docs.jboss.org/author/display/GTNPORTAL36/GDG-Design+choices" + 
"	</remark>" + 
"	<para>" + 
"		Once the main components of the architecture have been decided, choices must be made on the overall design." + 
"	</para>" + 
"	<para role=\"RoleCreateBugPara\">" + 
"		<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18658-565914+%5BLatest%5D&amp;cf_build_id=18658-565914+05+Dec+2013+12%3A46+en-US+%5BLatest%5D&amp;comment=Title%3A+Design+Choices%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"	</para>" + 
"	<section id=\"Dashboards1\" remap=\"TID_18659\">" + 
"		<title>Dashboards</title>" + 
"		<para>" + 
"			User dashboards may be very costly in a large-scale portal due to the information storage considerations for each user creating a customized page. While some measures have been taken to ameliorate this cost, it, by nature, cannot be avoided completely and should be taken into account when making design decisions in large organizations." + 
"		</para>" + 
"		<para>" + 
"			This overhead is difficult to estimate as it is dependent on how users navigate the portal. If only a minority use this functionality; the cost may be negligible. Alternately, the cost could be considerable if many users create custom spaces." + 
"		</para>" + 
"		<para>" + 
"			The impact of implementing this feature must be measured by:" + 
"		</para>" + 
"		<orderedlist>" + 
"			<listitem>" + 
"				<para>" + 
"					Estimating the number of dashboards and pages that will be created." + 
"				</para>" + 
"			</listitem>" + 
"			<listitem>" + 
"				<para>" + 
"					Observing the impact on the database (through the JCR) in terms of size." + 
"				</para>" + 
"			</listitem>" + 
"		</orderedlist>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18659-565914+%5BLatest%5D&amp;cf_build_id=18659-565914+05+Dec+2013+12%3A46+en-US+%5BLatest%5D&amp;comment=Title%3A+Dashboards%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"	</section>" + 
"	<section id=\"sect-JCR_Index_Replication_in_a_Cluster_Setup\">" + 
"		<title>JCR Index Replication in a Cluster Setup</title>" + 
"		<section id=\"JCR_Index_Replication_in_a_Cluster_Set-up\" remap=\"TID_18660\">" + 
"			<title>JCR Index Replication in a Cluster Setup</title>" + 
"			<para>" + 
"				The JCR implementation uses Apache Lucene to index the data. The indexes are used to search for content (page nodes or WCM content for instance)." + 
"			</para>" + 
"			<para>" + 
"				Lucene is not cluster-ready, but on a cluster, each node must be able to search for content and will need to have access to the Lucene indexes." + 
"			</para>" + 
"			<para>" + 
"				When optimizing searching, a balance must be struck between various goals, including:" + 
"			</para>" + 
"			<itemizedlist>" + 
"				<listitem>" + 
"					<para>" + 
"						Speed." + 
"					</para>" + 
"				</listitem>" + 
"				<listitem>" + 
"					<para>" + 
"						Fast indexing." + 
"					</para>" + 
"				</listitem>" + 
"				<listitem>" + 
"					<para>" + 
"						Consistent results on a node." + 
"					</para>" + 
"				</listitem>" + 
"				<listitem>" + 
"					<para>" + 
"						Data accuracy and longevity." + 
"					</para>" + 
"				</listitem>" + 
"				<listitem>" + 
"					<para>" + 
"						Impact on system performance." + 
"					</para>" + 
"				</listitem>" + 
"				<listitem>" + 
"					<para>" + 
"						Ease and impact of implementation." + 
"					</para>" + 
"				</listitem>" + 
"			</itemizedlist>" + 
"			<para>" + 
"				However eXo JCR, the JCR implementation used by Red Hat JBoss Portal, makes it possible to configure the storage and retrieval of indexes according to the architect's decisions on constraint stringency." + 
"			</para>" + 
"			<itemizedlist role=\"see-also-list\">" + 
"				<title>See Also:</title>" + 
"				<listitem>" + 
"					<para>" + 
"						<xref linkend=\"appe-eXo_JCR\" xrefstyle=\"see-also\"/>" + 
"					</para>" + 
"				</listitem>" + 
"			</itemizedlist>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18660-565914+%5BLatest%5D&amp;cf_build_id=18660-565914+05+Dec+2013+12%3A46+en-US+%5BLatest%5D&amp;comment=Title%3A+JCR+Index+Replication+in+a+Cluster+Setup%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"		<section id=\"Standalone_Index\" remap=\"TID_18661\">" + 
"			<title>Standalone Index</title>" + 
"			<para>" + 
"				Standalone Index is only suitable for a non-cluster environment but is the least complicated configuration, with a combination of in-memory and file based indexes. There is no replication involved so any entry can be found by a search as soon as it is created." + 
"			</para>" + 
"			<figure id=\"fig-Standalone_Index\">" + 
"				<title>Standalone Index</title>" + 
"				<mediaobject>" + 
"					<imageobject role=\"html\">" + 
"						<imagedata align=\"center\" fileref=\"images/2849.png\" format=\"PNG\" scale=\"100\"/>" + 
"					</imageobject>" + 
"					<textobject>" + 
"						<phrase>Diagram explaining the basic premise of a Standalone Index.</phrase>" + 
"					</textobject>" + 
"				</mediaobject>" + 
"			</figure>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18661-565914+%5BLatest%5D&amp;cf_build_id=18661-565914+05+Dec+2013+12%3A46+en-US+%5BLatest%5D&amp;comment=Title%3A+Standalone+Index%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"		<section id=\"Local_Index\" remap=\"TID_18662\">" + 
"			<title>Local Index</title>" + 
"			<para>" + 
"				In Local Index setup each node keeps a local copy of the full indexes so that when a search is requested on a node, there is no network communication required. However, the cost of this method is replication; when a node indexes an item, it is required to replicate that index on each node. If a node is unavailable at that time, it may miss an index update request and then the different nodes may be inconsistent." + 
"			</para>" + 
"			<para>" + 
"				Also when a node is added, it has to recreate its own full index." + 
"			</para>" + 
"			<para>" + 
"				An alternative to this configuration is to configure a node to retrieve the information from a coordinator on each search, which makes the startup of the new node faster, but impacts its performance during operation." + 
"			</para>" + 
"			<figure id=\"fig-Local_Index\">" + 
"				<title>Local Index</title>" + 
"				<mediaobject>" + 
"					<imageobject role=\"html\">" + 
"						<imagedata align=\"center\" fileref=\"images/2846.png\" format=\"PNG\" scale=\"100\"/>" + 
"					</imageobject>" + 
"					<textobject>" + 
"						<phrase>Diagram explaining JCR volatile indexes across multiple indexes.</phrase>" + 
"					</textobject>" + 
"				</mediaobject>" + 
"			</figure>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18662-565914+%5BLatest%5D&amp;cf_build_id=18662-565914+05+Dec+2013+12%3A46+en-US+%5BLatest%5D&amp;comment=Title%3A+Local+Index%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"		<section id=\"Shared_Index\" remap=\"TID_18663\">" + 
"			<title>Shared Index</title>" + 
"			<para>" + 
"				In this setup a unique index is created and shared among all the nodes. The Network File System (NFS) must be installed so that all nodes can read the index." + 
"			</para>" + 
"			<para>" + 
"				Advantages:" + 
"			</para>" + 
"			<itemizedlist>" + 
"				<listitem>" + 
"					<para>" + 
"						Consistency: all the nodes see the same data." + 
"					</para>" + 
"				</listitem>" + 
"			</itemizedlist>" + 
"			<para>" + 
"				Disadvantages:" + 
"			</para>" + 
"			<itemizedlist>" + 
"				<listitem>" + 
"					<para>" + 
"						Requires a highly available NFS setup (NFS 3 is recommended)." + 
"					</para>" + 
"				</listitem>" + 
"				<listitem>" + 
"					<para>" + 
"						Increased network communication." + 
"					</para>" + 
"				</listitem>" + 
"			</itemizedlist>" + 
"			<figure id=\"fig-Shared_Index\">" + 
"				<title>Shared Index</title>" + 
"				<mediaobject>" + 
"					<imageobject role=\"html\">" + 
"						<imagedata align=\"center\" fileref=\"images/2847.png\" format=\"PNG\" scale=\"100\"/>" + 
"					</imageobject>" + 
"					<textobject>" + 
"						<phrase>Diagram explaining the shared index across all JCR instances.</phrase>" + 
"					</textobject>" + 
"				</mediaobject>" + 
"			</figure>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18663-565914+%5BLatest%5D&amp;cf_build_id=18663-565914+05+Dec+2013+12%3A46+en-US+%5BLatest%5D&amp;comment=Title%3A+Shared+Index%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"	</section>" + 
"</chapter>" + 
"</part>" + 
"	<part id=\"part-Portal_API\">" + 
"	<title>Portal API</title>" + 
"	<partintro>" + 
"		<section id=\"About_Portal_API\" remap=\"TID_18664\">" + 
"			<title>About Portal API</title>" + 
"			<remark>" + 
"				Updated wtih latest content on confluence V29 , Source: https://docs.jboss.org/author/display/GTNPORTAL36/Portal+API" + 
"			</remark>" + 
"			<para>" + 
"				The Portal API provides access to retrieving, creating and deleting Portal Sites and Portal Pages. It also provides full support for the navigation and nodes associated with a site, which can be very useful for e.g. creating custom navigation portlets. This section only gives some basic examples of the API usage. For full documentation of all features available, see the <ulink url=\"http://gatein.github.io/gatein-api-java/\">Javadoc</ulink>." + 
"			</para>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18664-565914+%5BLatest%5D&amp;cf_build_id=18664-565914+05+Dec+2013+12%3A46+en-US+%5BLatest%5D&amp;comment=Title%3A+About+Portal+API%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"	</partintro>" + 
"	<chapter id=\"chap-PortalRequest_and_Portal\">" + 
"	<title>PortalRequest and Portal</title>" + 
"	<remark>" + 
"		Source: https://docs.jboss.org/author/display/GTNPORTAL36/Portal+API" + 
"	</remark>" + 
"	<remark>" + 
"		Updated wtih latest content on confluence V29 ," + 
"	</remark>" + 
"	<remark>" + 
"		QE NOTE - QE NOTE - jmorgan -Minor edits only and converting informal examples to examples." + 
"	</remark>" + 
"	<para>" + 
"		The <code>PortalRequest</code> is the entry point to the API. It provides access to the portal, and it also provides access to information associated with the current request (such as the authenticated user and the page being requested)." + 
"	</para>" + 
"	<example>" + 
"		<title>Portal Request</title>" + 
"		<para>" + 
"			This example shows how to use <code>PortalRequest</code> to obtain an instance of the portal." + 
"		</para>" + 
"		<programlisting>Portal portal = PortalRequest.getInstance().getPortal();</programlisting>" + 
"	</example>" + 
"	<para role=\"RoleCreateBugPara\">" + 
"		<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18665-565914+%5BLatest%5D&amp;cf_build_id=18665-565914+05+Dec+2013+12%3A46+en-US+%5BLatest%5D&amp;comment=Title%3A+PortalRequest+and+Portal%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"	</para>" + 
"</chapter>" + 
"	<chapter id=\"chap-Site\">" + 
"	<title>Site</title>" + 
"	<remark>" + 
"		Source: https://docs.jboss.org/author/display/GTNPORTAL36/Portal+API" + 
"	</remark>" + 
"	<remark>" + 
"		Updated with latest content on confluence V29." + 
"	</remark>" + 
"	<para>" + 
"		A Site is comprised of a set of pages, navigation definitions, and can be assigned a unique skin. There are three different types of sites: standard sites, group spaces and user dashboards." + 
"	</para>" + 
"	<para role=\"RoleCreateBugPara\">" + 
"		<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18666-565914+%5BLatest%5D&amp;cf_build_id=18666-565914+05+Dec+2013+12%3A46+en-US+%5BLatest%5D&amp;comment=Title%3A+Site%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"	</para>" + 
"	<section id=\"Retrieving_Sites\" remap=\"TID_18667\">" + 
"		<title>Retrieving Sites</title>" + 
"		<remark>" + 
"			QE NOTE - QE NOTE - jmorgan - Edited. No major changes except converting informal examples to examples." + 
"		</remark>" + 
"		<para>" + 
"			A specific site can be retrieved using its <code>SiteId</code> . The <code>SiteId</code> is constructed by passing either the name for a standard site, the group for a group space or the user for a user dashboard. Alternatively, it can be constructed by passing the <code>SiteType</code> and name." + 
"		</para>" + 
"		<example>" + 
"			<title>Retrieving Sites</title>" + 
"			<para>" + 
"				This example shows how to retrieve sites." + 
"			</para>" + 
"			<programlisting language=\"Java\">" + 
"Site standardSite = portal.getSite(new SiteId(\"classic\"));" + 
"Site groupSpace = portal.getSite(new SiteId(new Group(\"platform\", \"administrators\")));" + 
"Site userDashboard = portal.getSite(new SiteId(new User(\"john\")));" + 
"</programlisting>" + 
"		</example>" + 
"		<para>" + 
"			It is also possible to query for sites using the <code>SiteQuery</code> . The <code>SiteQuery</code> supports filtering, sorting and pagination when querying for sites." + 
"		</para>" + 
"		<note>" + 
"			<title>Note</title>" + 
"			<para>" + 
"				The default number of returned results is 15. If no pagination is set while building the query, the maximum number of results will be 15. Ensure the correct pagination is set while querying." + 
"			</para>" + 
"		</note>" + 
"		<example>" + 
"			<title>Site Query</title>" + 
"			<para>" + 
"				This example finds standard sites that a user has access permissions to, limited to the first ten results." + 
"			</para>" + 
"			<programlisting language=\"Java\">" + 
"SiteQuery.Builder qb = new SiteQuery.Builder();" + 
"" + 
"qb.withSiteTypes(SiteType.SITE).withPagination(0, 10).withFilter(new Filter&lt;Site&gt;() {" + 
"    public boolean accept(Site site) {" + 
"        return portal.hasPermission(user, site.getAccessPermission());" + 
"    }" + 
"});" + 
"" + 
"List&lt;Site&gt; sites = portal.findSites(qb.build());" + 
"</programlisting>" + 
"		</example>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18667-565914+%5BLatest%5D&amp;cf_build_id=18667-565914+05+Dec+2013+12%3A46+en-US+%5BLatest%5D&amp;comment=Title%3A+Retrieving+Sites%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"	</section>" + 
"	<section id=\"sect-Creating_a_Site\">" + 
"		<title>Creating a Site</title>" + 
"		<remark>" + 
"			QE NOTE - QE NOTE - jmorgan - Edited. Changed informal examples to examples." + 
"		</remark>" + 
"		<para>" + 
"			The work flow to create a site is described below:" + 
"		</para>" + 
"		<orderedlist>" + 
"			<listitem>" + 
"				<para>" + 
"					Create a new site through the Portal." + 
"				</para>" + 
"			</listitem>" + 
"			<listitem>" + 
"				<para>" + 
"					Set the configuration for the site (such as localized display names and skin)." + 
"				</para>" + 
"			</listitem>" + 
"			<listitem>" + 
"				<para>" + 
"					Save the configuration using <code>Portal</code>." + 
"				</para>" + 
"			</listitem>" + 
"		</orderedlist>" + 
"		<example>" + 
"			<title>Create a New Standard Site</title>" + 
"			<para>" + 
"				This example creates a new standard site with the name <emphasis role=\"italics\">mysite</emphasis> and a non-localized display name." + 
"			</para>" + 
"			<para>" + 
"				The site is not visible (or persisted) until <code>saveSite</code> is invoked." + 
"			</para>" + 
"			<programlisting language=\"Java\">Site site = portal.createSite(new SiteId(\"foo\"));" + 
"site.setDisplayName(\"My Site\");" + 
"portal.saveSite(site);</programlisting>" + 
"		</example>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18668-565914+%5BLatest%5D&amp;cf_build_id=18668-565914+05+Dec+2013+12%3A46+en-US+%5BLatest%5D&amp;comment=Title%3A+Creating+a+Site%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"		<section id=\"Setting_Attributes_for_a_Site\" remap=\"TID_18669\">" + 
"			<title>Setting Attributes for a Site</title>" + 
"			<remark>" + 
"				QE NOTE - QE NOTE - jmorgan -Edited. Changed some XML formatting, and informal examples to examples." + 
"			</remark>" + 
"			<para>" + 
"				It is possible to change attributes for the site. The supported attributes are:" + 
"			</para>" + 
"			<variablelist>" + 
"				<varlistentry>" + 
"					<term>sessionAlive</term>" + 
"					<listitem>" + 
"						<para>" + 
"							Specifies whether a session is kept alive or not. Valid values are <varname>\"onDemand\"</varname>, <varname>\"always\"</varname>, and <varname>\"never\"</varname> with the default being <varname>\"onDemand\"</varname>" + 
"						</para>" + 
"					</listitem>" + 
"				</varlistentry>" + 
"				<varlistentry>" + 
"					<term>showPortletInfo</term>" + 
"					<listitem>" + 
"						<para>" + 
"							Specifies whether the info bar is shown by default when adding applications to pages. The default is 'false'" + 
"						</para>" + 
"					</listitem>" + 
"				</varlistentry>" + 
"			</variablelist>" + 
"			<example>" + 
"				<title>Set Attributes Using the Key</title>" + 
"				<para>" + 
"					Attributes are set by using the associated <code>Key</code>. This example changes the <code>sessionAlive</code> attribute." + 
"				</para>" + 
"				<programlisting language=\"Java\">" + 
"site.getAttributes().put(Site.AttributeKeys.SESSION_BEHAVIOR, \"always\");" + 
"</programlisting>" + 
"			</example>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18669-565914+%5BLatest%5D&amp;cf_build_id=18669-565914+05+Dec+2013+12%3A46+en-US+%5BLatest%5D&amp;comment=Title%3A+Setting+Attributes+for+a+Site%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"		<section id=\"Setting_permissions_for_a_site\" remap=\"TID_18670\">" + 
"			<title>Setting permissions for a site</title>" + 
"			<remark>" + 
"				QE NOTE - QE NOTE - jmorgan -Minor edits and converting examples" + 
"			</remark>" + 
"			<para>" + 
"				Associated with a site is an access permission and an edit permission, which controls which users and groups are allowed to access and edit the site respectively." + 
"			</para>" + 
"			<example>" + 
"				<title>Setting Access and Edit Permissions</title>" + 
"				<para>" + 
"					This example demonstrates how to make a site accessible by everyone, but only editable by users in the <code>/platform/administrators</code> group." + 
"				</para>" + 
"				<para>" + 
"					The changed permissions do not take affect until <code>saveSite</code> is invoked." + 
"				</para>" + 
"				<programlisting language=\"Java\">" + 
"site.setAccessPermission(Permission.everyone());" + 
"site.setEditPermission(Permission.any(\"platform\", \"administrators\"));" + 
"" + 
"portal.saveSite(site);" + 
"</programlisting>" + 
"			</example>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18670-565917+%5BLatest%5D&amp;cf_build_id=18670-565917+05+Dec+2013+12%3A51+en-US+%5BLatest%5D&amp;comment=Title%3A+Setting+permissions+for+a+site%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"	</section>" + 
"	<section id=\"Deleting_a_Site\" remap=\"TID_18671\">" + 
"		<title>Deleting a Site</title>" + 
"		<para>" + 
"			A site is deleted by invoking <code>removeSite</code> on the Portal." + 
"		</para>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18671-565917+%5BLatest%5D&amp;cf_build_id=18671-565917+05+Dec+2013+12%3A51+en-US+%5BLatest%5D&amp;comment=Title%3A+Deleting+a+Site%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"	</section>" + 
"</chapter>" + 
"	<chapter id=\"chap-Navigation\">" + 
"	<title>Navigation</title>" + 
"	<remark>" + 
"		Source: https://docs.jboss.org/author/display/GTNPORTAL36/Portal+API" + 
"	</remark>" + 
"	<remark>" + 
"		Updated with latest content on confluence V29 ," + 
"	</remark>" + 
"	<remark>" + 
"		QE NOTE - jmorgan - Minor Edits." + 
"	</remark>" + 
"	<para>" + 
"		A <code>Navigation</code> for a site is retrieved from the Portal and allows accessing the node tree that represents the navigation entries for the site. There is a special root node which is not directly part of the navigation, but it's the parent of the first level of navigation entries. As the root node is not meant to be displayed it doesn't have a display name." + 
"	</para>" + 
"	<example>" + 
"		<title>Retrieving Navigation</title>" + 
"		<para>" + 
"			This example retrieves the <code>Navigation</code> for the classic site." + 
"		</para>" + 
"		<programlisting language=\"Java\">" + 
"Navigation navigation = portal.getNavigation(new SiteId(\"classic\"));" + 
"</programlisting>" + 
"	</example>" + 
"	<para role=\"RoleCreateBugPara\">" + 
"		<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18672-565917+%5BLatest%5D&amp;cf_build_id=18672-565917+05+Dec+2013+12%3A51+en-US+%5BLatest%5D&amp;comment=Title%3A+Navigation%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"	</para>" + 
"	<section id=\"sect-Retrieving_Navigation_Nodes\">" + 
"		<title>Retrieving Navigation Nodes</title>" + 
"		<remark>" + 
"			QE NOTE - jmorgan - Minor Edits" + 
"		</remark>" + 
"		<para>" + 
"			When retrieving navigation nodes it is possible to either retrieve the root node, or a specific node in the hierarchy. It is also possible to control which if any of the children are loaded." + 
"		</para>" + 
"		<example>" + 
"			<title>Basic Navigation Portlet</title>" + 
"			<para>" + 
"				This example shows a very simple navigation portlet that displays the top level of entries in the navigation menu." + 
"			</para>" + 
"			<programlisting language=\"Java\">" + 
"public void doView(RenderRequest request, RenderResponse response) throws IOException {" + 
"    PrintWriter pw = response.getWriter();" + 
"    Navigation navigation = PortalRequest.getInstance().getNavigation();" + 
"" + 
"    pw.print(\"&lt;ul&gt;\");" + 
"    for (Node n : navigation.getRootNode(Nodes.visitChildren())) {" + 
"        pw.printf(\"&lt;li&gt;&lt;a href='%s'&gt;%s&lt;/a&gt;&lt;/li&gt;\", n.getURI(), n.getDisplayName());" + 
"    }" + 
"    pw.print(\"&lt;/ul&gt;\");" + 
"}" + 
"</programlisting>" + 
"		</example>" + 
"		<example>" + 
"			<title>Retrieve a Specific Node</title>" + 
"			<para>" + 
"				This example demonstrates how to retrieve a specific node in the tree by specifying the <code>NodePath</code> to the node." + 
"			</para>" + 
"			<programlisting language=\"Java\">" + 
"Node node = navigation.getNode(NodePath.path(\"home\"));" + 
"</programlisting>" + 
"		</example>" + 
"		<note>" + 
"			<para>" + 
"				When a node is retrieved, it actually represents a tree of nodes and all operations (for example, save and refresh) act on that entire tree. For example, if a root node with two child nodes is retrieved, and changes are made to the both child nodes but only one node is saved, the other child will be saved automatically because the save operation acts on the entire node tree." + 
"			</para>" + 
"		</note>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18673-565917+%5BLatest%5D&amp;cf_build_id=18673-565917+05+Dec+2013+12%3A51+en-US+%5BLatest%5D&amp;comment=Title%3A+Retrieving+Navigation+Nodes%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"		<section id=\"NodeVisitor\" remap=\"TID_18674\">" + 
"			<title>NodeVisitor</title>" + 
"			<remark>" + 
"				QE NOTE - jmorgan - Minor Edits." + 
"			</remark>" + 
"			<para>" + 
"				It is important to limit how many levels of navigation nodes are retrieved, especially where there is a large number of nodes. This is controlled by using either one of the built in <code>NodeVisitor</code> from the <code>Nodes</code> class, or by implementing your own <code>NodeVisitor</code> . The <code>Nodes</code> class contains the following visitors:" + 
"			</para>" + 
"			<itemizedlist>" + 
"				<listitem>" + 
"					<para>" + 
"						visitAll - loads all nodes" + 
"					</para>" + 
"				</listitem>" + 
"				<listitem>" + 
"					<para>" + 
"						visitChildren - loads the immediate children" + 
"					</para>" + 
"				</listitem>" + 
"				<listitem>" + 
"					<para>" + 
"						visitNone - loads only the node" + 
"					</para>" + 
"				</listitem>" + 
"				<listitem>" + 
"					<para>" + 
"						visitNodes(int) - loads a specified depth of descendants" + 
"					</para>" + 
"				</listitem>" + 
"			</itemizedlist>" + 
"			<example>" + 
"				<title>Retrieve a Node Using visitNodes</title>" + 
"				<para>" + 
"					This example retrieves the root node and two levels of nodes." + 
"				</para>" + 
"				<programlisting language=\"Java\">" + 
"Node rootNode = navigation.getRootNode(Nodes.visitNodes(2));" + 
"</programlisting>" + 
"			</example>" + 
"			<remark>" + 
"				QE NOTE - jmorgan - This example contains a slight change to the example present in the Confluence docs. I had to add Node rootNode = to the code text provided so the syntax would be correct. Confirm this is correct." + 
"			</remark>" + 
"			<example>" + 
"				<title>isChildrenLoaded versus visitChildren Method</title>" + 
"				<para>" + 
"					To correctly confirm whether the child nodes are loaded, use the <code>isChildrenLoaded</code> method instead of <code>visitChildren</code>." + 
"				</para>" + 
"				<para>" + 
"					This would return true:" + 
"				</para>" + 
"				<programlisting>Node rootNode = navigation.getRootNode(Nodes.visitChildren()).isChildrenLoaded()</programlisting>" + 
"				<para>" + 
"					This would return false:" + 
"				</para>" + 
"				<programlisting>Node rootNode = navigation.getRootNode(Nodes.visitNone()).isChildrenLoaded()</programlisting>" + 
"			</example>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18674-565917+%5BLatest%5D&amp;cf_build_id=18674-565917+05+Dec+2013+12%3A51+en-US+%5BLatest%5D&amp;comment=Title%3A+NodeVisitor%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"		<section id=\"Filtering_Navigation_Nodes\" remap=\"TID_18675\">" + 
"			<title>Filtering Navigation Nodes</title>" + 
"			<remark>" + 
"				QE NOTE - jmorgan - Minor edits and example structure fixes." + 
"			</remark>" + 
"			<para>" + 
"				Nodes support a filtering mechanism which simplifies displaying nodes that have specific properties." + 
"			</para>" + 
"			<example>" + 
"				<title>Display User-visible Nodes When Creating a Navigation Portlet</title>" + 
"				<para>" + 
"					This example displays visible nodes where the user has access to view the page." + 
"				</para>" + 
"				<programlisting language=\"Java\">" + 
"Node filtered = node.filter().showDefault();" + 
"</programlisting>" + 
"			</example>" + 
"			<para>" + 
"				There are a number of methods available to control what nodes are displayed, and they all start with <code>show</code> . For example, <code>showDefault</code> is an abbreviation for <code>showVisible().showHasAccess(PortalRequest.getInstance().getUser())</code>" + 
"			</para>" + 
"			<example>" + 
"				<title>Custom Filter</title>" + 
"				<para>" + 
"					This example uses a custom filter to only display nodes with a display name that starts with <emphasis role=\"italics\">\"A\"</emphasis>." + 
"				</para>" + 
"				<programlisting language=\"Java\">" + 
"Node filtered = root.filter().show(new Filter&lt;Node&gt;() {" + 
"    public boolean accept(Node node) {" + 
"        return node.getDisplayName().startsWith(\"A\");" + 
"    }" + 
"});" + 
"</programlisting>" + 
"			</example>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18675-565917+%5BLatest%5D&amp;cf_build_id=18675-565917+05+Dec+2013+12%3A51+en-US+%5BLatest%5D&amp;comment=Title%3A+Filtering+Navigation+Nodes%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"	</section>" + 
"	<section id=\"sect-Creating_a_Navigation_Node\">" + 
"		<title>Creating a Navigation Node</title>" + 
"		<remark>" + 
"			QE NOTE - jmorgan - Broke the first paragraph down in to distinct steps so a user can follow them easier. Minor Edits." + 
"		</remark>" + 
"		<para>" + 
"			Creating a node uses the following workflow:" + 
"		</para>" + 
"		<orderedlist>" + 
"			<listitem>" + 
"				<para>" + 
"					Retrieve the parent node you want to add the node to." + 
"				</para>" + 
"			</listitem>" + 
"			<listitem>" + 
"				<para>" + 
"					Invoke the <code>addChild</code> method on the parent node." + 
"				</para>" + 
"			</listitem>" + 
"			<listitem>" + 
"				<para>" + 
"					Set the configuration for the node (such as the display name and the page it should link to)." + 
"				</para>" + 
"			</listitem>" + 
"			<listitem>" + 
"				<para>" + 
"					Save it using <code>saveNode</code> on <code>Navigation</code>." + 
"				</para>" + 
"			</listitem>" + 
"		</orderedlist>" + 
"		<example>" + 
"			<title>Creating a Navigation Node</title>" + 
"			<para>" + 
"				This example creates a node as a child of the <emphasis role=\"italics\">home</emphasis> node." + 
"			</para>" + 
"			<para>" + 
"				The node is not visible (or persisted) until <code>saveNode</code> is invoked." + 
"			</para>" + 
"			<programlisting language=\"Java\">" + 
"Node home = navigation.getNode(NodePath.path(\"home\"));" + 
"Node child = home.addChild(\"mynode\");" + 
"child.setDisplayName(\"My Node\");" + 
"child.setPageId(new PageId(\"classic\", \"mypage\"));" + 
"navigation.saveNode(home);" + 
"</programlisting>" + 
"		</example>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18676-565917+%5BLatest%5D&amp;cf_build_id=18676-565917+05+Dec+2013+12%3A51+en-US+%5BLatest%5D&amp;comment=Title%3A+Creating+a+Navigation+Node%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"		<section id=\"Navigation_Node_Visibility\" remap=\"TID_18677\">" + 
"			<title>Navigation Node Visibility</title>" + 
"			<remark>" + 
"				QE NOTE - jmorgan - Minor edits" + 
"			</remark>" + 
"			<para>" + 
"				Nodes can be visible, hidden or only visible at a specified publication date. By default a new node is visible." + 
"			</para>" + 
"			<para>" + 
"				A node can be hidden with <code>node.setVisibility(false)</code>, or only shown until a specific date with <code>node.setVisibility(PublicationDate.endingOn(date))</code>. It is also possible to set a starting date, or set both a starting date and a finishing date." + 
"			</para>" + 
"			<para>" + 
"				Changes to node visibility are not shown until <code>saveNode</code> is invoked on the Portal." + 
"			</para>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18677-565917+%5BLatest%5D&amp;cf_build_id=18677-565917+05+Dec+2013+12%3A51+en-US+%5BLatest%5D&amp;comment=Title%3A+Navigation+Node+Visibility%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"		<section id=\"Localization\" remap=\"TID_18678\">" + 
"			<title>Localization</title>" + 
"			<para>" + 
"				The display name for a node supports localization." + 
"			</para>" + 
"			<example>" + 
"				<title>Setting and English and French Node</title>" + 
"				<para>" + 
"					This example sets the display name for a node in English and French." + 
"				</para>" + 
"				<programlisting language=\"Java\">" + 
"LocalizedString localizedString = node.getDisplayNames();" + 
"localizedString.setLocalizedValue(Locale.ENGLISH, \"My node\");" + 
"localizedString.setLocalizedValue(Locale.FRENCH, \"Mon noeud\");" + 
"node.setDisplayNames(localizedString);" + 
"" + 
"navigation.saveNode(node);" + 
"</programlisting>" + 
"			</example>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18678-466560+%5BSpecified%5D&amp;cf_build_id=18678-466560+19+Jun+2013+14%3A55+en-US+%5BSpecified%5D&amp;comment=Title%3A+Localization%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"	</section>" + 
"	<section id=\"Deleting_a_Navigation_Node\" remap=\"TID_18679\">" + 
"		<title>Deleting a Navigation Node</title>" + 
"		<remark>" + 
"			QE NOTE - jmorgan - minor edits" + 
"		</remark>" + 
"		<para>" + 
"			A node is deleted by removing it from the parent node." + 
"		</para>" + 
"		<example>" + 
"			<title>Deleting a Node</title>" + 
"			<para>" + 
"				This example removes the child with the name <emphasis role=\"italics\">mynode</emphasis>." + 
"			</para>" + 
"			<para>" + 
"				The node is not removed until <code>saveNode</code> is invoked." + 
"			</para>" + 
"			<programlisting language=\"Java\">" + 
"node.removeChild(\"mynode\");" + 
"navigation.saveNode(node);" + 
"</programlisting>" + 
"		</example>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18679-565917+%5BLatest%5D&amp;cf_build_id=18679-565917+05+Dec+2013+12%3A51+en-US+%5BLatest%5D&amp;comment=Title%3A+Deleting+a+Navigation+Node%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"	</section>" + 
"	<section id=\"Moving_a_Navigation_Node\" remap=\"TID_18680\">" + 
"		<title>Moving a Navigation Node</title>" + 
"		<para>" + 
"			A node can be moved to a different parent, or it can be moved to a different index in the same parent. When moving to a different parent the new parent is required to be in the same tree." + 
"		</para>" + 
"		<example>" + 
"			<title>Move Child Nodes Between Parent and Index Nodes</title>" + 
"			<para>" + 
"				Move a node from one parent to another." + 
"			</para>" + 
"			<programlisting language=\"Java\">" + 
"root.getNode(\"parent1\", \"child\").moveTo(root.getNode(\"parent2\"));" + 
"navigation.saveNode(root);" + 
"</programlisting>" + 
"			<para>" + 
"				Move a node to a different index in the same parent." + 
"			</para>" + 
"			<informalexample>" + 
"				<programlisting language=\"Java\">" + 
"root.getNode(\"parent\", \"child\").moveTo(0);" + 
"navigation.saveNode(root);" + 
"</programlisting>" + 
"			</informalexample>" + 
"			<para>" + 
"				The changes are not visible (or persisted) until <code>saveNode</code> is invoked." + 
"			</para>" + 
"		</example>" + 
"		<para>" + 
"			A more convenient way to sort children for a parent is to use the <code>sort</code> method on the parent." + 
"		</para>" + 
"		<example>" + 
"			<title>Sorting by Display Name</title>" + 
"			<para>" + 
"				This example demonstrates how to sort the children of the root node by their display names." + 
"			</para>" + 
"			<para>" + 
"				The changes are not visible (or persisted) until <code>saveNode</code> is invoked." + 
"			</para>" + 
"			<programlisting language=\"Java\">" + 
"root.sort(new Comparator&lt;Node&gt;() {" + 
"    public int compare(Node o1, Node o2) {" + 
"        return o1.getDisplayName().compareTo(o2.getDisplayName());" + 
"    }" + 
"});" + 
"navigation.saveNode(root);" + 
"</programlisting>" + 
"		</example>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18680-565917+%5BLatest%5D&amp;cf_build_id=18680-565917+05+Dec+2013+12%3A51+en-US+%5BLatest%5D&amp;comment=Title%3A+Moving+a+Navigation+Node%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"	</section>" + 
"</chapter>" + 
"	<chapter id=\"chap-Page\">" + 
"	<title>Page</title>" + 
"	<remark>" + 
"		Source: https://docs.jboss.org/author/display/GTNPORTAL36/Portal+API" + 
"	</remark>" + 
"	<remark>" + 
"		Updated wtih latest content on confluence V30." + 
"	</remark>" + 
"	<remark>" + 
"		QE NOTE - jmorgan - Minor Edit and added &lt;xref&gt; to Portlet Primer section." + 
"	</remark>" + 
"	<para>" + 
"		Portal Page aggregates content from one or more Portlets. See <xref linkend=\"sect-JSR-168_and_JSR-286_overview\"/> for an introduction to Portlets " + 
"		<remark>" + 
"			Link was \"JSR_168_and_JSR_286_overview\"" + 
"		</remark>." + 
"	</para>" + 
"	<para role=\"RoleCreateBugPara\">" + 
"		<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18681-468630+%5BSpecified%5D&amp;cf_build_id=18681-468630+24+Jun+2013+11%3A35+en-US+%5BSpecified%5D&amp;comment=Title%3A+Page%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"	</para>" + 
"	<section id=\"Retrieving_Pages\" remap=\"TID_18682\">" + 
"		<title>Retrieving Pages</title>" + 
"		<para>" + 
"			A specific page can be retrieved by its <code>PageId</code> . The <code>PageId</code> is constructed by passing either the name for a standard site, the group for a group space or the user for a user dashboard, and the name of the page. Alternatively it can be constructed by passing the <code>SiteId</code> and name of the page." + 
"		</para>" + 
"		<example>" + 
"			<title>Retrieving Specific Pages</title>" + 
"			<para>" + 
"				This example shows how to retrieve specific pages of a portal." + 
"			</para>" + 
"			<programlisting>" + 
"Page standardSitePage = portal.getPage(\"classic\", \"home\");" + 
"Page groupSpacePage = portal.getSite(new Group(\"platform\", \"administrators\"), \"grouppage\");" + 
"Page userDashboardPage = portal.getSite(new User(\"john\", \"johnspage\"));" + 
"</programlisting>" + 
"		</example>" + 
"		<para>" + 
"			It is also possible to query for pages using the <code>PageQuery</code> . The <code>PageQuery</code> supports filtering, sorting and pagination when querying for pages." + 
"		</para>" + 
"		<example>" + 
"			<title>Retrieve Pages Using Filtering, Sorting, and Pagination</title>" + 
"			<para>" + 
"				This example finds pages with a display name that starts with <literal>\"A\"</literal>." + 
"			</para>" + 
"			<programlisting language=\"Java\">" + 
"PageQuery.Builder qb = new PageQuery.Builder();" + 
"" + 
"qb.withSiteType(SiteType.SITE).withFilter(new Filter&lt;Page&gt;() {" + 
"    public boolean accept(Page page) {" + 
"        return page.getDisplayName().startsWith(\"A\");" + 
"    }" + 
"});" + 
"" + 
"List&lt;Page&gt; pages = portal.findPages(qb.build());" + 
"</programlisting>" + 
"		</example>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18682-565917+%5BLatest%5D&amp;cf_build_id=18682-565917+05+Dec+2013+12%3A51+en-US+%5BLatest%5D&amp;comment=Title%3A+Retrieving+Pages%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"	</section>" + 
"	<section id=\"sect-Creating_a_Page\">" + 
"		<title>Creating a Page</title>" + 
"		<remark>" + 
"			QE NOTE - jmorgan - Minor edits, including changing the first para into a orderedlist for clarity." + 
"		</remark>" + 
"		<para>" + 
"			Creating a page uses the following workflow:" + 
"		</para>" + 
"		<orderedlist>" + 
"			<listitem>" + 
"				<para>" + 
"					Create a new page through the <code>Portal</code>." + 
"				</para>" + 
"			</listitem>" + 
"			<listitem>" + 
"				<para>" + 
"					Set the configuration for the page (such as localized display names)." + 
"				</para>" + 
"			</listitem>" + 
"			<listitem>" + 
"				<para>" + 
"					Save it using <code>Portal</code>." + 
"				</para>" + 
"			</listitem>" + 
"		</orderedlist>" + 
"		<example>" + 
"			<title>Create a Page</title>" + 
"			<para>" + 
"				This example creates a new page in the classic site with the name <emphasis role=\"italics\">mypage</emphasis> and a non-localized display name." + 
"			</para>" + 
"			<para>" + 
"				The page is not visible (or persisted) until <code>portal.savePage</code> is invoked." + 
"			</para>" + 
"			<programlisting language=\"Java\">" + 
"Page page = portal.createPage(new PageId(\"classic\", \"mypage\"));" + 
"page.setDisplayName(\"My Page\");" + 
"portal.savePage(page);" + 
"</programlisting>" + 
"		</example>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18683-565917+%5BLatest%5D&amp;cf_build_id=18683-565917+05+Dec+2013+12%3A51+en-US+%5BLatest%5D&amp;comment=Title%3A+Creating+a+Page%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"		<section id=\"Setting_Permissions_for_a_Page\" remap=\"TID_18684\">" + 
"			<title>Setting Permissions for a Page</title>" + 
"			<para>" + 
"				Associated with a page is an access permission and an edit permission, which controls what users and groups are allowed to access and edit the page respectively." + 
"			</para>" + 
"			<example>" + 
"				<title>Set Permissions for a Page</title>" + 
"				<para>" + 
"					This example makes a page accessible to everyone, but only editable by users in the <code>/platform/administrators</code> group." + 
"				</para>" + 
"				<para>" + 
"					The changed permissions do not take affect until <code>savePage</code> is invoked." + 
"				</para>" + 
"				<programlisting language=\"Java\">" + 
"page.setAccessPermission(Permission.everyone());" + 
"page.setEditPermission(Permission.any(\"platform\", \"administrators\"));" + 
"" + 
"portal.savePage(page);" + 
"</programlisting>" + 
"			</example>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18684-565917+%5BLatest%5D&amp;cf_build_id=18684-565917+05+Dec+2013+12%3A51+en-US+%5BLatest%5D&amp;comment=Title%3A+Setting+Permissions+for+a+Page%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"	</section>" + 
"	<section id=\"Deleting_a_Page\" remap=\"TID_18685\">" + 
"		<title>Deleting a Page</title>" + 
"		<para>" + 
"			A page is deleted by invoking <code>removePage</code> on the Portal." + 
"		</para>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18685-565917+%5BLatest%5D&amp;cf_build_id=18685-565917+05+Dec+2013+12%3A51+en-US+%5BLatest%5D&amp;comment=Title%3A+Deleting+a+Page%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"	</section>" + 
"</chapter>" + 
"	<chapter id=\"chap-OAuth_Provider_API\">" + 
"	<title>OAuth Provider API</title>" + 
"	<remark>" + 
"		QE NOTE - jmorgan - Grammar edits." + 
"	</remark>" + 
"	<para>" + 
"		The interface <code>OAuthProvider</code> is a part of the public API. It is the entry point to perform operations on OAuth providers such as Facebook, Google, and Twitter." + 
"	</para>" + 
"	<para>" + 
"		Some additional portal configuration is required to use OAuth providers for authentication of users. See <citetitle>OAuth - Authentication with Social Network Accounts</citetitle> chapter in the <citetitle>Administration and Configuration Guide</citetitle> for more details on this topic." + 
"	</para>" + 
"	<para>" + 
"		Once a user is authenticated (or their account is linked with the OAuth provider), their access token is saved in the IDM database as a part of their User Profile. It is possible to retrieve the user's OAuth access token through the <code>OAuthProvider</code> interface and run its operations. It is also possible to revoke or validate existing access tokens or send a request to obtain new access tokens with more scopes (privileges)." + 
"	</para>" + 
"	<para>" + 
"		The following sections present basic uses for the <code>OAuthProvider</code> API. There is an excellent Quickstart available called <citetitle>Portlets for Integration with Social Networks</citetitle>, shipped in the Quickstarts binary. See <xref linkend=\"Quickstarts1\"/> for information about Quickstarts." + 
"	</para>" + 
"	<para role=\"RoleCreateBugPara\">" + 
"		<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18686-565917+%5BLatest%5D&amp;cf_build_id=18686-565917+05+Dec+2013+12%3A51+en-US+%5BLatest%5D&amp;comment=Title%3A+OAuth+Provider+API%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"	</para>" + 
"	<section id=\"Retrieve_an_Instance_of_OAuthProvider\" remap=\"TID_18687\">" + 
"		<title>Retrieve an Instance of OAuthProvider</title>" + 
"		<remark>" + 
"			QE Note - jmorgan - Minor edits only." + 
"		</remark>" + 
"		<para>" + 
"			You need to retrieve the appropriate instance of <code>OAuthProvider</code> from <code>Portal</code>." + 
"		</para>" + 
"		<para>" + 
"			Currently the portal supports three OAuth providers:" + 
"		</para>" + 
"		<itemizedlist>" + 
"			<listitem>" + 
"				<para>" + 
"					<code>OAuthProvider.FACEBOOK</code> for Facebook." + 
"				</para>" + 
"			</listitem>" + 
"			<listitem>" + 
"				<para>" + 
"					<code>OAuthProvider.GOOGLE</code> for Google+." + 
"				</para>" + 
"			</listitem>" + 
"			<listitem>" + 
"				<para>" + 
"					<code>OAuthProvider.TWITTER</code> for Twitter." + 
"				</para>" + 
"			</listitem>" + 
"		</itemizedlist>" + 
"		<example>" + 
"			<title>Retrieve Facebook OAuth Instance</title>" + 
"			<para>" + 
"				This example shows the syntax to use when retrieving the Facebook instance of <code>OAuthProvider</code>. This syntax can be adapted for other instances." + 
"			</para>" + 
"			<programlisting language=\"Java\">" + 
"Portal portal = PortalRequest.getInstance().getPortal();" + 
"OAuthProvider facebookProvider = portal.getOAuthProvider(OAuthProvider.FACEBOOK)" + 
"</programlisting>" + 
"		</example>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18687-565917+%5BLatest%5D&amp;cf_build_id=18687-565917+05+Dec+2013+12%3A51+en-US+%5BLatest%5D&amp;comment=Title%3A+Retrieve+an+Instance+of+OAuthProvider%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"	</section>" + 
"	<section id=\"OAuthProvider_Operations\" remap=\"TID_18688\">" + 
"		<title>OAuthProvider Operations</title>" + 
"		<remark>" + 
"			QE Note - jmorgan - only changed the Confluence variable in the code snippet to be the Admin and Config Guide." + 
"		</remark>" + 
"		<example>" + 
"			<title>OAuthProvider Basic Use</title>" + 
"			<para>" + 
"				This example provides a code snippet that describes some basic uses of the <code>OAuthProvider</code> API." + 
"			</para>" + 
"			<programlisting language=\"Java\">" + 
"// Retrieve instance of Google OAuth provider" + 
"OAuthProvider googleProvider = PortalRequest.getInstance().getPortal().getOAuthProvider(OAuthProvider.GOOGLE);" + 
"" + 
"// Check if Google was enabled in configuration.properties" + 
"if (googleProvider == null) {" + 
"    renderResp.getWriter().println(\"Authentication with Google not available. Ensure your administrator has enabled the service in the portal. See the Administration and Configuration Guide for instructions.\");" + 
"    return;" + 
"}" + 
"" + 
"// Retrieve the key and display name of the social network" + 
"String key = googleProvider.getKey();" + 
"String friendlyName = googleProvider.getFriendlyName();" + 
"renderResp.getWriter().println(friendlyName + \" is enabled\");" + 
"" + 
"// Retrieve access token of the current user" + 
"AccessToken accessToken = googleProvider.loadAccessToken(renderReq.getRemoteUser());" + 
"" + 
"// Check if access token is available. It's the case when this user was registered/authenticated into portal" + 
"// through Google+ or if he linked his account with Google+" + 
"if (accessToken == null) {" + 
"    renderResp.getWriter().println(\"Your account is not linked with Google+. You can link it in 'Social network' tab of \" +" + 
"        \"user settings or you can authenticate through Google into portal\");" + 
"    return;" + 
"}" + 
"" + 
"// Check if access token is valid and refresh it if necessary" + 
"try {" + 
"    accessToken = googleProvider.validateTokenAndUpdateScopes(accessToken);" + 
"} catch (OAuthApiException oauthException) {" + 
"    if (oauthException.getExceptionCode().equals(OAuthApiExceptionCode.ACCESS_TOKEN_ERROR)) {" + 
"        renderResp.getWriter().println(\"Your access token is invalid or has been revoked\");" + 
"    } else if (oauthException.getExceptionCode().equals(OAuthApiExceptionCode.IO_ERROR)) {" + 
"        renderResp.getWriter().println(\"Network error during the communication with Google\");" + 
"    }" + 
"}" + 
"" + 
"// Check all available scopes" + 
"String availableScopes = accessToken.getAvailableScopes();" + 
"" + 
"// Check if we have scope to call Google+ operations" + 
"if (!availableScopes.contains(\"https://www.googleapis.com/auth/plus.login\")) {" + 
"    // Redirect to Google+ and ask for plus.login scope" + 
"    googleProvider.startOAuthWorkflow(\"https://www.googleapis.com/auth/plus.login\");" + 
"    return;" + 
"}" + 
"" + 
"// Obtain Google API object to call Google plus API operations" + 
"Plus service = googleProvider.getAuthorizedSocialApiObject(accessToken, Plus.class);" + 
"" + 
"// Retrieve activities from Google+ wall of user" + 
"ActivityFeed activityFeed = service.activities().list(\"me\", \"public\").execute();" + 
"for (Activity activity : activityFeed.getItems()) {" + 
"    renderResp.getWriter().println(activity.getTitle());" + 
"}" + 
"" + 
"// Revoke the access token. It won't be possible to run any operations with it anymore." + 
"// And your application will be cleared from Google applications of current user on page https://plus.google.com/apps" + 
"googleProvider.revokeToken(accessToken);" + 
"" + 
"// Remove the token from the UserProfile of the current user" + 
"googleProvider.removeAccessToken(request.getRemoteUser());" + 
"</programlisting>" + 
"		</example>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18688-565917+%5BLatest%5D&amp;cf_build_id=18688-565917+05+Dec+2013+12%3A51+en-US+%5BLatest%5D&amp;comment=Title%3A+OAuthProvider+Operations%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"	</section>" + 
"	<section id=\"Access_to_Provider-Specific_Operations\" remap=\"TID_18689\">" + 
"		<title>Access to Provider-specific Operations</title>" + 
"		<remark>" + 
"			QE NOTE - jmorgan - Edits mostly. There are a few unfinished points relating to the social networks quickstart we need to address." + 
"		</remark>" + 
"		<para>" + 
"			The <code>oauthProvider.getAuthorizedSocialApiObject()</code> method is used to obtain access to provider-specific operations. This method usually returns objects from a third-party library. Those objects are always initialized with the access token of the current user and can be used to retrieve data from the related social network." + 
"		</para>" + 
"		<variablelist>" + 
"			<varlistentry>" + 
"				<term>Google</term>" + 
"				<listitem>" + 
"					<para>" + 
"						There are two supported types usable as arguments of this method:" + 
"					</para>" + 
"					<variablelist>" + 
"						<varlistentry>" + 
"							<term>com.google.api.services.plus.Plus</term>" + 
"							<listitem>" + 
"								<para>" + 
"									- Google Plus API class, which can be used to call operations on Google Plus - see <code>GoogleActivitiesPortlet</code> and <code>GoogleFriendsPortlet</code> in the Quickstart. " + 
"									<remark>" + 
"										DOCS NOTE Insert link to chapter Portlets for Integration with Social Networks" + 
"									</remark>" + 
"								</para>" + 
"							</listitem>" + 
"						</varlistentry>" + 
"						<varlistentry>" + 
"							<term>com.google.api.services.oauth2.Oauth2</term>" + 
"							<listitem>" + 
"								<para>" + 
"									OAuth2 class, which provides operations related to the user, such as obtaining their Google user profile details or obtaining information about his access token - see <code>GoogleUserInfoPortlet</code> in the " + 
"									<remark>" + 
"										DOCS NOTE - Insert link to chapter Portlets for Integration with Social Networks DOCS NOTE" + 
"									</remark>Quickstart." + 
"								</para>" + 
"							</listitem>" + 
"						</varlistentry>" + 
"					</variablelist>" + 
"				</listitem>" + 
"			</varlistentry>" + 
"			<varlistentry>" + 
"				<term>Twitter</term>" + 
"				<listitem>" + 
"					<para>" + 
"						There is only one supported type for Twitter: <code>twitter4j.Twitter</code> . An instance of this class can be used to retrieve user details, number of tweets, number of friends, last tweets. See <code>TwitterPortlet</code> in the " + 
"						<remark>" + 
"							Insert link to chapter Portlets for Integration with Social Networks" + 
"						</remark> Quickstart." + 
"					</para>" + 
"				</listitem>" + 
"			</varlistentry>" + 
"			<varlistentry>" + 
"				<term>Facebook</term>" + 
"				<listitem>" + 
"					<para>" + 
"						There is no supported type for Facebook. In the " + 
"						<remark>" + 
"							Insert link to chapter Portlets for Integration with Social Networks" + 
"						</remark> Quickstart, the third-party library <ulink url=\"http://restfb.com\">RestFB</ulink> is used to perform operations against Facebook." + 
"					</para>" + 
"				</listitem>" + 
"			</varlistentry>" + 
"		</variablelist>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18689-565917+%5BLatest%5D&amp;cf_build_id=18689-565917+05+Dec+2013+12%3A51+en-US+%5BLatest%5D&amp;comment=Title%3A+Access+to+Provider-specific+Operations%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"	</section>" + 
"</chapter>" + 
"	<chapter id=\"chap-REST_API\">" + 
"	<title>REST API</title>" + 
"	<remark>" + 
"		Source: https://docs.jboss.org/author/display/GTNPORTAL36/REST+API" + 
"	</remark>" + 
"	<para role=\"RoleCreateBugPara\">" + 
"		<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18690-565921+%5BLatest%5D&amp;cf_build_id=18690-565921+05+Dec+2013+12%3A57+en-US+%5BLatest%5D&amp;comment=Title%3A+REST+API%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"	</para>" + 
"	<section id=\"sect-Overview\">" + 
"		<title>Overview</title>" + 
"		<remark>" + 
"			Source: https://docs.jboss.org/author/display/GTNPORTAL36/REST+API#RESTAPI-Overview" + 
"		</remark>" + 
"		<para>" + 
"			The portal provides a REST API to portal entities such as Sites, Pages, and Navigation. All data is sent and received as JSON." + 
"		</para>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18691-565921+%5BLatest%5D&amp;cf_build_id=18691-565921+05+Dec+2013+12%3A57+en-US+%5BLatest%5D&amp;comment=Title%3A+Overview%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"		<section id=\"Base_URL\" remap=\"TID_18692\">" + 
"			<title>Base URL</title>" + 
"			<remark>" + 
"				QE NOTE - jmorgan - converted two sections to a varlist (only change made)." + 
"			</remark>" + 
"			<para>" + 
"				There are two base URLs for the REST API. One that will be used if you need to authenticate and one that can be used to access resources anonymously." + 
"			</para>" + 
"			<variablelist>" + 
"				<varlistentry>" + 
"					<term>Anonymous Base URL</term>" + 
"					<listitem>" + 
"						<para>" + 
"							<uri> http://&lt;host&gt;:&lt;port&gt;/rest/managed-components/api</uri>" + 
"						</para>" + 
"					</listitem>" + 
"				</varlistentry>" + 
"				<varlistentry>" + 
"					<term>Authenticated Base URL</term>" + 
"					<listitem>" + 
"						<para>" + 
"							<uri> http://&lt;host&gt;:&lt;port&gt;/rest/private/managed-components/api</uri>" + 
"						</para>" + 
"					</listitem>" + 
"				</varlistentry>" + 
"			</variablelist>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18692-565921+%5BLatest%5D&amp;cf_build_id=18692-565921+05+Dec+2013+12%3A57+en-US+%5BLatest%5D&amp;comment=Title%3A+Base+URL%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"		<section id=\"Authentication6\" remap=\"TID_18693\">" + 
"			<title>Authentication</title>" + 
"			<para>" + 
"				The REST API supports basic authentication. Below is an example of using basic authentication in curl command." + 
"			</para>" + 
"			<programlisting><command>curl -u &lt;username&gt; http://&lt;host&gt;:&lt;port&gt;/rest/private/managed-components/api</command>" + 
"</programlisting>" + 
"			<para>" + 
"				This allows users to access resources they have access to depending on the portal entity permissions." + 
"			</para>" + 
"			<note>" + 
"				<para>" + 
"					Only members of the group <code>/platform/administrators</code> are allowed to add, update, or delete resources." + 
"				</para>" + 
"			</note>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18693-565921+%5BLatest%5D&amp;cf_build_id=18693-565921+05+Dec+2013+12%3A57+en-US+%5BLatest%5D&amp;comment=Title%3A+Authentication%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"		<section id=\"Content_Type\" remap=\"TID_18694\">" + 
"			<title>Content Type</title>" + 
"			<para>" + 
"				Since all data is sent and received using JSON, appropriate HTTP headers need to be included in each HTTP request." + 
"			</para>" + 
"			<para>" + 
"				For clients receiving data the following HTTP header needs to be included in the request" + 
"			</para>" + 
"			<programlisting>" + 
"Accept: application/json" + 
"</programlisting>" + 
"			<para>" + 
"				For clients sending data the following HTTP header needs to be included in the request" + 
"			</para>" + 
"			<programlisting>" + 
"Content-Type: application/json" + 
"</programlisting>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18694-565921+%5BLatest%5D&amp;cf_build_id=18694-565921+05+Dec+2013+12%3A57+en-US+%5BLatest%5D&amp;comment=Title%3A+Content+Type%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"		<section id=\"Localization1\" remap=\"TID_18695\">" + 
"			<title>Localization</title>" + 
"			<remark>" + 
"				QE NOTE - jmorgan - Minor edits and Example structural tweaks." + 
"			</remark>" + 
"			<para>" + 
"				Localization is supported for navigation nodes that have localized displayNames. To specify the language simply add the <code>Accept-Language</code> header to the HTTP request." + 
"			</para>" + 
"			<example>" + 
"				<title>French Header</title>" + 
"				<para>" + 
"					This examples describes the Accept-Language header used for French localization." + 
"				</para>" + 
"				<programlisting>" + 
"Accept-Language: fr" + 
"</programlisting>" + 
"			</example>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18695-565921+%5BLatest%5D&amp;cf_build_id=18695-565921+05+Dec+2013+12%3A57+en-US+%5BLatest%5D&amp;comment=Title%3A+Localization%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"	</section>" + 
"	<section id=\"sect-Resources\">" + 
"		<title>Resources</title>" + 
"		<remark>" + 
"			Source: https://docs.jboss.org/author/display/GTNPORTAL36/REST+API#RESTAPI-Resources" + 
"		</remark>" + 
"		<remark>" + 
"			QE Note - jmorgan - The summary for this overarching section is that I have merged the separate Request and Response code blocks into one Example. Minor edits." + 
"		</remark>" + 
"		<para>" + 
"			The following sections describe the resources available in the REST API." + 
"		</para>" + 
"		<important>" + 
"			<para>" + 
"				All URLs in the Example responses featured in this section are relative to the Base URL. See <xref linkend=\"Base_URL\"/> for more information about Base URL." + 
"			</para>" + 
"		</important>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18696-565921+%5BLatest%5D&amp;cf_build_id=18696-565921+05+Dec+2013+12%3A57+en-US+%5BLatest%5D&amp;comment=Title%3A+Resources%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"		<section id=\"sect-Sites\">" + 
"			<title>Sites</title>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18697-565921+%5BLatest%5D&amp;cf_build_id=18697-565921+05+Dec+2013+12%3A57+en-US+%5BLatest%5D&amp;comment=Title%3A+Sites%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"			<section id=\"List_Sites\" remap=\"TID_18698\">" + 
"				<title>List Sites</title>" + 
"				<remark>" + 
"					QE NOTE - jmorgan - Minor edits, and a few structural tweaks." + 
"				</remark>" + 
"				<para>" + 
"					Sites are organized by site type, where <code>site-type</code> can be <code>site</code> , <code>space</code> , or <code>dashboard</code> ." + 
"				</para>" + 
"				<example>" + 
"					<title>Listing Sites using GET</title>" + 
"					<para>" + 
"						This example describes the syntax required to list site types." + 
"					</para>" + 
"					<programlisting>" + 
"GET /api/{site-type}s/" + 
"</programlisting>" + 
"				</example>" + 
"				<note>" + 
"					<para>" + 
"						The 's' at the end of the URL is important. Space resolves to <code>/api/spaces/</code> and dashboard resolves to <code>/api/dashboards/</code>." + 
"					</para>" + 
"				</note>" + 
"				<remark>" + 
"					QE NOTE - jmorgan - made this a formal table, and added a title for what I think it relates to." + 
"				</remark>" + 
"				<table>" + 
"					<title>Additional Parameters for site-type</title>" + 
"					<tgroup cols=\"4\">" + 
"						<thead>" + 
"							<row>" + 
"								<entry>" + 
"									<para>" + 
"										Parameter" + 
"									</para>" + 
"								</entry>" + 
"								<entry>" + 
"									<para>" + 
"										Type" + 
"									</para>" + 
"								</entry>" + 
"								<entry>" + 
"									<para>" + 
"										Default" + 
"									</para>" + 
"								</entry>" + 
"								<entry>" + 
"									<para>" + 
"										Description" + 
"									</para>" + 
"								</entry>" + 
"							</row>" + 
"						</thead>" + 
"						<tbody>" + 
"							<row>" + 
"								<entry>" + 
"									<para>" + 
"										emptySites" + 
"									</para>" + 
"								</entry>" + 
"								<entry>" + 
"									<para>" + 
"										boolean" + 
"									</para>" + 
"								</entry>" + 
"								<entry>" + 
"									<para>" + 
"										false" + 
"									</para>" + 
"								</entry>" + 
"								<entry>" + 
"									<para>" + 
"										Indicates to include empty sites (sites w/out pages or navigation)" + 
"									</para>" + 
"								</entry>" + 
"							</row>" + 
"							<row>" + 
"								<entry>" + 
"									<para>" + 
"										offset" + 
"									</para>" + 
"								</entry>" + 
"								<entry>" + 
"									<para>" + 
"										int" + 
"									</para>" + 
"								</entry>" + 
"								<entry>" + 
"									<para>" + 
"										0" + 
"									</para>" + 
"								</entry>" + 
"								<entry>" + 
"									<para>" + 
"										The offset of the results in a paginated request" + 
"									</para>" + 
"								</entry>" + 
"							</row>" + 
"							<row>" + 
"								<entry>" + 
"									<para>" + 
"										limit" + 
"									</para>" + 
"								</entry>" + 
"								<entry>" + 
"									<para>" + 
"										int" + 
"									</para>" + 
"								</entry>" + 
"								<entry>" + 
"									<para>" + 
"										15" + 
"									</para>" + 
"								</entry>" + 
"								<entry>" + 
"									<para>" + 
"										The maximum number of results to return in a paginated request" + 
"									</para>" + 
"								</entry>" + 
"							</row>" + 
"						</tbody>" + 
"					</tgroup>" + 
"				</table>" + 
"				<example>" + 
"					<title>List Sites using GET Request and Response</title>" + 
"					<para>" + 
"						This example lists the sites that are available and their corresponding resource location. This should be used by clients instead of hard coding every location or URL." + 
"					</para>" + 
"					<programlisting>" + 
"GET /api/sites" + 
"</programlisting>" + 
"					<programlisting>" + 
"HTTP/1.1 200 OK" + 
"Content-Type: application/json" + 
"[" + 
"    {" + 
"        \"name\" : \"classic\"," + 
"        \"type\" : \"site\"," + 
"        \"url\" : \"/api/sites/classic\"" + 
"    }," + 
"    {" + 
"        \"name\" : \"mobile\"," + 
"        \"type\" : \"site\"," + 
"        \"url\" : \"/api/sites/mobile\"" + 
"    }" + 
"]" + 
"</programlisting>" + 
"				</example>" + 
"				<note>" + 
"					<para>" + 
"						The <code>url</code> element is the full URL but for sake of brevity it is relative for the examples in this document." + 
"					</para>" + 
"				</note>" + 
"				<para role=\"RoleCreateBugPara\">" + 
"					<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18698-565921+%5BLatest%5D&amp;cf_build_id=18698-565921+05+Dec+2013+12%3A57+en-US+%5BLatest%5D&amp;comment=Title%3A+List+Sites%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"				</para>" + 
"			</section>" + 
"			<section id=\"Retrieve_a_Site\" remap=\"TID_18699\">" + 
"				<title>Retrieve a Site</title>" + 
"				<para>" + 
"					To retrieve a site named <code>site-name</code> the following syntax applies." + 
"				</para>" + 
"				<programlisting>" + 
"GET /api/{site-type}s/{site-name}" + 
"</programlisting>" + 
"				<example>" + 
"					<title>Retrieve a Site Request and Response</title>" + 
"					<para>" + 
"						This example shows how to retrieve the Classic site." + 
"					</para>" + 
"					<programlisting>" + 
"GET /api/sites/classic" + 
"</programlisting>" + 
"					<programlisting>" + 
"HTTP/1.1 200 OK" + 
"Content-Type: application/json" + 
"{" + 
"    \"name\" : \"classic\"," + 
"    \"type\" : \"site\"," + 
"    \"displayName\" : \"Classic\"," + 
"    \"description\" : \"GateIn default portal\"," + 
"    \"skin\" : \"Default\"," + 
"    \"locale\" : \"en\"," + 
"    \"access-permissions\" : [\"Everyone\"]," + 
"    \"edit-permissions\" : [\"*:/platform/administrators\"]," + 
"    \"attributes\" : [" + 
"        {" + 
"            \"key\" : \"showPortletInfo\"," + 
"            \"value\" : \"false\"" + 
"        }," + 
"        {" + 
"            \"key\" : \"sessionAlive\"," + 
"            \"value\" : \"onDemand\"" + 
"        }" + 
"    ]," + 
"    \"pages\" : {\"url\" : \"/api/sites/classic/pages\"}," + 
"    \"navigation\" : {\"url\" : \"/api/sites/classic/navigation\"}" + 
"}" + 
"</programlisting>" + 
"				</example>" + 
"				<note>" + 
"					<para>" + 
"						The <code>url</code> element is the full URL but for sake of brevity it is relative for the examples in this document." + 
"					</para>" + 
"				</note>" + 
"				<para role=\"RoleCreateBugPara\">" + 
"					<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18699-565921+%5BLatest%5D&amp;cf_build_id=18699-565921+05+Dec+2013+12%3A57+en-US+%5BLatest%5D&amp;comment=Title%3A+Retrieve+a+Site%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"				</para>" + 
"			</section>" + 
"			<section id=\"Create_a_site\" remap=\"TID_18700\">" + 
"				<title>Create a site</title>" + 
"				<para>" + 
"					To create a site named <code>site-name</code>, the following syntax applies:" + 
"				</para>" + 
"				<programlisting>" + 
"POST /api/{site-type}s/{site-name}" + 
"</programlisting>" + 
"				<example>" + 
"					<title>Create a Site Request and Response</title>" + 
"					<para>" + 
"						This example creates a site named 'foo'." + 
"					</para>" + 
"					<programlisting>" + 
"POST /api/sites/foo" + 
"</programlisting>" + 
"					<programlisting>" + 
"HTTP/1.1 200 OK" + 
"Content-Type: application/json" + 
"{" + 
"    \"name\" : \"foo\"," + 
"    \"type\" : \"site\"," + 
"    \"displayName\" : \"Basic Portal\"," + 
"    \"description\" : \"This is basic portal template\"," + 
"    \"skin\" : \"Default\"," + 
"    \"locale\" : \"en\"," + 
"    \"access-permissions\" : [\"Everyone\"]," + 
"    \"edit-permissions\" : [\"*:/platform/administrators\"]," + 
"    \"attributes\" : [{" + 
"        \"key\" : \"sessionAlive\"," + 
"        \"value\" : \"onDemand\"" + 
"    }]," + 
"    \"pages\" : {\"url\" : \"/api/sites/foo/pages\"}," + 
"    \"navigation\" : {\"url\" : \"/api/sites/foo/navigation\"}" + 
"}" + 
"</programlisting>" + 
"				</example>" + 
"				<note>" + 
"					<para>" + 
"						The <code>url</code> element is the full URL but for sake of brevity it is relative for the examples in this document." + 
"					</para>" + 
"				</note>" + 
"				<para role=\"RoleCreateBugPara\">" + 
"					<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18700-565921+%5BLatest%5D&amp;cf_build_id=18700-565921+05+Dec+2013+12%3A57+en-US+%5BLatest%5D&amp;comment=Title%3A+Create+a+site%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"				</para>" + 
"			</section>" + 
"			<section id=\"Delete_a_site\" remap=\"TID_18701\">" + 
"				<title>Delete a site</title>" + 
"				<para>" + 
"					To delete a site named <code>site-name</code>, the following syntax applies:" + 
"				</para>" + 
"				<programlisting>" + 
"DELETE /api/{site-type}s/{site-name}" + 
"</programlisting>" + 
"				<example>" + 
"					<title>Delete a Site Request and Response</title>" + 
"					<para>" + 
"						This example deletes a site named 'foo'" + 
"					</para>" + 
"					<programlisting>" + 
"DELETE /api/sites/foo" + 
"</programlisting>" + 
"					<programlisting>" + 
"HTTP/1.1 200 OK" + 
"Content-Type: application/json" + 
"</programlisting>" + 
"				</example>" + 
"				<para role=\"RoleCreateBugPara\">" + 
"					<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18701-565921+%5BLatest%5D&amp;cf_build_id=18701-565921+05+Dec+2013+12%3A57+en-US+%5BLatest%5D&amp;comment=Title%3A+Delete+a+site%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"				</para>" + 
"			</section>" + 
"			<section id=\"Update_a_site\" remap=\"TID_18702\">" + 
"				<title>Update a site</title>" + 
"				<remark>" + 
"					QE NOTE - jmorgan - Changed the description text in the code sample to something more fitting of enterprise docs. It was \"Look ma, I updated the description!\"" + 
"				</remark>" + 
"				<para>" + 
"					To update a site named <code>site-name</code>, the following syntax applies:" + 
"				</para>" + 
"				<programlisting>" + 
"PUT /api/{site-type}s/{site-name}" + 
"</programlisting>" + 
"				<example>" + 
"					<title>Update a Site Request and Response</title>" + 
"					<para>" + 
"						This example updates the site 'classic' with a new description \"The Classic site shipped with the product\"." + 
"					</para>" + 
"					<programlisting>" + 
"PUT /api/sites/classic" + 
"" + 
"Content-Type: application/json" + 
"{" + 
"   \"description\" : \"The Classic site shipped with the product\"" + 
"}" + 
"</programlisting>" + 
"					<programlisting>" + 
"HTTP/1.1 200 OK" + 
"Content-Type: application/json" + 
"{" + 
"    \"name\" : \"classic\"," + 
"    \"type\" : \"site\"," + 
"    \"displayName\" : \"Classic\"," + 
"    \"description\" : \"The Classic site shipped with the product !\"," + 
"    \"skin\" : \"Default\"," + 
"    \"locale\" : \"en\"," + 
"    \"access-permissions\" : [\"Everyone\"]," + 
"    \"edit-permissions\" : [\"*:/platform/administrators\"]," + 
"    \"attributes\" : [" + 
"        {" + 
"            \"key\" : \"showPortletInfo\"," + 
"            \"value\" : \"false\"" + 
"        }," + 
"        {" + 
"            \"key\" : \"sessionAlive\"," + 
"            \"value\" : \"onDemand\"" + 
"        }" + 
"    ]," + 
"    \"pages\" : {\"url\" : \"/api/sites/classic/pages\"}," + 
"    \"navigation\" : {\"url\" : \"/api/sites/classic/navigation\"}" + 
"}" + 
"</programlisting>" + 
"				</example>" + 
"				<note>" + 
"					<para>" + 
"						The <code>url</code> element is the full URL but for sake of brevity it is relative for the examples in this document." + 
"					</para>" + 
"				</note>" + 
"				<para role=\"RoleCreateBugPara\">" + 
"					<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18702-565921+%5BLatest%5D&amp;cf_build_id=18702-565921+05+Dec+2013+12%3A57+en-US+%5BLatest%5D&amp;comment=Title%3A+Update+a+site%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"				</para>" + 
"			</section>" + 
"		</section>" + 
"		<section id=\"sect-Pages\">" + 
"			<title>Pages</title>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18703-565921+%5BLatest%5D&amp;cf_build_id=18703-565921+05+Dec+2013+12%3A57+en-US+%5BLatest%5D&amp;comment=Title%3A+Pages%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"			<section id=\"List_Pages\" remap=\"TID_18704\">" + 
"				<title>List Pages</title>" + 
"				<remark>" + 
"					QE NOTE - jmorgan - Made table a formal table and added in what I think the table described in the title." + 
"				</remark>" + 
"				<para>" + 
"					To list pages in a site named <code>site-name</code>, the following syntax applies:" + 
"				</para>" + 
"				<informalexample>" + 
"					<programlisting>" + 
"GET /api/{site-type}s/{site-name}/pages" + 
"</programlisting>" + 
"				</informalexample>" + 
"				<table>" + 
"					<title>list-pages Additional Attributes</title>" + 
"					<tgroup cols=\"4\">" + 
"						<thead>" + 
"							<row>" + 
"								<entry>" + 
"									<para>" + 
"										Parameter" + 
"									</para>" + 
"								</entry>" + 
"								<entry>" + 
"									<para>" + 
"										Type" + 
"									</para>" + 
"								</entry>" + 
"								<entry>" + 
"									<para>" + 
"										Default" + 
"									</para>" + 
"								</entry>" + 
"								<entry>" + 
"									<para>" + 
"										Description" + 
"									</para>" + 
"								</entry>" + 
"							</row>" + 
"						</thead>" + 
"						<tbody>" + 
"							<row>" + 
"								<entry>" + 
"									<para>" + 
"										offset" + 
"									</para>" + 
"								</entry>" + 
"								<entry>" + 
"									<para>" + 
"										int" + 
"									</para>" + 
"								</entry>" + 
"								<entry>" + 
"									<para>" + 
"										0" + 
"									</para>" + 
"								</entry>" + 
"								<entry>" + 
"									<para>" + 
"										The offset of the results in a paginated request" + 
"									</para>" + 
"								</entry>" + 
"							</row>" + 
"							<row>" + 
"								<entry>" + 
"									<para>" + 
"										limit" + 
"									</para>" + 
"								</entry>" + 
"								<entry>" + 
"									<para>" + 
"										int" + 
"									</para>" + 
"								</entry>" + 
"								<entry>" + 
"									<para>" + 
"										15" + 
"									</para>" + 
"								</entry>" + 
"								<entry>" + 
"									<para>" + 
"										The maximum number of results to return in a paginated request" + 
"									</para>" + 
"								</entry>" + 
"							</row>" + 
"						</tbody>" + 
"					</tgroup>" + 
"				</table>" + 
"				<example>" + 
"					<title>List all Pages Request and Response</title>" + 
"					<para>" + 
"						This example shows how to list all pages for the site 'classic'." + 
"					</para>" + 
"					<programlisting>" + 
"GET /api/sites/classic/pages" + 
"</programlisting>" + 
"					<programlisting>" + 
"HTTP/1.1 200 OK" + 
"Content-Type: application/json" + 
"[" + 
"    {" + 
"        \"name\" : \"homepage\"," + 
"        \"siteType\" : \"site\"," + 
"        \"siteName\" : \"classic\"," + 
"        \"url\" : \"/api/sites/classic/pages/homepage\"" + 
"    }," + 
"    {" + 
"        \"name\" : \"register\"," + 
"        \"siteType\" : \"site\"," + 
"        \"siteName\" : \"classic\"," + 
"        \"url\" : \"/api/sites/classic/pages/register\"" + 
"    }," + 
"    {" + 
"        \"name\" : \"sitemap\"," + 
"        \"siteType\" : \"site\"," + 
"        \"siteName\" : \"classic\"," + 
"        \"url\" : \"/api/sites/classic/pages/sitemap\"" + 
"    }" + 
"]" + 
"</programlisting>" + 
"				</example>" + 
"				<note>" + 
"					<para>" + 
"						The <code>url</code> element is the full URL but for sake of brevity it is relative for the examples in this document." + 
"					</para>" + 
"				</note>" + 
"				<para role=\"RoleCreateBugPara\">" + 
"					<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18704-565921+%5BLatest%5D&amp;cf_build_id=18704-565921+05+Dec+2013+12%3A57+en-US+%5BLatest%5D&amp;comment=Title%3A+List+Pages%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"				</para>" + 
"			</section>" + 
"			<section id=\"Retrieve_a_page\" remap=\"TID_18705\">" + 
"				<title>Retrieve a page</title>" + 
"				<remark>" + 
"					QE NOTE - jmorgan - Minor edits" + 
"				</remark>" + 
"				<para>" + 
"					To retrieve a page named <code>page-name</code>, the following syntax applies:" + 
"				</para>" + 
"				<programlisting>" + 
"GET /api/{site-type}s/{site-name}/pages/{page-name}" + 
"</programlisting>" + 
"				<example>" + 
"					<title>Retrieve a Page Request and Response</title>" + 
"					<para>" + 
"						This example shows how to retrieve the page 'homepage'" + 
"					</para>" + 
"					<programlisting>" + 
"GET /api/sites/classic/pages/homepage" + 
"</programlisting>" + 
"					<programlisting>" + 
"HTTP/1.1 200 OK" + 
"Content-Type: application/json" + 
"{" + 
"    \"name\" : \"homepage\"," + 
"    \"displayName\" : \"Home Page\"," + 
"    \"description\" : null," + 
"    \"access-permissions\" : [\"Everyone\"]," + 
"    \"edit-permissions\" : [\"*:/platform/administrators\"]" + 
"}" + 
"</programlisting>" + 
"				</example>" + 
"				<para role=\"RoleCreateBugPara\">" + 
"					<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18705-565921+%5BLatest%5D&amp;cf_build_id=18705-565921+05+Dec+2013+12%3A57+en-US+%5BLatest%5D&amp;comment=Title%3A+Retrieve+a+page%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"				</para>" + 
"			</section>" + 
"			<section id=\"Create_a_page\" remap=\"TID_18706\">" + 
"				<title>Create a page</title>" + 
"				<remark>" + 
"					QE NOTE - jmorgan - Minor Edits" + 
"				</remark>" + 
"				<para>" + 
"					To create a page named <code>page-name</code>, the following syntax applies:" + 
"				</para>" + 
"				<programlisting>" + 
"POST /api/{site-type}s/{site-name}/pages/{page-name}" + 
"</programlisting>" + 
"				<example>" + 
"					<title>Create a New Page Request and Response</title>" + 
"					<para>" + 
"						The following example creates a page named 'newpage'." + 
"					</para>" + 
"					<programlisting>" + 
"POST /api/sites/classic/pages/newpage" + 
"</programlisting>" + 
"					<programlisting>" + 
"HTTP/1.1 200 OK" + 
"Content-Type: application/json" + 
"{" + 
"    \"name\" : \"newpage\"," + 
"    \"displayName\" : \"newpage\"," + 
"    \"description\" : null," + 
"    \"access-permissions\" : [\"Everyone\"]," + 
"    \"edit-permissions\" : [\"*:/platform/administrators\"]" + 
"}" + 
"</programlisting>" + 
"				</example>" + 
"				<para role=\"RoleCreateBugPara\">" + 
"					<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18706-565921+%5BLatest%5D&amp;cf_build_id=18706-565921+05+Dec+2013+12%3A57+en-US+%5BLatest%5D&amp;comment=Title%3A+Create+a+page%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"				</para>" + 
"			</section>" + 
"			<section id=\"Delete_a_page1\" remap=\"TID_18707\">" + 
"				<title>Delete a page</title>" + 
"				<remark>" + 
"					QE NOTE - jmorgan - Minor Edits" + 
"				</remark>" + 
"				<para>" + 
"					To delete a page named <code>page-name</code>, the following syntax applies:" + 
"				</para>" + 
"				<programlisting>" + 
"DELETE /api/{site-type}s/{site-name}/pages/{page-name}" + 
"</programlisting>" + 
"				<example>" + 
"					<title>Delete a Page Request and Response</title>" + 
"					<para>" + 
"						This example deletes a page named 'newpage'." + 
"					</para>" + 
"					<programlisting>" + 
"DELETE /api/sites/classic/pages/newpage" + 
"</programlisting>" + 
"					<programlisting>" + 
"HTTP/1.1 200 OK" + 
"Content-Type: application/json" + 
"</programlisting>" + 
"				</example>" + 
"				<para role=\"RoleCreateBugPara\">" + 
"					<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18707-565921+%5BLatest%5D&amp;cf_build_id=18707-565921+05+Dec+2013+12%3A57+en-US+%5BLatest%5D&amp;comment=Title%3A+Delete+a+page%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"				</para>" + 
"			</section>" + 
"			<section id=\"Update_a_page\" remap=\"TID_18708\">" + 
"				<title>Update a page</title>" + 
"				<remark>" + 
"					QE NOTE - jmorgan - Updated the Page description in the code sample with something a bit more suitable for enterprise." + 
"				</remark>" + 
"				<para>" + 
"					To update a page named <code>page-name</code>, the following syntax applies:" + 
"				</para>" + 
"				<programlisting>" + 
"PUT /api/{site-type}s/{site-name}/pages/{page-name}" + 
"</programlisting>" + 
"				<example>" + 
"					<title>Update Page Description Request and Response</title>" + 
"					<para>" + 
"						This example updates the page 'homepage' with a new description." + 
"					</para>" + 
"					<programlisting>" + 
"PUT /api/sites/classic/pages/homepage" + 
"" + 
"Content-Type: application/json" + 
"{" + 
"   \"description\" : \"The default homepage\"" + 
"}" + 
"</programlisting>" + 
"					<programlisting>" + 
"HTTP/1.1 200 OK" + 
"Content-Type: application/json" + 
"{" + 
"    \"name\" : \"homepage\"," + 
"    \"displayName\" : \"Home Page\"," + 
"    \"description\" : \"The default homepage\"," + 
"    \"access-permissions\" : [\"Everyone\"]," + 
"    \"edit-permissions\" : [\"*:/platform/administrators\"]" + 
"}" + 
"</programlisting>" + 
"				</example>" + 
"				<para role=\"RoleCreateBugPara\">" + 
"					<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18708-565921+%5BLatest%5D&amp;cf_build_id=18708-565921+05+Dec+2013+12%3A57+en-US+%5BLatest%5D&amp;comment=Title%3A+Update+a+page%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"				</para>" + 
"			</section>" + 
"		</section>" + 
"		<section id=\"sect-Navigation-1\">" + 
"			<title>Navigation</title>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18709-565921+%5BLatest%5D&amp;cf_build_id=18709-565921+05+Dec+2013+12%3A57+en-US+%5BLatest%5D&amp;comment=Title%3A+Navigation%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"			<section id=\"Retrieve_Navigation\" remap=\"TID_18710\">" + 
"				<title>Retrieve Navigation</title>" + 
"				<remark>" + 
"					QE NOTE - jmorgan - I had to make up the following sentence as it wasn't present in the confluence source. Also made the table a formal table." + 
"				</remark>" + 
"				<para>" + 
"					To update a page named <code>site-name</code>, the following syntax applies:" + 
"				</para>" + 
"				<programlisting>" + 
"GET /api/{site-type}s/{site-name}/navigation" + 
"</programlisting>" + 
"				<table>" + 
"					<title>Retrieve Navigation Parameters</title>" + 
"					<tgroup cols=\"4\">" + 
"						<thead>" + 
"							<row>" + 
"								<entry>" + 
"									<para>" + 
"										Parameter" + 
"									</para>" + 
"								</entry>" + 
"								<entry>" + 
"									<para>" + 
"										Type" + 
"									</para>" + 
"								</entry>" + 
"								<entry>" + 
"									<para>" + 
"										Default" + 
"									</para>" + 
"								</entry>" + 
"								<entry>" + 
"									<para>" + 
"										Description" + 
"									</para>" + 
"								</entry>" + 
"							</row>" + 
"						</thead>" + 
"						<tbody>" + 
"							<row>" + 
"								<entry>" + 
"									<para>" + 
"										scope" + 
"									</para>" + 
"								</entry>" + 
"								<entry>" + 
"									<para>" + 
"										int" + 
"									</para>" + 
"								</entry>" + 
"								<entry>" + 
"									<para>" + 
"										n/a" + 
"									</para>" + 
"								</entry>" + 
"								<entry>" + 
"									<para>" + 
"										Specifies how many nodes to load (-1 for all)" + 
"									</para>" + 
"								</entry>" + 
"							</row>" + 
"						</tbody>" + 
"					</tgroup>" + 
"				</table>" + 
"				<para>" + 
"					Below is an example of retrieving the navigation for the site 'classic'" + 
"				</para>" + 
"				<example>" + 
"					<title>Request</title>" + 
"					<programlisting>" + 
"GET /api/sites/classic/navigation" + 
"</programlisting>" + 
"				</example>" + 
"				<example>" + 
"					<title>Response</title>" + 
"					<programlisting>" + 
"HTTP/1.1 200 OK" + 
"Content-Type: application/json" + 
"{" + 
"    \"priority\" : 1," + 
"    \"siteType\" : \"site\"," + 
"    \"siteName\" : \"classic\"," + 
"    \"nodes\" : [" + 
"        {" + 
"            \"name\" : \"home\"," + 
"            \"url\" : \"/api/sites/classic/navigation/home\"" + 
"        }," + 
"        {" + 
"            \"name\" : \"sitemap\"," + 
"            \"url\" : \"/api/sites/classic/navigation/sitemap\"" + 
"        }" + 
"    ]" + 
"}" + 
"</programlisting>" + 
"				</example>" + 
"				<note>" + 
"					<para>" + 
"						The <code>url</code> element is the full URL but for sake of brevity it is relative for the examples in this document." + 
"					</para>" + 
"				</note>" + 
"				<example>" + 
"					<title>Scope Parameter Request and Response</title>" + 
"					<para>" + 
"						This example uses the scope parameter to load more nodes which will include the actual node representation in the response" + 
"					</para>" + 
"					<programlisting>" + 
"GET /api/sites/classic/navigation?scope=1" + 
"</programlisting>" + 
"					<programlisting>" + 
"HTTP/1.1 200 OK" + 
"Content-Type: application/json" + 
"{" + 
"    \"priority\" : 1," + 
"    \"siteType\" : \"site\"," + 
"    \"siteName\" : \"classic\"," + 
"    \"nodes\" : [" + 
"        {" + 
"            \"name\" : \"home\"," + 
"            \"uri\" : \"/portal/classic/home\"," + 
"            \"isVisible\" : true," + 
"            \"visibility\" : {\"status\" : \"VISIBLE\"}," + 
"            \"iconName\" : null," + 
"            \"displayName\" : \"Home\"," + 
"            \"displayNames\" : [...]" + 
"            \"children\" : null," + 
"            \"page\" : {" + 
"                \"pageName\" : \"homepage\"," + 
"                \"siteName\" : \"classic\"," + 
"                \"siteType\" : \"site\"," + 
"                \"url\" : \"/api/sites/classic/pages/homepage\"" + 
"            }" + 
"        }," + 
"        {" + 
"            \"name\" : \"sitemap\"," + 
"            \"uri\" : \"/portal/classic/sitemap\"," + 
"            \"isVisible\" : true," + 
"            \"visibility\" : {\"status\" : \"VISIBLE\"}," + 
"            \"iconName\" : null," + 
"            \"displayName\" : \"SiteMap\"," + 
"            \"displayNames\" : [...]" + 
"            \"children\" : null," + 
"            \"page\" : {" + 
"                \"pageName\" : \"sitemap\"," + 
"                \"siteName\" : \"classic\"," + 
"                \"siteType\" : \"site\"," + 
"                \"url\" : \"/api/sites/classic/pages/sitemap\"" + 
"            }" + 
"        }" + 
"    ]" + 
"}" + 
"</programlisting>" + 
"				</example>" + 
"				<note>" + 
"					<para>" + 
"						The <code>url</code> element is the full URL but for sake of brevity it is relative for the examples in this document." + 
"					</para>" + 
"				</note>" + 
"				<para role=\"RoleCreateBugPara\">" + 
"					<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18710-565934+%5BLatest%5D&amp;cf_build_id=18710-565934+05+Dec+2013+13%3A03+en-US+%5BLatest%5D&amp;comment=Title%3A+Retrieve+Navigation%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"				</para>" + 
"			</section>" + 
"			<section id=\"Retrieve_a_node\" remap=\"TID_18711\">" + 
"				<title>Retrieve a node</title>" + 
"				<remark>" + 
"					QE NOTE - jmorgan - formatting changes and minor edits." + 
"				</remark>" + 
"				<para>" + 
"					To retrieve a node with path <code>node-path</code>, the following syntax applies:" + 
"				</para>" + 
"				<programlisting>" + 
"GET /api/{site-type}s/{site-name}/navigation/{node-path}" + 
"</programlisting>" + 
"				<table>" + 
"					<title>Node Path Parameters</title>" + 
"					<tgroup cols=\"4\">" + 
"						<thead>" + 
"							<row>" + 
"								<entry>" + 
"									<para>" + 
"										parameter" + 
"									</para>" + 
"								</entry>" + 
"								<entry>" + 
"									<para>" + 
"										type" + 
"									</para>" + 
"								</entry>" + 
"								<entry>" + 
"									<para>" + 
"										default" + 
"									</para>" + 
"								</entry>" + 
"								<entry>" + 
"									<para>" + 
"										description" + 
"									</para>" + 
"								</entry>" + 
"							</row>" + 
"						</thead>" + 
"						<tbody>" + 
"							<row>" + 
"								<entry>" + 
"									<para>" + 
"										scope" + 
"									</para>" + 
"								</entry>" + 
"								<entry>" + 
"									<para>" + 
"										int" + 
"									</para>" + 
"								</entry>" + 
"								<entry>" + 
"									<para>" + 
"										n/a" + 
"									</para>" + 
"								</entry>" + 
"								<entry>" + 
"									<para>" + 
"										Specifies how many nodes to load (-1 for all)" + 
"									</para>" + 
"								</entry>" + 
"							</row>" + 
"						</tbody>" + 
"					</tgroup>" + 
"				</table>" + 
"				<example>" + 
"					<title>Retrieve a Node Request and Response</title>" + 
"					<para>" + 
"						This example retrieves the node 'home'." + 
"					</para>" + 
"					<programlisting>" + 
"GET /api/sites/classic/navigation/home" + 
"</programlisting>" + 
"					<programlisting>" + 
"HTTP/1.1 200 OK" + 
"Content-Type: application/json" + 
"{" + 
"    \"name\" : \"home\"," + 
"    \"uri\" : \"/portal/classic/home\"," + 
"    \"isVisible\" : true," + 
"    \"visibility\" : {\"status\" : \"VISIBLE\"}," + 
"    \"iconName\" : null," + 
"    \"displayName\" : \"Home\"," + 
"    \"displayNames\" : [...]" + 
"    \"children\" : null," + 
"    \"page\" : {" + 
"        \"pageName\" : \"homepage\"," + 
"        \"siteName\" : \"classic\"," + 
"        \"siteType\" : \"site\"," + 
"        \"url\" : \"/api/sites/classic/pages/homepage\"" + 
"    }" + 
"}" + 
"</programlisting>" + 
"				</example>" + 
"				<para>" + 
"					You can control the displayName value for localized nodes with the <code>Accept-Language</code> header." + 
"				</para>" + 
"				<example>" + 
"					<title>Accept-Language Request and Response</title>" + 
"					<para>" + 
"						This example retrieves the node 'home' to display the displayName in French." + 
"					</para>" + 
"					<programlisting>" + 
"GET /api/sites/classic/navigation/home" + 
"Accept-Language: fr" + 
"</programlisting>" + 
"					<programlisting>" + 
"HTTP/1.1 200 OK" + 
"Content-Type: application/json" + 
"{" + 
"    \"name\" : \"home\"," + 
"    \"uri\" : \"/portal/classic/home\"," + 
"    \"isVisible\" : true," + 
"    \"visibility\" : {\"status\" : \"VISIBLE\"}," + 
"    \"iconName\" : null," + 
"    \"displayName\" : \"Accueil\"," + 
"    \"displayNames\" : [...]" + 
"    \"children\" : null," + 
"    \"page\" : {" + 
"        \"pageName\" : \"homepage\"," + 
"        \"siteName\" : \"classic\"," + 
"        \"siteType\" : \"site\"," + 
"        \"url\" : \"/api/sites/classic/pages/homepage\"" + 
"    }" + 
"}" + 
"</programlisting>" + 
"				</example>" + 
"				<note>" + 
"					<para>" + 
"						The <code>url</code> element is the full URL but for sake of brevity it is relative for the examples in this document." + 
"					</para>" + 
"				</note>" + 
"				<para role=\"RoleCreateBugPara\">" + 
"					<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18711-565934+%5BLatest%5D&amp;cf_build_id=18711-565934+05+Dec+2013+13%3A03+en-US+%5BLatest%5D&amp;comment=Title%3A+Retrieve+a+node%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"				</para>" + 
"			</section>" + 
"			<section id=\"Create_a_node\" remap=\"TID_18712\">" + 
"				<title>Create a node</title>" + 
"				<remark>" + 
"					QE NOTE - jmorgan - formatting changes and minor edits." + 
"				</remark>" + 
"				<para>" + 
"					To create a node with path <code>node-path</code>, the following syntax applies:" + 
"				</para>" + 
"				<programlisting>" + 
"POST /api/{site-type}s/{site-name}/navigation/{node-path}" + 
"</programlisting>" + 
"				<example>" + 
"					<title>Create a Node Request and Response</title>" + 
"					<para>" + 
"						This example creates a new node 'newnode' under the home navigation node." + 
"					</para>" + 
"					<programlisting>" + 
"POST /api/sites/classic/navigation/home/newnode" + 
"</programlisting>" + 
"					<programlisting>" + 
"HTTP/1.1 200 OK" + 
"Content-Type: application/json" + 
"{" + 
"    \"name\" : \"newnode\"," + 
"    \"uri\" : \"/portal/classic/home/newnode\"," + 
"    \"isVisible\" : true," + 
"    \"visibility\" : {\"status\" : \"VISIBLE\"}," + 
"    \"iconName\" : null," + 
"    \"displayName\" : \"newnode\"," + 
"    \"children\" : null," + 
"    \"page\" : null" + 
"}" + 
"</programlisting>" + 
"				</example>" + 
"				<para role=\"RoleCreateBugPara\">" + 
"					<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18712-565934+%5BLatest%5D&amp;cf_build_id=18712-565934+05+Dec+2013+13%3A03+en-US+%5BLatest%5D&amp;comment=Title%3A+Create+a+node%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"				</para>" + 
"			</section>" + 
"			<section id=\"Delete_a_node1\" remap=\"TID_18713\">" + 
"				<title>Delete a node</title>" + 
"				<remark>" + 
"					QE NOTE - jmorgan - formatting changes and minor edits." + 
"				</remark>" + 
"				<para>" + 
"					To delete a node with path <code>node-path</code>, the following syntax applies:" + 
"				</para>" + 
"				<programlisting>" + 
"DELETE /api/{site-type}s/{site-name}/navigation/{node-path}" + 
"</programlisting>" + 
"				<example>" + 
"					<title>Delete Node Request and Response</title>" + 
"					<para>" + 
"						This example deletes a node 'newnode'." + 
"					</para>" + 
"					<programlisting>" + 
"DELETE /api/sites/classic/navigation/home/newnode" + 
"</programlisting>" + 
"					<programlisting>" + 
"HTTP/1.1 200 OK" + 
"Content-Type: application/json" + 
"</programlisting>" + 
"				</example>" + 
"				<para role=\"RoleCreateBugPara\">" + 
"					<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18713-565934+%5BLatest%5D&amp;cf_build_id=18713-565934+05+Dec+2013+13%3A03+en-US+%5BLatest%5D&amp;comment=Title%3A+Delete+a+node%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"				</para>" + 
"			</section>" + 
"			<section id=\"Update_a_node\" remap=\"TID_18714\">" + 
"				<title>Update a node</title>" + 
"				<remark>" + 
"					QE NOTE - jmorgan - formatting changes and minor edits." + 
"				</remark>" + 
"				<para>" + 
"					To update a node with path <code>node-path</code>, the following syntax applies:" + 
"				</para>" + 
"				<programlisting>" + 
"PUT /api/{site-type}s/{site-name}/navigation/{node-path}" + 
"</programlisting>" + 
"				<example>" + 
"					<title>Update Node Request and Response</title>" + 
"					<para>" + 
"						Below is an example of updating the node 'home' to point to the sitemap page rather then the homepage." + 
"					</para>" + 
"					<programlisting>" + 
"PUT /api/sites/classic/navigation/home" + 
"" + 
"Content-Type: application/json" + 
"{" + 
"   \"page\" : {" + 
"        \"pageName\" : \"sitemap\"," + 
"        \"siteName\" : \"classic\"," + 
"        \"siteType\" : \"site\"" + 
"   }" + 
"}" + 
"</programlisting>" + 
"					<programlisting>" + 
"HTTP/1.1 200 OK" + 
"Content-Type: application/json" + 
"{" + 
"    \"name\" : \"home\"," + 
"    \"uri\" : \"/portal/classic/home\"," + 
"    \"isVisible\" : true," + 
"    \"visibility\" : {\"status\" : \"VISIBLE\"}," + 
"    \"iconName\" : null," + 
"    \"displayName\" : \"Test\"," + 
"    \"displayNames\" : [...]" + 
"    \"children\" : null," + 
"    \"page\" : {" + 
"        \"pageName\" : \"sitemap\"," + 
"        \"siteName\" : \"classic\"," + 
"        \"siteType\" : \"site\"," + 
"        \"url\" : \"/api/sites/classic/pages/sitemap\"" + 
"    }" + 
"}" + 
"</programlisting>" + 
"				</example>" + 
"				<note>" + 
"					<para>" + 
"						The <code>url</code> element is the full URL but for sake of brevity it is relative for the examples in this document." + 
"					</para>" + 
"				</note>" + 
"				<example>" + 
"					<title>Update displayName Request and Response</title>" + 
"					<para>" + 
"						This example updates the English localized displayName to 'Home Page'." + 
"					</para>" + 
"					<programlisting>" + 
"PUT /api/sites/classic/navigation/home" + 
"" + 
"Content-Type: application/json" + 
"{" + 
"    \"displayNames\" : [" + 
"        {" + 
"            \"value\" : \"ホーム\"," + 
"            \"lang\" : \"ja\"" + 
"        }," + 
"        {" + 
"            \"value\" : \"Home Page\"," + 
"            \"lang\" : \"en\"" + 
"        }," + 
"        {" + 
"            \"value\" : \"首頁\"," + 
"            \"lang\" : \"zh-TW\"" + 
"        }," + 
"        {" + 
"            \"value\" : \"Domů\"," + 
"            \"lang\" : \"cs\"" + 
"        }," + 
"        {" + 
"            \"value\" : \"Accueil\"," + 
"            \"lang\" : \"fr\"" + 
"        }," + 
"        {" + 
"            \"value\" : \"主页\"," + 
"            \"lang\" : \"zh\"" + 
"        }," + 
"        {" + 
"            \"value\" : \"Главная\"," + 
"            \"lang\" : \"ru\"" + 
"        }," + 
"        {" + 
"            \"value\" : \"ترحيب\"," + 
"            \"lang\" : \"ar\"" + 
"        }," + 
"        {" + 
"            \"value\" : \"Trang chủ\"," + 
"            \"lang\" : \"vi\"" + 
"        }," + 
"        {" + 
"            \"value\" : \"Home\"," + 
"            \"lang\" : \"nl\"" + 
"        }," + 
"        {" + 
"            \"value\" : \"Inicio\"," + 
"            \"lang\" : \"es\"" + 
"        }," + 
"        {" + 
"            \"value\" : \"Principal\"," + 
"            \"lang\" : \"pt-BR\"" + 
"        }," + 
"        {" + 
"            \"value\" : \"Startseite\"," + 
"            \"lang\" : \"de\"" + 
"        }," + 
"        {" + 
"            \"value\" : \"홈\"," + 
"            \"lang\" : \"ko\"" + 
"        }," + 
"        {" + 
"            \"value\" : \"Home\"," + 
"            \"lang\" : \"it\"" + 
"        }," + 
"        {" + 
"            \"value\" : \"Додому\"," + 
"            \"lang\" : \"uk\"" + 
"        }," + 
"        {" + 
"            \"value\" : \"गृह पृष्‍ठ\"," + 
"            \"lang\" : \"ne\"" + 
"        }" + 
"    ]" + 
"}" + 
"</programlisting>" + 
"					<programlisting>" + 
"HTTP/1.1 200 OK" + 
"Content-Type: application/json" + 
"{" + 
"    \"name\" : \"home\"," + 
"    \"uri\" : \"/portal/classic/home\"," + 
"    \"isVisible\" : true," + 
"    \"visibility\" : {\"status\" : \"VISIBLE\"}," + 
"    \"iconName\" : null," + 
"    \"displayName\" : \"Home Page\"," + 
"    \"displayNames\" : [" + 
"        {" + 
"            \"value\" : \"ホーム\"," + 
"            \"lang\" : \"ja\"" + 
"        }," + 
"        {" + 
"            \"value\" : \"Home Page\"," + 
"            \"lang\" : \"en\"" + 
"        }," + 
"        {" + 
"            \"value\" : \"首頁\"," + 
"            \"lang\" : \"zh-TW\"" + 
"        }," + 
"        {" + 
"            \"value\" : \"Domů\"," + 
"            \"lang\" : \"cs\"" + 
"        }," + 
"        {" + 
"            \"value\" : \"Accueil\"," + 
"            \"lang\" : \"fr\"" + 
"        }," + 
"        {" + 
"            \"value\" : \"主页\"," + 
"            \"lang\" : \"zh\"" + 
"        }," + 
"        {" + 
"            \"value\" : \"Главная\"," + 
"            \"lang\" : \"ru\"" + 
"        }," + 
"        {" + 
"            \"value\" : \"ترحيب\"," + 
"            \"lang\" : \"ar\"" + 
"        }," + 
"        {" + 
"            \"value\" : \"Trang chủ\"," + 
"            \"lang\" : \"vi\"" + 
"        }," + 
"        {" + 
"            \"value\" : \"Home\"," + 
"            \"lang\" : \"nl\"" + 
"        }," + 
"        {" + 
"            \"value\" : \"Inicio\"," + 
"            \"lang\" : \"es\"" + 
"        }," + 
"        {" + 
"            \"value\" : \"Principal\"," + 
"            \"lang\" : \"pt-BR\"" + 
"        }," + 
"        {" + 
"            \"value\" : \"Startseite\"," + 
"            \"lang\" : \"de\"" + 
"        }," + 
"        {" + 
"            \"value\" : \"홈\"," + 
"            \"lang\" : \"ko\"" + 
"        }," + 
"        {" + 
"            \"value\" : \"Home\"," + 
"            \"lang\" : \"it\"" + 
"        }," + 
"        {" + 
"            \"value\" : \"Додому\"," + 
"            \"lang\" : \"uk\"" + 
"        }," + 
"        {" + 
"            \"value\" : \"गृह पृष्‍ठ\"," + 
"            \"lang\" : \"ne\"" + 
"        }" + 
"    ]," + 
"    \"children\" : null," + 
"    \"page\" : {" + 
"        \"pageName\" : \"homepage\"," + 
"        \"siteName\" : \"classic\"," + 
"        \"siteType\" : \"site\"," + 
"        \"url\" : \"/api/sites/classic/pages/homepage\"" + 
"    }" + 
"}" + 
"</programlisting>" + 
"				</example>" + 
"				<note>" + 
"					<para>" + 
"						The <code>url</code> element is the full URL but for sake of brevity it is relative for the examples in this document." + 
"					</para>" + 
"				</note>" + 
"				<note>" + 
"					<para>" + 
"						We have to include all the displayNames since the REST API will overwrite the values on the server with whatever we supply in the request." + 
"					</para>" + 
"				</note>" + 
"				<para>" + 
"					Since the REST API overwrites the displayNames field we can delete existing displayNames by simply not including them." + 
"				</para>" + 
"				<example>" + 
"					<title>Deleting All Localized Display Names Except for English Request and Response</title>" + 
"					<para>" + 
"						This example deletes all localized displayNames except for English." + 
"					</para>" + 
"					<programlisting>" + 
"PUT /api/sites/classic/navigation/home" + 
"" + 
"Content-Type: application/json" + 
"{" + 
"    \"displayNames\" : [" + 
"        {" + 
"            \"value\" : \"Home\"," + 
"            \"lang\" : \"en\"" + 
"        }" + 
"    ]" + 
"}" + 
"</programlisting>" + 
"					<programlisting>" + 
"HTTP/1.1 200 OK" + 
"Content-Type: application/json" + 
"{" + 
"    \"name\" : \"home\"," + 
"    \"uri\" : \"/portal/classic/home\"," + 
"    \"isVisible\" : true," + 
"    \"visibility\" : {\"status\" : \"VISIBLE\"}," + 
"    \"iconName\" : null," + 
"    \"displayName\" : \"Home\"," + 
"    \"displayNames\" : [" + 
"        {" + 
"            \"value\" : \"Home Page\"," + 
"            \"lang\" : \"en\"" + 
"        }" + 
"    ]," + 
"    \"children\" : null," + 
"    \"page\" : {" + 
"        \"pageName\" : \"homepage\"," + 
"        \"siteName\" : \"classic\"," + 
"        \"siteType\" : \"site\"," + 
"        \"url\" : \"/api/sites/classic/pages/homepage\"" + 
"    }" + 
"}" + 
"</programlisting>" + 
"				</example>" + 
"				<note>" + 
"					<para>" + 
"						The <code>url</code> element is the full URL but for sake of brevity it is relative for the examples in this document." + 
"					</para>" + 
"				</note>" + 
"				<example>" + 
"					<title>Removing Localized Display Names Request and Response</title>" + 
"					<para>" + 
"						This example removes all localized displayNames from the home navigation node and replaces them with a non-localized (simple) displayName 'Home'." + 
"					</para>" + 
"					<programlisting>" + 
"PUT /api/sites/classic/navigation/home" + 
"" + 
"Content-Type: application/json" + 
"{" + 
"    \"displayName\" : \"Home\"" + 
"}" + 
"</programlisting>" + 
"					<programlisting>" + 
"HTTP/1.1 200 OK" + 
"Content-Type: application/json" + 
"{" + 
"    \"name\" : \"home\"," + 
"    \"uri\" : \"/portal/classic/home\"," + 
"    \"isVisible\" : true," + 
"    \"visibility\" : {\"status\" : \"VISIBLE\"}," + 
"    \"iconName\" : null," + 
"    \"displayName\" : \"Home\"," + 
"    \"displayNames\" : [{\"value\" : \"Home\"}]" + 
"    \"children\" : null," + 
"    \"page\" : {" + 
"        \"pageName\" : \"homepage\"," + 
"        \"siteName\" : \"classic\"," + 
"        \"siteType\" : \"site\"," + 
"        \"url\" : \"/api/sites/classic/pages/homepage\"" + 
"    }" + 
"}" + 
"</programlisting>" + 
"				</example>" + 
"				<para role=\"RoleCreateBugPara\">" + 
"					<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18714-565934+%5BLatest%5D&amp;cf_build_id=18714-565934+05+Dec+2013+13%3A03+en-US+%5BLatest%5D&amp;comment=Title%3A+Update+a+node%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"				</para>" + 
"			</section>" + 
"		</section>" + 
"	</section>" + 
"</chapter>" + 
"	<chapter id=\"chap-Organization_API\">" + 
"	<title>Organization API</title>" + 
"	<section id=\"Organization_API\" remap=\"TID_18715\">" + 
"		<title>Organization API</title>" + 
"		<remark>" + 
"			Source:https://docs.jboss.org/author/display/GTNPORTAL36/Organization+API" + 
"		</remark>" + 
"		<para>" + 
"			The <literal>exo.platform.services.organization</literal> package has five main components:" + 
"		</para>" + 
"		<variablelist>" + 
"			<varlistentry>" + 
"				<term>User</term>" + 
"				<listitem>" + 
"					<para>" + 
"						The <literal>User</literal> component contains basic information about a user; such as username, password, first name, last name, and email address." + 
"					</para>" + 
"				</listitem>" + 
"			</varlistentry>" + 
"			<varlistentry>" + 
"				<term>User Profile</term>" + 
"				<listitem>" + 
"					<para>" + 
"						The <literal>User Profile</literal> component contains extra information about a user, such as user's personal information, and business information. You can also add additional information about a user if your application requires it." + 
"					</para>" + 
"				</listitem>" + 
"			</varlistentry>" + 
"			<varlistentry>" + 
"				<term>Group</term>" + 
"				<listitem>" + 
"					<para>" + 
"						The <literal>Group</literal> component contains a group graph." + 
"					</para>" + 
"				</listitem>" + 
"			</varlistentry>" + 
"			<varlistentry>" + 
"				<term>Membership Type</term>" + 
"				<listitem>" + 
"					<para>" + 
"						The <literal>Membership Type</literal> component contains a list of predefined membership types." + 
"					</para>" + 
"				</listitem>" + 
"			</varlistentry>" + 
"			<varlistentry>" + 
"				<term>Membership</term>" + 
"				<listitem>" + 
"					<para>" + 
"						The <literal>Membership</literal> component connects a User, a Group and a Membership Type." + 
"					</para>" + 
"					<para>" + 
"						A user can have one or more memberships within a group. For example: <emphasis>User A</emphasis> can have the '<emphasis>member</emphasis>' and '<emphasis>admin</emphasis>' memberships in group <emphasis>/user</emphasis>. A user belongs to a group if he has at least one membership in that group." + 
"					</para>" + 
"				</listitem>" + 
"			</varlistentry>" + 
"		</variablelist>" + 
"		<para>" + 
"			The <literal>OrganizationService</literal> component is an additional component that serves as an entry point into the Organization API. It provides handling functionality for the five components." + 
"		</para>" + 
"		<figure>" + 
"			<title>Handler Objects Accessible by the OrganizationService Component</title>" + 
"			<mediaobject>" + 
"				<imageobject role=\"html\">" + 
"					<imagedata align=\"center\" fileref=\"images/2896.png\" format=\"PNG\"/>" + 
"				</imageobject>" + 
"				<textobject>" + 
"					<phrase>Diagram describing the handler objects accessible by the OrganizationService component, which are described in the following paragraph.</phrase>" + 
"				</textobject>" + 
"			</mediaobject>" + 
"		</figure>" + 
"		<para>" + 
"			By exposing the Organization API, the <literal>OrganizationService</literal> component provides developers with access to handler objects for managing each of the five components:" + 
"		</para>" + 
"		<itemizedlist>" + 
"			<listitem>" + 
"				<para>" + 
"					UserHandler" + 
"				</para>" + 
"			</listitem>" + 
"			<listitem>" + 
"				<para>" + 
"					UserProfileHandler" + 
"				</para>" + 
"			</listitem>" + 
"			<listitem>" + 
"				<para>" + 
"					GroupHandler" + 
"				</para>" + 
"			</listitem>" + 
"			<listitem>" + 
"				<para>" + 
"					MembershipTypeHandler" + 
"				</para>" + 
"			</listitem>" + 
"			<listitem>" + 
"				<para>" + 
"					MembershipHandler" + 
"				</para>" + 
"			</listitem>" + 
"		</itemizedlist>" + 
"		<para>" + 
"			The five central API components are designed to be similar to persistent entities and handlers are specified similarly to data access objects (DAO)." + 
"		</para>" + 
"		<para>" + 
"			<emphasis>Organization API</emphasis> simply describes a contract, meaning it is not a concrete implementation. The described components are interfaces, allowing for different concrete implementations. In practical terms the existing implementation can be replaced with a different one." + 
"		</para>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18715-565934+%5BLatest%5D&amp;cf_build_id=18715-565934+05+Dec+2013+13%3A03+en-US+%5BLatest%5D&amp;comment=Title%3A+Organization+API%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"	</section>" + 
"</chapter>" + 
"	<chapter id=\"chap-Accessing_User_Profile\">" + 
"	<title>Accessing User Profile</title>" + 
"	<remark>" + 
"		Source:https://docs.jboss.org/author/display/GTNPORTAL36/Access+User+Profile" + 
"	</remark>" + 
"	<para>" + 
"		The following code retrieves the details for a logged-in user:" + 
"	</para>" + 
"	<programlisting language=\"Java\">" + 
"// Alternative context: WebuiRequestContext context = WebuiRequestContext.getCurrentInstance() ;" + 
"PortalRequestContext context = PortalRequestContext.getCurrentInstance() ;" + 
"// Get the id of the user logged" + 
"String userId = context.getRemoteUser();" + 
"" + 
"// Retrieve OrganizationService but it works only from WebUI code. See variants below in documentation " + 
"OrganizationService orgService = getApplicationComponent(OrganizationService.class) ;" + 
"" + 
"// Request the information from OrganizationService:" + 
"if (userId != null)" + 
"  {" + 
"  User user = orgService.getUserHandler().findUserByName(userId) ;" + 
"  if (user != null)" + 
"  {" + 
"    String firstName = user.getFirstName();" + 
"    String lastName = user.getLastName();" + 
"    String email = user.getEmail();" + 
"  }" + 
"}" + 
"" + 
" </programlisting>" + 
"	<para>" + 
"		Below are two alternatives for retrieving the Organization Service:" + 
"	</para>" + 
"	<orderedlist>" + 
"		<listitem>" + 
"			<programlisting language=\"Java\">" + 
" OrganizationService service = (OrganizationService)" + 
"   ExoContainerContext.getCurrentContainer().getComponentInstanceOfType(OrganizationService.class);" + 
"" + 
" </programlisting>" + 
"		</listitem>" + 
"		<listitem>" + 
"			<programlisting language=\"Java\">" + 
"OrganizationService service = (OrganizationService)" + 
"   PortalContainer.getInstance().getComponentInstanceOfType(OrganizationService.class);" + 
" " + 
"</programlisting>" + 
"		</listitem>" + 
"	</orderedlist>" + 
"	<para>" + 
"		Both alternatives are probably better than <code>OrganizationService orgService = getApplicationComponent(OrganizationService.class)</code> because you can use them from your own portlets or servlet/portlet filters. The variant with <literal>getApplicationComponent</literal> works only from WebUI." + 
"	</para>" + 
"	<para role=\"RoleCreateBugPara\">" + 
"		<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18716-565934+%5BLatest%5D&amp;cf_build_id=18716-565934+05+Dec+2013+13%3A03+en-US+%5BLatest%5D&amp;comment=Title%3A+Accessing+User+Profile%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"	</para>" + 
"</chapter>" + 
"</part>" + 
"	<part id=\"part-Portal_Development\">" + 
"	<title>Portal Development</title>" + 
"	<chapter id=\"chap-Portal_Life-cycle\">" + 
"	<title>Portal Life-cycle</title>" + 
"	<!--" + 
"      <para>" + 
"         Here is its definition in the web.xml file:" + 
"      </para>" + 
"<programlisting language=\"Java\" role=\"Java\"><xi:include parse=\"text\" href=\"../../extras/PortalDevelopment_PortalLifecycle/default162.java\" xmlns:xi=\"http://www.w3.org/2001/XInclude\" /></programlisting>" + 
"<programlisting>" + 
"&lt;servlet&gt;" + 
"&lt;servlet-name&gt;portal&lt;/servlet-name&gt;" + 
"&lt;servlet-class&gt;org.exoplatform.portal.application.PortalController&lt;/servlet-class&gt;" + 
"&lt;init-param&gt;" + 
"&lt;param-name&gt;webui.configuration&lt;/param-name&gt;" + 
"&lt;param-value&gt;app:/WEB-INF/webui-configuration.xml&lt;/param-value&gt;" + 
"&lt;/init-param&gt;" + 
"&lt;load-on-startup&gt;1&lt;/load-on-startup&gt;" + 
"&lt;/servlet&gt;" + 
"</programlisting>" + 
"      <para>" + 
"         The load-on-startup tag tells that the init method of the servlet is called when the application server starts. We also define some configuration for the portal at the path WEB-INF/webui-configuration.xml inside the portal WAR." + 
"      </para>" + 
"<programlisting language=\"Java\" role=\"Java\"><xi:include parse=\"text\" href=\"../../extras/PortalDevelopment_PortalLifecycle/is1.java\" xmlns:xi=\"http://www.w3.org/2001/XInclude\" /></programlisting>" + 
"<programlisting>/**" + 
"* The PortalContainer servlet is the main entry point for the JBoss Portal Platform." + 
"* " + 
"* Both the init() and service() methods are implemented. The first one is used to configure all the" + 
"* portal resources to prepare the platform to receive requests. The second one is used to handle them." + 
"* " + 
"* Basically, this class is just dispatcher as the real business logic is implemented inside " + 
"* the WebAppController class." + 
"*/" + 
"@SuppressWarnings(\"serial\")" + 
"public class PortalController  extends HttpServlet {" + 
"protected static Log log = ExoLogger.getLogger(\"portal:PortalController\");  " + 
"/**" + 
"* The init() method is used to prepare the portal to receive requests. " + 
"* " + 
"*  1) Create the PortalContainer and store it inside the ThreadLocal object. The PortalContainer is" + 
"*     a child of the RootContainer" + 
"*  2) Get the WebAppController component from the container" + 
"*  3) Create a new PortalApplication, init it with the ServletConfig object (which contains init params)" + 
"*  4) Register that PortalApplication inside WebAppController" + 
"*  5) Create a new PortalRequestHandler object and register it in the WebAppController" + 
"*  6) Release the PortalContainer ThreadLocal " + 
"*/" + 
"@SuppressWarnings(\"unchecked\")" + 
"public void init(ServletConfig config) throws ServletException {" + 
"super.init(config) ;" + 
"try {" + 
"RootContainer rootContainer = RootContainer.getInstance() ;" + 
"PortalContainer portalContainer = " + 
"rootContainer.getPortalContainer(config.getServletContext().getServletContextName()) ;" + 
"portalContainer = rootContainer.createPortalContainer(config.getServletContext()) ;" + 
"PortalContainer.setInstance(portalContainer) ;" + 
"WebAppController controller = " + 
"(WebAppController)portalContainer.getComponentInstanceOfType(WebAppController.class) ;" + 
"PortalApplication application = new PortalApplication(config);" + 
"application.onInit() ;" + 
"controller.addApplication(application) ;" + 
"controller.register(new PortalRequestHandler()) ;" + 
"} catch (Throwable t){" + 
"throw new ServletException(t) ;" + 
"} finally {" + 
"try {" + 
"PortalContainer.setInstance(null) ;" + 
"} catch (Exception e) {" + 
"log.warn(\"An error occurred while cleaning the ThreadLocal\", e);" + 
"}      " + 
"}" + 
"log.info(\"Init of PortalController Servlet successful\");" + 
"}" + 
"..." + 
"</programlisting>" + 
"      <para>" + 
"         We see that a PortalApplication class is instantiated, initialized and then referenced inside the WebAppController. Note that the WebAppController is a component located inside GateIn IoC service container (and hence registered in one of our service configuration XML file)." + 
"      </para>" + 
"       " + 
"      <para>" + 
"         The &lt;code&gt;&lt;strong&gt;PortalApplication&lt;/strong&gt;&lt;/code&gt; extends the &lt;code&gt;&lt;strong&gt;WebuiApplication&lt;/strong&gt;&lt;/code&gt; which itself extends the &lt;code&gt;&lt;strong&gt;Application&lt;/strong&gt;&lt;/code&gt; abstract class." + 
"      </para>" + 
"<programlisting language=\"Java\" role=\"Java\"><xi:include parse=\"text\" href=\"../../extras/PortalDevelopment_PortalLifecycle/PortalApplication.java\" xmlns:xi=\"http://www.w3.org/2001/XInclude\" /></programlisting>" + 
"<programlisting>public class PortalApplication extends WebuiApplication {" + 
"protected static Log log = ExoLogger.getLogger(\"portal:PortalApplication\");  " + 
"final static public String PORTAL_APPLICATION_ID = \"PortalApplication\" ;" + 
"private ServletConfig sconfig_ ;" + 
"private String[] applicationResourceBundleNames_ ;" + 
"/**" + 
"* The constructor references resource resolvers that allows the ApplicationResourceResolver to" + 
"* extract files from different locations such as the current war or external one such as the resource " + 
"* one where several static files are shared among all portal instances." + 
"* " + 
"* " + 
"* @param config, the servlet config that contains init params such as the path location of" + 
"* the XML configuration file for the WebUI framework" + 
"*/" + 
"public PortalApplication(ServletConfig config) throws Exception {" + 
"sconfig_ = config ;" + 
"ApplicationResourceResolver resolver = new ApplicationResourceResolver() ;" + 
"resolver.addResourceResolver(new ServletResourceResolver(config.getServletContext(), \"war:\")) ;" + 
"resolver.addResourceResolver(new ServletResourceResolver(config.getServletContext(), \"app:\")) ;" + 
"resolver.addResourceResolver(new ServletResourceResolver(config.getServletContext(), \"system:\")) ;" + 
"resolver.addResourceResolver(new ServletResourceResolver(config.getServletContext().getContext(\"/GateInResources\"), \"resources:\")) ;" + 
"setResourceResolver(resolver) ;" + 
"}" + 
"..." + 
"</programlisting>" + 
"      <para>" + 
"         The main goal of this constructor is to fill an &lt;code&gt;&lt;strong&gt;ApplicationResourceResolver&lt;/strong&gt;&lt;/code&gt; with several &lt;code&gt;&lt;strong&gt;ResourceResolver&lt;/strong&gt;&lt;/code&gt; object that will allow the application to check for files such as groovy templates into different locations. Here the goal of the &lt;code&gt;&lt;strong&gt;ResourceResolver&lt;/strong&gt;&lt;/code&gt; is to abstract the different mechanisms to extract files from different location. In the previous code sample the &lt;code&gt;&lt;strong&gt;ServletResourceResolver&lt;/strong&gt;&lt;/code&gt; is used and hence methods based on the servlet context object are defined. Note that the &lt;code&gt;&lt;strong&gt;ApplicationResourceResolver&lt;/strong&gt;&lt;/code&gt; is also a class of type &lt;code&gt;&lt;strong&gt;ResourceResolver&lt;/strong&gt;&lt;/code&gt; but a special one as it can also contains several &lt;code&gt;&lt;strong&gt;ResourceResolver&lt;/strong&gt;&lt;/code&gt; itself." + 
"      </para>" + 
"       " + 
"      <para>" + 
"         Then the &lt;code&gt;&lt;strong&gt;onInit()&lt;/strong&gt;&lt;/code&gt; method of the &lt;code&gt;&lt;strong&gt;PortalApplication&lt;/strong&gt;&lt;/code&gt; is called." + 
"      </para>" + 
"<programlisting language=\"Java\" role=\"Java\"><xi:include parse=\"text\" href=\"../../extras/PortalDevelopment_PortalLifecycle/default163.java\" xmlns:xi=\"http://www.w3.org/2001/XInclude\" /></programlisting>" + 
"<programlisting>/**" + 
"* This method first calls the super.onInit() of the WebuiApplication. That super method parse the XML" + 
"* file and stores its content in the ConfigurationManager object. It also set up he StateManager and " + 
"* init the application life-cycle phases." + 
"* " + 
"* Then we get all the properties file that will be used to create ResourceBundles" + 
"*/" + 
"public void onInit() throws Exception {" + 
"super.onInit() ;" + 
"applicationResourceBundleNames_ =" + 
"getConfigurationManager().getApplication().getInitParams()." + 
"getParam(\"application.resource.bundle\").getValue().split(\",\");" + 
"for(int i = 0; i &lt; applicationResourceBundleNames_.length; i++)  {" + 
"applicationResourceBundleNames_[i] = applicationResourceBundleNames_[i].trim() ;" + 
"}" + 
"}" + 
"</programlisting>" + 
"      <para>" + 
"         The &lt;code&gt;&lt;strong&gt;ConfigurationManager&lt;/strong&gt;&lt;/code&gt; object parses the XML configuration file. The idea of the framework, once again, is to abstract the type of &lt;code&gt;&lt;strong&gt;webapplication&lt;/strong&gt;&lt;/code&gt; in used. Hence the &lt;code&gt;&lt;strong&gt;webui-configuration.xml&lt;/strong&gt;&lt;/code&gt; file is used by both the portal and portlet applications." + 
"      </para>" + 
"       " + 
"      <para>" + 
"         Here is the &lt;code&gt;&lt;strong&gt;webui-configuration&lt;/strong&gt;&lt;/code&gt;:" + 
"      </para>" + 
"<programlisting language=\"Java\" role=\"Java\"><xi:include parse=\"text\" href=\"../../extras/PortalDevelopment_PortalLifecycle/default164.java\" xmlns:xi=\"http://www.w3.org/2001/XInclude\" /></programlisting>" + 
"<programlisting>&lt;webui-configuration&gt;  " + 
"&lt;application&gt;     " + 
"&lt;init-params&gt;" + 
"&lt;param&gt;" + 
"&lt;name&gt;application.resource.bundle&lt;/name&gt;" + 
"&lt;value&gt;locale.portal.expression, locale.portal.services, locale.portal.webui&lt;/value&gt;" + 
"&lt;/param&gt;" + 
"&lt;/init-params&gt;" + 
"&lt;ui-component-root&gt;org.exoplatform.portal.webui.workspace.UIPortalApplication&lt;/ui-component-root&gt;    " + 
"&lt;state-manager&gt;org.exoplatform.portal.application.PortalStateManager&lt;/state-manager&gt;" + 
"&lt;application-life-cycle-listeners&gt;       " + 
"&lt;listener&gt;org.exoplatform.portal.application.PortalStatisticLifecycle&lt;/listener&gt;       " + 
"&lt;listener&gt;org.exoplatform.portal.application.PortalApplicationLifecycle&lt;/listener&gt;" + 
"&lt;listener&gt;org.exoplatform.webui.application.MonitorApplicationLifecycle&lt;/listener&gt;       " + 
"&lt;/application-life-cycle-listeners&gt;     " + 
"&lt;events&gt;" + 
"&lt;event&gt;" + 
"&lt;event-name&gt;portal.application.life-cycle.event&lt;/event-name&gt;" + 
"&lt;listener&gt;org.exoplatform.webui.event.ConsoleEventMonitorListener&lt;/listener&gt;" + 
"&lt;/event&gt;" + 
"&lt;event&gt;" + 
"&lt;event-name&gt;portal.execution.life-cycle.event&lt;/event-name&gt;" + 
"&lt;listener&gt;org.exoplatform.webui.event.ConsoleEventMonitorListener&lt;/listener&gt;" + 
"&lt;/event&gt;" + 
"&lt;/events&gt;" + 
"&lt;/application&gt;" + 
"&lt;/webui-configuration&gt;" + 
"</programlisting>" + 
"      <para>" + 
"         In the previous XML file we see that we define several tags such as:" + 
"      </para>" + 
"       " + 
"      <para>" + 
"         1.1.1 The ui-component-root" + 
"      </para>" + 
"       " + 
"      <para>" + 
"         Here it is the class &lt;code&gt;&lt;strong&gt;org.exoplatform.portal.webui.workspace.UIPortalApplication&lt;/strong&gt;&lt;/code&gt; which is a class that extends the &lt;code&gt;&lt;strong&gt;UIApplication&lt;/strong&gt;&lt;/code&gt; and hence is a sibling of &lt;code&gt;&lt;strong&gt;UIPortletApplication&lt;/strong&gt;&lt;/code&gt; (used by any GateIn Portlets as the Parent class to build the portlet component tree)." + 
"      </para>" + 
"       " + 
"      <para>" + 
"         The &lt;code&gt;&lt;strong&gt;UIPortalApplication&lt;/strong&gt;&lt;/code&gt; is responsible for building its subtrees - at request time according to some configuration parameters. If all components are displayed it is composed of 3 UI components:" + 
"      </para>" + 
"       " + 
"      <itemizedlist>" + 
"         <listitem>" + 
"            <para>" + 
"               &lt;code&gt;&lt;strong&gt;UIControlWorkSpace&lt;/strong&gt;&lt;/code&gt; : the left expandable column that can contains gadget containers and the start menu" + 
"            </para>" + 
"         </listitem>" + 
"          " + 
"         <listitem>" + 
"            <para>" + 
"               &lt;code&gt;&lt;strong&gt;UIWorkingWorkSpace&lt;/strong&gt;&lt;/code&gt;: the right part that can display the normal or webos portal layouts." + 
"            </para>" + 
"         </listitem>" + 
"          " + 
"         <listitem>" + 
"            <para>" + 
"               &lt;code&gt;&lt;strong&gt;UIPopupWindow&lt;/strong&gt;&lt;/code&gt;: a popup window that display or not." + 
"            </para>" + 
"         </listitem>" + 
"      </itemizedlist>" + 
"       " + 
"      <para>" + 
"         The &lt;code&gt;&lt;strong&gt;UIPortalApplication&lt;/strong&gt;&lt;code&gt; constructor is shown next and is the starting point to build the UI Component tree to which Pages and Portlets will also be mounted. We will not describe that behavior here." + 
"      </para>" + 
"<programlisting language=\"Java\" role=\"Java\"><xi:include parse=\"text\" href=\"../../extras/PortalDevelopment_PortalLifecycle/is2.java\" xmlns:xi=\"http://www.w3.org/2001/XInclude\" /></programlisting>" + 
"<programlisting>/**" + 
"* The constructor of this class is used to build the tree of UI components that will be aggregated" + 
"* in the portal page. " + 
"* " + 
"* 1) The component is stored in the current PortalRequestContext ThreadLocal " + 
"* 2) The configuration for the portal associated with the current user request is extracted from the " + 
"*    PortalRequestContext" + 
"* 3) Then according to the context path, either a public or private portal is initiated. Usually a public" + 
"*    portal does not contain the left column and only the private one has it." + 
"* 4) The skin to use is setup" + 
"* 5) Finally, the current component is associated with the current portal owner      " + 
"* " + 
"* @throws Exception" + 
"*/" + 
"public UIPortalApplication() throws Exception {" + 
"log = ExoLogger.getLogger(\"portal:UIPortalApplication\"); " + 
"PortalRequestContext  context = PortalRequestContext.getCurrentInstance() ;" + 
"userPortalConfig_ = (UserPortalConfig)context.getAttribute(UserPortalConfig.class);" + 
"if(userPortalConfig_ == null) throw new Exception(\"Can't load user portal config\");" + 
"//  dang.tung - set portal language by user preference -&gt; browser -&gt; default" + 
"String portalLanguage = null ;" + 
"LocaleConfigService localeConfigService  = getApplicationComponent(LocaleConfigService.class) ;" + 
"OrganizationService orgService = getApplicationComponent(OrganizationService.class) ;" + 
"LocaleConfig localeConfig = localeConfigService.getLocaleConfig(userPortalConfig_.getPortalConfig().getLocale());" + 
"String user = context.getRemoteUser();" + 
"if(user!images/= null) {" + 
"UserProfile userProfile = orgService.getUserProfileHandler().findUserProfileByName(user) ;" + 
"if(userProfile!images/= null) {" + 
"portalLanguage = userProfile.getUserInfoMap().get(\"user.language\") ;" + 
"} else {" + 
"if (log.isWarnEnabled()) log.warn(\"Could not load user profile for \" + user + \". Using default portal locale.\");" + 
"}" + 
"}" + 
"localeConfig = localeConfigService.getLocaleConfig(portalLanguage) ;" + 
"if(portalLanguage == null ||!images/portalLanguage.equals(localeConfig.getLanguage())) {" + 
"// if user language no support by portal -&gt; get browser language if no -&gt; get portal" + 
"portalLanguage = context.getRequest().getLocale().getLanguage() ;" + 
"localeConfig = localeConfigService.getLocaleConfig(portalLanguage) ;" + 
"if(!portalLanguage.equals(localeConfig.getLanguage())) {" + 
"localeConfig = localeConfigService.getLocaleConfig(userPortalConfig_.getPortalConfig().getLocale()) ;" + 
"}" + 
"}" + 
"setLocale(localeConfig.getLocale()) ;" + 
"setOrientation(localeConfig.getOrientation());" + 
"context.setUIApplication(this);" + 
"UserACL acl = getApplicationComponent(UserACL.class);" + 
"if(acl.hasAccessControlWorkspacePermission(context.getRemoteUser()))" + 
"addChild(UIControlWorkspace.class, UIPortalApplication.UI_CONTROL_WS_ID, null) ;" + 
"addWorkingWorkspace() ;" + 
"String currentSkin = userPortalConfig_.getPortalConfig().getSkin();" + 
"if(currentSkin!images/= null &amp;&amp; currentSkin.trim().length() &gt; 0) skin_ = currentSkin;" + 
"setOwner(context.getPortalOwner());" + 
"}" + 
"..." + 
"</programlisting>" + 
"      <para>" + 
"         1.1.1 The StateManager" + 
"      </para>" + 
"       " + 
"      <para>" + 
"         The &lt;code&gt;&lt;strong&gt;StateManager&lt;/strong&gt;&lt;/code&gt; here is in the &lt;code&gt;&lt;strong&gt;org.exoplatform.portal.application&lt;/strong&gt;&lt;/code&gt; package which is an abstract class." + 
"      </para>" + 
"<programlisting language=\"Java\" role=\"Java\"><xi:include parse=\"text\" href=\"../../extras/PortalDevelopment_PortalLifecycle/StateManager.java\" xmlns:xi=\"http://www.w3.org/2001/XInclude\" /></programlisting>" + 
"<programlisting>abstract public class StateManager {" + 
"abstract public UIApplication restoreUIRootComponent(WebuiRequestContext context) throws Exception ;" + 
"abstract public void storeUIRootComponent(WebuiRequestContext context) throws Exception ;" + 
"abstract public void expire(String sessionId, WebuiApplication app) throws Exception ;" + 
"}" + 
"</programlisting>" + 
"      <para>" + 
"         The goal of the &lt;code&gt;&lt;strong&gt;StateManager&lt;/strong&gt;&lt;/code&gt; is to abstract the way &lt;code&gt;&lt;strong&gt;UIApplication&lt;/strong&gt;&lt;/code&gt; are stored and restored for all the user session lifetime. The expire method is called from the listener we have introduced before in this chapter." + 
"      </para>" + 
"       " + 
"      <para>" + 
"         1.1.1 The application-life-cycle-listeners" + 
"      </para>" + 
"       " + 
"      <para>" + 
"         There are 2 life-cycle listeners in the Portal, one for the real business logic (&lt;code&gt;&lt;strong&gt;PortalApplicationLifecycle&lt;/strong&gt;&lt;/code&gt;), the other one for some monitoring issues. They both implement the interface &lt;code&gt;&lt;strong&gt;ApplicationLifecycle&lt;E extends RequestContext&gt;&lt;/strong&gt;&lt;/code&gt;." + 
"      </para>" + 
"<programlisting language=\"Java\" role=\"Java\"><xi:include parse=\"text\" href=\"../../extras/PortalDevelopment_PortalLifecycle/default165.java\" xmlns:xi=\"http://www.w3.org/2001/XInclude\" /></programlisting>" + 
"<programlisting>public interface ApplicationLifecycle&lt;E extends RequestContext&gt; {" + 
"public void onInit(Application app) throws Exception  ;" + 
"public void onStartRequest(Application app, E context) throws Exception  ;" + 
"public void onEndRequest(Application app, E context) throws Exception  ;" + 
"public void onDestroy(Application app) throws Exception  ;" + 
"}" + 
"</programlisting>" + 
"      <para>" + 
"         Each registered life-cycle listener will then be able to get events when several states of the portal life-cycle are reached." + 
"      </para>" + 
"       " + 
"      <para>" + 
"         1.1 The Request Handler" + 
"      </para>" + 
"       " + 
"      <para>" + 
"         Once started and fully configured, the portal application WAR can handle HTTP requests." + 
"      </para>" + 
"       " + 
"      <para>" + 
"         The entry point is for sure the PortalController servlet we have already seen in the current chapter and defined in the &lt;code&gt;&lt;strong&gt;web.xml&lt;/strong&gt;&lt;/code&gt; of the portal context." + 
"      </para>" + 
"<programlisting language=\"Java\" role=\"Java\"><xi:include parse=\"text\" href=\"../../extras/PortalDevelopment_PortalLifecycle/default166.java\" xmlns:xi=\"http://www.w3.org/2001/XInclude\" /></programlisting>" + 
"<programlisting>..." + 
"/**" + 
"* This method simply delegates the incoming call to the WebAppController stored in the Portal Container object" + 
"*/" + 
"public void service(HttpServletRequest req, HttpServletResponse res) throws ServletException, IOException {" + 
"try {" + 
"ServletConfig config =  getServletConfig() ;" + 
"RootContainer rootContainer = RootContainer.getInstance() ;" + 
"PortalContainer portalContainer = " + 
"rootContainer.getPortalContainer(config.getServletContext().getServletContextName()) ;" + 
"PortalContainer.setInstance(portalContainer) ;" + 
"WebAppController controller = " + 
"(WebAppController)portalContainer.getComponentInstanceOfType(WebAppController.class) ;" + 
"controller.service(req, res) ;" + 
"} catch (Throwable t){" + 
"throw new ServletException(t) ;" + 
"} finally {" + 
"try {" + 
"PortalContainer.setInstance(null) ;" + 
"} catch (Exception e) {" + 
"log.warn(\"An error occurred while cleaning the ThreadLocal\", e);" + 
"}      " + 
"}" + 
"..." + 
"</programlisting>" + 
"      <para>" + 
"         The &lt;code&gt;&lt;strong&gt;WebAppController&lt;/strong&gt;&lt;/code&gt; is also a simple class on which several handlers can be bound. We have already seen that the &lt;code&gt;&lt;strong&gt;PortalRequestHandler&lt;/strong&gt;&lt;/code&gt; was already added in the init method of the servlet." + 
"      </para>" + 
"<programlisting language=\"Java\" role=\"Java\"><xi:include parse=\"text\" href=\"../../extras/PortalDevelopment_PortalLifecycle/default167.java\" xmlns:xi=\"http://www.w3.org/2001/XInclude\" /></programlisting>" + 
"<programlisting>..." + 
"/**" + 
"* The WebAppControler along with the PortalRequestHandler defined in the init() method of the" + 
"* PortalController servlet (controller.register(new PortalRequestHandler())) also add the" + 
"* CommandHandler object that will listen for the incoming /command path in the URL" + 
"* " + 
"* @throws Exception" + 
"*/" + 
"public WebAppController() throws Exception {" + 
"applications_ = new HashMap&lt;String, Application&gt;() ;" + 
"attributes_ = new HashMap&lt;String, Object&gt;() ;" + 
"handlers_ = new HashMap&lt;String, WebRequestHandler&gt;() ;" + 
"register(new CommandHandler()) ;" + 
"}" + 
"..." + 
"</programlisting>" + 
"      <para>" + 
"         Then the service method - modelled according to the servlet specification is called:" + 
"      </para>" + 
"<programlisting language=\"Java\" role=\"Java\"><xi:include parse=\"text\" href=\"../../extras/PortalDevelopment_PortalLifecycle/default168.java\" xmlns:xi=\"http://www.w3.org/2001/XInclude\" /></programlisting>" + 
"<programlisting>..." + 
"/**" + 
"* This is the first method - in the GateIn web framework - reached by incoming HTTP request, it acts like a" + 
"* servlet service() method" + 
"* " + 
"* According to the servlet path used the correct handler is selected and then executed." + 
"* " + 
"* The event \"exo.application.portal.start-http-request\" and \"exo.application.portal.end-http-request\" are also sent " + 
"* through the ListenerService and several listeners may listen to it." + 
"* " + 
"* Finally a WindowsInfosContainer object using a ThreadLocal (from the portlet-container product) is created " + 
"*/" + 
"public void service(HttpServletRequest req, HttpServletResponse res) throws Exception {" + 
"WebRequestHandler handler = handlers_.get(req.getServletPath()) ;" + 
"if(log.isDebugEnabled()) {" + 
"log.debug(\"Servlet Path: \" + req.getServletPath());    " + 
"log.debug(\"Handler used for this path: \" + handler);" + 
"}" + 
"if(handler!images/= null) {" + 
"ExoContainer portalContainer = ExoContainerContext.getCurrentContainer();" + 
"List&lt;ComponentRequestLifecycle&gt; components = " + 
"portalContainer.getComponentInstancesOfType(ComponentRequestLifecycle.class) ;" + 
"try {" + 
"for(ComponentRequestLifecycle component : components) {" + 
"component.startRequest(portalContainer);" + 
"}" + 
"WindowInfosContainer.createInstance(portalContainer, req.getSession().getId(), req.getRemoteUser());" + 
"handler.execute(this, req, res) ;" + 
"} finally {" + 
"WindowInfosContainer.setInstance(null);" + 
"for(ComponentRequestLifecycle component : components) {" + 
"try {" + 
"component.endRequest(portalContainer);" + 
"} catch (Exception e) {" + 
"log.warn(\"An error occurred while calling the endRequest method\", e);" + 
"}" + 
"}" + 
"}      " + 
"}" + 
"..." + 
"</programlisting>" + 
"      <para>" + 
"         The handler in the portal case is the &lt;code&gt;&lt;strong&gt;PortalRequestHandler&lt;/strong&gt;&lt;/code&gt; which extends &lt;code&gt;&lt;strong&gt;WebRequestHandler&lt;/strong&gt;&lt;/code&gt; and that implement the abstract methods, mainly the execute() one." + 
"      </para>" + 
"<programlisting language=\"Java\" role=\"Java\"><xi:include parse=\"text\" href=\"../../extras/PortalDevelopment_PortalLifecycle/that.java\" xmlns:xi=\"http://www.w3.org/2001/XInclude\" /></programlisting>" + 
"<programlisting>/**" + 
"* Created by The GateIn Platform SAS" + 
"* Mar 21, 2007  " + 
"* " + 
"* Abstract class that one must implement if it want to provide a dedicated handler for a custom servlet path" + 
"* " + 
"* In case of portal the path is /portal but you could return your own from the getPath() method and hence the " + 
"* WebAppController would use your own handler" + 
"* " + 
"* The execute method is to be overideen and the buisness logic should be handled here" + 
"*/" + 
"abstract public class WebRequestHandler {" + 
"public void onInit(WebAppController controller) throws Exception{" + 
"}" + 
"abstract public String[] getPath() ;" + 
"abstract public void execute(WebAppController app,  HttpServletRequest req, HttpServletResponse res) throws Exception ;" + 
"public void onDestroy(WebAppController controler) throws Exception {" + 
"}" + 
"}" + 
"</programlisting>" + 
"      <para>" + 
"         Here is the main class and the entire algorithm is described in the javadoc:" + 
"      </para>" + 
"<programlisting language=\"Java\" role=\"Java\"><xi:include parse=\"text\" href=\"../../extras/PortalDevelopment_PortalLifecycle/handle.java\" xmlns:xi=\"http://www.w3.org/2001/XInclude\" /></programlisting>" + 
"<programlisting>/**" + 
"* Created by The GateIn Platform SAS" + 
"* Dec 9, 2006  " + 
"* " + 
"* This class handle the request that target the portal paths /public and /private" + 
"* " + 
"*/" + 
"public class PortalRequestHandler extends WebRequestHandler {" + 
"protected static Log log = ExoLogger.getLogger(\"portal:PortalRequestHandler\");  " + 
"static String[]  PATHS = {\"/public\", \"/private\"} ;" + 
"public String[] getPath() { return PATHS ; }" + 
"/**" + 
"* This method will handle incoming portal request. It gets a reference to the WebAppController" + 
"* " + 
"* Here are the steps done in the method:" + 
"* " + 
"*   1) set the header Cache-Control to no-cache" + 
"*   2) Get the PortalApplication reference from the controller" + 
"*   3) Create a PortalRequestContext object that is a convenient wrapper on all the request information" + 
"*   4) Set that context in a ThreadLocal to easily access it" + 
"*   5) Get the collection of ApplicationLifecycle referenced in the PortalApplication and defined in the " + 
"*      webui-configuration.xml of the portal application" + 
"*   6) Call onStartRequest() on each ApplicationLifecycle object" + 
"*   7) Get the StateManager object from the PortalApplication (also referenced in the XML file) " + 
"*   8) Use the StateManager to get a reference on the root UI component: UIApplication; the method used is" + 
"*      restoreUIRootComponent(context)" + 
"*   9) If the UI component is not the current one in used in the PortalContextRequest, then replace it" + 
"*   10) Process decode on the PortalApplication" + 
"*   11) Process Action on the PortalApplication" + 
"*   12) Process Render on the UIApplication UI component        " + 
"*   11) call onEndRequest on all the ApplicationLifecycle " + 
"*   12) Release the context from the thread" + 
"* " + 
"*/" + 
"@SuppressWarnings(\"unchecked\")" + 
"public void execute(WebAppController controller,  HttpServletRequest req, HttpServletResponse res) throws Exception {" + 
"log.debug(\"Session ID = \" + req.getSession().getId());" + 
"res.setHeader(\"Cache-Control\", \"no-cache\");" + 
"PortalApplication app =  controller.getApplication(PortalApplication.PORTAL_APPLICATION_ID) ;" + 
"WebuiRequestContext context = new  PortalRequestContext(app, req, res) ;  ;" + 
"WebuiRequestContext.setCurrentInstance(context) ;" + 
"List&lt;ApplicationLifecycle&gt; life-cycles = app.getApplicationLifecycle();" + 
"try {" + 
"for(ApplicationLifecycle life-cycle :  life-cycles) life-cycle.onStartRequest(app, context) ;" + 
"UIApplication uiApp = app.getStateManager().restoreUIRootComponent(context) ;" + 
"if(context.getUIApplication()!images/= uiApp) context.setUIApplication(uiApp) ;" + 
"if(uiApp!images/= null) app.processDecode(uiApp, context) ;" + 
"if(!images/context.isResponseComplete() &amp;&amp;!images/ context.getProcessRender()) {" + 
"app.processAction(uiApp, context) ;" + 
"}" + 
"if(!context.isResponseComplete()) uiApp.processRender(context) ;" + 
"if(uiApp!images/= null) uiApp.setLastAccessApplication(System.currentTimeMillis()) ;" + 
"} catch(Exception ex){" + 
"log.error(\"Error while handling request\",ex);" + 
"} finally {" + 
"try {" + 
"for(ApplicationLifecycle life-cycle :  life-cycles) life-cycle.onEndRequest(app, context) ;" + 
"} catch (Exception exception){" + 
"log.error(\"Error while ending request on all ApplicationLifecycle\",exception);" + 
"}" + 
"WebuiRequestContext.setCurrentInstance(null) ;" + 
"}" + 
"}" + 
"</programlisting>" + 
"      <para>" + 
"         The PortalRequestContext class is an important one as it is used in many places. The PortalRequestContext class wraps most of the request information. Accessing it from everywhere is quite simple as the object is stored in a ThreadLocal one, which means it bound to the current request thread. Hence a single call to WebuiRequestContext.getCurrentContext() will return the correct PortalRequestContext." + 
"      </para>" + 
"       " + 
"      <para>" + 
"         As you can see, the PortalRequestContext extends the WebuiRequestContext one which also extends the abstract class RequestContext. Once again this hierarchy is to abstract the type of context in use , would it be a portal or portlet one." + 
"      </para>" + 
"<programlisting language=\"Java\" role=\"Java\"><xi:include parse=\"text\" href=\"../../extras/PortalDevelopment_PortalLifecycle/is3.java\" xmlns:xi=\"http://www.w3.org/2001/XInclude\" /></programlisting>" + 
"<programlisting>/**" + 
"* Created by The GateIn Platform SAS" + 
"* May 7, 2006" + 
"* " + 
"* This abstract class is a wrapper on top of the request information such as the Locale in use," + 
"* the application (for instance PortalApplication, PortletApplication...), an access to the JavascriptManager" + 
"* as well as a reference to the URLBuilder in use." + 
"* " + 
"* It also contains a ThreadLocal object for an easy access." + 
"* " + 
"*  Context can be nested and hence a getParentAppRequestContext() is also available" + 
"* " + 
"*/" + 
"abstract public class RequestContext {" + 
"final static public String ACTION   = \"op\"; " + 
"private  static ThreadLocal&lt;RequestContext&gt; tlocal_ = new ThreadLocal&lt;RequestContext&gt;()  ;" + 
"private Application app_ ;" + 
"protected RequestContext parentAppRequestContext_ ;" + 
"private Map&lt;String, Object&gt; attributes ;" + 
"protected URLBuilder urlBuilder;" + 
"public RequestContext(Application app) {" + 
"app_ =  app ;" + 
"}" + 
"public Application getApplication() { return  app_ ; }" + 
"public Locale getLocale() { return parentAppRequestContext_.getLocale() ; }" + 
"public ResourceBundle getApplicationResourceBundle() { return null; }" + 
"abstract  public String getRequestParameter(String name)  ;" + 
"abstract  public String[] getRequestParameterValues(String name)  ;" + 
"public  JavascriptManager getJavascriptManager() { " + 
"return getParentAppRequestContext().getJavascriptManager() ;" + 
"}" + 
"abstract public URLBuilder getURLBuilder() ;" + 
"public String getRemoteUser() { return parentAppRequestContext_.getRemoteUser() ; }" + 
"public boolean isUserInRole(String roleUser) { return parentAppRequestContext_.isUserInRole(roleUser) ; }" + 
"abstract public  boolean useAjax() ;" + 
"public boolean getFullRender() { return true; }" + 
"public ApplicationSession getApplicationSession()  {" + 
"throw  new RuntimeException(\"This method is not supported\");" + 
"}" + 
"public Writer getWriter() throws Exception { return parentAppRequestContext_.getWriter() ; }" + 
"final public Object  getAttribute(String name) { " + 
"if(attributes == null) return null ;" + 
"return attributes.get(name) ; " + 
"}" + 
"final public void setAttribute(String name, Object value) {" + 
"if(attributes == null) attributes = new HashMap&lt;String, Object&gt;() ;" + 
"attributes.put(name, value) ; " + 
"}" + 
"final public Object  getAttribute(Class type) { return getAttribute(type.getName()) ; }" + 
"final public void    setAttribute(Class type, Object value) { setAttribute(type.getName(), value) ; }" + 
"public RequestContext getParentAppRequestContext() { return parentAppRequestContext_ ; }" + 
"public void setParentAppRequestContext(RequestContext context) { parentAppRequestContext_ = context ; }" + 
"@SuppressWarnings(\"unchecked\")" + 
"public static &lt;T extends RequestContext&gt; T getCurrentInstance()  { return (T)tlocal_.get() ; }" + 
"public static void setCurrentInstance(RequestContext ctx) { tlocal_.set(ctx) ; }" + 
"}" + 
"</programlisting>" + 
"      <para>" + 
"         The WebuiRequestContext abstract class extends the RequestContext one and adds method for a Web environment such as accesses to the request and response objects or a list of components to update when using an Ajax call. More in the following header of the class:" + 
"      </para>" + 
"<programlisting language=\"Java\" role=\"Java\"><xi:include parse=\"text\" href=\"../../extras/PortalDevelopment_PortalLifecycle/to.java\" xmlns:xi=\"http://www.w3.org/2001/XInclude\" /></programlisting>" + 
"<programlisting>/**" + 
"* Created by The GateIn Platform SAS" + 
"* May 7, 2006" + 
"* " + 
"* The main class to manage the request context in a webui environment" + 
"* " + 
"* It adds:" + 
"* - some access to the root UI component (UIApplication)" + 
"* - access to the request and response objects" + 
"* - information about the current state of the request" + 
"* - the list of object to be updated in an AJAX way" + 
"* - an access to the ResourceResolver bound to an uri scheme" + 
"* - the reference on the StateManager object" + 
"*/" + 
"abstract public class WebuiRequestContext extends RequestContext {" + 
"protected UIApplication  uiApplication_ ;" + 
"protected String sessionId_ ;" + 
"protected ResourceBundle appRes_ ;" + 
"private StateManager stateManager_ ;" + 
"private boolean  responseComplete_ = false ;" + 
"private boolean  processRender_ =  false ;" + 
"private Throwable executionError_ ;" + 
"private ArrayList&lt;UIComponent&gt;  uicomponentToUpdateByAjax ;" + 
"public WebuiRequestContext(Application app) {" + 
"super(app) ;" + 
"}" + 
"public String getSessionId() {  return sessionId_  ; }  " + 
"protected void setSessionId(String id) { sessionId_ = id ;}" + 
"@SuppressWarnings(\"unchecked\")" + 
"public UIApplication getUIApplication() { return uiApplication_ ; }  " + 
"public void  setUIApplication(UIApplication uiApplication) throws Exception { " + 
"uiApplication_ = uiApplication ;" + 
"appRes_ = getApplication().getResourceBundle(uiApplication.getLocale()) ;   " + 
"}" + 
"public Locale getLocale() {  return uiApplication_.getLocale() ;} " + 
"public ResourceBundle getApplicationResourceBundle() {  return appRes_ ; }" + 
"public  String getActionParameterName() {  return WebuiRequestContext.ACTION ; }" + 
"public  String getUIComponentIdParameterName() {  return UIComponent.UICOMPONENT; }" + 
"abstract public String getRequestContextPath() ;" + 
"abstract  public &lt;T&gt; T getRequest() throws Exception ;" + 
"abstract  public &lt;T&gt; T getResponse() throws Exception ;" + 
"public Throwable  getExecutionError()  { return executionError_ ; }" + 
"public List&lt;UIComponent&gt;  getUIComponentToUpdateByAjax() {  return uicomponentToUpdateByAjax ; }" + 
"public boolean isResponseComplete() { return responseComplete_ ;}" + 
"public void    setResponseComplete(boolean b) { responseComplete_ = b ; }" + 
"public boolean getProcessRender() { return processRender_ ;}" + 
"public void    setProcessRender(boolean b) { processRender_ = b; }" + 
"public void addUIComponentToUpdateByAjax(UIComponent uicomponent) {   " + 
"if(uicomponentToUpdateByAjax == null) {" + 
"uicomponentToUpdateByAjax =  new ArrayList&lt;UIComponent&gt;() ;" + 
"}" + 
"uicomponentToUpdateByAjax.add(uicomponent) ;" + 
"}" + 
"public ResourceResolver getResourceResolver(String uri) {" + 
"Application app = getApplication() ;" + 
"while(app!images/= null) {" + 
"ApplicationResourceResolver appResolver = app.getResourceResolver() ;" + 
"ResourceResolver resolver =  appResolver.getResourceResolver(uri) ;" + 
"if(resolver !images/= null)  return resolver ;  " + 
"RequestContext pcontext = getParentAppRequestContext() ;" + 
"if(pcontext!images/= null) app = pcontext.getApplication() ;" + 
"else app =null ;" + 
"}" + 
"return null ;" + 
"}" + 
"public StateManager  getStateManager() { return stateManager_; }" + 
"public void  setStateManager(StateManager manager) { stateManager_ =  manager ; }" + 
"}" + 
"</programlisting>" + 
"      <para>" + 
"         The PortalRequestContext mainly implements the abstract method already shown and only add few ones such as a reference to the portal owner or some information on the current navigation node path and the state of the portal (PUBLIC or PRIVATE ones)" + 
"      </para>" + 
"       " + 
"      <para>" + 
"         The PortalRequestHandler then tries to restore the UI component tree by calling the method restoreUIRootComponent(). The first time, there is nothing to restore and in that case the following part of code in the method is used:" + 
"      </para>" + 
"<programlisting language=\"Java\" role=\"Java\"><xi:include parse=\"text\" href=\"../../extras/PortalDevelopment_PortalLifecycle/type.java\" xmlns:xi=\"http://www.w3.org/2001/XInclude\" /></programlisting>" + 
"<programlisting>    if(state == null) {" + 
"synchronized(uiApplications) {" + 
"ConfigurationManager cmanager = app.getConfigurationManager() ;" + 
"String uirootClass = cmanager.getApplication().getUIRootComponent() ;" + 
"Class type = Thread.currentThread().getContextClassLoader().loadClass(uirootClass) ;" + 
"UserPortalConfig config = getUserPortalConfig(pcontext) ;" + 
"if(config == null) {" + 
"HttpServletResponse response = pcontext.getResponse();" + 
"response.sendRedirect(\"/portal/portal-warning.html\");" + 
"pcontext.setResponseComplete(true);" + 
"return null;" + 
"}" + 
"pcontext.setAttribute(UserPortalConfig.class, config);" + 
"UIPortalApplication uiApplication = " + 
"(UIPortalApplication)app.createUIComponent(type, config.getPortalConfig().getFactoryId(), null, context) ;" + 
"state = new PortalApplicationState(uiApplication, pcontext.getAccessPath()) ;" + 
"uiApplications.put(context.getSessionId(), state) ;" + 
"PortalContainer pcontainer = (PortalContainer) app.getApplicationServiceContainer() ;" + 
"pcontainer.createSessionContainer(context.getSessionId(), uiApplication.getOwner()) ;" + 
"}" + 
"}" + 
"</programlisting>" + 
"      <para>" + 
"         The configuration manager object bound to the PortalApplication one is used to get the type for the root component which is then instanciated. the UserPortalConfig object - which is wrapper around the portal information for a given user - is also used and stored as an attribute in the PortalRequestContext. The UIPortalApplication is then created using the method createUIComponent() that is responsible of instanciating the component but also to configure it." + 
"      </para>" + 
"<programlisting language=\"Java\" role=\"Java\"><xi:include parse=\"text\" href=\"../../extras/PortalDevelopment_PortalLifecycle/default169.java\" xmlns:xi=\"http://www.w3.org/2001/XInclude\" /></programlisting>" + 
"<programlisting>  public &lt;T extends UIComponent&gt; T createUIComponent(Class&lt;T&gt; type, String configId, String id, WebuiRequestContext context)  throws Exception{" + 
"Component config = configManager_.getComponentConfig(type, configId) ;" + 
"if(config == null) {" + 
"throw new Exception(\"Cannot find the configuration for the component \" + type.getName() + \", configId \" +configId) ;  " + 
"}" + 
"T uicomponent =   Util.createObject(type, config.getInitParams());" + 
"uicomponent.setComponentConfig(id, config) ;" + 
"config.getUIComponentLifecycle().init(uicomponent, context) ;" + 
"return type.cast(uicomponent) ;" + 
"}" + 
"</programlisting>" + 
"      <para>" + 
"         The ConfigurationManager method getComponentConfig() returns the Component object filled, it is a wrapper that contains all the information on the parameters for the class. Annotations are used to configure the instance as shown here:" + 
"      </para>" + 
"<programlisting language=\"Java\" role=\"Java\"><xi:include parse=\"text\" href=\"../../extras/PortalDevelopment_PortalLifecycle/default170.java\" xmlns:xi=\"http://www.w3.org/2001/XInclude\" /></programlisting>" + 
"<programlisting>@ComponentConfigs({" + 
"@ComponentConfig (" + 
"life-cycle = UIPortalApplicationLifecycle.class," + 
"template = \"system:/groovy/portal/webui/workspace/UIPortalApplication.gtmpl\"," + 
"initParams = @ParamConfig(name = \"public.showControlWorkspace\", value = \"true\" )" + 
")," + 
"@ComponentConfig (" + 
"id = \"office\" ," + 
"life-cycle = UIPortalApplicationLifecycle.class," + 
"template = \"system:/groovy/portal/webui/workspace/UIPortalApplication.gtmpl\"," + 
"initParams = @ParamConfig( name = \"public.showControlWorkspace\", value = \"false\" )    " + 
")" + 
"})" + 
"</programlisting>" + 
"      <para>" + 
"         The processDecode() method of the UIPortalApplication is doing 3 actions:" + 
"      </para>" + 
"       " + 
"      <itemizedlist>" + 
"         <listitem>" + 
"            <para>" + 
"               if the nodePath is null (case of the first request) a call to super.processDecode(context) is made and we end the method here" + 
"            </para>" + 
"         </listitem>" + 
"          " + 
"         <listitem>" + 
"            <para>" + 
"               if the nodePath exist but is equals to the current one then we also call super and stops here" + 
"            </para>" + 
"         </listitem>" + 
"          " + 
"         <listitem>" + 
"            <para>" + 
"               if the requested nodePath is not equals to the current one , then an event of type PageNodeEvent.CHANGE<emphasis>PAGE</emphasis>NODE is sent to the asociated EventListener; a call to super is then done" + 
"            </para>" + 
"         </listitem>" + 
"      </itemizedlist>" + 
"       " + 
"      <para>" + 
"         The first case it simply does nothing. Note that the super.processDecode() goes up to the UIComponent which also calls the processDecode() method on the Lifecycle object that can be associated with the UIComponent" + 
"      </para>" + 
"       " + 
"      <para>" + 
"         The processAction() method of the UIPortalApplication is then called, as there is no method in the object itself it will call the processAction() of the UIPortalApplicationLifecycle bound to the UI component:" + 
"      </para>" + 
"<programlisting language=\"Java\" role=\"Java\"><xi:include parse=\"text\" href=\"../../extras/PortalDevelopment_PortalLifecycle/default171.java\" xmlns:xi=\"http://www.w3.org/2001/XInclude\" /></programlisting>" + 
"<programlisting>  public void processAction(UIComponent uicomponent, WebuiRequestContext context) throws Exception {" + 
"UIPortalApplication uiApp = (UIPortalApplication) uicomponent ;" + 
"String componentId =  context.getRequestParameter(context.getUIComponentIdParameterName()) ;" + 
"if(componentId == null)  return;" + 
"UIComponent uiTarget =  uiApp.findComponentById(componentId);  " + 
"if(uiTarget == null)  return ;" + 
"if(uiTarget == uicomponent)  super.processAction(uicomponent, context) ;" + 
"uiTarget.processAction(context) ;" + 
"}" + 
"</programlisting>" + 
"      <para>" + 
"         If no uicomponent object is targeted, which is the case the first time (unless a bookmarked link is used) then nothing is done. Otherwise, the targeted component is extracted and a call of its processAction() method is executed." + 
"      </para>" + 
"       " + 
"      <para>" + 
"         Then it is time to render the content and this is done inside the processRender() method. The method of the UIPortalApplication is shown here and it is the one that handles either full portal generation or AJAX request:" + 
"      </para>" + 
"<programlisting language=\"Java\" role=\"Java\"><xi:include parse=\"text\" href=\"../../extras/PortalDevelopment_PortalLifecycle/it.java\" xmlns:xi=\"http://www.w3.org/2001/XInclude\" /></programlisting>" + 
"<programlisting>  /**" + 
"* The processrender() method handles the creation of the returned HTML either for a full" + 
"* page render or in the case of an AJAX call" + 
"* " + 
"* The first request, Ajax is not enabled (means no ajaxRequest parameter in the request) and " + 
"* hence the super.processRender() method is called. This will hence call the processrender() of " + 
"* the Lifecycle object as this method is not overidden in UIPortalApplicationLifecycle. There we " + 
"* simply render the bounded template (groovy usually). Note that bounded template are also defined" + 
"* in component annotations, so for the current class it is UIPortalApplication.gtmpl" + 
"* " + 
"* On second calls, request have the \"ajaxRequest\" parameter set to true in the URL. In that case " + 
"* the algorithm is a bit more complex:" + 
"* " + 
"*    a) The list of components that should be updated is extracted using the " + 
"*       context.getUIComponentToUpdateByAjax() method. That list was setup during the process action" + 
"*       phase" + 
"*    b) Portlets and other UI components to update are split in 2 different lists" + 
"*    c) Portlets full content are returned and set with the tag &lt;div class=\"PortalResponse\"&gt;" + 
"*    d) Block to updates (which are UI components) are set within " + 
"*       the &lt;div class=\"PortalResponseData\"&gt; tag" + 
"*    e) Then the scripts and the skins to reload are set in the &lt;div class=\"PortalResponseScript\"&gt;" + 
"* " + 
"*/" + 
"public void  processRender(WebuiRequestContext context) throws Exception {" + 
"Writer w =  context.getWriter() ;" + 
"if(!context.useAjax()) {" + 
"super.processRender(context) ;" + 
"} else {" + 
"PortalRequestContext pcontext = (PortalRequestContext)context;" + 
"List&lt;UIComponent&gt; list = context.getUIComponentToUpdateByAjax() ;" + 
"List&lt;UIPortlet&gt; uiPortlets = new ArrayList&lt;UIPortlet&gt;(3);" + 
"List&lt;UIComponent&gt; uiDataComponents = new ArrayList&lt;UIComponent&gt;(5);" + 
"if(list!images/= null) {" + 
"for(UIComponent uicomponent : list) {" + 
"if(uicomponent instanceof UIPortlet) uiPortlets.add((UIPortlet)uicomponent) ;" + 
"else uiDataComponents.add(uicomponent) ;" + 
"}" + 
"}" + 
"w.write(\"&lt;div class=\\\"PortalResponse\\\"&gt;\") ;" + 
"if(!context.getFullRender()) {" + 
"for(UIPortlet uiPortlet : uiPortlets) {" + 
"uiPortlet.processRender(context) ;" + 
"}" + 
"}" + 
"w.  write(\"&lt;div class=\\\"PortalResponseData\\\"&gt;\");" + 
"for(UIComponent uicomponent : uiDataComponents) {" + 
"renderBlockToUpdate(uicomponent, context, w) ;" + 
"}" + 
"String skin  = getAddSkinScript(list);" + 
"w.  write(\"&lt;/div&gt;\");" + 
"w.  write(\"&lt;div class=\\\"PortalResponseScript\\\"&gt;\"); " + 
"w.    write(pcontext.getJavascriptManager().getJavascript());" + 
"w.    write(\"GateIn.core.Browser.onLoad();\\n\"); " + 
"w.    write(pcontext.getJavascriptManager().getCustomizedOnLoadScript()) ;" + 
"if(skin!images/= null){" + 
"w.  write(skin) ;" + 
"}" + 
"w.  write(\"&lt;/div&gt;\") ;" + 
"w.write(\"&lt;/div&gt;\") ;" + 
"}" + 
"}" + 
"</programlisting>" + 
"-->" + 
"	<para role=\"RoleCreateBugPara\">" + 
"		<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18717-565934+%5BLatest%5D&amp;cf_build_id=18717-565934+05+Dec+2013+13%3A03+en-US+%5BLatest%5D&amp;comment=Title%3A+Portal+Life-cycle%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"	</para>" + 
"	<section id=\"sect-Application_Server_Start_and_Stop\">" + 
"		<title>Application Server Start and Stop</title>" + 
"		<para>" + 
"			A portal instance is a set of web applications deployed as <filename>EAR</filename> and <filename>WAR</filename> archives. Portlets are also part of an enhanced WAR called a portlet application." + 
"		</para>" + 
"		<para>" + 
"			Red Hat JBoss Portal (JBoss Portal) does not require any particular setup for portlets in most common scenarios, and the <filename>web.xml</filename> file can remain without any JBoss Portal specific configuration." + 
"		</para>" + 
"		<para>" + 
"			During deployment, JBoss Portal will automatically inject a servlet into the portlet application to be able to interact with it. This feature is dependent on the underlying servlet container but will work out of the box on the proposed bundles." + 
"		</para>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18718-565934+%5BLatest%5D&amp;cf_build_id=18718-565934+05+Dec+2013+13%3A03+en-US+%5BLatest%5D&amp;comment=Title%3A+Application+Server+Start+and+Stop%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"		<section id=\"Advanced_WCI_Registration\" remap=\"TID_18719\">" + 
"			<title>Advanced WCI Registration</title>" + 
"			<para>" + 
"				The portal integrates with the web container to perform tasks such as automatic detection and registration of web applications. This is used by the portal container to detect when portlets are deployed and is accomplished through the WCI (Web Container Integration) component." + 
"			</para>" + 
"			<para>" + 
"				Some applications, particularly Spring based portlets, may have requirements that specific servlets are started before any portlets are initialized. Although portlets and servlet initialization order are meant to be independent of each other, Red Hat JBoss Portal provides a method to circumvent limitations imposed by these specific third-party applications." + 
"			</para>" + 
"			<para>" + 
"				As a workaround to this issue, the following advanced features have been integrated into the WCI component;" + 
"			</para>" + 
"			<variablelist>" + 
"				<title>Advanced Features</title>" + 
"				<varlistentry>" + 
"					<term>Disabling Automatic registration</term>" + 
"					<listitem>" + 
"						<para>" + 
"							WCI registers all web applications by default. The portlet container analyzes the registered applications and initializes any portlets contained within them." + 
"						</para>" + 
"						<para>" + 
"							To prevent web applications from being automatically registered by the WCI component, set the <parameter>gatein.wci.native.DisableRegistration</parameter> context-param to <literal>true</literal> in the <filename>web.xml</filename> file of the application." + 
"						</para>" + 
"						<programlisting language=\"XML\">&lt;!-- Disable the Native Application Registration --&gt;" + 
"   &lt;context-param&gt;" + 
"    &lt;param-name&gt;gatein.wci.native.DisableRegistration&lt;/param-name&gt;" + 
"    &lt;param-value&gt;true&lt;/param-value&gt;" + 
"  &lt;/context-param&gt;" + 
"</programlisting>" + 
"					</listitem>" + 
"				</varlistentry>" + 
"				<varlistentry>" + 
"					<term>Manual application deployment.</term>" + 
"					<listitem>" + 
"						<para>" + 
"							If you have disabled the automatic registration of your application in the first step, the portal container will not know about any of the portlets contained and will not be able to initialize them. WCI does have a servlet which can be used to manually register the web application. Since servlets can specify when they are deployed with regards to other servlets, we can use this to specify that the web application gets registered by WCI after another servlet has already been started. This means that the a servlet, for example the Spring servlet, can be initialized before any of the portlets." + 
"						</para>" + 
"						<para>" + 
"							Below is an example <filename>web.xml</filename> file configured to ensure the <systemitem>MyCustomServlet</systemitem> will be initialized before the webapp is registered by WCI:" + 
"						</para>" + 
"						<programlisting language=\"XML\">&lt;!-- Disable the Native Application Registration --&gt;" + 
"   &lt;context-param&gt;" + 
"    &lt;param-name&gt;gatein.wci.native.DisableRegistration&lt;/param-name&gt;" + 
"    &lt;param-value&gt;true&lt;/param-value&gt;" + 
"   &lt;/context-param&gt;" + 
"</programlisting>" + 
"						<programlisting language=\"XML\">&lt;!-- Register the Web Application Manually --&gt;" + 
"   &lt;servlet&gt;" + 
"    &lt;servlet-name&gt;GateInServlet&lt;/servlet-name&gt;" + 
"    &lt;servlet-class&gt;org.gatein.wci.api.GateInServlet&lt;/servlet-class&gt;" + 
"    &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;" + 
"   &lt;/servlet&gt;" + 
"</programlisting>" + 
"						<programlisting language=\"XML\">&lt;!-- Custom Servlet which will be initalised before the webapp is registered in WCI --&gt;" + 
"  &lt;servlet&gt;" + 
"    &lt;servlet-name&gt;MyCustomServlet&lt;/servlet-name&gt;" + 
"    &lt;servlet-class&gt;my.custom.Servlet&lt;/servlet-class&gt;" + 
"    &lt;load-on-startup&gt;0&lt;/load-on-startup&gt;" + 
"  &lt;/servlet&gt;" + 
"</programlisting>" + 
"						<programlisting language=\"XML\">&lt;!-- Servlet Mapping for the Manual Registration --&gt;" + 
"  &lt;servlet-mapping&gt;" + 
"    &lt;servlet-name&gt;GateInServlet&lt;/servlet-name&gt;" + 
"    &lt;url-pattern&gt;/gateinservlet&lt;/url-pattern&gt;" + 
"  &lt;/servlet-mapping&gt;" + 
"</programlisting>" + 
"					</listitem>" + 
"				</varlistentry>" + 
"			</variablelist>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18719-565934+%5BLatest%5D&amp;cf_build_id=18719-565934+05+Dec+2013+13%3A03+en-US+%5BLatest%5D&amp;comment=Title%3A+Advanced+WCI+Registration%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"	</section>" + 
"	<section id=\"The_Command_Servlet\" remap=\"TID_18720\">" + 
"		<title>The Command Servlet</title>" + 
"		<para>" + 
"			The CommandServlet is called by the portlet container for requests to particular portlets, it also includes some <literal>init</literal> code when the portal is launched. This servlet (<literal>org.gatein.wci.api.GateInServlet</literal>) is automatically added during the deployment of each portlet application and mapped to <literal>/gateinservlet</literal>." + 
"		</para>" + 
"		<para>" + 
"			This is equivalent to adding the following into <filename>web.xml</filename>." + 
"		</para>" + 
"		<note>" + 
"			<para>" + 
"				The servlet is already configured. This example is for information only." + 
"			</para>" + 
"		</note>" + 
"		<programlisting language=\"XML\">&lt;servlet&gt;" + 
"  &lt;servlet-name&gt;GateInServlet&lt;/servlet-name&gt;" + 
"  &lt;servlet-class&gt;org.gatein.wci.api.GateInServlet&lt;/servlet-class&gt;" + 
"  &lt;load-on-startup&gt;0&lt;/load-on-startup&gt;" + 
"&lt;/servlet&gt;" + 
"  " + 
"&lt;servlet-mapping&gt;" + 
"  &lt;servlet-name&gt;GateInServlet&lt;/servlet-name&gt;" + 
"  &lt;url-pattern&gt;/gateinservlet&lt;/url-pattern&gt;" + 
"&lt;/servlet-mapping&gt;" + 
"</programlisting>" + 
"		<para>" + 
"			It is possible to filter on the <literal>GateInServlet</literal> by filtering the URL pattern used by the servlet mapping." + 
"		</para>" + 
"		<para>" + 
"			This example would create a servlet filter that calculates the time of execution of a portlet request." + 
"		</para>" + 
"		<para>" + 
"			The filter class:" + 
"		</para>" + 
"		<programlisting language=\"Java\">package org.example;" + 
"" + 
"import java.io.IOException;" + 
"" + 
"import javax.servlet.FilterChain;" + 
"import javax.servlet.FilterConfig;" + 
"import javax.servlet.ServletException;" + 
"import javax.servlet.ServletRequest;" + 
"import javax.servlet.ServletResponse;" + 
"" + 
"public class MyFilter implements javax.servlet.Filter {" + 
"" + 
"  public void doFilter(ServletRequest request, ServletResponse response," + 
"      FilterChain chain) throws IOException, ServletException" + 
"  {" + 
"    long beforeTime = System.currentTimeMillis();" + 
"    chain.doFilter(request, response);" + 
"    long afterTime = System.currentTimeMillis();" + 
"    System.out.println(\"Time to execute the portlet request (in ms): \" + (afterTime - beforeTime));" + 
"  }" + 
"" + 
"  public void init(FilterConfig config) throws ServletException" + 
"  {" + 
"  }" + 
"" + 
"  public void destroy()" + 
"  {" + 
"  }" + 
"" + 
"}" + 
"</programlisting>" + 
"		<para>" + 
"			The Java EE web application configuration file (<filename>web.xml</filename>) of the portlet is the file on which we want to know the time to serve a portlet request." + 
"		</para>" + 
"		<para>" + 
"			As mentioned above nothing specific to Red Hat JBoss Portal needs to be included, only the URL pattern to set has to be known." + 
"		</para>" + 
"		<programlisting language=\"XML\">&lt;?xml version=\"1.0\"?&gt;" + 
"&lt;web-app xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"" + 
"    xsi:schemaLocation=\"http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd\"" + 
"    version=\"2.5\"&gt;" + 
"        " + 
"  &lt;filter&gt;" + 
"    &lt;filter-name&gt;MyFilter&lt;/filter-name&gt;" + 
"    &lt;filter-class&gt;org.example.MyFilter&lt;/filter-class&gt;        " + 
"  &lt;/filter&gt;" + 
"" + 
"  &lt;filter-mapping&gt;" + 
"    &lt;filter-name&gt;MyFilter&lt;/filter-name&gt;" + 
"    &lt;url-pattern&gt;/gateinservlet&lt;/url-pattern&gt;" + 
"    &lt;dispatcher&gt;INCLUDE&lt;/dispatcher&gt;  " + 
"  &lt;/filter-mapping&gt;    " + 
"    " + 
"&lt;/web-app&gt;" + 
"</programlisting>" + 
"		<note>" + 
"			<para>" + 
"				It is important to set <literal>INCLUDE</literal> as dispatcher as the portal will always hit the <literal>GateInServlet</literal> through a request dispatcher. Without this, the filter will not be triggered, unless direct access to a resource (such as an image) is set." + 
"			</para>" + 
"		</note>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18720-565934+%5BLatest%5D&amp;cf_build_id=18720-565934+05+Dec+2013+13%3A03+en-US+%5BLatest%5D&amp;comment=Title%3A+The+Command+Servlet%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"	</section>" + 
"</chapter>" + 
"	<chapter id=\"chap-Portal_Containers\">" + 
"	<title>Portal Containers</title>" + 
"	<remark>" + 
"		Source: https://docs.jboss.org/author/display/GTNPORTAL35/GDG-Portal+Containers+and+Extensions. Content incorporated up to version 23." + 
"	</remark>" + 
"	<para>" + 
"		In a single instance (or cluster) of JBoss Portal, multiple portals can be running and share resources with other portals with two levels of granularity:" + 
"	</para>" + 
"	<variablelist>" + 
"		<title>title</title>" + 
"		<varlistentry>" + 
"			<term>Portal Containers</term>" + 
"			<listitem>" + 
"				<para>" + 
"					A portal container can host multiple sites, and a JBoss Portal instance can host multiple portal containers" + 
"				</para>" + 
"			</listitem>" + 
"		</varlistentry>" + 
"		<varlistentry>" + 
"			<term>Site</term>" + 
"			<listitem>" + 
"				<para>" + 
"					A site can have a unique identity, with its own skin applied to a set of pages." + 
"				</para>" + 
"			</listitem>" + 
"		</varlistentry>" + 
"	</variablelist>" + 
"	<para>" + 
"		The highest-level component of Red Hat JBoss Portal (JBoss Portal) is the <systemitem>portal container</systemitem>. A portal container can host multiple <systemitem>Sites</systemitem>. Those two components have a unique identifier that can be found in the default URL mapping according to the following scheme: <code><ulink url=\"http://localhost:8080/\"/>&lt;portalcontainer&gt;/&lt;site&gt;</code>" + 
"	</para>" + 
"	<para>" + 
"		When creating a website, you can either create a portal container or extend an existing one. Extending an existing portal container, such as the default one provided with JBoss Portal, is the recommended option because you only need to customize it to suit your requirements. Another benefit of the extension method is that upgrades consist of copying the newer distribution archives in place of the originals. This upgrade method is not possible if the distribution archives have been modified." + 
"	</para>" + 
"	<para>" + 
"		While running multiple portal containers is possible, it is recommended to keep those on separate installations. Note that multiple websites can run in a single portal container and share some services." + 
"	</para>" + 
"	<para>" + 
"		The procedure for creating portal containers and extending existing portal containers is similar: create an enterprise archive (EAR) containing configuration details, runnable code and static resources." + 
"	</para>" + 
"	<para role=\"RoleCreateBugPara\">" + 
"		<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18721-565934+%5BLatest%5D&amp;cf_build_id=18721-565934+05+Dec+2013+13%3A03+en-US+%5BLatest%5D&amp;comment=Title%3A+Portal+Containers%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"	</para>" + 
"</chapter>" + 
"	<chapter id=\"chap-Skinning_the_Portal\">" + 
"	<title>Skinning the Portal</title>" + 
"	<!--" + 
"		Source: https://docs.jboss.org/author/display/GTNPORTAL36/GDG-Visual+identity" + 
"	-->" + 
"	<para>" + 
"		A portal visual identity is made of HTML produced as a result of portal aggregation (the components that make a page like columns and rows combined with the content produced by the portlets) and associated CSS files." + 
"	</para>" + 
"	<para>" + 
"		Red Hat JBoss Portal (JBoss Portal) allows to deploy multiple skins consisting of CSS files, which makes it possible to apply styling to the page compositions and components of a page (portlets). Different skins can be applied to the different websites, also if made available to the users, they can choose their preferred skin." + 
"	</para>" + 
"	<para>" + 
"		JBoss Portal provides robust skinning support for the entire portal User Interface (UI). This includes support for skinning all of the common portal elements as well as being able to provide custom skins and window decoration for individual portlets. This has been designed with common graphic resource reuse and ease of development in mind." + 
"	</para>" + 
"	<para role=\"RoleCreateBugPara\">" + 
"		<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18722-565934+%5BLatest%5D&amp;cf_build_id=18722-565934+05+Dec+2013+13%3A03+en-US+%5BLatest%5D&amp;comment=Title%3A+Skinning+the+Portal%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"	</para>" + 
"	<section id=\"Skin_Components\" remap=\"TID_18723\">" + 
"		<title>Skin Components</title>" + 
"		<para>" + 
"			The skin of a page is composed of three separate parts:" + 
"		</para>" + 
"		<variablelist>" + 
"			<varlistentry>" + 
"				<term>Portal Skin</term>" + 
"				<listitem>" + 
"					<para>" + 
"						The portal skin contains the CSS styles for the portal and its various UI components. This must include all UI components, except for window decorators and portlet-specific styles." + 
"					</para>" + 
"				</listitem>" + 
"			</varlistentry>" + 
"			<varlistentry>" + 
"				<term>Window Styles</term>" + 
"				<listitem>" + 
"					<para>" + 
"						The CSS styles associated with the portlet window decorators. The window decorators contain the control buttons and borders surrounding each portlet. Individual portlets can have their own window decorator selected or be rendered without one." + 
"					</para>" + 
"				</listitem>" + 
"			</varlistentry>" + 
"			<varlistentry>" + 
"				<term>Portlet Skins</term>" + 
"				<listitem>" + 
"					<para>" + 
"						The portlet skins dictate how portlets are rendered on the page. There are two ways they can be implemented:" + 
"					</para>" + 
"					<variablelist>" + 
"						<varlistentry>" + 
"							<term>Portlet Specification CSS Classes</term>" + 
"							<listitem>" + 
"								<para>" + 
"									The portlet specification defines a set of CSS classes available to portlets. The portal provides these classes as part of the portal skin. This allows each portal skin to define its own look and feel for these default values." + 
"								</para>" + 
"							</listitem>" + 
"						</varlistentry>" + 
"						<varlistentry>" + 
"							<term>Portlet Skins</term>" + 
"							<listitem>" + 
"								<para>" + 
"									The portal provides a means for portlet CSS files to be loaded based on the current portal skin. This allows a portlet to provide different CSS styles to better match the current portal look and feel. Portlet skins provide a much more customizable CSS experience in contrast to using the portlet specification CSS classes." + 
"								</para>" + 
"							</listitem>" + 
"						</varlistentry>" + 
"					</variablelist>" + 
"				</listitem>" + 
"			</varlistentry>" + 
"		</variablelist>" + 
"		<note>" + 
"			<title>CSS Classes</title>" + 
"			<para>" + 
"				The window decorators and the default portlet specification CSS classes are separate types of skinning components. They must be included as part of the overall portal skin otherwise they will not be displayed correctly." + 
"			</para>" + 
"			<para>" + 
"				A portlet skin does not need to be included as part of the portal skin, and can be included within the portlet's web application." + 
"			</para>" + 
"		</note>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18723-565934+%5BLatest%5D&amp;cf_build_id=18723-565934+05+Dec+2013+13%3A03+en-US+%5BLatest%5D&amp;comment=Title%3A+Skin+Components%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"	</section>" + 
"	<section id=\"sect-Skin_Selection\">" + 
"		<title>Skin Selection</title>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18724-565934+%5BLatest%5D&amp;cf_build_id=18724-565934+05+Dec+2013+13%3A03+en-US+%5BLatest%5D&amp;comment=Title%3A+Skin+Selection%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"		<section id=\"Skin_Selection_Through_the_User_Interface\" remap=\"TID_18725\">" + 
"			<title>Skin Selection Through the User Interface</title>" + 
"			<para>" + 
"				The easiest way to change a skin is to select it through the user interface. An administrator can change the default skin for the portal, or a logged in user can select which skin they would prefer to be displayed." + 
"			</para>" + 
"			<para>" + 
"				For more information about changing skins, see the <citetitle>User Guide</citetitle>." + 
"			</para>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18725-565934+%5BLatest%5D&amp;cf_build_id=18725-565934+05+Dec+2013+13%3A03+en-US+%5BLatest%5D&amp;comment=Title%3A+Skin+Selection+Through+the+User+Interface%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"		<section id=\"Setting_the_Default_Skin_within_the_Configuration_Files\" remap=\"TID_18726\">" + 
"			<title>Setting the Default Skin within the Configuration Files</title>" + 
"			<para>" + 
"				The default skin can also be configured using the portal configuration files. This allows the portal to have the new default skin ready for use when first started." + 
"			</para>" + 
"			<para>" + 
"				The default skin of the portal is called <literal>Default</literal>. To change this value add a <literal>skin</literal> tag in the <literal>JPP_HOME/gatein/gatein.ear/portal.war/WEB-INF/conf/portal/portal/classic/portal.xml</literal> configuration file." + 
"			</para>" + 
"			<example>" + 
"				<title>Changing a Skin Name</title>" + 
"				<para>" + 
"					To change the skin to <literal>MySkin</literal> make the following changes:" + 
"				</para>" + 
"				<programlisting language=\"XML\">&lt;portal-config&gt;" + 
"    &lt;portal-name&gt;classic&lt;/portal-name&gt;" + 
"    &lt;locale&gt;en&lt;/locale&gt;" + 
"    &lt;access-permissions&gt;Everyone&lt;/access-permissions&gt;" + 
"    &lt;edit-permission&gt;*:/platform/administrators&lt;/edit-permission&gt;" + 
"    &lt;skin&gt;MySkin&lt;/skin&gt;" + 
"    ..." + 
"&lt;/portal-config&gt;" + 
"</programlisting>" + 
"			</example>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18726-565934+%5BLatest%5D&amp;cf_build_id=18726-565934+05+Dec+2013+13%3A03+en-US+%5BLatest%5D&amp;comment=Title%3A+Setting+the+Default+Skin+within+the+Configuration+Files%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"	</section>" + 
"	<section id=\"Skins_in_Page_Markups\" remap=\"TID_18727\">" + 
"		<title>Skins in Page Markups</title>" + 
"		<para>" + 
"			A skin contains CSS styles for the portal's components, but also shares components that may be reused in portlets. When the portal generates a portal page markup, it inserts stylesheet links in the page's <literal>head</literal> tag." + 
"		</para>" + 
"		<para>" + 
"			There are two main types of CSS links that will appear in the <literal>head</literal> tag: a link to the portal skin CSS file and a link to the portlet skin CSS files." + 
"		</para>" + 
"		<variablelist>" + 
"			<varlistentry>" + 
"				<term>Portal Skin</term>" + 
"				<listitem>" + 
"					<para>" + 
"						The portal skin will appear as a single link to a CSS file. This link will contain contents from all the portal skin classes merged into one file. This allows the portal skin to be transferred as a single file instead of multiple smaller files." + 
"					</para>" + 
"				</listitem>" + 
"			</varlistentry>" + 
"			<varlistentry>" + 
"				<term>Portlet Skin</term>" + 
"				<listitem>" + 
"					<para>" + 
"						Each portlet on a page may contribute its own style. The link to the portlet skin will only appear on the page if that portlet is loaded on the current page. A page may contain many portlet skin CSS links or none." + 
"					</para>" + 
"				</listitem>" + 
"			</varlistentry>" + 
"		</variablelist>" + 
"		<para>" + 
"			In the code fragment below you can see the two types of links:" + 
"		</para>" + 
"		<programlisting language=\"XML\">&lt;head&gt;" + 
"..." + 
"&lt;!-- The portal skin --&gt;" + 
"&lt;link id=\"CoreSkin\" rel=\"stylesheet\" type=\"text/css\" href=\"/eXoResources/skin/Stylesheet.css\" /&gt;" + 
"" + 
"&lt;!-- The portlet skins --&gt;" + 
"&lt;link id=\"web_FooterPortlet\" rel=\"stylesheet\" type=\"text/css\" href= \"/web/skin/portal/webui/component/UIFooterPortlet/DefaultStylesheet.css\" /&gt;" + 
"&lt;link id=\"web_NavigationPortlet\" rel=\"stylesheet\" type=\"text/css\" href= \"/web/skin/portal/webui/component/UINavigationPortlet/DefaultStylesheet.css\" /&gt;" + 
"&lt;link id=\"web_HomePagePortlet\" rel=\"stylesheet\" type=\"text/css\" href= \"/portal/templates/skin/webui/component/UIHomePagePortlet/DefaultStylesheet.css\" /&gt;" + 
"&lt;link id=\"web_BannerPortlet\" rel=\"stylesheet\" type=\"text/css\" href= \"/web/skin/portal/webui/component/UIBannerPortlet/DefaultStylesheet.css\" /&gt;" + 
"..." + 
"&lt;/head&gt;</programlisting>" + 
"		<note>" + 
"			<para>" + 
"				Window styles and the portlet specification CSS classes are included within the portal skin." + 
"			</para>" + 
"		</note>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18727-565934+%5BLatest%5D&amp;cf_build_id=18727-565934+05+Dec+2013+13%3A03+en-US+%5BLatest%5D&amp;comment=Title%3A+Skins+in+Page+Markups%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"	</section>" + 
"	<section id=\"sect-The_Skin_Service\">" + 
"		<title>The Skin Service</title>" + 
"		<para>" + 
"			The skin service manages the various types of skins. It is responsible for discovering and deploying skins into the portal." + 
"		</para>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18728-565934+%5BLatest%5D&amp;cf_build_id=18728-565934+05+Dec+2013+13%3A03+en-US+%5BLatest%5D&amp;comment=Title%3A+The+Skin+Service%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"		<section id=\"Skin_configuration\" remap=\"TID_18729\">" + 
"			<title>Skin configuration</title>" + 
"			<para>" + 
"				The portal automatically discovers web archives that contain a file descriptor for skins (<filename>JPP_HOME/gatein/gatein.ear/portal.war/WEB-INF/gatein-resources.xml</filename>). This file is responsible for specifying the portal, portlet and window decorators to be deployed into the skin service." + 
"			</para>" + 
"			<para>" + 
"				The full schema is available from <ulink type=\"http\" url=\"http://www.gatein.org/xml/ns/gatein_resources_1_2\"/>." + 
"			</para>" + 
"			<example>" + 
"				<title>Sample Skin</title>" + 
"				<para>" + 
"					This example shows where to define a skin (<literal>MySkin</literal>) with its CSS location, and how to specify some window decorator skins." + 
"				</para>" + 
"				<programlisting language=\"XML\" role=\"XML\">&lt;gatein-resources&gt;" + 
"  &lt;portal-skin&gt;" + 
"    &lt;skin-name&gt;MySkin&lt;/skin-name&gt;" + 
"    &lt;css-path&gt;/skin/myskin.css&lt;/css-path&gt;" + 
"    &lt;overwrite&gt;false&lt;/overwrite&gt;" + 
"  &lt;/portal-skin&gt;" + 
"&lt;/gatein-resources&gt;" + 
"" + 
"  &lt;!-- window style --&gt;" + 
"  &lt;window-style&gt;" + 
"    &lt;style-name&gt;MyThemeCategory&lt;/style-name&gt;" + 
"    &lt;style-theme&gt;" + 
"      &lt;theme-name&gt;MyThemeBlue&lt;/theme-name&gt;" + 
"    &lt;/style-theme&gt;" + 
"    &lt;style-theme&gt;" + 
"      &lt;theme-name&gt;MyThemeRed&lt;/theme-name&gt;" + 
"    &lt;/style-theme&gt;" + 
"    ...</programlisting>" + 
"			</example>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18729-565934+%5BLatest%5D&amp;cf_build_id=18729-565934+05+Dec+2013+13%3A03+en-US+%5BLatest%5D&amp;comment=Title%3A+Skin+configuration%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"		<section id=\"Resource_Request_Filter\" remap=\"TID_18730\">" + 
"			<title>Resource Request Filter</title>" + 
"			<para>" + 
"				Because of the portal's Right-To-Left support, all CSS files need to be retrieved through a Servlet filter and the web application must be configured to activate this filter. This is already done for the <literal>JPP_HOME/gatein/gatein.ear/eXoResources.war</literal> web application which contains the default skin." + 
"			</para>" + 
"			<para>" + 
"				Any new web applications containing skinning CSS files will need to have the following added to the <filename>web.xml</filename> file:" + 
"			</para>" + 
"			<programlisting language=\"XML\" role=\"XML\">&lt;filter&gt;" + 
"  &lt;filter-name&gt;ResourceRequestFilter&lt;/filter-name&gt;" + 
"  &lt;filter-class&gt;org.exoplatform.portal.application.ResourceRequestFilter&lt;/filter-class&gt;" + 
"  &lt;/filter&gt;" + 
"" + 
"  &lt;filter-mapping&gt;" + 
"  &lt;filter-name&gt;ResourceRequestFilter&lt;/filter-name&gt;" + 
"  &lt;url-pattern&gt;*.css&lt;/url-pattern&gt;" + 
"  &lt;/filter-mapping&gt;</programlisting>" + 
"			<note>" + 
"				<para>" + 
"					The <literal>display-name</literal> element must be specified in the <literal>web.xml</literal> for the skinning service to work properly with the web application." + 
"				</para>" + 
"			</note>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18730-565938+%5BLatest%5D&amp;cf_build_id=18730-565938+05+Dec+2013+13%3A08+en-US+%5BLatest%5D&amp;comment=Title%3A+Resource+Request+Filter%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"	</section>" + 
"	<section id=\"The_Default_Skin\" remap=\"TID_18731\">" + 
"		<title>The Default Skin</title>" + 
"		<para>" + 
"			The default skin is located as part of the <literal>JPP_HOME/gatein/gatein.ear/eXoResources.war</literal>. The main files associated with the skin are:" + 
"		</para>" + 
"		<variablelist>" + 
"			<varlistentry>" + 
"				<term>WEB-INF/gatein-resources.xml</term>" + 
"				<listitem>" + 
"					<para>" + 
"						For the default portal skin, this file contains definitions for the portal skin, the window decorations that this skin provides as well as defining some JavaScript resources which are not related to the skin. The default portal skin does not directly define portlet skins. Portlet skins must be provided by the portlets themselves." + 
"					</para>" + 
"				</listitem>" + 
"			</varlistentry>" + 
"			<varlistentry>" + 
"				<term>WEB-INF/web.xml</term>" + 
"				<listitem>" + 
"					<para>" + 
"						For the default portal skin, the <filename>web.xml</filename> of the <filename>eXoResources.war</filename> contains information which is mostly irrelevant to portal skinning. The area of interest in this file is the <literal>resourcerequestfilter</literal> and the settings of the <parameter>display-name</parameter> parameter." + 
"					</para>" + 
"				</listitem>" + 
"			</varlistentry>" + 
"			<varlistentry>" + 
"				<term>skin/Stylesheet.css</term>" + 
"				<listitem>" + 
"					<para>" + 
"						This file is the main portal skin stylesheet. It is the main entry point to the CSS class definitions for the skin. The main content points of this file are:" + 
"					</para>" + 
"					<programlisting language=\"Java\">/* Skin for the main portal page */" + 
"@import url(DefaultSkin/portal/webui/component/UIPortalApplicationSkin.css);" + 
"/* Skins for various portal components */" + 
"@import url(DefaultSkin/webui/component/Stylesheet.css);" + 
"/* Window decoration skins */" + 
"@import url(PortletThemes/Stylesheet.css);" + 
"/* The portlet specification CSS classes */" + 
"@import url(Portlet/Stylesheet.css);</programlisting>" + 
"					<para>" + 
"						This method imports other CSS stylesheet files (some of which may also import further CSS stylesheets) instead of defining all the CSS classes in this one file. Splitting the CSS classes between multiple files allows new skins to reuse parts of the default skin." + 
"					</para>" + 
"					<para>" + 
"						To reuse a CSS stylesheet from the default portal skin you would need to reference the default skin from <literal>eXoResources</literal>. For example; to include the window decorators from the default skin within a new portal skin you would need to use this import:" + 
"					</para>" + 
"					<programlisting language=\"Java\" role=\"Java\">@import url(/eXoResources/skin/Portlet/Stylesheet.css);</programlisting>" + 
"					<note>" + 
"						<para>" + 
"							When the portal skin is added to the page, it merges all the CSS stylesheets into a single file." + 
"						</para>" + 
"					</note>" + 
"				</listitem>" + 
"			</varlistentry>" + 
"		</variablelist>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18731-565938+%5BLatest%5D&amp;cf_build_id=18731-565938+05+Dec+2013+13%3A08+en-US+%5BLatest%5D&amp;comment=Title%3A+The+Default+Skin%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"	</section>" + 
"	<section id=\"sect-Creating_New_Skins\">" + 
"		<title>Creating New Skins</title>" + 
"		<section id=\"Creating_New_Skins\" remap=\"TID_18732\">" + 
"			<title>Creating New Skins</title>" + 
"			<para/>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18732-565938+%5BLatest%5D&amp;cf_build_id=18732-565938+05+Dec+2013+13%3A08+en-US+%5BLatest%5D&amp;comment=Title%3A+Creating+New+Skins%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"		<section id=\"sect-Creating_a_New_Portal_Skin\">" + 
"			<title>Creating a New Portal Skin</title>" + 
"			<para>" + 
"				New portal skins will need to be added to the portal through the skin service. Therefore, the web application which contains the skins will need to be properly configured for the skin service to discover them. This means properly configuring the <literal>ResourceRequestFilter</literal> and <filename>gatein-resources.xml</filename>." + 
"			</para>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18733-565938+%5BLatest%5D&amp;cf_build_id=18733-565938+05+Dec+2013+13%3A08+en-US+%5BLatest%5D&amp;comment=Title%3A+Creating+a+New+Portal+Skin%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"			<section id=\"Portal_Skin_Configuration\" remap=\"TID_18734\">" + 
"				<title>Portal Skin Configuration</title>" + 
"				<para>" + 
"					The <filename>gatein-resources.xml</filename> will need to specify the new portal skin. This will include the name of the new skin, where to locate its CSS stylesheet file and whether to overwrite an existing portal theme with the same name." + 
"				</para>" + 
"				<programlisting language=\"XML\">&lt;gatein-resources&gt;" + 
"  &lt;portal-skin&gt;" + 
"    &lt;skin-name&gt;MySkin&lt;/skin-name&gt;" + 
"    &lt;CSS-path&gt;/skin/myskin.css&lt;/CSS-path&gt;" + 
"    &lt;overwrite&gt;false&lt;/overwrite&gt;" + 
"  &lt;/portal-skin&gt;" + 
"&lt;/gatein-resources&gt;" + 
"</programlisting>" + 
"				<para>" + 
"					The default portal skin and window styles are defined in <filename>JPP_HOME/gatein/gatein.ear/eXoResources.war/WEB-INF/gatein-resources.xml</filename>." + 
"				</para>" + 
"				<note>" + 
"					<title>CSS</title>" + 
"					<para>" + 
"						The CSS for the portal skin needs to contain the CSS for all the window decorations and the portlet specification CSS classes." + 
"					</para>" + 
"				</note>" + 
"				<para role=\"RoleCreateBugPara\">" + 
"					<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18734-565938+%5BLatest%5D&amp;cf_build_id=18734-565938+05+Dec+2013+13%3A08+en-US+%5BLatest%5D&amp;comment=Title%3A+Portal+Skin+Configuration%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"				</para>" + 
"			</section>" + 
"			<section id=\"Portal_Skin_Preview_Icon\" remap=\"TID_18735\">" + 
"				<title>Portal Skin Preview Icon</title>" + 
"				<para>" + 
"					It is possible to see a preview of what the portal will look like when selecting a new skin. This functionality relies on the current skin being updated with skin icons for all other available skins. Otherwise it will not be able to show the previews." + 
"				</para>" + 
"				<para>" + 
"					It is recommended that preview icons of any other skins are included when creating a new portal skin and that the other skins are updated with your new portal skin preview." + 
"				</para>" + 
"				<remark>" + 
"					SCREENSHOT - This screenshot needs to be updated/checked to see if it has been Rebranded to RHJP." + 
"				</remark>" + 
"				<figure>" + 
"					<title id=\"portal-change-skin\">Portal_Skin_Change</title>" + 
"					<mediaobject>" + 
"						<imageobject role=\"html\">" + 
"							<imagedata align=\"center\" fileref=\"images/2904.png\" format=\"PNG\" scale=\"100\" width=\"444\"/>" + 
"						</imageobject>" + 
"						<textobject>" + 
"							<phrase>Screenshot of the Skin Setting window, with the JppSkin selected in the Skins List.</phrase>" + 
"						</textobject>" + 
"					</mediaobject>" + 
"				</figure>" + 
"				<para>" + 
"					The portal skin preview icon is specified through the CSS of the portal skin. In order for the current portal skin to be able to display the preview it must specify a specific CSS class and set the icon as the background." + 
"				</para>" + 
"				<para>" + 
"					For a portal named <literal>MySkin</literal>, it must define the following CSS class:" + 
"				</para>" + 
"				<programlisting language=\"CSS\">.UIChangeSkinForm .UIItemSelector .TemplateContainer .MySkinImage</programlisting>" + 
"				<para>" + 
"					In order for the default skin to display the skin icon for a new portal skin, the preview screenshot must be placed in <filename>JPP_HOME/gatein/gatein.ear/eXoResources.war/skin/DefaultSkin/portal/webui/component/customization/UIChangeSkinForm/background</filename>." + 
"				</para>" + 
"				<para>" + 
"					The CSS stylesheet for the default portal must have the following updated with the preview icon CSS class. For a skin named <literal>MySkin</literal>, the following must be updated <filename>JPP_HOME/gatein/gatein.ear/eXoResources.war/skin/DefaultSkin/portal/webui/component/customization/UIChangeSkinForm/Stylesheet.css</filename>." + 
"				</para>" + 
"				<programlisting language=\"CSS\">.UIChangeSkinForm .UIItemSelector .TemplateContainer .MySkinImage {" + 
"  margin: auto;" + 
"  width: 329px; height:204px;" + 
"  background: url('background/MySkin.jpg') no-repeat top;" + 
"  cursor: pointer ;" + 
"}</programlisting>" + 
"				<para role=\"RoleCreateBugPara\">" + 
"					<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18735-565938+%5BLatest%5D&amp;cf_build_id=18735-565938+05+Dec+2013+13%3A08+en-US+%5BLatest%5D&amp;comment=Title%3A+Portal+Skin+Preview+Icon%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"				</para>" + 
"			</section>" + 
"		</section>" + 
"		<section id=\"sect-Creating_a_New_Window_Style\">" + 
"			<title>Creating a New Window Style</title>" + 
"			<para>" + 
"				Window styles are the CSS applied to window decorations. An administrator can decide which style of decoration is applied to the window when they add a new application or gadget to a page." + 
"			</para>" + 
"			<figure>" + 
"				<title id=\"windowStyles\">Window Styles</title>" + 
"				<mediaobject>" + 
"					<imageobject role=\"html\">" + 
"						<imagedata align=\"center\" fileref=\"images/2930.png\" format=\"PNG\"/>" + 
"					</imageobject>" + 
"					<textobject>" + 
"						<phrase>The Decoration Themes tab selected, with the Simple Style collection highlighted.</phrase>" + 
"					</textobject>" + 
"				</mediaobject>" + 
"			</figure>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18736-565938+%5BLatest%5D&amp;cf_build_id=18736-565938+05+Dec+2013+13%3A08+en-US+%5BLatest%5D&amp;comment=Title%3A+Creating+a+New+Window+Style%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"			<section id=\"Window_Style_Configuration\" remap=\"TID_18737\">" + 
"				<title>Window Style Configuration</title>" + 
"				<para>" + 
"					Window Styles are defined within a <filename>gatein-resources.xml</filename> file which is used by the skin service to deploy the window style into the portal. Window styles can belong in a window style category. This category and the window styles will need to be specified in resources file." + 
"				</para>" + 
"				<para>" + 
"					The following <filename>gatein-resources.xml</filename> fragment will add <literal>MyThemeBlue</literal> and <literal>MyThemeRed</literal> to the <literal>MyTheme</literal> category." + 
"				</para>" + 
"				<programlisting language=\"XML\">&lt;window-style&gt;" + 
"  &lt;style-name&gt;MyTheme&lt;/style-name&gt;" + 
"  &lt;style-theme&gt;" + 
"    &lt;theme-name&gt;MyThemeBlue&lt;/theme-name&gt;" + 
"  &lt;/style-theme&gt;" + 
"  &lt;style-theme&gt;" + 
"    &lt;theme-name&gt;MyThemeRed&lt;/theme-name&gt;" + 
"  &lt;/style-theme&gt;" + 
"&lt;/window-style&gt;</programlisting>" + 
"				<para>" + 
"					The windows style configuration for the default skin is configured in: <filename>JPP_HOME/gatein/gatein.ear/eXoResources.war/WEB-INF/gatein-resources.xml</filename>." + 
"				</para>" + 
"				<note>" + 
"					<title>Window Styles and Portal Skins</title>" + 
"					<para>" + 
"						When a window style is defined in <filename>gatein-resources.xml</filename> file, it will be available to all portlets regardless of whether the current portal skin supports the window decorator or not." + 
"					</para>" + 
"					<para>" + 
"						It is recommended that when a new window decorator is added that it be added to all portal skins or that all portal skins share a common stylesheet for window decorators." + 
"					</para>" + 
"				</note>" + 
"				<para role=\"RoleCreateBugPara\">" + 
"					<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18737-565938+%5BLatest%5D&amp;cf_build_id=18737-565938+05+Dec+2013+13%3A08+en-US+%5BLatest%5D&amp;comment=Title%3A+Window+Style+Configuration%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"				</para>" + 
"			</section>" + 
"			<section id=\"Window_Style_CSS\" remap=\"TID_18738\">" + 
"				<title>Window Style CSS</title>" + 
"				<para>" + 
"					In order for the skin service to display the window decorators, it must have CSS classes specifically named in relation to the window style name. The service will try and display CSS based on this naming convention. The CSS class must be included as part of the current portal skin for the window decorators to be displayed." + 
"				</para>" + 
"				<para>" + 
"					The location of the window decorator CSS classes for the default portal theme is located at: <filename>JPP_HOME/gatein/gatein.ear/eXoResources.war/skin/PortletThemes/Stylesheet.css</filename>." + 
"				</para>" + 
"				<para>" + 
"					Create the CSS file:" + 
"				</para>" + 
"				<programlisting language=\"CSS\">/*---- MyTheme ----*/" + 
".MyTheme .WindowBarCenter .WindowPortletInfo {" + 
"    margin-right: 80px; /* orientation=lt */" + 
"    margin-left: 80px; /* orientation=rt */" + 
"}" + 
"" + 
".MyTheme .WindowBarCenter .ControlIcon {" + 
"    float: right; /* orientation=lt */" + 
"    float: left; /* orientation=rt */" + 
"    width: 24px; " + 
"    height: 17px;" + 
"    cursor: pointer;" + 
"    background-image: url('background/MyTheme.png');" + 
"}" + 
"" + 
".MyTheme .ArrowDownIcon {" + 
"    background-position: center 20px;" + 
"}" + 
"" + 
".MyTheme .OverArrowDownIcon {" + 
"    background-position: center 116px;" + 
"}" + 
"" + 
".MyTheme .MinimizedIcon {" + 
"    background-position: center 44px;" + 
"}" + 
"" + 
".MyTheme .OverMinimizedIcon {" + 
"    background-position: center 140px;" + 
"}" + 
"" + 
".MyTheme .MaximizedIcon {" + 
"    background-position: center 68px;" + 
"}" + 
"" + 
".MyTheme .OverMaximizedIcon {" + 
"    background-position: center 164px;" + 
"}" + 
"" + 
".MyTheme .RestoreIcon {" + 
"    background-position: center 92px;" + 
"}" + 
"" + 
".MyTheme .OverRestoreIcon {" + 
"    background-position: center 188px;" + 
"}" + 
"" + 
".MyTheme .NormalIcon {" + 
"    background-position: center 92px;" + 
"}" + 
"" + 
".MyTheme .OverNormalIcon {" + 
"    background-position: center 188px;" + 
"}" + 
"" + 
".MyTheme .Information {" + 
"    height: 18px; line-height: 18px;" + 
"    vertical-align: middle; font-size: 10px;" + 
"    padding-left: 5px; /* orientation=lt */" + 
"    padding-right: 5px; /* orientation=rt */" + 
"    margin-right: 18px; /* orientation=lt */" + 
"    margin-left: 18px; /* orientation=rt */" + 
"}" + 
"" + 
".MyTheme .WindowBarCenter .WindowPortletIcon {" + 
"    background-position: left top; /* orientation=lt */" + 
"    background-position: right top; /* orientation=rt */" + 
"    padding-left: 20px; /* orientation=lt */" + 
"    padding-right: 20px; /* orientation=rt */" + 
"    height: 16px;" + 
"    line-height: 16px;" + 
"}" + 
"" + 
".MyTheme .WindowBarCenter .PortletName {" + 
"    font-weight: bold;" + 
"    color: #333333;" + 
"    overflow: hidden;" + 
"    white-space: nowrap;" + 
"}" + 
"" + 
".MyTheme .WindowBarLeft {" + 
"    padding-left: 12px;" + 
"    background-image: url('background/MyTheme.png');" + 
"    background-repeat: no-repeat;" + 
"    background-position: left -148px;" + 
"}" + 
"" + 
".MyTheme .WindowBarRight {" + 
"    padding-right: 11px;" + 
"    background-image: url('background/MyTheme.png');" + 
"    background-repeat: no-repeat;" + 
"    background-position: right -119px;" + 
"}" + 
"" + 
".MyTheme .WindowBarCenter {" + 
"    background-image: url('background/MyTheme.png');" + 
"    background-repeat: repeat-x;" + 
"    background-position: left -90px;" + 
"    height: 21px;" + 
"    padding-top: 8px;" + 
"}" + 
"" + 
".MyTheme .MiddleDecoratorLeft {" + 
"    padding-left: 12px;" + 
"    background: url('background/MMyTheme.png') repeat-y left;" + 
"}" + 
"" + 
".MyTheme .MiddleDecoratorRight {" + 
"    padding-right: 11px;" + 
"    background: url('background/MMyTheme.png') repeat-y right;" + 
"}" + 
"" + 
".MyTheme .MiddleDecoratorCenter {" + 
"    background: #ffffff;" + 
"}" + 
"" + 
".MyTheme .BottomDecoratorLeft {" + 
"    padding-left: 12px;" + 
"    background-image: url('background/MyTheme.png');" + 
"    background-repeat: no-repeat;" + 
"    background-position: left -60px;" + 
"}" + 
"" + 
".MyTheme .BottomDecoratorRight {" + 
"    padding-right: 11px;" + 
"    background-image: url('background/MyTheme.png');" + 
"    background-repeat: no-repeat;" + 
"    background-position: right -30px;" + 
"}" + 
"" + 
".MyTheme .BottomDecoratorCenter {" + 
"    background-image: url('background/MyTheme.png');" + 
"    background-repeat: repeat-x;" + 
"    background-position: left top;" + 
"    height: 30px;" + 
"}</programlisting>" + 
"				<para role=\"RoleCreateBugPara\">" + 
"					<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18738-565938+%5BLatest%5D&amp;cf_build_id=18738-565938+05+Dec+2013+13%3A08+en-US+%5BLatest%5D&amp;comment=Title%3A+Window+Style+CSS%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"				</para>" + 
"			</section>" + 
"			<section id=\"How_to_Set_the_Default_Window_Style\" remap=\"TID_18739\">" + 
"				<title>How to Set the Default Window Style</title>" + 
"				<para>" + 
"					To set the default window style to be used for a portal you will need to specify the CSS classes for a theme called <literal>DefaultTheme</literal>." + 
"				</para>" + 
"				<note>" + 
"					<para>" + 
"						You do not need to specify the <literal>DefaultTheme</literal> in <filename>gatein-resources.xml</filename>." + 
"					</para>" + 
"				</note>" + 
"				<para role=\"RoleCreateBugPara\">" + 
"					<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18739-565938+%5BLatest%5D&amp;cf_build_id=18739-565938+05+Dec+2013+13%3A08+en-US+%5BLatest%5D&amp;comment=Title%3A+How+to+Set+the+Default+Window+Style%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"				</para>" + 
"			</section>" + 
"		</section>" + 
"		<section id=\"sect-How_to_Create_New_Portlet_Skins\">" + 
"			<title>How to Create New Portlet Skins</title>" + 
"			<para>" + 
"				Portlets often require additional styles that may not be defined by the portal skin. The portal allows portlets to define additional stylesheets for each portlet and will append the corresponding <literal>link</literal> tags to the <literal>head</literal>." + 
"			</para>" + 
"			<para>" + 
"				The link ID will be of the form <parameter>{portletAppName}{PortletName}</parameter>." + 
"			</para>" + 
"			<para>" + 
"				For example: <literal>ContentPortlet</literal> in <filename>content.war</filename>, will give <parameter>id=\"content<literal>ContentPortlet\"</literal></parameter>." + 
"			</para>" + 
"			<para>" + 
"				To define a new CSS file to include whenever a portlet is available on a portal page, the following fragment is required in <filename>gatein-resources.xml</filename>." + 
"			</para>" + 
"			<programlisting language=\"XML\">&lt;portlet-skin&gt;" + 
"  &lt;application-name&gt;portletAppName&lt;/application-name&gt;" + 
"  &lt;portlet-name&gt;PortletName&lt;/portlet-name&gt;" + 
"  &lt;skin-name&gt;Default&lt;/skin-name&gt;" + 
"  &lt;css-path&gt;/skin/DefaultStylesheet.css&lt;/css-path&gt;" + 
"&lt;/portlet-skin&gt;" + 
"" + 
"&lt;portlet-skin&gt;" + 
"  &lt;application-name&gt;portletAppName&lt;/application-name&gt;" + 
"  &lt;portlet-name&gt;PortletName&lt;/portlet-name&gt;" + 
"  &lt;skin-name&gt;OtherSkin&lt;/skin-name&gt;" + 
"  &lt;css-path&gt;/skin/OtherSkinStylesheet.css&lt;/css-path&gt;" + 
"&lt;/portlet-skin&gt;</programlisting>" + 
"			<para>" + 
"				This will load the <literal>DefaultStylesheet.css</literal> when the Default skin is used and the <literal>OtherSkinStylesheet.css</literal> when the <literal>OtherSkin</literal> is used." + 
"			</para>" + 
"			<note>" + 
"				<title>Updating Portlet Skins</title>" + 
"				<para>" + 
"					If the current portal skin is not defined as one of the supported skins, then the portlet CSS class will not be loaded. It is recommended that portlet skins are updated whenever a new portal skin is created." + 
"				</para>" + 
"			</note>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18740-565938+%5BLatest%5D&amp;cf_build_id=18740-565938+05+Dec+2013+13%3A08+en-US+%5BLatest%5D&amp;comment=Title%3A+How+to+Create+New+Portlet+Skins%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"			<section id=\"Define_a_Custom_CSS_File\" remap=\"TID_18741\">" + 
"				<title>Define a Custom CSS File</title>" + 
"				<para>" + 
"					The portal does not serve CSS files directly, but uses a filter as well as a skin service in order to:" + 
"				</para>" + 
"				<itemizedlist>" + 
"					<listitem>" + 
"						<para>" + 
"							Cache the CSS files." + 
"						</para>" + 
"					</listitem>" + 
"					<listitem>" + 
"						<para>" + 
"							Merge them into one file if possible." + 
"						</para>" + 
"					</listitem>" + 
"					<listitem>" + 
"						<para>" + 
"							Add support for Right-To-Left (RTL) languages." + 
"						</para>" + 
"					</listitem>" + 
"				</itemizedlist>" + 
"				<para>" + 
"					This causes the portal to create a non-functioning CSS link in html-src-code." + 
"				</para>" + 
"				<procedure>" + 
"					<title>Resolving a non-functioning CSS link</title>" + 
"					<step>" + 
"						<para>" + 
"							Add the following files to the custom portlet application:" + 
"						</para>" + 
"						<variablelist>" + 
"							<varlistentry>" + 
"								<term><filename>WEB-INF/gatein-resources.xml</filename>:</term>" + 
"								<listitem>" + 
"									<programlisting language=\"XML\">&lt;portlet-skin&gt;" + 
"        &lt;application-name&gt;custom&lt;/application-name&gt;" + 
"        &lt;portlet-name&gt;test&lt;/portlet-name&gt;" + 
"        &lt;skin-name&gt;Default&lt;/skin-name&gt;" + 
"        &lt;css-path&gt;/css/main.css&lt;/css-path&gt;" + 
"&lt;/portlet-skin&gt;" + 
"</programlisting>" + 
"									<para>" + 
"										The value of the &lt;application-name&gt; element must match the value of the &lt;display-name&gt; element in <filename>web.xml</filename>." + 
"									</para>" + 
"									<para>" + 
"										The value of the &lt;portlet-name&gt; element must match the value of the &lt;portlet-name&gt; element in <filename><replaceable>JPP_HOME</replaceable>/standalone/configuration/gatein/portlet.xml</filename>." + 
"									</para>" + 
"								</listitem>" + 
"							</varlistentry>" + 
"							<varlistentry>" + 
"								<term><filename>WEB-INF/web.xml</filename>:</term>" + 
"								<listitem>" + 
"									<programlisting language=\"XML\">" + 
"&lt;display-name&gt;custom&lt;/display-name&gt;" + 
"" + 
"&lt;filter&gt;" + 
"    &lt;filter-name&gt;ResourceRequestFilter&lt;/filter-name&gt;" + 
"    &lt;filter-class&gt;org.exoplatform.portal.application.ResourceRequestFilter&lt;/filter-class&gt;" + 
"&lt;/filter&gt;" + 
"" + 
"&lt;filter-mapping&gt;" + 
"    &lt;filter-name&gt;ResourceRequestFilter&lt;/filter-name&gt;" + 
"    &lt;url-pattern&gt;/*&lt;/url-pattern&gt;" + 
"&lt;/filter-mapping&gt;" + 
"</programlisting>" + 
"									<para>" + 
"										The value of the &lt;display-name&gt; element must match the value of the &lt;application-name&gt; element in <filename>gatein-resources.xml</filename>." + 
"									</para>" + 
"									<para>" + 
"										The <literal>ResourceRequestFilter</literal> must be added to the custom portlet application for proper CSS file handling within the Portal container." + 
"									</para>" + 
"								</listitem>" + 
"							</varlistentry>" + 
"							<varlistentry>" + 
"								<term><filename>WEB-INF/portlet.xml</filename>:</term>" + 
"								<listitem>" + 
"									<programlisting language=\"XML\">&lt;portlet-name&gt;test&lt;/portlet-name&gt;" + 
"</programlisting>" + 
"									<para>" + 
"										The value of the &lt;portlet-name&gt; element must match the value of the &lt;portlet-name&gt; element in <filename>gatein-resources.xml</filename>." + 
"									</para>" + 
"								</listitem>" + 
"							</varlistentry>" + 
"						</variablelist>" + 
"						<para>" + 
"							The final portlet application will be structured as illustrated below:" + 
"						</para>" + 
"						<programlisting>" + 
"custom.war" + 
"  ├── css" + 
"  │   └── main.css" + 
"  └── WEB-INF" + 
"      ├── classes" + 
"      │     [... custom portlet class ...]" + 
"      ├── gatein-resources.xml" + 
"      ├── portlet.xml" + 
"      └── web.xml" + 
"</programlisting>" + 
"					</step>" + 
"				</procedure>" + 
"				<para role=\"RoleCreateBugPara\">" + 
"					<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18741-565938+%5BLatest%5D&amp;cf_build_id=18741-565938+05+Dec+2013+13%3A08+en-US+%5BLatest%5D&amp;comment=Title%3A+Define+a+Custom+CSS+File%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"				</para>" + 
"			</section>" + 
"			<section id=\"Change_Portlet_Icons\" remap=\"TID_18742\">" + 
"				<title>Change Portlet Icons</title>" + 
"				<para>" + 
"					Each portlet can be registered by a unique icon in the portlet registry or page editor. This icon can be changed by adding an image to the directory of the portlet web application:" + 
"				</para>" + 
"				<itemizedlist>" + 
"					<listitem>" + 
"						<para>" + 
"							<filename>skin/DefaultSkin/portletIcons/<replaceable>portlet_name</replaceable>.png</filename>." + 
"						</para>" + 
"					</listitem>" + 
"				</itemizedlist>" + 
"				<para>" + 
"					To be used correctly the icon must be named after the portlet." + 
"				</para>" + 
"				<para>" + 
"					For example; the icon for an account portlet named <literal>AccountPortlet</literal> would be located at:" + 
"				</para>" + 
"				<itemizedlist>" + 
"					<listitem>" + 
"						<para>" + 
"							<filename>skin/DefaultSkin/portletIcons/AccountPortlet.png</filename>" + 
"						</para>" + 
"					</listitem>" + 
"				</itemizedlist>" + 
"				<note>" + 
"					<title>Portlet Icons Directory</title>" + 
"					<para>" + 
"						You must use <literal>skin/DefaultSkin/portletIcons/</literal> for the directory to store the portlet icon regardless of what skin is going to be used." + 
"					</para>" + 
"				</note>" + 
"				<para role=\"RoleCreateBugPara\">" + 
"					<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18742-565938+%5BLatest%5D&amp;cf_build_id=18742-565938+05+Dec+2013+13%3A08+en-US+%5BLatest%5D&amp;comment=Title%3A+Change+Portlet+Icons%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"				</para>" + 
"			</section>" + 
"		</section>" + 
"		<section id=\"Create_New_Portlet_Specification_CSS_Classes\" remap=\"TID_18743\">" + 
"			<title>Create New Portlet Specification CSS Classes</title>" + 
"			<para>" + 
"				The portlet specification defines a set of default CSS classes that should be available for portlets. These classes are included as part of the portal skin. Please see the portlet specification for a list of the default classes that should be available." + 
"			</para>" + 
"			<para>" + 
"				For the default portal skin, the portlet specification CSS classes are defined in: <filename>JPP_HOME/gatein/gatein.ear/eXoResources.war/skin/Portlet/Stylesheet.css</filename>." + 
"			</para>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18743-565938+%5BLatest%5D&amp;cf_build_id=18743-565938+05+Dec+2013+13%3A08+en-US+%5BLatest%5D&amp;comment=Title%3A+Create+New+Portlet+Specification+CSS+Classes%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"	</section>" + 
"	<section id=\"sect-Tips_and_Tricks\">" + 
"		<title>Tips and Tricks</title>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18744-565938+%5BLatest%5D&amp;cf_build_id=18744-565938+05+Dec+2013+13%3A08+en-US+%5BLatest%5D&amp;comment=Title%3A+Tips+and+Tricks%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"		<section id=\"Easier_CSS_Debugging\" remap=\"TID_18745\">" + 
"			<title>Easier CSS Debugging</title>" + 
"			<para>" + 
"				By default, CSS files are cached and their imports are merged into a single CSS file at the server side. This reduces the number of HTTP requests from the browser to the server." + 
"			</para>" + 
"			<para>" + 
"				The optimization code is quite simple as all the CSS files are parsed at the server start and all the <literal>@import</literal> and <literal>url(...)</literal> references are rewritten to support a single flat file. The result is stored in a cache directly used from the <literal>ResourceRequestFilter</literal>." + 
"			</para>" + 
"			<para>" + 
"				Although the optimization is useful for a production environment, it may be easier to deactivate this optimization while debugging stylesheets. Set the Java system property <literal>exo.product.developing</literal> to <literal>true</literal> to disable the optimization." + 
"			</para>" + 
"			<para>" + 
"				For example, the property can be passed as a JVM parameter with <literal>-D</literal> option when running the portal." + 
"			</para>" + 
"			<warning>" + 
"				<para>" + 
"					This option may cause display bugs in some browsers." + 
"				</para>" + 
"			</warning>" + 
"			<programlisting><command>./bin/standalone.sh -Dexo.product.developing=true</command></programlisting>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18745-565938+%5BLatest%5D&amp;cf_build_id=18745-565938+05+Dec+2013+13%3A08+en-US+%5BLatest%5D&amp;comment=Title%3A+Easier+CSS+Debugging%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"		<section id=\"sect-Some_CSS_Techniques\">" + 
"			<title>Some CSS Techniques</title>" + 
"			<para>" + 
"				It is recommended that users have some experience with CSS before studying Red Hat JBoss Portal (JBoss Portal) CSS." + 
"			</para>" + 
"			<para>" + 
"				JBoss Portal relies heavily on CSS to create the layout and effects for the user interface. Some common techniques for customizing JBoss Portal CSS are explained below." + 
"			</para>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18746-565938+%5BLatest%5D&amp;cf_build_id=18746-565938+05+Dec+2013+13%3A08+en-US+%5BLatest%5D&amp;comment=Title%3A+Some+CSS+Techniques%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"			<section id=\"Decorator_Pattern\" remap=\"TID_18747\">" + 
"				<title>Decorator Pattern</title>" + 
"				<para>" + 
"					The decorator is a pattern to create a contour or a curve around an area. In order to achieve this effect you need to create nine cells. The <literal>BODY</literal> is the central area to decorate. The other eight cells are distributed around the <literal>BODY</literal> cell. You can use the width, height and background image properties to achieve any desired decoration effect." + 
"				</para>" + 
"				<figure>" + 
"					<title id=\"decoratorPattern\">Decorator Pattern</title>" + 
"					<mediaobject>" + 
"						<imageobject>" + 
"							<imagedata fileref=\"images/2842.png\" format=\"PNG\" width=\"418\"/>" + 
"						</imageobject>" + 
"						<textobject>" + 
"							<phrase>A diagram of the Decorator with the BODY cell in the center of a nine-grid pattern. Each cell surrounding the BODY cell describes a different position relative to the BODY cell.</phrase>" + 
"						</textobject>" + 
"					</mediaobject>" + 
"				</figure>" + 
"				<programlisting language=\"HTML\">&lt;div class=\"Parent\"&gt;" + 
"  &lt;div class=\"TopLeft\"&gt;" + 
"    &lt;div class=\"TopRight\"&gt;" + 
"      &lt;div class=\"TopCenter\"&gt;&lt;span&gt;&lt;/span&gt;&lt;/div&gt;" + 
"    &lt;/div&gt;" + 
"  &lt;/div&gt;" + 
"  &lt;div class=\"CenterLeft\"&gt;" + 
"    &lt;div class=\"CenterRight\"&gt;" + 
"      &lt;div class=\"CenterCenter\"&gt;BODY&lt;/div&gt;" + 
"    &lt;/div&gt;" + 
"  &lt;/div&gt;" + 
"  &lt;div class=\"BottomLeft\"&gt;" + 
"    &lt;div class=\"BottomRight\"&gt;" + 
"      &lt;div class=\"BottomCenter\"&gt;&lt;span&gt;&lt;/span&gt;&lt;/div&gt;" + 
"    &lt;/div&gt;" + 
"  &lt;div&gt;" + 
"&lt;/div&gt;" + 
"</programlisting>" + 
"				<para role=\"RoleCreateBugPara\">" + 
"					<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18747-565938+%5BLatest%5D&amp;cf_build_id=18747-565938+05+Dec+2013+13%3A08+en-US+%5BLatest%5D&amp;comment=Title%3A+Decorator+Pattern%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"				</para>" + 
"			</section>" + 
"			<section id=\"Left_Margin_Left_Pattern\" remap=\"TID_18748\">" + 
"				<title>Left Margin Left Pattern</title>" + 
"				<figure>" + 
"					<title id=\"leftMarginPattern\">Left Margin Left Pattern</title>" + 
"					<mediaobject>" + 
"						<imageobject>" + 
"							<imagedata align=\"center\" fileref=\"images/2876.png\" format=\"PNG\"/>" + 
"						</imageobject>" + 
"						<textobject>" + 
"							<phrase>Diagram explaining how Left Margin Left Pattern works, which is described below.</phrase>" + 
"						</textobject>" + 
"					</mediaobject>" + 
"				</figure>" + 
"				<para>" + 
"					Left margin left pattern is a technique to create two blocks side by side. The left block will have a fixed size and the right block will take the rest of the available space. When the user resizes the browser the added or removed space will be taken from the right block." + 
"				</para>" + 
"				<programlisting language=\"HTML\">&lt;div class=\"Parent\"&gt;" + 
"  &lt;div style=\"float: left; width: 100px\"&gt;" + 
"  &lt;/div&gt;" + 
"  &lt;div style=\"margin-left: 105px;\"&gt;" + 
"  &lt;div&gt;" + 
"  &lt;div style=\"clear: left\"&gt;&lt;span&gt;&lt;/span&gt;&lt;/div&gt;" + 
"&lt;/div&gt;</programlisting>" + 
"				<para role=\"RoleCreateBugPara\">" + 
"					<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18748-565938+%5BLatest%5D&amp;cf_build_id=18748-565938+05+Dec+2013+13%3A08+en-US+%5BLatest%5D&amp;comment=Title%3A+Left+Margin+Left+Pattern%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"				</para>" + 
"			</section>" + 
"		</section>" + 
"	</section>" + 
"</chapter>" + 
"	<chapter id=\"chap-Portal_Extension\">" + 
"	<title>Portal Extension</title>" + 
"	<remark>" + 
"		Source taken from: https://docs.jboss.org/author/display/GTNPORTAL35/Portal+Extension" + 
"	</remark>" + 
"	<para>" + 
"		When extending an existing portal container, the name of the portal in the extension configuration is the same as the name of the existing portal container. The configuration (and other aspects) of the existing portal container can therefore be shadowed by the extension. Using this approach, many aspects of an available portal container can be customized, as described in the following sections:" + 
"	</para>" + 
"	<itemizedlist>" + 
"		<listitem>" + 
"			<para>" + 
"				<xref linkend=\"Custom_Groovy_Template_for_a_Portlet\"/>" + 
"			</para>" + 
"		</listitem>" + 
"		<listitem>" + 
"			<para>" + 
"				<xref linkend=\"sect-Custom_Skin_for_a_Portlet\"/>" + 
"			</para>" + 
"		</listitem>" + 
"		<listitem>" + 
"			<para>" + 
"				<xref linkend=\"CSS_and_Images\"/>" + 
"			</para>" + 
"		</listitem>" + 
"		<listitem>" + 
"			<para>" + 
"				<xref linkend=\"sect-Custom_Navigation_and_Pages\"/>" + 
"			</para>" + 
"		</listitem>" + 
"		<listitem>" + 
"			<para>" + 
"				<xref linkend=\"Internationalization_of_Navigation_Nodes\"/>" + 
"			</para>" + 
"		</listitem>" + 
"		<listitem>" + 
"			<para>" + 
"				<xref linkend=\"Custom_Sign-in_Page\"/>" + 
"			</para>" + 
"		</listitem>" + 
"	</itemizedlist>" + 
"	<para role=\"RoleCreateBugPara\">" + 
"		<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18749-565938+%5BLatest%5D&amp;cf_build_id=18749-565938+05+Dec+2013+13%3A08+en-US+%5BLatest%5D&amp;comment=Title%3A+Portal+Extension%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"	</para>" + 
"	<section id=\"How_the_Shadowing_Mechanism_Works\" remap=\"TID_18750\">" + 
"		<title>How the Shadowing Mechanism Works</title>" + 
"		<para>" + 
"			The following diagram illustrates how the shadowing mechanism works." + 
"		</para>" + 
"		<figure id=\"fig-Shadowing_Mechanism\">" + 
"			<title>Shadowing Mechanism</title>" + 
"			<mediaobject>" + 
"				<imageobject>" + 
"					<imagedata fileref=\"images/2907.png\"/>" + 
"				</imageobject>" + 
"				<textobject>" + 
"					<phrase>Diagram explaining how shadowing works, linking portal.war to my-extension.war inside the customized extension, and linking the main gatein/configuration.xml file with the conf/configuration.xml file in the customized extension.</phrase>" + 
"				</textobject>" + 
"			</mediaobject>" + 
"		</figure>" + 
"		<para>" + 
"			The extension's EAR <filename>conf/configuration.xml</filename> file plays a crucial role in shadowing. Consider the following code extract present in the <ulink url=\"https://github.com/gatein/gatein-portal-quickstart/tree/master/gatein-portal-extension\">Portal Extension Quickstart</ulink> . In this code extract, the <code>name</code> parameter of the <code>PortalContainerDefinition</code> is set to <code>\"portal\"</code> . Because a portal container called \"portal\" already exists in the default portal installation, the container name is redefined in this file:" + 
"		</para>" + 
"		<example>" + 
"			<title>configuration.xml</title>" + 
"			<programlisting language=\"XML\">&lt;configuration xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"" + 
"xsi:schemaLocation=\"http://www.exoplaform.org/xml/ns/kernel_1_2.xsd http://www.exoplaform.org/xml/ns/kernel_1_2.xsd\" xmlns=\"http://www.exoplaform.org/xml/ns/kernel_1_2.xsd\"&gt;" + 
" &lt;external-component-plugins&gt;" + 
"     &lt;!-- The full qualified name of the PortalContainerConfig --&gt;" + 
"     &lt;target-component&gt;org.exoplatform.container.definition.PortalContainerConfig&lt;/target-component&gt;" + 
"     &lt;component-plugin&gt;" + 
"         &lt;!-- The name of the plugin --&gt;" + 
"         &lt;name&gt;Add PortalContainer Definitions&lt;/name&gt;" + 
"         &lt;!-- The name of the method to call on the PortalContainerConfig in order to register the PortalContainerDefinitions --&gt;" + 
"         &lt;set-method&gt;registerPlugin&lt;/set-method&gt;" + 
"         &lt;!-- The full qualified name of the PortalContainerDefinitionPlugin --&gt;" + 
"         &lt;type&gt;org.exoplatform.container.definition.PortalContainerDefinitionPlugin&lt;/type&gt;" + 
"         &lt;init-params&gt;" + 
"             &lt;object-param&gt;" + 
"                 &lt;name&gt;portal&lt;/name&gt;" + 
"                 &lt;object type=\"org.exoplatform.container.definition.PortalContainerDefinition\"&gt;" + 
"                     &lt;!-- The name of the Portal Container: note that a Portal Container called \"portal\" " + 
"                          already exists in the default GateIn installation. Therefore, we actually redefine " + 
"                          that existing Portal Container here. --&gt;" + 
"                     &lt;field name=\"name\"&gt;" + 
"                         &lt;string&gt;portal&lt;/string&gt;" + 
"                     &lt;/field&gt;" + 
"                     &lt;!-- The name of the context name of the rest web application --&gt;" + 
"                     &lt;field name=\"restContextName\"&gt;" + 
"                         &lt;string&gt;rest&lt;/string&gt;" + 
"                     &lt;/field&gt;" + 
"                     &lt;!-- The name of the realm --&gt;" + 
"                     &lt;field name=\"realmName\"&gt;" + 
"                         &lt;string&gt;gatein-domain&lt;/string&gt;" + 
"                     &lt;/field&gt;" + 
"                     &lt;field name=\"externalSettingsPath\"&gt;" + 
"                         &lt;string&gt;configuration.properties&lt;/string&gt;" + 
"                     &lt;/field&gt;" + 
"                     &lt;!--" + 
"                         The list of all the context names that are needed to initialize the Portal Container properly." + 
"                         The order of the dependencies will define the initialization order and also the order for " + 
"                         loading resources. When a resource with the same path, say /dir/subdir/resource, is available " + 
"                         in more than one of the listed contexts, the one from the context closest to the end of this list " + 
"                         will be chosen. Here we want the resources available in gatein-portal-extension to win over all " + 
"                         other resources. Therefore we have added gatein-portal-extension as the last element of the list." + 
"                     --&gt;" + 
"                     &lt;field name=\"dependencies\"&gt;" + 
"                         &lt;collection type=\"java.util.ArrayList\"&gt;" + 
"                             &lt;value&gt;" + 
"                                 &lt;string&gt;eXoResources&lt;/string&gt;" + 
"                             &lt;/value&gt;" + 
"                             &lt;value&gt;" + 
"                                 &lt;string&gt;portal&lt;/string&gt;" + 
"                             &lt;/value&gt;" + 
"                             &lt;value&gt;" + 
"                                 &lt;string&gt;dashboard&lt;/string&gt;" + 
"                             &lt;/value&gt;" + 
"                             &lt;value&gt;" + 
"                                 &lt;string&gt;exoadmin&lt;/string&gt;" + 
"                             &lt;/value&gt;" + 
"                             &lt;value&gt;" + 
"                                 &lt;string&gt;eXoGadgets&lt;/string&gt;" + 
"                             &lt;/value&gt;" + 
"                             &lt;value&gt;" + 
"                                 &lt;string&gt;gwtGadgets&lt;/string&gt;" + 
"                             &lt;/value&gt;" + 
"                             &lt;value&gt;" + 
"                                 &lt;string&gt;eXoGadgetServer&lt;/string&gt;" + 
"                             &lt;/value&gt;" + 
"                             &lt;value&gt;" + 
"                                 &lt;string&gt;rest&lt;/string&gt;" + 
"                             &lt;/value&gt;" + 
"                             &lt;value&gt;" + 
"                                &lt;string&gt;web&lt;/string&gt;" + 
"                             &lt;/value&gt;" + 
"                             &lt;value&gt;" + 
"                                 &lt;string&gt;gatein-portal-extension&lt;/string&gt;" + 
"                             &lt;/value&gt;" + 
"                         &lt;/collection&gt;" + 
"                     &lt;/field&gt;" + 
"                 &lt;/object&gt;" + 
"             &lt;/object-param&gt;" + 
"         &lt;/init-params&gt;" + 
"     &lt;/component-plugin&gt;" + 
" &lt;/external-component-plugins&gt;" + 
"&lt;/configuration&gt;</programlisting>" + 
"		</example>" + 
"		<para>" + 
"			Other resources available in an existing portal container can be customized in a similar way. See the following sections for more details." + 
"		</para>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18750-565941+%5BLatest%5D&amp;cf_build_id=18750-565941+05+Dec+2013+13%3A14+en-US+%5BLatest%5D&amp;comment=Title%3A+How+the+Shadowing+Mechanism+Works%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"	</section>" + 
"	<section id=\"Custom_Groovy_Template_for_a_Portlet\" remap=\"TID_18751\">" + 
"		<title>Custom Groovy Template for a Portlet</title>" + 
"		<remark>" + 
"			Source: https://docs.jboss.org/author/display/GTNPORTAL36/Custom+Groovy+Template+for+a+Portlet" + 
"		</remark>" + 
"		<para>" + 
"			Shadowing of built-in Groovy templates is controlled by the order of <code>&lt;dependencies&gt;</code> in the <code>conf/configuration.xml</code> file." + 
"		</para>" + 
"		<para>" + 
"			If a template with the same path (for example, <filename>/dir/subdir/template.gtmpl</filename>) is available in more than one of the dependencies, the template from the context closest to the end of the list of dependencies is chosen. To ensure that the template created in <xref linkend=\"proc-Customizing_HomePagePortlet\"/> is chosen, <code>gatein-portal-extension</code> is added as the last element in the list." + 
"		</para>" + 
"		<note>" + 
"			<para>" + 
"				This section mentions code from the Portal Extension Examples, which is available for download as part of a valid Red Hat subscription." + 
"			</para>" + 
"		</note>" + 
"		<procedure id=\"proc-Customizing_HomePagePortlet\">" + 
"			<title>Customizing HomePagePortlet</title>" + 
"			<para>" + 
"				Complete this procedure to change the text and layout used in the default HomePagePortlet shipped with the platform in a custom extension." + 
"			</para>" + 
"			<step>" + 
"				<para>" + 
"					Copy <filename><replaceable>JPP_HOME</replaceable>/gatein/gatein.ear/portal.war/templates/groovy/webui/component/UIHomePagePortlet.gtmpl</filename>" + 
"				</para>" + 
"			</step>" + 
"			<step>" + 
"				<para>" + 
"					Paste the file into the <filename>war/src/main/webapp/templates/groovy/webui/component/</filename> folder of the extension EAR." + 
"				</para>" + 
"				<important>" + 
"					<para>" + 
"						The file location in the custom extension must mirror the original location of the file for shadowing to work correctly." + 
"					</para>" + 
"				</important>" + 
"			</step>" + 
"			<step>" + 
"				<para>" + 
"					Make the desired changes to the text and layout of the HomePagePortlet in the custom extension." + 
"				</para>" + 
"			</step>" + 
"			<step>" + 
"				<para>" + 
"					Deploy the extension EAR to the portal platform. The HomePagePortlet mirrors the changes made in the custom extension." + 
"				</para>" + 
"			</step>" + 
"		</procedure>" + 
"		<itemizedlist role=\"see-also-list\">" + 
"			<title>See Also:</title>" + 
"			<listitem>" + 
"				<para>" + 
"					<xref linkend=\"How_the_Shadowing_Mechanism_Works\" xrefstyle=\"see-also\"/>" + 
"				</para>" + 
"			</listitem>" + 
"		</itemizedlist>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18751-565941+%5BLatest%5D&amp;cf_build_id=18751-565941+05+Dec+2013+13%3A14+en-US+%5BLatest%5D&amp;comment=Title%3A+Custom+Groovy+Template+for+a+Portlet%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"	</section>" + 
"	<section id=\"sect-Custom_Skin_for_a_Portlet\">" + 
"		<title>Custom Skin for a Portlet</title>" + 
"		<!--" + 
"		Source: https://docs.jboss.org/author/display/GTNPORTAL36/Custom+Skin+for+a+Portlet" + 
"	-->" + 
"		<note>" + 
"			<para>" + 
"				This section mentions code from the Portal Extension Examples available for download as part of a valid Red Hat subscription." + 
"			</para>" + 
"		</note>" + 
"		<para>" + 
"			The same guidelines that apply when creating a new portlet skin also apply when creating a custom skin for a built-in portlet distributed with the portal." + 
"		</para>" + 
"		<para>" + 
"			Declare the skin first in the <code>gatein-resources.xml</code> file, and then create the CSS and other supporting files such as backgrounds." + 
"		</para>" + 
"		<para>" + 
"			Shadowing of built-in Groovy templates is controlled by the order of <code>&lt;dependencies&gt;</code> in the configuration of the Portal Container (or Extension)." + 
"		</para>" + 
"		<para>" + 
"			When the <code>HomePagePortlet</code> skin defined in <filename>web.war</filename> is available in more than one of the dependencies, the template from the context closest to the end of the list of dependencies is chosen. To ensure that the skin available in <code>gatein-portal-extension</code> is chosen, <code>gatein-portal-extension</code> is added as the last element in the list." + 
"		</para>" + 
"		<itemizedlist role=\"see-also-list\">" + 
"			<title>See Also:</title>" + 
"			<listitem>" + 
"				<para>" + 
"					<xref linkend=\"How_the_Shadowing_Mechanism_Works\" xrefstyle=\"see-also\"/>" + 
"				</para>" + 
"			</listitem>" + 
"		</itemizedlist>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18752-565941+%5BLatest%5D&amp;cf_build_id=18752-565941+05+Dec+2013+13%3A14+en-US+%5BLatest%5D&amp;comment=Title%3A+Custom+Skin+for+a+Portlet%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"		<section id=\"gatein-resources.xml\" remap=\"TID_18753\">" + 
"			<title>gatein-resources.xml</title>" + 
"			<para>" + 
"				<code>gatein-resources.xml</code> is located in the <filename>war/src/main/webapp/WEB-INF</filename> sub-folder of the Portal Extension Quickstart project." + 
"			</para>" + 
"			<example>" + 
"				<title>gatein-resources.xml</title>" + 
"				<programlisting language=\"XML\">" + 
"&lt;gatein-resources xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"" + 
"xsi:schemaLocation=\"http://www.gatein.org/xml/ns/gatein_resources_1_3 http://www.gatein.org/xml/ns/gatein_resources_1_3\"" + 
"xmlns=\"http://www.gatein.org/xml/ns/gatein_resources_1_3\"&gt;" + 
"" + 
"&lt;!-- The platform will load this CSS for HomePagePortlet instead of the default one. --&gt;" + 
"&lt;portlet-skin&gt;" + 
"    &lt;!-- " + 
"        The name of the web application containing the portlet.xml file in which" + 
"        BannerPortlet is definded. The application name is usually the same as " + 
"        the name of the WAR through which the application was deployed. " + 
"    --&gt;" + 
"    &lt;application-name&gt;web&lt;/application-name&gt;" + 
"    &lt;!-- &lt;portlet-name&gt; value from the portlet.xml referenced above --&gt;" + 
"    &lt;portlet-name&gt;HomePagePortlet&lt;/portlet-name&gt;" + 
"    &lt;skin-name&gt;Default&lt;/skin-name&gt;" + 
"    &lt;css-path&gt;/templates/skin/webui/component/UIHomePagePortlet/DefaultStylesheet.css&lt;/css-path&gt;" + 
"&lt;/portlet-skin&gt;</programlisting>" + 
"			</example>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18753-565941+%5BLatest%5D&amp;cf_build_id=18753-565941+05+Dec+2013+13%3A14+en-US+%5BLatest%5D&amp;comment=Title%3A+gatein-resources.xml%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"		<section id=\"CSS_and_Images\" remap=\"TID_18754\">" + 
"			<title>CSS and Images</title>" + 
"			<para>" + 
"				In the <filename>gatein-resources.xml</filename> file in <xref linkend=\"gatein-resources.xml\"/>, the custom skin is set to use the CSS file <filename>/templates/skin/webui/component/UIHomePagePortlet/DefaultStylesheet.css</filename> which translates to the Portal Extension Quickstart project <filename>war/src/main/webapp/templates/skin/webui/component/UIHomePagePortlet/DefaultStylesheet.css</filename> file. In the CSS file itself, image files use relative paths as demonstrated in <xref linkend=\"exam-DefaultStylesheetCss\"/>:" + 
"			</para>" + 
"			<example id=\"exam-DefaultStylesheetCss\">" + 
"				<title>DefaultStylesheet.css</title>" + 
"				<programlisting language=\"CSS\">" + 
".UIHomePagePortlet .TRContainer .DotLine {" + 
" background: url(\"DefaultSkin/background/Line.gif\") no-repeat -2px top;" + 
" height: 1px;" + 
" width: 182px;" + 
" margin: 7px auto;" + 
"}</programlisting>" + 
"			</example>" + 
"			<itemizedlist role=\"see-also-list\">" + 
"				<title>See Also:</title>" + 
"				<listitem>" + 
"					<para>" + 
"						<xref linkend=\"chap-Skinning_the_Portal\" xrefstyle=\"see-also\"/>" + 
"					</para>" + 
"				</listitem>" + 
"			</itemizedlist>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18754-565941+%5BLatest%5D&amp;cf_build_id=18754-565941+05+Dec+2013+13%3A14+en-US+%5BLatest%5D&amp;comment=Title%3A+CSS+and+Images%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"	</section>" + 
"	<section id=\"sect-Custom_Navigation_and_Pages\">" + 
"		<title>Custom Navigation and Pages</title>" + 
"		<!--" + 
"		Source: https://docs.jboss.org/author/display/GTNPORTAL35/Custom+Navigation+and+Pages" + 
"	-->" + 
"		<note>" + 
"			<para>" + 
"				This section mentions code from the Portal Extension Examples available for download as part of a valid Red Hat subscription." + 
"			</para>" + 
"		</note>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18755-565941+%5BLatest%5D&amp;cf_build_id=18755-565941+05+Dec+2013+13%3A14+en-US+%5BLatest%5D&amp;comment=Title%3A+Custom+Navigation+and+Pages%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"		<section id=\"portal-configuration.xml\" remap=\"TID_18756\">" + 
"			<title>portal-configuration.xml</title>" + 
"			<para>" + 
"				This configuration file is located in the <filename>war/src/main/webapp/WEB-INF/conf/sample-ext/portal</filename> directory of the Portal Extension quickstart. It is the starting point for navigation customization. There is normally no need to change any configuration in this file, although it is useful to know the location of this file." + 
"			</para>" + 
"			<para>" + 
"				For more information about <filename>portal-configuration.xml</filename>, see the \"Portal Navigation Configuration\" section in the <citetitle>Administration and Configuration Guide</citetitle>." + 
"			</para>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18756-565941+%5BLatest%5D&amp;cf_build_id=18756-565941+05+Dec+2013+13%3A14+en-US+%5BLatest%5D&amp;comment=Title%3A+portal-configuration.xml%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"	</section>" + 
"	<section id=\"Navigation_Node_Types\" remap=\"TID_18757\">" + 
"		<title>Navigation Node Types</title>" + 
"		<para>" + 
"			There are three types of navigation nodes, as described in <xref linkend=\"fig-Types_of_Navigation_Nodes\"/> :" + 
"		</para>" + 
"		<remark>" + 
"			SCREENSHOT - This needs to reflect the new RHJP branding." + 
"		</remark>" + 
"		<figure id=\"fig-Types_of_Navigation_Nodes\">" + 
"			<title>Types of Navigation Nodes</title>" + 
"			<mediaobject>" + 
"				<imageobject>" + 
"					<imagedata fileref=\"images/2874.png\"/>" + 
"				</imageobject>" + 
"				<textobject>" + 
"					<phrase>The JBoss Portal Platform home screen, with the Site tab (1), Group menu (2), and Dashboard menu (3) called out.</phrase>" + 
"				</textobject>" + 
"			</mediaobject>" + 
"		</figure>" + 
"		<variablelist>" + 
"			<varlistentry>" + 
"				<term>1 (Site)</term>" + 
"				<listitem>" + 
"					<para>" + 
"						Navigation nodes of the current site." + 
"					</para>" + 
"				</listitem>" + 
"			</varlistentry>" + 
"			<varlistentry>" + 
"				<term>2 (User Group)</term>" + 
"				<listitem>" + 
"					<para>" + 
"						Navigation nodes of <emphasis>user groups</emphasis> which the current user is a member." + 
"					</para>" + 
"				</listitem>" + 
"			</varlistentry>" + 
"			<varlistentry>" + 
"				<term>3 (User)</term>" + 
"				<listitem>" + 
"					<para>" + 
"						Navigation nodes of the current user." + 
"					</para>" + 
"				</listitem>" + 
"			</varlistentry>" + 
"		</variablelist>" + 
"		<example id=\"exam-Adding_Navigation_Node_Site\">" + 
"			<title>Adding a Navigation Node to a Site Navigation</title>" + 
"			<para>" + 
"				The file <filename>war/src/main/webapp/WEB-INF/conf/sample-ext/portal/portal/classic/navigation.xml</filename> contains the <emphasis role=\"italics\">classic</emphasis> site navigation which can be modified." + 
"			</para>" + 
"			<programlisting language=\"XML\">" + 
"&lt;node-navigation xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"" + 
"xsi:schemaLocation=\"http://www.gatein.org/xml/ns/gatein_objects_1_3 http://www.gatein.org/xml/ns/gatein_objects_1_3\" xmlns=\"http://www.gatein.org/xml/ns/gatein_objects_1_3\"&gt;" + 
" &lt;!-- Priority has no significance in site navigations. But it is required. See GTNPORTAL-2751 --&gt;" + 
" &lt;priority&gt;1&lt;/priority&gt;" + 
" " + 
" &lt;!-- " + 
"     In this file, we are adding a navigation node to the navigation of the site called \"classic\". " + 
"     The site-wide navigation is used e.g. in NavigationPortlet. " + 
"     Visibility of navigation nodes depends on &lt;access-permissions&gt; set in the sibling pages.xml file." + 
"     See also portal.configuration section of the file ../../portal-configuration.xml. " + 
" --&gt;" + 
" &lt;page-nodes&gt;" + 
"     &lt;node&gt;" + 
"         &lt;name&gt;page-just-added&lt;/name&gt;" + 
"         &lt;!-- " + 
"             #{portal.extension.justAddedPage} is  place holder for an internationalized string." + 
"             See WEB-INF/classes/locale/navigation/portal/classic_en.properties" + 
"         --&gt;" + 
"         &lt;label&gt;#{portal.extension.justAddedPage}&lt;/label&gt;" + 
"     &lt;/node&gt;" + 
"&lt;/page-nodes&gt;" + 
"&lt;/node-navigation&gt;</programlisting>" + 
"			<para>" + 
"				By appending the <code>page-just-added</code> navigation node into the portal navigation, the new site navigation node is now visible in the navigation bar." + 
"			</para>" + 
"			<mediaobject>" + 
"				<imageobject>" + 
"					<imagedata fileref=\"images/2889.png\"/>" + 
"				</imageobject>" + 
"				<textobject>" + 
"					<phrase>Navigation menu, with Page Just Added now visible as a site navigation option.</phrase>" + 
"				</textobject>" + 
"			</mediaobject>" + 
"			<para>" + 
"				The <code>page-just-added</code> navigation node refers to <code>portal::classic::justAddedPage</code> which is defined in the <filename>pages.xml</filename> file located in the same directory as the <filename>navigation.xml</filename> file." + 
"			</para>" + 
"			<programlisting language=\"XML\">&lt;page-set xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://www.gatein.org/xml/ns/gatein_objects_1_3 http://www.gatein.org/xml/ns/gatein_objects_1_3\"" + 
" xmlns=\"http://www.gatein.org/xml/ns/gatein_objects_1_3\"&gt;" + 
" &lt;page&gt;" + 
"     &lt;name&gt;justAddedPage&lt;/name&gt;" + 
"     &lt;title&gt;Page Just Added&lt;/title&gt;" + 
"     &lt;!-- This page and any navigation nodes refering to it will be visible to all visitors (signed in or anonymous). --&gt;" + 
"     &lt;access-permissions&gt;Everyone&lt;/access-permissions&gt;" + 
"     &lt;edit-permission&gt;*:/platform/administrators&lt;/edit-permission&gt;" + 
"     &lt;portlet-application&gt;" + 
"         &lt;portlet&gt;" + 
"             &lt;application-ref&gt;gatein-portal-extension&lt;/application-ref&gt;" + 
"             &lt;portlet-ref&gt;JustAddedPortlet&lt;/portlet-ref&gt;" + 
"         &lt;/portlet&gt;" + 
"         &lt;title&gt;Just Added Portlet&lt;/title&gt;" + 
"         &lt;access-permissions&gt;Everyone&lt;/access-permissions&gt;" + 
"         &lt;show-info-bar&gt;false&lt;/show-info-bar&gt;" + 
"         &lt;show-application-state&gt;false&lt;/show-application-state&gt;" + 
"         &lt;show-application-mode&gt;false&lt;/show-application-mode&gt;" + 
"     &lt;/portlet-application&gt;" + 
" &lt;/page&gt;" + 
"&lt;/page-set&gt;</programlisting>" + 
"			<para>" + 
"				Note that <code>page-just-added</code> navigation node and the related pages are visible to all portal visitors (signed in or anonymous) due to <code>&lt;access-permissions&gt;</code> set to <code>Everyone</code> in the above file." + 
"			</para>" + 
"		</example>" + 
"		<example id=\"exam-Adding_Navigation_Node_Group\">" + 
"			<title>Adding a Navigation Node to a Group Navigation</title>" + 
"			<para>" + 
"				To add a new navigation node visible to the members of <code>/platform/administrators</code> group, create a <filename>navigation.xml</filename> file located in <filename>war/src/main/webapp/WEB-INF/conf/sample-ext/portal/group/platform/administrators/navigation.xml</filename>. The name of the user group <code>/platform/administrators</code> forms part of the path." + 
"			</para>" + 
"			<programlisting language=\"XML\">" + 
"&lt;node-navigation xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"" + 
"xsi:schemaLocation=\"http://www.gatein.org/xml/ns/gatein_objects_1_3 http://www.gatein.org/xml/ns/gatein_objects_1_3\" xmlns=\"http://www.gatein.org/xml/ns/gatein_objects_1_3\"&gt;" + 
"&lt;!-- Priority is currently ignored for importMode merge. But it is required. See GTNPORTAL-2751 --&gt;" + 
"&lt;priority&gt;1&lt;/priority&gt;" + 
"" + 
"&lt;page-nodes&gt;" + 
"    &lt;node&gt;" + 
"        &lt;name&gt;admins-sitemap&lt;/name&gt;" + 
"        &lt;!-- " + 
"            #{platform.administrators.adminsSitemap} is  place holder for an internationalized string." + 
"            See WEB-INF/classes/locale/navigation/group/platform/administrators_en.properties" + 
"        --&gt;" + 
"        &lt;label&gt;#{platform.administrators.adminsSitemap}&lt;/label&gt;" + 
"        &lt;page-reference&gt;group::/platform/administrators::adminsSitemap&lt;/page-reference&gt;" + 
"    &lt;/node&gt;" + 
"&lt;/page-nodes&gt;" + 
"&lt;/node-navigation&gt;</programlisting>" + 
"			<para>" + 
"				The navigation node <code>admins-sitemap</code> refers to <code>adminsSitemap</code> page defined in the sibling <filename>pages.xml</filename> file:" + 
"			</para>" + 
"			<programlisting language=\"XML\">&lt;page-set xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://www.gatein.org/xml/ns/gatein_objects_1_3 http://www.gatein.org/xml/ns/gatein_objects_1_3\"" + 
" xmlns=\"http://www.gatein.org/xml/ns/gatein_objects_1_3\"&gt;" + 
"&lt;!-- " + 
"    adminsSitemap page contains just SiteMapPortlet. There is nothing special about it. " + 
"    It is here just to demonstrate the adding of nodes to group navigation in the sibling " + 
"    navigation.xml file." + 
"--&gt;" + 
"&lt;page&gt;" + 
"    &lt;name&gt;adminsSitemap&lt;/name&gt;" + 
"    &lt;title&gt;Admins' Sitemap&lt;/title&gt;" + 
"    &lt;access-permissions&gt;*:/platform/administrators&lt;/access-permissions&gt;" + 
"    &lt;edit-permission&gt;*:/platform/administrators&lt;/edit-permission&gt;" + 
"    &lt;portlet-application&gt;" + 
"        &lt;portlet&gt;" + 
"            &lt;application-ref&gt;web&lt;/application-ref&gt;" + 
"            &lt;portlet-ref&gt;SiteMapPortlet&lt;/portlet-ref&gt;" + 
"        &lt;/portlet&gt;" + 
"        &lt;title&gt;Sitemap&lt;/title&gt;" + 
"        &lt;access-permissions&gt;*:/platform/administrators&lt;/access-permissions&gt;" + 
"        &lt;show-info-bar&gt;false&lt;/show-info-bar&gt;" + 
"    &lt;/portlet-application&gt;" + 
"&lt;/page&gt;" + 
"&lt;/page-set&gt;</programlisting>" + 
"		</example>" + 
"		<example id=\"exam-Adding_Navigation_Node_User\">" + 
"			<title>Adding a Navigation Node to a User Navigation</title>" + 
"			<para>" + 
"				To add a new navigation node visible to a particular user, for example <systemitem>root</systemitem> create a <filename>navigation.xml</filename> file located in <filename>war/src/main/webapp/WEB-INF/conf/sample-ext/portal/user/root/navigation.xml</filename> . Note that the name of the user <code>root</code> is a part of the path." + 
"			</para>" + 
"			<programlisting language=\"XML\">&lt;node-navigation xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"" + 
"xsi:schemaLocation=\"http://www.gatein.org/xml/ns/gatein_objects_1_3 http://www.gatein.org/xml/ns/gatein_objects_1_3\" xmlns=\"http://www.gatein.org/xml/ns/gatein_objects_1_3\"&gt;" + 
"&lt;!-- Priority has no significance in user navigations. But it is required. See GTNPORTAL-2751 --&gt;" + 
"&lt;priority&gt;1&lt;/priority&gt;" + 
"" + 
"&lt;page-nodes&gt;" + 
"    &lt;node&gt;" + 
"        &lt;name&gt;roots-extra-dashboard&lt;/name&gt;" + 
"        &lt;label&gt;#{user.root.RootsExtraDashboard}&lt;/label&gt;" + 
"        &lt;page-reference&gt;user::root::roots-dashboard&lt;/page-reference&gt;" + 
"    &lt;/node&gt;" + 
"&lt;/page-nodes&gt;" + 
"&lt;/node-navigation&gt;</programlisting>" + 
"			<para>" + 
"				The navigation node <code>roots-extra-dashboard</code> refers to <code>roots-dashboard</code> page defined in the sibling <filename>pages.xml</filename> file:" + 
"			</para>" + 
"			<programlisting language=\"XML\">&lt;page-set xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://www.gatein.org/xml/ns/gatein_objects_1_3 http://www.gatein.org/xml/ns/gatein_objects_1_3\"" + 
"xmlns=\"http://www.gatein.org/xml/ns/gatein_objects_1_3\"&gt;" + 
"&lt;!-- " + 
"    roots-dashboard page contains just DashboardPortlet. There is nothing special about it. " + 
"    It is here just to demonstrate the adding of nodes to user navigation in the sibling " + 
"    navigation.xml file." + 
"--&gt;" + 
"&lt;page&gt;" + 
"    &lt;name&gt;roots-dashboard&lt;/name&gt;" + 
"    &lt;title&gt;Root's Extra Dashboard&lt;/title&gt;" + 
"    &lt;access-permissions&gt;*:/platform/users&lt;/access-permissions&gt;" + 
"    &lt;edit-permission&gt;*:/platform/administrators&lt;/edit-permission&gt;" + 
"    &lt;portlet-application&gt;" + 
"        &lt;portlet&gt;" + 
"            &lt;application-ref&gt;dashboard&lt;/application-ref&gt;" + 
"            &lt;portlet-ref&gt;DashboardPortlet&lt;/portlet-ref&gt;" + 
"        &lt;/portlet&gt;" + 
"        &lt;title&gt;Root's Extra Dashboard&lt;/title&gt;" + 
"        &lt;access-permissions&gt;*:/platform/users&lt;/access-permissions&gt;" + 
"        &lt;show-info-bar&gt;false&lt;/show-info-bar&gt;" + 
"    &lt;/portlet-application&gt;" + 
"&lt;/page&gt;" + 
"&lt;/page-set&gt;</programlisting>" + 
"		</example>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18757-565941+%5BLatest%5D&amp;cf_build_id=18757-565941+05+Dec+2013+13%3A14+en-US+%5BLatest%5D&amp;comment=Title%3A+Navigation+Node+Types%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"	</section>" + 
"	<section id=\"Internationalization_of_Navigation_Nodes\" remap=\"TID_18758\">" + 
"		<title>Internationalization of Navigation Nodes</title>" + 
"		<!--" + 
"		Source: https://docs.jboss.org/author/display/GTNPORTAL35/Custom+Internationalization+Resource+Bundles" + 
"	-->" + 
"		<para>" + 
"			As you can see in the above <filename>navigation.xml</filename> files the labels of navigation nodes can be internationalized. The files containing translation resources live under <filename>war/src/main/webapp/WEB-INF/classes/locale/navigation</filename> . The directory layout is similar to the one used for <filename>navigation.xml</filename> and <filename>pages.xml</filename> files:" + 
"		</para>" + 
"		<para>" + 
"			Note that the navigation resource bundles also need to be named in <code>init.resources</code> parameter of <code>BaseResourceBundlePlugin</code> in <filename>war/src/main/webapp/WEB-INF/conf/sample-ext/common/common-configuration.xml</filename> :" + 
"		</para>" + 
"		<example>" + 
"			<title>common-configuration.xml containing declarations of navigation resource bundles</title>" + 
"			<programlisting language=\"XML\">&lt;configuration xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"" + 
"xsi:schemaLocation=\"http://www.exoplaform.org/xml/ns/kernel_1_2.xsd http://www.exoplaform.org/xml/ns/kernel_1_2.xsd\" xmlns=\"http://www.exoplaform.org/xml/ns/kernel_1_2.xsd\"&gt;" + 
"&lt;external-component-plugins&gt;" + 
"    &lt;!-- The full qualified name of the ResourceBundleService --&gt;" + 
"    &lt;target-component&gt;org.exoplatform.services.resources.ResourceBundleService&lt;/target-component&gt;" + 
"    &lt;component-plugin&gt;" + 
"        &lt;!-- The name of the plugin --&gt;" + 
"        &lt;name&gt;Sample ResourceBundle Plugin&lt;/name&gt;" + 
"        &lt;!-- The name of the method to call on the ResourceBundleService in order to register the ResourceBundles --&gt;" + 
"        &lt;set-method&gt;addResourceBundle&lt;/set-method&gt;" + 
"        &lt;!-- The full qualified name of the BaseResourceBundlePlugin --&gt;" + 
"        &lt;type&gt;org.exoplatform.services.resources.impl.BaseResourceBundlePlugin&lt;/type&gt;" + 
"        &lt;init-params&gt;" + 
"            &lt;values-param&gt;" + 
"                &lt;name&gt;init.resources&lt;/name&gt;" + 
"                &lt;description&gt;Initiate the following resources during the first launch.&lt;/description&gt;" + 
"                &lt;value&gt;locale.portal.extension&lt;/value&gt;" + 
"                &lt;value&gt;locale.navigation.user.root&lt;/value&gt;" + 
"                &lt;!-- " + 
"                    Note that we actually do not need to name locale.navigation.portal.classic and " + 
"                    locale.navigation.group.platform.administrators here as they are in init.resources " + 
"                    of the default GateIn installation. But it makes no harm to include them once again here." + 
"                --&gt;" + 
"                &lt;value&gt;locale.navigation.portal.classic&lt;/value&gt;" + 
"                &lt;value&gt;locale.navigation.group.platform.administrators&lt;/value&gt;" + 
"           &lt;/values-param&gt;" + 
"        &lt;/init-params&gt;" + 
"    &lt;/component-plugin&gt;</programlisting>" + 
"		</example>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18758-565941+%5BLatest%5D&amp;cf_build_id=18758-565941+05+Dec+2013+13%3A14+en-US+%5BLatest%5D&amp;comment=Title%3A+Internationalization+of+Navigation+Nodes%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"	</section>" + 
"	<section id=\"Custom_Internationalization_Resource_Bundles\" remap=\"TID_18759\">" + 
"		<title>Custom Internationalization Resource Bundles</title>" + 
"		<!--" + 
"		Source: https://docs.jboss.org/author/display/GTNPORTAL35/Custom+Internationalization+Resource+Bundles" + 
"	-->" + 
"		<note>" + 
"			<para>" + 
"				This section mentions code from the Portal Extension Examples available for download as part of a valid Red Hat subscription." + 
"			</para>" + 
"		</note>" + 
"		<para>" + 
"			There are two resource bundle customization scenarios possible with a Portal Extension:" + 
"		</para>" + 
"		<itemizedlist>" + 
"			<listitem>" + 
"				<para>" + 
"					to add new resource bundle items to the ones available in the default portal installation." + 
"				</para>" + 
"			</listitem>" + 
"			<listitem>" + 
"				<para>" + 
"					to assign new values to resource bundle items available in default portal installation." + 
"				</para>" + 
"			</listitem>" + 
"		</itemizedlist>" + 
"		<para>" + 
"			Both scenarios can be demonstrated using the <code>locale.portal.extension</code> resource bundle. To use this bundle, include both <code>init.resources</code> and <code>portal.resource.names</code> parameters for the <code>BaseResourceBundlePlugin</code>&lt;type&gt; directive in <filename>war/src/main/webapp/WEB-INF/conf/sample-ext/common/common-configuration.xml</filename>." + 
"		</para>" + 
"		<example>" + 
"			<title>common-configuration.xml containing declarations of navigation resource bundles</title>" + 
"			<programlisting language=\"XML\">&lt;configuration xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"" + 
"xsi:schemaLocation=\"http://www.exoplatform.org/xml/ns/kernel_1_2.xsd http://www.exoplatform.org/xml/ns/kernel_1_2.xsd\" xmlns=\"http://www.exoplatform.org/xml/ns/kernel_1_2.xsd\"&gt;" + 
"&lt;external-component-plugins&gt;" + 
"    &lt;!-- The full qualified name of the ResourceBundleService --&gt;" + 
"    &lt;target-component&gt;org.exoplatform.services.resources.ResourceBundleService&lt;/target-component&gt;" + 
"    &lt;component-plugin&gt;" + 
"        &lt;!-- The name of the plugin --&gt;" + 
"        &lt;name&gt;Sample ResourceBundle Plugin&lt;/name&gt;" + 
"        &lt;!-- The name of the method to call on the ResourceBundleService in order to register the ResourceBundles --&gt;" + 
"        &lt;set-method&gt;addResourceBundle&lt;/set-method&gt;" + 
"        &lt;!-- The full qualified name of the BaseResourceBundlePlugin --&gt;" + 
"        &lt;type&gt;org.exoplatform.services.resources.impl.BaseResourceBundlePlugin&lt;/type&gt;" + 
"        &lt;init-params&gt;" + 
"            &lt;values-param&gt;" + 
"                &lt;name&gt;init.resources&lt;/name&gt;" + 
"                &lt;description&gt;Initiate the following resources during the first launch.&lt;/description&gt;" + 
"                &lt;value&gt;locale.portal.extension&lt;/value&gt;" + 
"                &lt;value&gt;locale.navigation.user.root&lt;/value&gt;" + 
"                &lt;!-- " + 
"                    Note that we actually do not need to name locale.navigation.portal.classic and " + 
"                    locale.navigation.group.platform.administrators here as they are in init.resources " + 
"                    of the default GateIn installation. But it makes no harm to include them once again here." + 
"                --&gt;" + 
"                &lt;value&gt;locale.navigation.portal.classic&lt;/value&gt;" + 
"                &lt;value&gt;locale.navigation.group.platform.administrators&lt;/value&gt;" + 
"            &lt;/values-param&gt;" + 
"            &lt;values-param&gt;" + 
"                &lt;name&gt;portal.resource.names&lt;/name&gt;" + 
"                &lt;description&gt;These resources are merged to a single resource bundle which is accessible from anywhere " + 
"                    in GateIn. All these keys are located in the same bundle, which is separated from the navigation " + 
"                    resource bundles.&lt;/description&gt;" + 
"                &lt;value&gt;locale.portal.extension&lt;/value&gt;" + 
"            &lt;/values-param&gt;" + 
"        &lt;/init-params&gt;" + 
"    &lt;/component-plugin&gt;" + 
"&lt;/external-component-plugins&gt;" + 
"&lt;/configuration&gt;</programlisting>" + 
"		</example>" + 
"		<para>" + 
"			The English version of <code>locale.portal.extension</code> is located in <filename>war/src/main/webapp/WEB-INF/classes/locale/portal/extension_en.properties</filename>." + 
"		</para>" + 
"		<example>" + 
"			<title>English version of locale.portal.extension</title>" + 
"			<programlisting>UIHomePagePortlet.Label.Slogan=Congratulations!" + 
"UIHomePagePortlet.Label.SubSlogan=You have just installed the GateIn Portal Extension" + 
"UIHomePagePortlet.Label.Title=Sign in as:</programlisting>" + 
"		</example>" + 
"		<para>" + 
"			<code>UIHomePagePortlet.Label.SubSlogan</code> is a new key which is not normally available in the default portal installation. However, <code>UIHomePagePortlet.Label.Slogan</code> is redefined in <code>extension_en.properties</code> shown above." + 
"		</para>" + 
"		<para>" + 
"			In <filename><replaceable>JPP_HOME</replaceable>/gatein/gatein.ear/web.war/WEB-INF/classes/locale/portlet/web/GroovyPortlet_en.properties</filename> it is already defined as:" + 
"		</para>" + 
"		<programlisting>UIHomePagePortlet.Label.Slogan=The Best of eXo and JBoss Portal&lt;div&gt;GateIn #{gatein.version}&lt;/div&gt;</programlisting>" + 
"		<para>" + 
"			Within the Portal Extension, the new value <code>Congratulations!</code> is appended to it." + 
"		</para>" + 
"		<itemizedlist role=\"see-also-list\">" + 
"			<title>See Also:</title>" + 
"			<listitem>" + 
"				<para>" + 
"					<xref linkend=\"Navigation_Node_Types\" xrefstyle=\"see-also\"/>" + 
"				</para>" + 
"			</listitem>" + 
"		</itemizedlist>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18759-565941+%5BLatest%5D&amp;cf_build_id=18759-565941+05+Dec+2013+13%3A14+en-US+%5BLatest%5D&amp;comment=Title%3A+Custom+Internationalization+Resource+Bundles%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"	</section>" + 
"	<section id=\"Custom_Sign-in_Page\" remap=\"TID_18760\">" + 
"		<title>Custom Sign-in Page</title>" + 
"		<remark>" + 
"			Source: https://docs.jboss.org/author/display/GTNPORTAL35/Custom+Sign+in+Page" + 
"		</remark>" + 
"		<para>" + 
"			It is possible to customize the sign-in page displayed to a user by configuring an extension." + 
"		</para>" + 
"		<procedure id=\"proc-Create_Custom_Sign_in_Page\">" + 
"			<title>Creating a Custom Sign-in Page</title>" + 
"			<step>" + 
"				<para>" + 
"					Copy <filename><replaceable>JPP_HOME</replaceable>/gatein/gatein.ear/portal.war/login/jsp/login.jsp</filename>." + 
"				</para>" + 
"			</step>" + 
"			<step>" + 
"				<para>" + 
"					Create a custom extension, and paste the file into <filename><replaceable>Custom_Extension</replaceable>.ear/<replaceable>Custom-WAR</replaceable>.war/login/jsp/login.jsp</filename>." + 
"				</para>" + 
"				<important>" + 
"					<para>" + 
"						All logic relating to the sign-in page must be contained within the login page. Failing to do this may cause the portal to operate incorrectly." + 
"					</para>" + 
"				</important>" + 
"				<note>" + 
"					<para>" + 
"						The file path must be the same in both the primary path and the extension path for mirroring to work correctly." + 
"					</para>" + 
"				</note>" + 
"			</step>" + 
"			<step>" + 
"				<para>" + 
"					Edit the <filename>login.jsp</filename> file with the customization required for the extension." + 
"				</para>" + 
"			</step>" + 
"		</procedure>" + 
"		<procedure>" + 
"			<title>Creating a Custom Modal Window</title>" + 
"			<step>" + 
"				<para>" + 
"					Copy <filename><replaceable>JPP_HOME</replaceable>/gatein/portal.war/groovy/portal/webui/UILoginForm.gtmpl</filename>." + 
"				</para>" + 
"			</step>" + 
"			<step>" + 
"				<para>" + 
"					In the custom extension created in <xref linkend=\"proc-Create_Custom_Sign_in_Page\"/>, paste the file into <filename><replaceable>Custom_Extension</replaceable>.ear/<replaceable>Custom-WAR</replaceable>.war/groovy/portal/webui/UILoginForm.gtmpl</filename>." + 
"				</para>" + 
"				<note>" + 
"					<para>" + 
"						The file path must be the same in both the primary path and the extension path for mirroring to work correctly." + 
"					</para>" + 
"				</note>" + 
"			</step>" + 
"			<step>" + 
"				<para>" + 
"					Edit the <filename>UILoginForm.gtmpl</filename> file with the customization required for the extension." + 
"				</para>" + 
"			</step>" + 
"		</procedure>" + 
"		<para>" + 
"			Once these modifications are made, deploy the custom extension and test the functionality of the sign in page. See <xref linkend=\"How_the_Shadowing_Mechanism_Works\"/> for more information about which files to modify for shadowing to operate correctly." + 
"		</para>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18760-565941+%5BLatest%5D&amp;cf_build_id=18760-565941+05+Dec+2013+13%3A14+en-US+%5BLatest%5D&amp;comment=Title%3A+Custom+Sign-in+Page%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"	</section>" + 
"</chapter>" + 
"	<chapter id=\"chap-Visual_Identity\">" + 
"	<title>Visual Identity</title>" + 
"	<para>" + 
"		Visual Identity of GateIn Portal is given by applied skins. Skins are packages consisting of CSS files, background images, etc. Skins can be applied to whole Sites or Portlets. It is not only possible to deploy multiple skins and apply different skins to individual Sites and Portlets. The skin selection can also be made accessible to the users so that they can choose their preferred skin." + 
"	</para>" + 
"	<note>" + 
"		<title>Note</title>" + 
"		<para>" + 
"			See <xref linkend=\"chap-Skinning_the_Portal\"/> for further details." + 
"		</para>" + 
"	</note>" + 
"	<para role=\"RoleCreateBugPara\">" + 
"		<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18761-565941+%5BLatest%5D&amp;cf_build_id=18761-565941+05+Dec+2013+13%3A14+en-US+%5BLatest%5D&amp;comment=Title%3A+Visual+Identity%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"	</para>" + 
"</chapter>" + 
"	<chapter id=\"chap-Data_Import_Strategy\">" + 
"	<title>Data Import Strategy</title>" + 
"	<para>" + 
"		In the portal extension mechanism, developers can define an extension that portal data can be customized by." + 
"	</para>" + 
"	<para>" + 
"		There are several cases when it can be useful to define how to customize the Portal data; for example modifying, overwriting or inserting data into the data defined by the Portal. The portal also defines several modes for each case so that a developer only has to clarify the use-case and configure the extensions." + 
"	</para>" + 
"	<para role=\"RoleCreateBugPara\">" + 
"		<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18780-565943+%5BLatest%5D&amp;cf_build_id=18780-565943+05+Dec+2013+13%3A19+en-US+%5BLatest%5D&amp;comment=Title%3A+Data+Import+Strategy%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"	</para>" + 
"	<section id=\"sect-Import_Strategy_Overview\">" + 
"		<title>Import Strategy Overview</title>" + 
"		<para>" + 
"			The 'Portal Data' term referred to in this section can be classified into three types of object data:" + 
"		</para>" + 
"		<itemizedlist>" + 
"			<listitem>" + 
"				<para>" + 
"					Portal Configuration" + 
"				</para>" + 
"			</listitem>" + 
"			<listitem>" + 
"				<para>" + 
"					Page Data" + 
"				</para>" + 
"			</listitem>" + 
"			<listitem>" + 
"				<para>" + 
"					Navigation Data" + 
"				</para>" + 
"			</listitem>" + 
"		</itemizedlist>" + 
"		<para>" + 
"			Each type of object data has some differences in the import strategy." + 
"		</para>" + 
"		<para>" + 
"			The modes for the import strategy include the following:" + 
"		</para>" + 
"		<itemizedlist>" + 
"			<listitem>" + 
"				<para>" + 
"					<literal>CONSERVE</literal>" + 
"				</para>" + 
"			</listitem>" + 
"			<listitem>" + 
"				<para>" + 
"					<literal>MERGE</literal>" + 
"				</para>" + 
"			</listitem>" + 
"			<listitem>" + 
"				<para>" + 
"					<literal>INSERT</literal>" + 
"				</para>" + 
"			</listitem>" + 
"			<listitem>" + 
"				<para>" + 
"					<literal>OVERWRITE</literal>" + 
"				</para>" + 
"			</listitem>" + 
"		</itemizedlist>" + 
"		<para>" + 
"			Each mode indicates how the portal data is imported. The import mode value is set whenever <literal>NewPortalConfigListener</literal> is initiated. If the mode is not set, the default value will be used. The default value is configurable as a UserPortalConfigService initial parameter. For example, the configuration below means that the default value is <literal>MERGE</literal>." + 
"		</para>" + 
"		<programlisting language=\"XML\">" + 
"&lt;component&gt;" + 
"  &lt;key&gt;org.exoplatform.portal.config.UserPortalConfigService&lt;/key&gt;" + 
"  &lt;type&gt;org.exoplatform.portal.config.UserPortalConfigService&lt;/type&gt;" + 
"  &lt;component-plugins&gt;" + 
"  ............" + 
"  &lt;/component-plugins&gt;" + 
"  &lt;init-params&gt;" + 
"    &lt;value-param&gt;" + 
"      &lt;name&gt;default.import.mode&lt;/name&gt;" + 
"      &lt;value&gt;merge&lt;/value&gt;" + 
"    &lt;/value-param&gt;" + 
"  &lt;/init-params&gt;" + 
"&lt;/component&gt;" + 
"" + 
"</programlisting>" + 
"		<para>" + 
"			The way the import strategy works with the import mode will be clearly demonstrated in next sections for each type of data." + 
"		</para>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18781-565943+%5BLatest%5D&amp;cf_build_id=18781-565943+05+Dec+2013+13%3A19+en-US+%5BLatest%5D&amp;comment=Title%3A+Import+Strategy+Overview%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"		<section id=\"Portal_Configuration\" remap=\"TID_18782\">" + 
"			<title>Portal Configuration</title>" + 
"			<para>" + 
"				PortalConfig defines the portal name, permission, layout and some properties of a site. These information are configured in the <emphasis>portal.xml</emphasis>, <emphasis>group.xml</emphasis> or <emphasis>user.xml</emphasis>, depending on the site type. The PortalConfig importer performs a strategy that is based on the mode defined in NewPortalConfigListener, including <literal>CONSERVE</literal>, <literal>INSERT</literal>, <literal>MERGE</literal> or <literal>OVERWRITE</literal>. Let's see how the import mode affects the process of portal data performance:" + 
"			</para>" + 
"			<itemizedlist>" + 
"				<listitem>" + 
"					<para>" + 
"						<literal>CONSERVE</literal>: There is nothing to be imported. The existing data will be kept without any changes." + 
"					</para>" + 
"				</listitem>" + 
"				<listitem>" + 
"					<para>" + 
"						<literal>INSERT</literal>: When the portal configuration does not exist, create the new portal defined by the portal configuration definition. Otherwise, do nothing." + 
"					</para>" + 
"				</listitem>" + 
"				<listitem>" + 
"					<para>" + 
"						<literal>MERGE</literal> and <literal>OVERWRITE</literal> have the same behavior. The new portal configuration will be created if it does not exist or update portal properties defined by the portal configuration definition." + 
"					</para>" + 
"				</listitem>" + 
"			</itemizedlist>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18782-565943+%5BLatest%5D&amp;cf_build_id=18782-565943+05+Dec+2013+13%3A19+en-US+%5BLatest%5D&amp;comment=Title%3A+Portal+Configuration%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"		<section id=\"Page_Data\" remap=\"TID_18783\">" + 
"			<title>Page Data</title>" + 
"			<para>" + 
"				The import mode affects the page data import as the same as PortalConfig." + 
"			</para>" + 
"			<note>" + 
"				<para>" + 
"					If the Import mode is <literal>CONSERVE</literal> or <literal>INSERT</literal>, the data import strategy acts as if in the <literal>MERGE</literal> mode in the first data initialization of the Portal." + 
"				</para>" + 
"			</note>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18783-565943+%5BLatest%5D&amp;cf_build_id=18783-565943+05+Dec+2013+13%3A19+en-US+%5BLatest%5D&amp;comment=Title%3A+Page+Data%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"		<section id=\"Navigation_Data\" remap=\"TID_18784\">" + 
"			<title>Navigation Data</title>" + 
"			<para>" + 
"				The navigation data import strategy is processed at the import mode level as follows:" + 
"			</para>" + 
"			<variablelist>" + 
"				<title>title</title>" + 
"				<varlistentry>" + 
"					<term>CONSERVE</term>" + 
"					<listitem>" + 
"						<para>" + 
"							If the navigation exists, leave it untouched. Otherwise, import data." + 
"						</para>" + 
"					</listitem>" + 
"				</varlistentry>" + 
"				<varlistentry>" + 
"					<term>INSERT</term>" + 
"					<listitem>" + 
"						<para>" + 
"							Insert the missing description data, but add only new nodes. Other modifications remain untouched." + 
"						</para>" + 
"					</listitem>" + 
"				</varlistentry>" + 
"				<varlistentry>" + 
"					<term>MERGE</term>" + 
"					<listitem>" + 
"						<para>" + 
"							Merge the description data, add missing nodes and update existing nodes." + 
"						</para>" + 
"					</listitem>" + 
"				</varlistentry>" + 
"				<varlistentry>" + 
"					<term>OVERWRITE</term>" + 
"					<listitem>" + 
"						<para>" + 
"							Always destroy the previous data and recreate it." + 
"						</para>" + 
"					</listitem>" + 
"				</varlistentry>" + 
"			</variablelist>" + 
"			<para>" + 
"				In the portal navigation structure, each navigation can be referred to a tree which each node links to a page content. Each node contains some description data, such as label, icon, page reference, and more. Therefore, the portal provides a way to insert or merge new data to the initiated navigation tree or a subtree." + 
"			</para>" + 
"			<figure>" + 
"				<title id=\"DataImportStrategy-navigation1\">Data Import Strategy Navigation1</title>" + 
"				<mediaobject>" + 
"					<imageobject>" + 
"						<imagedata align=\"center\" fileref=\"images/2887.png\" format=\"PNG\" width=\"444\"/>" + 
"					</imageobject>" + 
"					<textobject>" + 
"						<phrase>Diagram of the first data import strategy, with the foo, daa, and juu node labels branching off from the root node.</phrase>" + 
"					</textobject>" + 
"				</mediaobject>" + 
"			</figure>" + 
"			<para>" + 
"				The merge strategy performs the recursive comparison of child nodes between the existing persistent nodes of a navigation and the transient nodes provided by a descriptor:" + 
"			</para>" + 
"			<procedure>" + 
"				<step>" + 
"					<para>" + 
"						Start with the root nodes (which is the effective root node or another node if the parent URI is specified)." + 
"					</para>" + 
"				</step>" + 
"				<step>" + 
"					<para>" + 
"						Compare the set of child nodes and insert the missing nodes in the persistent nodes." + 
"					</para>" + 
"				</step>" + 
"				<step>" + 
"					<para>" + 
"						Proceed recursively for each child having the same name." + 
"					</para>" + 
"				</step>" + 
"			</procedure>" + 
"			<para>" + 
"				Let's see the example with two navigation nodes in each import mode. In this case, there are two navigation definitions:" + 
"			</para>" + 
"			<programlisting language=\"XML\">&lt;node-navigation&gt;" + 
"  &lt;page-nodes&gt;" + 
"    &lt;node&gt;" + 
"      &lt;name&gt;foo&lt;/name&gt;" + 
"      &lt;icon&gt;foo_icon_1&lt;/icon&gt;" + 
"      &lt;node&gt;" + 
"        &lt;name&gt;juu&lt;/name&gt;" + 
"        &lt;icon&gt;juu_icon&lt;/icon&gt;" + 
"      &lt;/node&gt;" + 
"    &lt;/node&gt;" + 
"    &lt;node&gt;" + 
"      &lt;name&gt;daa&lt;/name&gt;" + 
"      &lt;icon&gt;daa_icon&lt;/icon&gt;" + 
"    &lt;/node&gt;" + 
"  &lt;/page-nodes&gt;" + 
"&lt;/node-navigation&gt;</programlisting>" + 
"			<programlisting language=\"XML\" role=\"XML\">&lt;node-navigation&gt;" + 
"  &lt;page-nodes&gt;" + 
"    &lt;node&gt;" + 
"      &lt;name&gt;foo&lt;/name&gt;" + 
"      &lt;icon&gt;foo_icon_2&lt;/icon&gt;" + 
"    &lt;/node&gt;" + 
"    &lt;node&gt;" + 
"      &lt;name&gt;daa&lt;/name&gt;" + 
"      &lt;icon&gt;daa_icon&lt;/icon&gt;" + 
"    &lt;/node&gt;" + 
"  &lt;/page-nodes&gt;" + 
"&lt;/node-navigation&gt;</programlisting>" + 
"			<figure>" + 
"				<title id=\"DataImportStrategy-navigation2\">Data Import Strategy Navigation2</title>" + 
"				<mediaobject>" + 
"					<imageobject>" + 
"						<imagedata align=\"center\" fileref=\"images/2888.png\" format=\"PNG\" width=\"444\"/>" + 
"					</imageobject>" + 
"					<textobject>" + 
"						<phrase>Diagram of the second data import strategy, with the foo and daa node labels branching off from the root node.</phrase>" + 
"					</textobject>" + 
"				</mediaobject>" + 
"			</figure>" + 
"			<para>" + 
"				For example, the <emphasis>navigation1</emphasis> is loaded before <emphasis>navigation2</emphasis>. The Navigation Importer processes on two navigation definitions, depending on the Import Mode defined in portal configuration." + 
"			</para>" + 
"			<variablelist id=\"vari-Reference_Guide-Navigation_Data-Import_Mode_Cases\">" + 
"				<title>Import Mode Cases</title>" + 
"				<varlistentry>" + 
"					<term>Case 1: <literal>CONSERVE</literal></term>" + 
"					<listitem>" + 
"						<para>" + 
"							With the <literal>CONSERVE</literal> mode, data are only imported when they do not exist. So, if the navigation has been created by the <emphasis>navigation1</emphasis> definition, the <emphasis>navigation2</emphasis> definition does not affect anything on it. We have the result as following" + 
"						</para>" + 
"						<figure>" + 
"							<title id=\"DataImportStrategy-navigation_1\">Data Import Strategy Navigation1</title>" + 
"							<mediaobject>" + 
"								<imageobject role=\"html\">" + 
"									<imagedata align=\"center\" fileref=\"images/2887.png\" format=\"PNG\"/>" + 
"								</imageobject>" + 
"								<textobject>" + 
"									<phrase>Diagram of the first data import strategy, with the foo, daa, and juu node labels branching off from the root node.</phrase>" + 
"								</textobject>" + 
"							</mediaobject>" + 
"						</figure>" + 
"					</listitem>" + 
"				</varlistentry>" + 
"				<varlistentry>" + 
"					<term>Case 2: <literal>INSERT</literal></term>" + 
"					<listitem>" + 
"						<para>" + 
"							If a node does not exist, the importer will add new nodes to the navigation tree. You will see the following result:" + 
"						</para>" + 
"						<remark>" + 
"							GRAPHICS - This needs to have a new graphic created for it." + 
"						</remark>" + 
"						<figure>" + 
"							<title id=\"DataImportStrategy-navigationInsert\">Data Import Strategy Navigation_Insert</title>" + 
"							<mediaobject>" + 
"								<imageobject>" + 
"									<imagedata align=\"center\" fileref=\"images/2890.png\" format=\"PNG\" width=\"444\"/>" + 
"								</imageobject>" + 
"								<textobject>" + 
"									<phrase>Diagram of the insert data import strategy navigation, with the foo, daa, and juu node labels branching off from the root node. The bar node is added in this instance.</phrase>" + 
"								</textobject>" + 
"							</mediaobject>" + 
"						</figure>" + 
"						<para>" + 
"							Hereafter, the node 'bar' is added to the navigation tree, because it does not exist in the initiated data. Other nodes are kept in the import process." + 
"						</para>" + 
"					</listitem>" + 
"				</varlistentry>" + 
"				<varlistentry>" + 
"					<term>Case 3: <literal>MERGE</literal></term>" + 
"					<listitem>" + 
"						<para>" + 
"							The <literal>MERGE</literal> mode indicates that a new node is added to the navigation tree, and updates the node data (such node label and node icon in the example) if it exists." + 
"						</para>" + 
"						<figure>" + 
"							<title id=\"DataImportStrategy-navigationmerge\">Data Import Strategy Navigation_Merge</title>" + 
"							<mediaobject>" + 
"								<imageobject>" + 
"									<imagedata align=\"center\" fileref=\"images/2891.png\" format=\"PNG\" width=\"444\"/>" + 
"								</imageobject>" + 
"								<textobject>" + 
"									<phrase>Diagram of the insert data import strategy navigation, with the foo, daa, and juu node labels branching off from the root node. The bar node is added in this instance.</phrase>" + 
"								</textobject>" + 
"							</mediaobject>" + 
"						</figure>" + 
"					</listitem>" + 
"				</varlistentry>" + 
"				<varlistentry>" + 
"					<term>Case 4: <literal>OVERWRITE</literal></term>" + 
"					<listitem>" + 
"						<para>" + 
"							Everything will be destroyed and replaced with new data if the <literal>OVERWRITE</literal> mode is used." + 
"						</para>" + 
"						<figure>" + 
"							<title id=\"DataImportStrategy-navigation_2\">Data Import Strategy Navigation_2</title>" + 
"							<mediaobject>" + 
"								<imageobject>" + 
"									<imagedata align=\"center\" fileref=\"images/2888.png\" format=\"PNG\" width=\"444\"/>" + 
"								</imageobject>" + 
"								<textobject>" + 
"									<phrase>Diagram of the second data import strategy, with the foo and daa node labels branching off from the root node.</phrase>" + 
"								</textobject>" + 
"							</mediaobject>" + 
"						</figure>" + 
"					</listitem>" + 
"				</varlistentry>" + 
"			</variablelist>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18784-565943+%5BLatest%5D&amp;cf_build_id=18784-565943+05+Dec+2013+13%3A19+en-US+%5BLatest%5D&amp;comment=Title%3A+Navigation+Data%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"	</section>" + 
"</chapter>" + 
"	<chapter id=\"chap-Right_To_Left_RTL_Framework\">" + 
"	<title>Right To Left (RTL) Framework</title>" + 
"	<para>" + 
"		The text orientation depends on the current locale setting. The orientation is a Java 5 enum that provides a set of functionalities:" + 
"	</para>" + 
"	<programlisting language=\"Java\">   LT, // Western Europe" + 
"   RT, // Middle East (Arabic, Hebrew)" + 
"   TL, // Japanese, Chinese, Korean" + 
"   TR; // Mongolian" + 
"   public boolean isLT() { ... }" + 
"   public boolean isRT() { ... }" + 
"   public boolean isTL() { ... }" + 
"   public boolean isTR() { ... }" + 
"</programlisting>" + 
"	<!--        DOC NOTE: Commented based on feedback from Marek Posolda  that section seemed to have been included without previous explanatory context." + 
"   <para>" + 
"  The object defining the orientation for the current request is the <literal>UIPortalApplication</literal>. However it should be accessed at runtime using the <literal>RequestContext</literal> that delegates to the <literal>UIPortalApplication</literal>." + 
" </para>" + 
" <para>" + 
"  In the case of a <literal>PortalRequestContext</literal> it is a direct delegate as the <literal>PortalRequestContext</literal> has a reference to the current <literal>UIPortalApplication</literal>." + 
" </para>" + 
" <para>" + 
"  In the case of a different context, it delegates to the parent context given the fact that the root <literal>RequestContext</literal> is always a <literal>PortalRequestContext</literal>." + 
" </para>       -->" + 
"	<para role=\"RoleCreateBugPara\">" + 
"		<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18785-565943+%5BLatest%5D&amp;cf_build_id=18785-565943+05+Dec+2013+13%3A19+en-US+%5BLatest%5D&amp;comment=Title%3A+Right+To+Left+%28RTL%29+Framework%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"	</para>" + 
"	<section id=\"Groovy_templates1\" remap=\"TID_18786\">" + 
"		<title>Groovy templates</title>" + 
"		<para>" + 
"			Orientation is defined by implicit variables passed into the groovy binding context:" + 
"		</para>" + 
"		<variablelist>" + 
"			<varlistentry>" + 
"				<term>Orientation</term>" + 
"				<listitem>" + 
"					<para>" + 
"						The current orientation as an Orientation." + 
"					</para>" + 
"				</listitem>" + 
"			</varlistentry>" + 
"			<varlistentry>" + 
"				<term>isLT</term>" + 
"				<listitem>" + 
"					<para>" + 
"						The value of <literal>orientation.isLT()</literal>." + 
"					</para>" + 
"				</listitem>" + 
"			</varlistentry>" + 
"			<varlistentry>" + 
"				<term>isRT</term>" + 
"				<listitem>" + 
"					<para>" + 
"						The value of <literal>orientation.isRT()</literal>." + 
"					</para>" + 
"				</listitem>" + 
"			</varlistentry>" + 
"			<varlistentry>" + 
"				<term>dir</term>" + 
"				<listitem>" + 
"					<para>" + 
"						The string '<emphasis role=\"bold\">ltr</emphasis>' if the orientation is LT or the string '<emphasis role=\"bold\">rtl</emphasis>' if the orientation is RT." + 
"					</para>" + 
"				</listitem>" + 
"			</varlistentry>" + 
"		</variablelist>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18786-565943+%5BLatest%5D&amp;cf_build_id=18786-565943+05+Dec+2013+13%3A19+en-US+%5BLatest%5D&amp;comment=Title%3A+Groovy+templates%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"	</section>" + 
"	<section id=\"Stylesheet\" remap=\"TID_18787\">" + 
"		<title>Stylesheet</title>" + 
"		<para>" + 
"			The skin service handles stylesheet rewriting to accommodate the orientation." + 
"		</para>" + 
"		<para>" + 
"			It works by appending -lt or -rt to the stylesheet name." + 
"		</para>" + 
"		<para>" + 
"			For instance: <filename><replaceable>JPP_HOME</replaceable>/gatein/gatein.ear/portal.war/templates/skin/portal/webui/component/UIFooterPortlet/DefaultStylesheet-rt.css</filename> will return the same stylesheet as <filename><replaceable>JPP_HOME</replaceable>/gatein/gatein.ear/portal.war/templates/skin/portal/webui/component/UIFooterPortlet/DefaultStylesheet.css</filename> but processed for the RT orientation. The <parameter>-lt</parameter> suffix is optional." + 
"		</para>" + 
"		<para>" + 
"			Stylesheet authors can annotate their stylesheet to create content that depends on the orientation." + 
"		</para>" + 
"		<para>" + 
"			In This example we need to use the orientation to modify the float attribute that will make the horizontal tabs either float on left or on right:" + 
"		</para>" + 
"		<example id=\"exam-Reference_Guide-Stylesheet-Example_1\">" + 
"			<title>Example 1</title>" + 
"			<programlisting language=\"CSS\">float: left; /* orientation=lt */" + 
"float: right; /* orientation=rt */" + 
"font-weight: bold;" + 
"text-align: center;" + 
"white-space: nowrap;" + 
"</programlisting>" + 
"		</example>" + 
"		<para>" + 
"			The LT produced output will be:" + 
"		</para>" + 
"		<programlisting language=\"CSS\">float: left; /* orientation=lt */" + 
"font-weight: bold;" + 
"text-align: center;" + 
"white-space: nowrap;" + 
"</programlisting>" + 
"		<para>" + 
"			The RT produced output will be:" + 
"		</para>" + 
"		<programlisting language=\"CSS\"> " + 
"float: right; /* orientation=rt */" + 
"font-weight: bold;" + 
"text-align: center;" + 
"white-space: nowrap;" + 
"</programlisting>" + 
"		<para>" + 
"			In this example we need to modify the padding according to the orientation:" + 
"		</para>" + 
"		<example id=\"exam-Reference_Guide-Stylesheet-Example_2\">" + 
"			<title>Example 2</title>" + 
"			<programlisting language=\"CSS\">color: white;" + 
"line-height: 24px;" + 
"padding: 0px 5px 0px 0px; /* orientation=lt */" + 
"padding: 0px 0px 0px 5px; /* orientation=rt */" + 
"</programlisting>" + 
"		</example>" + 
"		<para>" + 
"			The LT produced output will be:" + 
"		</para>" + 
"		<programlisting language=\"CSS\"> " + 
"color: white;" + 
"line-height: 24px;" + 
"padding: 0px 5px 0px 0px; /* orientation=lt */" + 
"</programlisting>" + 
"		<para>" + 
"			The RT produced output will be:" + 
"		</para>" + 
"		<programlisting language=\"CSS\"> " + 
"color: white;" + 
"line-height: 24px;" + 
"padding: 0px 0px 0px 5px; /* orientation=rt */" + 
"</programlisting>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18787-565943+%5BLatest%5D&amp;cf_build_id=18787-565943+05+Dec+2013+13%3A19+en-US+%5BLatest%5D&amp;comment=Title%3A+Stylesheet%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"	</section>" + 
"	<section id=\"Images1\" remap=\"TID_18788\">" + 
"		<title>Images</title>" + 
"		<para>" + 
"			Sometimes it is necessary to create an RT version of an image that will be used from a template or from a stylesheet. However symmetric images can be automatically generated, avoiding the necessity to create a mirrored version of an image and further maintenance costs." + 
"		</para>" + 
"		<para>" + 
"			The web resource filter uses the same naming pattern as the skin service. When an image ends with the -rt suffix the portal will attempt to locate the original image and create a mirror of it." + 
"		</para>" + 
"		<para>" + 
"			For instance: requesting the image <filename><replaceable>JPP_HOME</replaceable>/gatein/gatein.ear/eXoResources.war/skin/DefaultSkin/webui/component/UITabSystem/UITabs/background/NormalTabStyle-rt.gif</filename> returns a mirror of the image <filename><replaceable>JPP_HOME</replaceable>/gatein/gatein.ear/eXoResources.war/skin/DefaultSkin/webui/component/UITabSystem/UITabs/background/NormalTabStyle.gif</filename>." + 
"		</para>" + 
"		<note>" + 
"			<para>" + 
"				It is important to consider whether the image to be mirrored is symmetrical as this will impact its final appearance." + 
"			</para>" + 
"		</note>" + 
"		<para>" + 
"			Here is an example combining stylesheet and images:" + 
"		</para>" + 
"		<programlisting language=\"CSS\">line-height: 24px; " + 
"background: url('background/NavigationTab.gif') no-repeat right top; /* orientation=lt */" + 
"background: url('background/NavigationTab-rt.gif') no-repeat left top; /* orientation=rt */" + 
"padding-right: 2px; /* orientation=lt */" + 
"padding-left: 2px; /* orientation=rt */" + 
"</programlisting>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18788-565943+%5BLatest%5D&amp;cf_build_id=18788-565943+05+Dec+2013+13%3A19+en-US+%5BLatest%5D&amp;comment=Title%3A+Images%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"	</section>" + 
"	<section id=\"Client_Side_JavaScript\" remap=\"TID_18789\">" + 
"		<title>Client Side JavaScript</title>" + 
"		<para>" + 
"			The <literal>eXo.core.I18n</literal> object provides the following parameters for orientation:" + 
"		</para>" + 
"		<variablelist>" + 
"			<varlistentry>" + 
"				<term>getOrientation()</term>" + 
"				<listitem>" + 
"					<para>" + 
"						Returns either the string lt or rt" + 
"					</para>" + 
"				</listitem>" + 
"			</varlistentry>" + 
"			<varlistentry>" + 
"				<term>getDir()</term>" + 
"				<listitem>" + 
"					<para>" + 
"						Returns either the string ltr or rtl" + 
"					</para>" + 
"				</listitem>" + 
"			</varlistentry>" + 
"			<varlistentry>" + 
"				<term>isLT()</term>" + 
"				<listitem>" + 
"					<para>" + 
"						Returns true for LT" + 
"					</para>" + 
"				</listitem>" + 
"			</varlistentry>" + 
"			<varlistentry>" + 
"				<term>isRT()</term>" + 
"				<listitem>" + 
"					<para>" + 
"						Returns true of RT" + 
"					</para>" + 
"				</listitem>" + 
"			</varlistentry>" + 
"		</variablelist>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18789-565943+%5BLatest%5D&amp;cf_build_id=18789-565943+05+Dec+2013+13%3A19+en-US+%5BLatest%5D&amp;comment=Title%3A+Client+Side+JavaScript%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"	</section>" + 
"</chapter>" + 
"	<chapter id=\"chap-XML_Resources_Bundles\">" + 
"	<title>XML Resources Bundles</title>" + 
"	<para>" + 
"		Resource bundles are usually stored in property files. However, as property files are plain files, issues with the encoding of the file may arise. The XML resource bundle format has been developed to provide an alternative to property files." + 
"	</para>" + 
"	<itemizedlist>" + 
"		<listitem>" + 
"			<para>" + 
"				The XML format declares the encoding of the file. This avoids use of the <literal>native2ASCII</literal> program which can interfere with encoding." + 
"			</para>" + 
"		</listitem>" + 
"		<listitem>" + 
"			<para>" + 
"				Property files generally use <literal>ISO 8859-1</literal> character encoding which does not cover the full unicode charset. As a result, languages such as Arabic would not be natively supported." + 
"			</para>" + 
"		</listitem>" + 
"		<listitem>" + 
"			<para>" + 
"				Tooling for XML files is better supported than the tooling for Java property files and thus the XML editor copes well with the file encoding." + 
"			</para>" + 
"		</listitem>" + 
"	</itemizedlist>" + 
"	<para role=\"RoleCreateBugPara\">" + 
"		<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18790-565944+%5BLatest%5D&amp;cf_build_id=18790-565944+05+Dec+2013+13%3A25+en-US+%5BLatest%5D&amp;comment=Title%3A+XML+Resources+Bundles%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"	</para>" + 
"	<section id=\"XML_format\" remap=\"TID_18791\">" + 
"		<title>XML format</title>" + 
"		<para>" + 
"			The XML format is very simple and has been developed based on the <firstterm>Do not Repeat Yourself</firstterm> (DRY) principle. Usually resource bundle keys are hierarchically defined and we can leverage the hierarchic nature of the XML for that purpose. Here is an example of turning a property file into an XML resource bundle file:" + 
"		</para>" + 
"		<programlisting>UIAccountForm.tab.label.AccountInputSet = ..." + 
"UIAccountForm.tab.label.UIUserProfileInputSet = ..." + 
"UIAccountForm.label.Profile = ..." + 
"UIAccountForm.label.HomeInfo= ..." + 
"UIAccountForm.label.BusinessInfo= ..." + 
"UIAccountForm.label.password= ..." + 
"UIAccountForm.label.Confirmpassword= ..." + 
"UIAccountForm.label.email= ..." + 
"UIAccountForm.action.Reset= ..." + 
"</programlisting>" + 
"		<!--        <programlisting>UIAccountForm.tab.label.AccountInputSet = ..." + 
"UIAccountForm.tab.label.UIUserProfileInputSet = ..." + 
"UIAccountForm.label.Profile = ..." + 
"UIAccountForm.label.HomeInfo= ..." + 
"UIAccountForm.label.BusinessInfo= ..." + 
"UIAccountForm.label.password= ..." + 
"UIAccountForm.label.Confirmpassword= ..." + 
"UIAccountForm.label.email= ..." + 
"UIAccountForm.action.Reset= ..." + 
"</programlisting>        -->" + 
"		<programlisting language=\"XML\">&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;" + 
"&lt;bundle&gt;" + 
"  &lt;UIAccountForm&gt;" + 
"    &lt;tab&gt;" + 
"      &lt;label&gt;" + 
"        &lt;AccountInputSet&gt;...&lt;/AccountInputSet&gt;" + 
"        &lt;UIUserProfileInputSet&gt;...&lt;/UIUserProfileInputSet&gt;" + 
"      &lt;/label&gt;" + 
"    &lt;/tab&gt;" + 
"    &lt;label&gt;" + 
"      &lt;Profile&gt;...&lt;/Profile&gt;" + 
"      &lt;HomeInfo&gt;...&lt;/HomeInfo&gt;" + 
"      &lt;BusinessInfo&gt;...&lt;/BusinessInfo&gt;" + 
"      &lt;password&gt;...&lt;/password&gt;" + 
"      &lt;Confirmpassword&gt;...&lt;/Confirmpassword&gt;" + 
"      &lt;email&gt;...&lt;/email&gt;" + 
"    &lt;/label&gt;" + 
"    &lt;action&gt;" + 
"      &lt;Reset&gt;...&lt;/Reset&gt;" + 
"    &lt;/action&gt;" + 
"  &lt;/UIAccountForm&gt;" + 
"&lt;/bundle&gt;" + 
"</programlisting>" + 
"		<!--        <programlisting language=\"XML\" role=\"XML\"><![CDATA[<?xml version=\"1.0\" encoding=\"UTF-8\"?>" + 
"<bundle>" + 
"<UIAccountForm>" + 
"<tab>" + 
"<label>" + 
"<AccountInputSet>...</AccountInputSet>" + 
"<UIUserProfileInputSet>...</UIUserProfileInputSet>" + 
"</label>" + 
"</tab>" + 
"<label>" + 
"<Profile>...</Profile>" + 
"<HomeInfo>...</HomeInfo>" + 
"<BusinessInfo>...</BusinessInfo>" + 
"<password>...</password>" + 
"<Confirmpassword>...</Confirmpassword>" + 
"<email>...</email>" + 
"</label>" + 
"<action>" + 
"<Reset>...</Reset>" + 
"</action>" + 
"</UIAccountForm>" + 
"</bundle>]]></programlisting>        -->" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18791-565944+%5BLatest%5D&amp;cf_build_id=18791-565944+05+Dec+2013+13%3A25+en-US+%5BLatest%5D&amp;comment=Title%3A+XML+format%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"	</section>" + 
"	<section id=\"Portal_Support\" remap=\"TID_18792\">" + 
"		<title>Portal Support</title>" + 
"		<para>" + 
"			In order to be loaded by the portal at runtime (actually the resource bundle service), the name of the file must be the same as a property file and it must use the <emphasis role=\"bold\">.xml</emphasis> suffix." + 
"		</para>" + 
"		<para>" + 
"			For example; for the Account Portlet to be displayed in Arabic, the resource bundle would be <emphasis role=\"bold\"> AccountPortlet_ar.xml</emphasis> rather than <emphasis role=\"bold\">AccountPortlet_ar.properties</emphasis>." + 
"		</para>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18792-565944+%5BLatest%5D&amp;cf_build_id=18792-565944+05+Dec+2013+13%3A25+en-US+%5BLatest%5D&amp;comment=Title%3A+Portal+Support%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"	</section>" + 
"</chapter>" + 
"	<chapter id=\"chap-Navigation_Controller\">" + 
"	<title>Navigation Controller</title>" + 
"	<para>" + 
"		The navigation controller has several goals:" + 
"	</para>" + 
"	<variablelist>" + 
"		<varlistentry>" + 
"			<term>Provide non ambiguous URLs for portal managed resources</term>" + 
"			<listitem>" + 
"				<para>" + 
"					In previous releases, different resources were possible for a single URL(for example, navigation). The set of resources available for a URL were dependent on the private navigation (groups and dashboard)." + 
"				</para>" + 
"			</listitem>" + 
"		</varlistentry>" + 
"		<varlistentry>" + 
"			<term>Decouple the <literal>http</literal> request from the portal request.</term>" + 
"			<listitem>" + 
"				<para>" + 
"					Previously both were tightly coupled, for instance the URL for a site had to begin with <uri>/public/{sitename}</uri> or <uri>/private/{sitename}</uri>. The navigation controller provides a flexible and configurable mapping." + 
"				</para>" + 
"			</listitem>" + 
"		</varlistentry>" + 
"		<varlistentry>" + 
"			<term>Request appearance customization</term>" + 
"			<listitem>" + 
"				<para>" + 
"					Provide a friendly URL and give a degree of freedom for portal administrators by letting them configure how <literal>http</literal> requests appear." + 
"				</para>" + 
"			</listitem>" + 
"		</varlistentry>" + 
"	</variablelist>" + 
"	<para role=\"RoleCreateBugPara\">" + 
"		<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18797-565944+%5BLatest%5D&amp;cf_build_id=18797-565944+05+Dec+2013+13%3A25+en-US+%5BLatest%5D&amp;comment=Title%3A+Navigation+Controller%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"	</para>" + 
"	<section id=\"sect-Controller_in_Action\">" + 
"		<title>Controller in Action</title>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18798-565944+%5BLatest%5D&amp;cf_build_id=18798-565944+05+Dec+2013+13%3A25+en-US+%5BLatest%5D&amp;comment=Title%3A+Controller+in+Action%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"		<section id=\"Controller\" remap=\"TID_18799\">" + 
"			<title>Controller</title>" + 
"			<para>" + 
"				The <application>WebAppController</application> processes <literal>http</literal> invocations, and transforms them into a portal request. The request mapping engine (<emphasis role=\"bold\">controller</emphasis>) decouples the <literal>http</literal> request and creates a portal request." + 
"			</para>" + 
"			<para>" + 
"				The mapping engine performs two essential tasks:" + 
"			</para>" + 
"			<itemizedlist>" + 
"				<listitem>" + 
"					<para>" + 
"						It creates a Map&lt;QualifiedName, String&gt; from an incoming <literal>http</literal> request." + 
"					</para>" + 
"				</listitem>" + 
"				<listitem>" + 
"					<para>" + 
"						It renders a Map&lt;QualifiedName, String&gt; as an <literal>http</literal> URL." + 
"					</para>" + 
"				</listitem>" + 
"			</itemizedlist>" + 
"			<para>" + 
"				The goal of the controller (mapping engine) is to <emphasis role=\"bold\">decouple</emphasis> the request processed by the portal from the incoming <literal>HTTP</literal> request." + 
"			</para>" + 
"			<para>" + 
"				A request contains data that determines how the request will be processed. This data can be encoded in various places in the request, such as the request path or a query parameter. The controller allows the portal to route a request according to a set of parameters (a map) instead of the servlet request." + 
"			</para>" + 
"			<para>" + 
"				The controller configuration is declarative in an XML file, allowing easy reconfiguration of the routing table. It is processed into an internal data structure that is used to perform resolution (routing or rendering)." + 
"			</para>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18799-565944+%5BLatest%5D&amp;cf_build_id=18799-565944+05+Dec+2013+13%3A25+en-US+%5BLatest%5D&amp;comment=Title%3A+Controller%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"		<section id=\"Building_Controller\" remap=\"TID_18800\">" + 
"			<title>Building Controller</title>" + 
"			<para>" + 
"				The controller configuration that contains the routing rules is loaded from a file named <filename>controller.xml</filename> that is loaded from the configuration directory. Its location is determined by the <parameter>gatein.controller.config</parameter> property." + 
"			</para>" + 
"			<para>" + 
"				<application>WebAppController</application> loads and initializes the mapping engine." + 
"			</para>" + 
"			<programlisting language=\"XML\">" + 
"&lt;!-- conf/portal/controller.xml of portal.war --&gt;" + 
"&lt;component&gt;" + 
" &lt;type&gt;org.exoplatform.web.WebAppController&lt;/type&gt;" + 
"  &lt;init-params&gt;" + 
"   &lt;value-param&gt;" + 
"    &lt;name&gt;controller.config&lt;/name&gt;" + 
"    &lt;value&gt;${gatein.portal.controller.config}&lt;/value&gt;" + 
"   &lt;/value-param&gt;" + 
"  &lt;/init-params&gt;" + 
"&lt;/component&gt;" + 
"</programlisting>" + 
"			<para>" + 
"				The extension project can define its own routing table, because of the extension mechanism." + 
"			</para>" + 
"			<para>" + 
"				The <filename>controller.xml</filename> can be changed and reloaded at runtime. This helps testing different configurations easily (configuration loading operations) and provides more insight into the routing engine (the <literal>findRoutes</literal> operation)." + 
"			</para>" + 
"			<para>" + 
"				The <application>WebAppController</application> is annotated with <code>@Managed</code> annotations and is bound under the <code>view=portal,service=controller</code> JMX name and under the \"portalcontroller\" REST name." + 
"			</para>" + 
"			<variablelist>" + 
"				<title>Attributes and Operations</title>" + 
"				<varlistentry>" + 
"					<term>configurationPath</term>" + 
"					<listitem>" + 
"						<para>" + 
"							Attribute (read only), which specifies the configuration path of the controller XML file" + 
"						</para>" + 
"					</listitem>" + 
"				</varlistentry>" + 
"				<varlistentry>" + 
"					<term>loadConfiguration</term>" + 
"					<listitem>" + 
"						<para>" + 
"							Operation, which loads a new configuration file from a specified XML path" + 
"						</para>" + 
"					</listitem>" + 
"				</varlistentry>" + 
"				<varlistentry>" + 
"					<term>reloadConfiguration</term>" + 
"					<listitem>" + 
"						<para>" + 
"							Operation, which reloads the configuration file." + 
"						</para>" + 
"					</listitem>" + 
"				</varlistentry>" + 
"				<varlistentry>" + 
"					<term>findRoutes</term>" + 
"					<listitem>" + 
"						<para>" + 
"							Operation, which routes the request argument through the controller and returns a list of all parameter map resolution." + 
"						</para>" + 
"						<para>" + 
"							The argument is a request URI such as <uri>/g/:platform:administrators/administration/registry</uri>. It returns a string representation (<code>List&lt;Map&gt;</code>) of the matched routes." + 
"						</para>" + 
"					</listitem>" + 
"				</varlistentry>" + 
"			</variablelist>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18800-565944+%5BLatest%5D&amp;cf_build_id=18800-565944+05+Dec+2013+13%3A25+en-US+%5BLatest%5D&amp;comment=Title%3A+Building+Controller%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"		<section id=\"sect-Controller_Configuration_controller.xml\">" + 
"			<title>Controller Configuration (controller.xml)</title>" + 
"			<para>" + 
"				Most of the controller configuration cares about defining rules (Routing table - contains routes object) that will drive the resolution. Routes are processed during the controller initialization to give a tree of nodes. For every node the following is true:" + 
"			</para>" + 
"			<itemizedlist>" + 
"				<listitem>" + 
"					<para>" + 
"						It is related to its parent with a matching rule that can either be an <emphasis role=\"bold\">exact string matching</emphasis> or a <emphasis role=\"bold\">regular expression matching</emphasis>." + 
"					</para>" + 
"				</listitem>" + 
"				<listitem>" + 
"					<para>" + 
"						It is associated with a set of parameters." + 
"					</para>" + 
"				</listitem>" + 
"			</itemizedlist>" + 
"			<para>" + 
"				A parameter is defined by a qualified name. There are three types of parameters: Route, Path, and Request." + 
"			</para>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18801-565944+%5BLatest%5D&amp;cf_build_id=18801-565944+05+Dec+2013+13%3A25+en-US+%5BLatest%5D&amp;comment=Title%3A+Controller+Configuration+%28controller.xml%29%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"			<section id=\"Route_parameters\" remap=\"TID_18802\">" + 
"				<title>Route parameters</title>" + 
"				<para>" + 
"					Route parameters define a fixed value associate with a qualified name." + 
"				</para>" + 
"				<itemizedlist>" + 
"					<listitem>" + 
"						<para>" + 
"							Routing: route parameters allow the controller to distinguish branches easily and route the request accordingly." + 
"						</para>" + 
"					</listitem>" + 
"					<listitem>" + 
"						<para>" + 
"							Rendering: the system will select a route to render an URL if all route parameters are always matched." + 
"						</para>" + 
"					</listitem>" + 
"				</itemizedlist>" + 
"				<programlisting language=\"XML\">" + 
"&lt;route path=\"/foo\"&gt;" + 
"  &lt;route-param qname=\"gtn:handler\"&gt;" + 
"    &lt;value&gt;portal&lt;/value&gt;" + 
"  &lt;/route-param&gt;" + 
"&lt;/route&gt;" + 
"</programlisting>" + 
"				<para>" + 
"					This configuration matches the request path \"/foo\" to the map (gtn:handler=portal). Conversely it renders the (gtn:handler=portal) map as the \"/foo\" URL. In this example we see two concepts" + 
"				</para>" + 
"				<itemizedlist>" + 
"					<listitem>" + 
"						<para>" + 
"							exact path matching (\"/foo\")" + 
"						</para>" + 
"					</listitem>" + 
"					<listitem>" + 
"						<para>" + 
"							route parameters (\"gtn:handler\")" + 
"						</para>" + 
"					</listitem>" + 
"				</itemizedlist>" + 
"				<para role=\"RoleCreateBugPara\">" + 
"					<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18802-565944+%5BLatest%5D&amp;cf_build_id=18802-565944+05+Dec+2013+13%3A25+en-US+%5BLatest%5D&amp;comment=Title%3A+Route+parameters%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"				</para>" + 
"			</section>" + 
"			<section id=\"Path_parameters_-_Regular_expression_support\" remap=\"TID_18803\">" + 
"				<title>Path parameters - Regular expression support</title>" + 
"				<para>" + 
"					Path parameters allow to associate a portion of the request path with a parameter. Such parameter will match any non empty portion of text except the <emphasis role=\"bold\">/</emphasis> character (that is the [^/]+ regular expression) otherwise they can be associated with a regular expression for matching specific patterns. Path parameters are mandatory for matching since they are part of the request path, however it is allowed to write regular expression matching an empty value." + 
"				</para>" + 
"				<itemizedlist>" + 
"					<listitem>" + 
"						<para>" + 
"							Routing: route is accepted if the regular expression is matched." + 
"						</para>" + 
"					</listitem>" + 
"					<listitem>" + 
"						<para>" + 
"							Rendering: selection occurs when the regular expression matches the parameter." + 
"						</para>" + 
"					</listitem>" + 
"				</itemizedlist>" + 
"				<para>" + 
"					<emphasis role=\"bold\">Encoding</emphasis>" + 
"				</para>" + 
"				<para>" + 
"					Path parameters may contain '/' character which is a reserved char for URI path. This case is specially handled by the navigation controller by using a special character to replace '/' literals. By default the character is the semi colon <emphasis role=\"bold\">:</emphasis> and can be changed to other possible values (see controller XML schema for possible values) to give a greater amount of flexibility." + 
"				</para>" + 
"				<para>" + 
"					This encoding is applied only when the encoding performed for parameter having a mode set to the <code>default-form</code> value, for instance it does not happen for navigation node URI (for which <emphasis role=\"bold\">/</emphasis> are encoded literally). The separator escape char can still be used but under it's percent escaped form, so by default a path parameter value containing <emphasis role=\"bold\">:</emphasis> would be encoded as <code>%3A</code> and conversely the <code>%3A</code> value will be decoded as <emphasis role=\"bold\">:</emphasis>." + 
"				</para>" + 
"				<programlisting language=\"XML\">&lt;route path=\"/{gtn:path}\"&gt;" + 
"&lt;/route&gt;</programlisting>" + 
"				<para>" + 
"					No pattern defined, used the default one [^/]+" + 
"				</para>" + 
"				<programlisting>Routing and Rendering" + 
"Path \"/foo\"   &lt;--&gt; the map (gtn:path=foo)" + 
"" + 
"Path \"/foo:bar\" &lt;--&gt; the map (gtn:path=foo/bar)</programlisting>" + 
"				<para>" + 
"					If the request path contains another \"/\" char it will not work,default encoding mode is: <emphasis role=\"bold\">default-form</emphasis>. For example:\"/foo/bar\" --&gt; not matched, return empty parameter map" + 
"				</para>" + 
"				<para>" + 
"					However this could be solved with the following configuration:" + 
"				</para>" + 
"				<programlisting language=\"XML\">&lt;route path=\"/{gtn:path}\"&gt;" + 
"  &lt;path-param encoding=\"preserve-path\" qname=\"gtn:path\"&gt;" + 
"    &lt;pattern&gt;.*&lt;/pattern&gt;" + 
"  &lt;/path-param&gt;" + 
"&lt;/route&gt;</programlisting>" + 
"				<orderedlist>" + 
"					<listitem>" + 
"						<para>" + 
"							The .* declaration allows to match any char sequence." + 
"						</para>" + 
"					</listitem>" + 
"					<listitem>" + 
"						<para>" + 
"							The <emphasis role=\"italic\">preserve-path</emphasis> <emphasis role=\"bold\">encoding</emphasis> tells the engine that the \"/\" chars should be handled by the path parameter itself as they have a special meaning for the router. Without this special encoding, \"/\" would be rendered as the \":<emphasis role=\"italic\">\" character and conversely the \":</emphasis>\" character would be matched as the \"/\" character." + 
"						</para>" + 
"					</listitem>" + 
"				</orderedlist>" + 
"				<para role=\"RoleCreateBugPara\">" + 
"					<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18803-565944+%5BLatest%5D&amp;cf_build_id=18803-565944+05+Dec+2013+13%3A25+en-US+%5BLatest%5D&amp;comment=Title%3A+Path+parameters+-+Regular+expression+support%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"				</para>" + 
"			</section>" + 
"			<section id=\"Request_parameters\" remap=\"TID_18804\">" + 
"				<title>Request parameters</title>" + 
"				<para>" + 
"					Request parameters are matched from the request parameters (GET or POST). The match can be optional as their representation in the request allows it." + 
"				</para>" + 
"				<itemizedlist>" + 
"					<listitem>" + 
"						<para>" + 
"							Routing" + 
"						</para>" + 
"						<itemizedlist>" + 
"							<listitem>" + 
"								<para>" + 
"									route is accepted when a required parameter is present and matched in the request." + 
"								</para>" + 
"							</listitem>" + 
"							<listitem>" + 
"								<para>" + 
"									route is accepted when an optional parameter is absent or matched in the request." + 
"								</para>" + 
"							</listitem>" + 
"						</itemizedlist>" + 
"					</listitem>" + 
"					<listitem>" + 
"						<para>" + 
"							Rendering:" + 
"						</para>" + 
"						<itemizedlist>" + 
"							<listitem>" + 
"								<para>" + 
"									selection occurs for required parameters when the parameter is present and matched in the map." + 
"								</para>" + 
"							</listitem>" + 
"							<listitem>" + 
"								<para>" + 
"									selection occurs for optional parameters when the parameter is absent or matched in the map." + 
"								</para>" + 
"							</listitem>" + 
"						</itemizedlist>" + 
"					</listitem>" + 
"				</itemizedlist>" + 
"				<programlisting language=\"XML\">" + 
"&lt;route path=\"/\"&gt;" + 
"  &lt;request-param name=\"path\" qname=\"gtn:path\"/&gt;" + 
"&lt;/route&gt;" + 
"</programlisting>" + 
"				<para>" + 
"					Request parameters are declared by a <code>request-param</code> element and by default will match any value. A request like \"/?path=foo\" is mapped to the (gtn:path=foo) map. The <code>name</code> attribute of the <code>request-param</code> tag defines the request parameter value. This element accepts more configuration" + 
"				</para>" + 
"				<itemizedlist>" + 
"					<listitem>" + 
"						<para>" + 
"							a <code>value</code> or a <code>pattern</code> child element to match a constant or a pattern" + 
"						</para>" + 
"					</listitem>" + 
"					<listitem>" + 
"						<para>" + 
"							a <code>control-mode</code> attribute with the value <code>optional</code> or <code>required</code> to indicate if matching is mandatory or not" + 
"						</para>" + 
"					</listitem>" + 
"					<listitem>" + 
"						<para>" + 
"							a <code>value-mapping</code> attribute with the possible values <code>canonical</code>, <code>never-empty</code>, <code>never-null</code> can be used to filter values after matching is done. For instance a parameter configured with <code>value-mapping=\"never-empty\"</code> and matching the empty string value will not put the empty string in the map." + 
"						</para>" + 
"					</listitem>" + 
"				</itemizedlist>" + 
"				<para role=\"RoleCreateBugPara\">" + 
"					<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18804-565944+%5BLatest%5D&amp;cf_build_id=18804-565944+05+Dec+2013+13%3A25+en-US+%5BLatest%5D&amp;comment=Title%3A+Request+parameters%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"				</para>" + 
"			</section>" + 
"			<section id=\"Route_Precedence\" remap=\"TID_18805\">" + 
"				<title>Route Precedence</title>" + 
"				<para>" + 
"					The order of route declaration is important as it influences how rules are matched. Sometimes the same request could be matched by several routes and the routing table is ambiguous." + 
"				</para>" + 
"				<programlisting language=\"XML\">" + 
"&lt;route path=\"/foo\"&gt;" + 
"  &lt;route-param qname=\"gtn:handler\"&gt;" + 
"    &lt;value&gt;portal&lt;/value&gt;" + 
"  &lt;/route-param&gt;" + 
"&lt;/route&gt;" + 
"&lt;route path=\"/{gtn:path}\"&gt;" + 
"  &lt;path-param encoding=\"preserve-path\" qname=\"gtn:path\"&gt;" + 
"    &lt;pattern&gt;.*&lt;/pattern&gt;" + 
"  &lt;/path-param&gt;" + 
"&lt;/route&gt;" + 
"</programlisting>" + 
"				<para>" + 
"					In that case, the request path \"/foo\" will always be matched by the first rule before the second rule. This can be misleading since the map (gtn:path=foo) would be rendered as \"/foo\" as well and would not be matched by the first rule. Such ambiguity can happen, it can be desirable or not." + 
"				</para>" + 
"				<para role=\"RoleCreateBugPara\">" + 
"					<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18805-565944+%5BLatest%5D&amp;cf_build_id=18805-565944+05+Dec+2013+13%3A25+en-US+%5BLatest%5D&amp;comment=Title%3A+Route+Precedence%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"				</para>" + 
"			</section>" + 
"			<section id=\"Route_Nesting\" remap=\"TID_18806\">" + 
"				<title>Route Nesting</title>" + 
"				<para>" + 
"					Route nesting is possible and often desirable as it helps to" + 
"				</para>" + 
"				<itemizedlist>" + 
"					<listitem>" + 
"						<para>" + 
"							factor common parameters in a common rule" + 
"						</para>" + 
"					</listitem>" + 
"					<listitem>" + 
"						<para>" + 
"							perform more efficient matching as the match of the common rule is done once for all the sub routes" + 
"						</para>" + 
"					</listitem>" + 
"				</itemizedlist>" + 
"				<programlisting language=\"XML\">" + 
"&lt;route path=\"/foo\"&gt;" + 
"  &lt;route-param qname=\"gtn:handler\"&gt;" + 
"    &lt;value&gt;portal&lt;/value&gt;" + 
"  &lt;/route-param&gt;" + 
"  &lt;route path=\"/bar\"&gt;" + 
"    &lt;route-param qname=\"gtn:path\"&gt;" + 
"      &lt;value&gt;bar&lt;/value&gt;" + 
"    &lt;/route-param&gt;" + 
"  &lt;/route&gt;" + 
"  &lt;route path=\"/juu\"&gt;" + 
"    &lt;route-param qname=\"gtn:path\"&gt;" + 
"      &lt;value&gt;juu&lt;/value&gt;" + 
"    &lt;/route-param&gt;" + 
"  &lt;/route&gt;" + 
"&lt;/route&gt;" + 
"</programlisting>" + 
"				<itemizedlist>" + 
"					<listitem>" + 
"						<para>" + 
"							The request path \"/foo/bar\" is mapped to the (gtn:handler=portal,gtn:path=bar) map" + 
"						</para>" + 
"					</listitem>" + 
"					<listitem>" + 
"						<para>" + 
"							The request path \"/foo/juu\" is mapped to the (gtn:handler=portal,gtn:path=juu) map" + 
"						</para>" + 
"					</listitem>" + 
"					<listitem>" + 
"						<para>" + 
"							The request path \"/foo\" is not mapped as non leaf routes do not perform matches." + 
"						</para>" + 
"					</listitem>" + 
"				</itemizedlist>" + 
"				<para role=\"RoleCreateBugPara\">" + 
"					<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18806-565944+%5BLatest%5D&amp;cf_build_id=18806-565944+05+Dec+2013+13%3A25+en-US+%5BLatest%5D&amp;comment=Title%3A+Route+Nesting%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"				</para>" + 
"			</section>" + 
"			<section id=\"Custom_Error_Pages\" remap=\"TID_18807\">" + 
"				<title>Custom Error Pages</title>" + 
"				<para>" + 
"					When an HTML error code is returned as a response to a URL request (for example, 404 Not Found), the portal redirects users to a default error page where the error code is displayed together with an explanatory message. To replace the default error page with a customized one, implement the configuration described in the procedure." + 
"				</para>" + 
"				<procedure>" + 
"					<title>Configuring redirection to custom error pages</title>" + 
"					<step>" + 
"						<para>" + 
"							Create the actual error pages and place them in the <filename>JPP_HOME/gatein/gatein.ear/portal.war/</filename> directory." + 
"						</para>" + 
"					</step>" + 
"					<step>" + 
"						<para>" + 
"							For each error code requiring a custom error page, add the <literal>&lt;error-page&gt;</literal> element to the <filename>JPP_HOME/gatein/gatein.ear/portal.war/WEB-INF/web.xml</filename> file. This element specifies what page is displayed when the particular error code is returned." + 
"						</para>" + 
"						<para>" + 
"							The sample code below ensures the <filename>my404.html</filename> page is displayed when the 404 error code is returned. " + 
"							<programlisting language=\"XML\">" + 
"&lt;error-page&gt;" + 
"  &lt;error-code&gt;404&lt;/error-code&gt;" + 
"  &lt;location&gt;/my404.html&lt;/location&gt;" + 
"&lt;/error-page&gt;" + 
"</programlisting>" + 
"						</para>" + 
"					</step>" + 
"					<step>" + 
"						<para>" + 
"							Specify the error page locations as static resources in the <filename>JPP_HOME/standalone/configuration/gatein/controller.xml</filename> file. The code sample below demonstrates this configuration for the <filename>/my404.html</filename> path. " + 
"							<programlisting language=\"XML\">" + 
"&lt;route path=\"/my404.html\"&gt;" + 
"  &lt;route-param qname=\"gtn:handler\"&gt;" + 
" &lt;value&gt;staticResource&lt;/value&gt;" + 
"  &lt;/route-param&gt;" + 
"&lt;/route&gt;" + 
"</programlisting>" + 
"						</para>" + 
"						<para>" + 
"							Without this configuration, the portal tries to resolve <filename>/my404.html</filename> as a name of a resource. This results in unwanted redirection to <filename>/portal/my404.html</filename>. It is therefore necessary to configure the error page locations as static resources." + 
"						</para>" + 
"					</step>" + 
"					<step>" + 
"						<para>" + 
"							When all the previous steps are performed, users are redirected to the specified custom error pages when the respective error codes are returned as a response to a URL request." + 
"						</para>" + 
"					</step>" + 
"				</procedure>" + 
"				<para role=\"RoleCreateBugPara\">" + 
"					<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18807-565944+%5BLatest%5D&amp;cf_build_id=18807-565944+05+Dec+2013+13%3A25+en-US+%5BLatest%5D&amp;comment=Title%3A+Custom+Error+Pages%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"				</para>" + 
"			</section>" + 
"		</section>" + 
"	</section>" + 
"	<section id=\"sect-Integrate_to_WebUI_Framework\">" + 
"		<title>Integrate to WebUI Framework</title>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18808-565944+%5BLatest%5D&amp;cf_build_id=18808-565944+05+Dec+2013+13%3A25+en-US+%5BLatest%5D&amp;comment=Title%3A+Integrate+to+WebUI+Framework%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"		<section id=\"Routing\" remap=\"TID_18809\">" + 
"			<title>Routing</title>" + 
"			<para>" + 
"				The portal defines a set of parameters in the routing table. For each client request, the mapping engine processes the request path and returns the defined parameters with their values as a Map&lt;QualifiedName, String&gt;." + 
"			</para>" + 
"			<variablelist>" + 
"				<varlistentry>" + 
"					<term>gtn:handler</term>" + 
"					<listitem>" + 
"						<para>" + 
"							The gtn:handler name is one of the most important qualified names. It determines which handler will process the request immediately after the controller has determined the parameter map. The handler value is used to make a lookup in the handler map of the controller. A handler is a class that extends the <code>WebRequestHandler</code> class and implements the <code>execute(ControllerContext)</code> method. Several handlers are available by default:" + 
"						</para>" + 
"						<itemizedlist>" + 
"							<listitem>" + 
"								<para>" + 
"									portal" + 
"								</para>" + 
"								<para>" + 
"									Process aggregated portal requests." + 
"								</para>" + 
"							</listitem>" + 
"							<listitem>" + 
"								<para>" + 
"									upload / download" + 
"								</para>" + 
"								<para>" + 
"									process file upload and file download" + 
"								</para>" + 
"							</listitem>" + 
"							<listitem>" + 
"								<para>" + 
"									legacy" + 
"								</para>" + 
"								<para>" + 
"									Handle legacy URL redirection." + 
"								</para>" + 
"							</listitem>" + 
"							<listitem>" + 
"								<para>" + 
"									default" + 
"								</para>" + 
"								<para>" + 
"									<literal>http</literal> redirection to the default portal of the container." + 
"								</para>" + 
"							</listitem>" + 
"							<listitem>" + 
"								<para>" + 
"									staticResource" + 
"								</para>" + 
"								<para>" + 
"									Serve static resources such as image, CSS or javascriptfiles in <filename>portal.war</filename>." + 
"								</para>" + 
"							</listitem>" + 
"						</itemizedlist>" + 
"					</listitem>" + 
"				</varlistentry>" + 
"				<varlistentry>" + 
"					<term>gtn:sitetype / gtn:sitename / gtn:path</term>" + 
"					<listitem>" + 
"						<para>" + 
"							The qualified names drive a request for the portal handler. They are used to determine which site to show and which path to resolve against a navigation. For instance the (gtn:sitetype=portal,gtn:sitename=classic,gtn:path=home) instruct the portal handler to show the home page of the classic portal site." + 
"						</para>" + 
"					</listitem>" + 
"				</varlistentry>" + 
"				<varlistentry>" + 
"					<term>gtn:lang</term>" + 
"					<listitem>" + 
"						<para>" + 
"							Language in the URL for the portal handler. The language can be specified in URL so that the user can bookmark the URL in the particular locale or change the locale by modifying the URL address." + 
"						</para>" + 
"					</listitem>" + 
"				</varlistentry>" + 
"				<varlistentry>" + 
"					<term>gtn:componentid / gtn:action / gtn:objectid</term>" + 
"					<listitem>" + 
"						<para>" + 
"							WebUI parameters used by the portal handler for managing WebUI component URLs for portal applications. These are not used for portlet applications." + 
"						</para>" + 
"					</listitem>" + 
"				</varlistentry>" + 
"			</variablelist>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18809-565944+%5BLatest%5D&amp;cf_build_id=18809-565944+05+Dec+2013+13%3A25+en-US+%5BLatest%5D&amp;comment=Title%3A+Routing%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"		<section id=\"sect-Rendering\">" + 
"			<title>Rendering</title>" + 
"			<para>" + 
"				The <emphasis role=\"bold\">controller</emphasis> is designed to render a Map&lt;QualifiedName, String&gt; as an <literal>http</literal> URL according to the controller's' routing table. Additional components are required to integrate the controller into the WebUI Framework of the portal." + 
"			</para>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18810-565949+%5BLatest%5D&amp;cf_build_id=18810-565949+05+Dec+2013+13%3A30+en-US+%5BLatest%5D&amp;comment=Title%3A+Rendering%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"			<section id=\"Portal_URL\" remap=\"TID_18811\">" + 
"				<title>Portal URL</title>" + 
"				<para>" + 
"					<code>PortalURL</code> has a similar role at the portal level: its main role is to abstract the creation of a URL for a resource managed by the portal." + 
"				</para>" + 
"				<programlisting language=\"Java\">" + 
"public abstract class PortalURL&lt;R, U extends PortalURL&lt;U&gt;&gt;" + 
"{" + 
"  ..." + 
"}" + 
"</programlisting>" + 
"				<para>" + 
"					The <code>PortalURL</code> declaration may seem a bit strange at first sight with two generic types <code>U</code> and <code>R</code> and the circular recursion of the <code>U</code> generic parameter, but it's because most of the time you will not use the <code>PortalURL</code> object but instead subclasses." + 
"				</para>" + 
"				<itemizedlist>" + 
"					<listitem>" + 
"						<para>" + 
"							The <code>R</code> generic type represents the type of the resource managed by the portal" + 
"						</para>" + 
"					</listitem>" + 
"					<listitem>" + 
"						<para>" + 
"							The <code>U</code> generic type is also described as <emphasis role=\"bold\">self bound generic type</emphasis>. This design pattern allows a class to return subtypes of itself in the class declaring the generic type. Java Enums are based on this principle (<code>class Enum&lt;E extends Enum&lt;E&gt;&gt;</code>)" + 
"						</para>" + 
"					</listitem>" + 
"				</itemizedlist>" + 
"				<para>" + 
"					A portal URL has various methods but certainly the most important method is the <code>toString()</code> method that generates a URL representing that will target the resource associated with the URL. The remaining methods are getter and setter for mutating the URL configuration, those options will affect the URL representation when it is generated." + 
"				</para>" + 
"				<itemizedlist>" + 
"					<listitem>" + 
"						<para>" + 
"							resource: the mandatory resource associated with the URL" + 
"						</para>" + 
"					</listitem>" + 
"					<listitem>" + 
"						<para>" + 
"							locale: the optional locale used in the URL allowing the creation of bookmarkable URL containing a language" + 
"						</para>" + 
"					</listitem>" + 
"					<listitem>" + 
"						<para>" + 
"							confirm: the optional confirm message displayed by the portal in the context of the portal UI" + 
"						</para>" + 
"					</listitem>" + 
"					<listitem>" + 
"						<para>" + 
"							ajax: the optional Ajax option allowing an Ajax invocation of the URL" + 
"						</para>" + 
"					</listitem>" + 
"				</itemizedlist>" + 
"				<formalpara>" + 
"					<title>Obtaining a PortalURL</title>" + 
"					<para>" + 
"						<code>PortalURL</code> objects are obtained from <code>RequestContext</code> instance such as the <code>PortalRequestContext</code> or the PortletRequestContext. Usually those are obtained thanks to <code>getCurrentInstance</code> method of the <code>RequestContext</code> class:" + 
"					</para>" + 
"				</formalpara>" + 
"				<programlisting language=\"Java\">" + 
"RequestContext ctx = RequestContext.getCurrentInstance();" + 
"</programlisting>" + 
"				<para>" + 
"					<code>PortalURL</code> is created with the <code>createURL</code> method that has a resource type as its input parameter. A resource type is usually a constant and a type-safe object that allow to retrieve <code>PortalURL</code> subclasses:" + 
"				</para>" + 
"				<programlisting language=\"Java\">" + 
"RequestContext ctx = RequestContext.getCurrentInstance();" + 
"PortalURL&lt;R, U&gt; URL = ctx.createURL(type);" + 
"</programlisting>" + 
"				<para>" + 
"					In reality you will use a concrete type constant and have instead more concrete code like:" + 
"				</para>" + 
"				<programlisting language=\"Java\">" + 
"RequestContext ctx = RequestContext.getCurrentInstance();" + 
"NodeURL URL = ctx.createURL(NodeURL.TYPE);" + 
"</programlisting>" + 
"				<note>" + 
"					<para>" + 
"						The <code>NodeURL.TYPE</code> is actually declared as <code>new ResourceType&lt;NavigationResource, NodeURL&gt;()</code> that can be described as a <emphasis role=\"bold\">type literal</emphasis> object emulated by a Java anonymous inner class. Such literals were introduced by Neil Gafter as Super Type Token and popularized by Google Guice as Type Literal. It's an interesting way to create a literal representing a kind of Java type." + 
"					</para>" + 
"				</note>" + 
"				<para role=\"RoleCreateBugPara\">" + 
"					<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18811-565949+%5BLatest%5D&amp;cf_build_id=18811-565949+05+Dec+2013+13%3A30+en-US+%5BLatest%5D&amp;comment=Title%3A+Portal+URL%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"				</para>" + 
"			</section>" + 
"			<section id=\"Node_URL\" remap=\"TID_18812\">" + 
"				<title>Node URL</title>" + 
"				<para>" + 
"					The class <code>NodeURL</code> is a subclass of the <code>PortalURL</code> specialized for navigation node resources:" + 
"				</para>" + 
"				<programlisting language=\"Java\">" + 
"public class NodeURL extends PortalURL&lt;NavigationResource, NodeURL&gt;" + 
"{" + 
"  ..." + 
"}" + 
"</programlisting>" + 
"				<para>" + 
"					The good news is that the NodeURL does not carry any generic type of its super class, which means that a NodeURL is type safe and one does not have to worry about generic types." + 
"				</para>" + 
"				<para>" + 
"					Using a NodeURL is pretty straightforward:" + 
"				</para>" + 
"				<programlisting language=\"Java\">" + 
"NodeURL URL = RequestContext.getCurrentInstance().createURL(NodeURL.TYPE);" + 
"URL.setResource(new NavigationResource(\"portal\", \"classic, \"home\"));" + 
"String s = URL.toString();" + 
"</programlisting>" + 
"				<para>" + 
"					The <code>NodeURL</code> subclass contains specialized setter to make its usage even easier:" + 
"				</para>" + 
"				<programlisting language=\"Java\">" + 
"UserNode node = ...;" + 
"NodeURL URL = RequestContext.getCurrentInstance().createURL(NodeURL.TYPE);" + 
"URL.setNode(node);" + 
"String s = URL.toString();" + 
"</programlisting>" + 
"				<para role=\"RoleCreateBugPara\">" + 
"					<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18812-565949+%5BLatest%5D&amp;cf_build_id=18812-565949+05+Dec+2013+13%3A30+en-US+%5BLatest%5D&amp;comment=Title%3A+Node+URL%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"				</para>" + 
"			</section>" + 
"			<section id=\"Component_URL\" remap=\"TID_18813\">" + 
"				<title>Component URL</title>" + 
"				<para>" + 
"					The <code>ComponentURL</code> subclass is another specialization of <code>PortalURL</code> that allows the creation of WebUI components URLs. <code>ComponentURL</code> is commonly used to trigger WebUI events from client side:" + 
"				</para>" + 
"				<programlisting language=\"HTML\">" + 
"&lt;% def componentURL = uicomponent.event(...); /*or uicomponent.URL(...) */ %&gt;" + 
" &lt;a href=$componentURL&gt;Click me&lt;/a&gt;" + 
"</programlisting>" + 
"				<para>" + 
"					Normally you should not have to deal with it as the WebUI framework has already an abstraction for managing URL known as <code>URLBuilder</code>. The <code>URLBuilder</code> implementation delegates URL creation to <code>ComponentURL</code> objects." + 
"				</para>" + 
"				<para role=\"RoleCreateBugPara\">" + 
"					<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18813-565949+%5BLatest%5D&amp;cf_build_id=18813-565949+05+Dec+2013+13%3A30+en-US+%5BLatest%5D&amp;comment=Title%3A+Component+URL%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"				</para>" + 
"			</section>" + 
"			<section id=\"Portlet_URL\" remap=\"TID_18814\">" + 
"				<title>Portlet URL</title>" + 
"				<para>" + 
"					Portlet URLs API implementation delegates to the portal <code>ComponentURL</code> (via the portlet container SPI). It is possible to control the language in the URL from a <code>PortletURL</code> object by setting a property named <code>gtn:lang</code>:" + 
"				</para>" + 
"				<itemizedlist>" + 
"					<listitem>" + 
"						<para>" + 
"							when the property value is set to a value returned by <code>Locale#toString()</code> method for locale objects having a non null language value and a null variant value, the URL generated by the <code>PortletURL#toString()</code> method will contain the locale in the URL." + 
"						</para>" + 
"					</listitem>" + 
"					<listitem>" + 
"						<para>" + 
"							when the property value is set to an empty string, the generated URL will not contain a language. If the incoming URL was carrying a language, this language will be erased." + 
"						</para>" + 
"					</listitem>" + 
"					<listitem>" + 
"						<para>" + 
"							when the property value is not set, it will not affect the generated URL." + 
"						</para>" + 
"					</listitem>" + 
"				</itemizedlist>" + 
"				<programlisting language=\"Java\">" + 
"PortletURL URL = resp.createRenderURL();" + 
"URL.setProperty(\"gtn:lang\", \"fr\");" + 
"writer.print(\"&lt;a href='\" + URL + \"'&gt;French&lt;/a&gt;\");" + 
"</programlisting>" + 
"				<para role=\"RoleCreateBugPara\">" + 
"					<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18814-565949+%5BLatest%5D&amp;cf_build_id=18814-565949+05+Dec+2013+13%3A30+en-US+%5BLatest%5D&amp;comment=Title%3A+Portlet+URL%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"				</para>" + 
"			</section>" + 
"			<section id=\"WebUI_URL_Builder\" remap=\"TID_18815\">" + 
"				<title>WebUI URL Builder</title>" + 
"				<para>" + 
"					This internal API for creating URL works as before and delegates to the <code>PortletURL</code> API when the framework is executed in a portlet and to a <code>ComponentURL</code> API when the framework is executed in the portal context. The API has been modified to take in account the language in URL with two properties on the builder:" + 
"				</para>" + 
"				<itemizedlist>" + 
"					<listitem>" + 
"						<para>" + 
"							locale: a locale for setting on the URL" + 
"						</para>" + 
"					</listitem>" + 
"					<listitem>" + 
"						<para>" + 
"							removeLocale: a boolean for removing the locale present on the URL" + 
"						</para>" + 
"					</listitem>" + 
"				</itemizedlist>" + 
"				<para role=\"RoleCreateBugPara\">" + 
"					<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18815-565949+%5BLatest%5D&amp;cf_build_id=18815-565949+05+Dec+2013+13%3A30+en-US+%5BLatest%5D&amp;comment=Title%3A+WebUI+URL+Builder%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"				</para>" + 
"			</section>" + 
"			<section id=\"Groovy_Templates1\" remap=\"TID_18816\">" + 
"				<title>Groovy Templates</title>" + 
"				<para>" + 
"					Within a Groovy template the mechanism is the same, however a splash of integration has been done to make creation of NodeURL simpler. A closure is bound under the <code>nodeurl</code> name and is available for invocation anytime. It will simply create a NodeURL object and return it:" + 
"				</para>" + 
"				<programlisting language=\"Java\">" + 
"UserNode node = ...;" + 
"NodeURL URL = nodeurl();" + 
"URL.setNode(node);" + 
"String s = URL.toString();" + 
"</programlisting>" + 
"				<para>" + 
"					The closure <code>nodeurl</code> is bound to Groovy template in <code>WebuiBindingContext</code>" + 
"				</para>" + 
"				<programlisting language=\"Java\">" + 
"// Closure nodeurl()" + 
"put(\"nodeurl\", new Closure(this)" + 
"{" + 
" @Override" + 
" public Object call(Object[] args)" + 
" {" + 
"  return context.createURL(NodeURL.TYPE);" + 
" }" + 
"});" + 
"</programlisting>" + 
"				<para role=\"RoleCreateBugPara\">" + 
"					<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18816-565949+%5BLatest%5D&amp;cf_build_id=18816-565949+05+Dec+2013+13%3A30+en-US+%5BLatest%5D&amp;comment=Title%3A+Groovy+Templates%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"				</para>" + 
"			</section>" + 
"		</section>" + 
"	</section>" + 
"</chapter>" + 
"</part>" + 
"	<part id=\"part-Application_Development\">" + 
"	<title>Application Development</title>" + 
"	<chapter id=\"chap-Gadget_Development\">" + 
"	<title>Gadget Development</title>" + 
"	<!--" + 
"		Source: https://docs.jboss.org/author/display/GTNPORTAL36/GDG-Portlet+Development" + 
"-->" + 
"	<para>" + 
"		In the context of the portal, gadgets are defined by the Google OpenSocial specifications. The portal framework includes Apache Shindig 2.0, which supports version 0.9 and 1.0 of OpenSocial." + 
"	</para>" + 
"	<para>" + 
"		Within a portal, it is possible to embed any OpenSocial gadget in a page, or in a user's dashboard." + 
"	</para>" + 
"	<para>" + 
"		Gadgets can be added to the application registry, and links can be added to the mini-composer (see the <citetitle>User Guide</citetitle> for more information about this feature)." + 
"	</para>" + 
"	<para role=\"RoleCreateBugPara\">" + 
"		<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18817-565949+%5BLatest%5D&amp;cf_build_id=18817-565949+05+Dec+2013+13%3A30+en-US+%5BLatest%5D&amp;comment=Title%3A+Gadget+Development%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"	</para>" + 
"	<section id=\"Developing_Gadgets\" remap=\"TID_18818\">" + 
"		<title>Developing Gadgets</title>" + 
"		<para>" + 
"			OpenSocial gadgets are built using standard HTML and JavaScript. The container offers an API, the documentation for which is available at <ulink url=\"http://opensocial-resources.googlecode.com/svn/spec/1.0/Core-Gadget.xml\"/>." + 
"		</para>" + 
"		<para>" + 
"			Unlike portlets, a gadget has very little knowledge of its context (the portal) and its integration within the portal may be more limited (in terms of visual integration for instance)." + 
"		</para>" + 
"		<para>" + 
"			Google Web Toolkit (<abbrev>GWT</abbrev>) applications can technically be used as gadgets. GWT simplifies the process of creating user-friendly applications, however its usage is not recommended. Google's strategy to keep GWT applications running as gadgets cannot clearly be established, therefore GWT applications are not part of the standard Red Hat JBoss Portal support program." + 
"		</para>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18818-565949+%5BLatest%5D&amp;cf_build_id=18818-565949+05+Dec+2013+13%3A30+en-US+%5BLatest%5D&amp;comment=Title%3A+Developing+Gadgets%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"	</section>" + 
"</chapter>" + 
"	<chapter id=\"chap-Portlet_Development_Resources\">" + 
"	<title>Portlet Development Resources</title>" + 
"	<para role=\"RoleCreateBugPara\">" + 
"		<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18819-565949+%5BLatest%5D&amp;cf_build_id=18819-565949+05+Dec+2013+13%3A30+en-US+%5BLatest%5D&amp;comment=Title%3A+Portlet+Development+Resources%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"	</para>" + 
"	<section id=\"sect-JSR-168_and_JSR-286_overview\">" + 
"		<title>JSR-168 and JSR-286 overview</title>" + 
"		<para>" + 
"			The Java Community Process (<literal>JCP</literal>) uses Java Specification Requests (<literal>JSR</literal>s) to define proposed specifications and technologies designed for the Java platform." + 
"		</para>" + 
"		<para>" + 
"			Portlet Specifications aim at defining portlets that can be used by any <ulink url=\"http://www.jcp.org/en/jsr/detail?id=168\">JSR-168 (Portlet 1.0)</ulink> or <ulink url=\"http://www.jcp.org/en/jsr/detail?id=286\">JSR-286 (Portlet 2.0)</ulink> portlet container." + 
"		</para>" + 
"		<para>" + 
"			The Red Hat JBoss Portal includes a container that supports both versions." + 
"		</para>" + 
"		<para>" + 
"			This chapter gives a brief overview of the Portlet Specifications. Portlet developers are strongly encouraged to read the JSR-286 Portlet Specification, which is available at <ulink url=\"http://www.jcp.org/en/jsr/detail?id=286\"/>." + 
"		</para>" + 
"		<para>" + 
"			The portal offers complete JSR-286 compliance. Any compliant JSR-168 or JSR-286 portlet operates inside the portal as mandated by the respective specifications." + 
"		</para>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18820-565949+%5BLatest%5D&amp;cf_build_id=18820-565949+05+Dec+2013+13%3A30+en-US+%5BLatest%5D&amp;comment=Title%3A+JSR-168+and+JSR-286+overview%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"		<section id=\"Portal_Pages\" remap=\"TID_18821\">" + 
"			<title>Portal Pages</title>" + 
"			<para>" + 
"				A portal can be considered as a series of web pages with different <emphasis>areas</emphasis> within them. Those areas contain different <emphasis>windows</emphasis> and each <emphasis>window</emphasis> contains a <emphasis>portlet</emphasis>:" + 
"			</para>" + 
"			<para>" + 
"				The diagram below visually represents this nesting:" + 
"			</para>" + 
"			<figure>" + 
"				<title id=\"SpecPortalDef\">Portal Specification</title>" + 
"				<mediaobject>" + 
"					<imageobject role=\"html\">" + 
"						<imagedata align=\"center\" fileref=\"images/2923.png\" format=\"PNG\"/>" + 
"					</imageobject>" + 
"					<textobject>" + 
"						<phrase>Diagram describing the different components that comprise a Portal page. The diagram shows the difference between decorations and controls, portlet fragments, portlet windows, and the overall portlet page.</phrase>" + 
"					</textobject>" + 
"				</mediaobject>" + 
"			</figure>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18821-565949+%5BLatest%5D&amp;cf_build_id=18821-565949+05+Dec+2013+13%3A30+en-US+%5BLatest%5D&amp;comment=Title%3A+Portal+Pages%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"		<section id=\"Rendering_Modes\" remap=\"TID_18822\">" + 
"			<title>Rendering Modes</title>" + 
"			<para>" + 
"				A portlet can have different view modes. Three modes are defined by the JSR-286 specification:" + 
"			</para>" + 
"			<variablelist>" + 
"				<varlistentry>" + 
"					<term>View</term>" + 
"					<listitem>" + 
"						<para>" + 
"							Generates markup reflecting the current state of the portlet." + 
"						</para>" + 
"					</listitem>" + 
"				</varlistentry>" + 
"				<varlistentry>" + 
"					<term>Edit</term>" + 
"					<listitem>" + 
"						<para>" + 
"							Allows a user to customize the behavior of the portlet." + 
"						</para>" + 
"					</listitem>" + 
"				</varlistentry>" + 
"				<varlistentry>" + 
"					<term>Help</term>" + 
"					<listitem>" + 
"						<para>" + 
"							Provides information to the user as to how to use the portlet." + 
"						</para>" + 
"					</listitem>" + 
"				</varlistentry>" + 
"			</variablelist>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18822-565949+%5BLatest%5D&amp;cf_build_id=18822-565949+05+Dec+2013+13%3A30+en-US+%5BLatest%5D&amp;comment=Title%3A+Rendering+Modes%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"		<section id=\"Window_States\" remap=\"TID_18823\">" + 
"			<title>Window States</title>" + 
"			<para>" + 
"				Window states are an indicator of how much page space a portlet consumes on any given page. The three states defined by the JSR-286 specification are:" + 
"			</para>" + 
"			<variablelist>" + 
"				<varlistentry>" + 
"					<term>Normal</term>" + 
"					<listitem>" + 
"						<para>" + 
"							A portlet shares this page with other portlets." + 
"						</para>" + 
"					</listitem>" + 
"				</varlistentry>" + 
"				<varlistentry>" + 
"					<term>Minimized</term>" + 
"					<listitem>" + 
"						<para>" + 
"							A portlet may show very little information, or none at all." + 
"						</para>" + 
"					</listitem>" + 
"				</varlistentry>" + 
"				<varlistentry>" + 
"					<term>Maximized</term>" + 
"					<listitem>" + 
"						<para>" + 
"							A portlet may be the only portlet displayed on this page." + 
"						</para>" + 
"					</listitem>" + 
"				</varlistentry>" + 
"			</variablelist>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18823-565949+%5BLatest%5D&amp;cf_build_id=18823-565949+05+Dec+2013+13%3A30+en-US+%5BLatest%5D&amp;comment=Title%3A+Window+States%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"	</section>" + 
"	<section id=\"sect-Tutorials\">" + 
"		<title>Tutorials</title>" + 
"		<para>" + 
"			The tutorials contained in this chapter are targeted toward portlet developers. It is also recommended that developers read and understand the <ulink url=\"http://www.jcp.org/en/jsr/detail?id=286\"> JSR-286 Portlet Specification</ulink> ." + 
"		</para>" + 
"		<note>" + 
"			<title>Maven</title>" + 
"			<para>" + 
"				This example is using Maven to compile and build the web archive. Maven versions can be downloaded from <ulink url=\"http://maven.apache.org/download.html\">maven.apache.org</ulink>" + 
"			</para>" + 
"		</note>" + 
"		<!--DOCS NOTE - jmorgan - Commented out the JSF Example section below because the new Portlet Bridge chapter describes the bridge much better than this. -->" + 
"		<!--<section id=\"sect-Reference_Guide-JavaServer_Pages_Portlet_Example-JSF_example_using_the_JBoss_Portlet_Bridge\">" + 
"  <title>JSF example using the JBoss Portlet Bridge</title>" + 
"  <para>" + 
"                    In order to write a portlet using JSF, a &apos;bridge&apos; is needed. This software allows developers to write a portlet application as if it was a JSF application. The bridge then negotiates the interactions between the two layers." + 
"                </para>" + 
"  <para>                    As in any JSF application, the file <literal>faces-config.xml</literal> is required. It must contain the following information:" + 
"                </para>" + 
"  <programlisting language=\"XML\" role=\"XML\"><xi:include xmlns:xi=\"http://www.w3.org/2001/XInclude\" href=\"../../extras/PortletDevelopment_Standard/default253.xml\" parse=\"text\"/></programlisting>" + 
"  <para>" + 
"                    The portlet bridge libraries must be available and are usually bundled with the <literal>WEB-INF/lib</literal> directory of the web archive." + 
"                </para>" + 
"  <para>" + 
"                    The other differences when compared to a regular portlet application are in the portlet descriptor. All the relevant details about this can be found in the JSR-329 specification that the JBoss Portlet Bridge implements." + 
"                </para>" + 
"  <example>" + 
"    <title>Portlet Descriptor Explanation</title>" + 
"    <programlisting language=\"XML\" role=\"XML\"><xi:include xmlns:xi=\"http://www.w3.org/2001/XInclude\" href=\"../../extras/PortletDevelopment_Standard/default254.xml\" parse=\"text\"/></programlisting>" + 
"    <para>" + 
"         Comment #1: All JSF portlets define <literal>javax.portlet.faces.GenericFacesPortlet</literal> as a portlet class. This class is part of the JBoss Portlet Bridge." + 
"        </para>" + 
"    <para>" + 
"            Comment #2: This is a mandatory parameter to define what&apos;s the default page to display." + 
"        </para>" + 
"    <para>" + 
"            Comment #3: This parameter defines which page to display on the &apos;edit&apos; mode." + 
"        </para>" + 
"    <para>" + 
"            Comment #4: This parameter defines which page to display on the &apos;help&apos; mode." + 
"        </para>" + 
"  </example>" + 
"  <note>" + 
"    <title>JBoss Portlet Bridge</title>" + 
"    <para>" + 
"                        For more information about the JBoss Portlet Bridge, see the dedicated chapter which is part of this document." + 
"                    </para>" + 
"  </note>" + 
"</section>-->" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18824-565949+%5BLatest%5D&amp;cf_build_id=18824-565949+05+Dec+2013+13%3A30+en-US+%5BLatest%5D&amp;comment=Title%3A+Tutorials%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"		<section id=\"sect-Deploying_your_first_portlet\">" + 
"			<title>Deploying your first portlet</title>" + 
"			<para>" + 
"				This section describes how to deploy a portlet in the Red Hat JBoss Portal (JBoss Portal)." + 
"			</para>" + 
"			<para>" + 
"				An example portlet called <filename>SimplestHelloWorld</filename> is available in the <filename>/jboss-jpp-<replaceable>VERSION</replaceable>-src/portal/examples/portlets/</filename> directory of the JBoss Portal sources package." + 
"			</para>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18825-565949+%5BLatest%5D&amp;cf_build_id=18825-565949+05+Dec+2013+13%3A30+en-US+%5BLatest%5D&amp;comment=Title%3A+Deploying+your+first+portlet%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"			<section id=\"Compiling\" remap=\"TID_18826\">" + 
"				<title>Compiling</title>" + 
"				<para>" + 
"					To compile and package the application:" + 
"				</para>" + 
"				<procedure>" + 
"					<step>" + 
"						<para>" + 
"							Navigate to the application directory and execute:" + 
"						</para>" + 
"						<programlisting>mvn package</programlisting>" + 
"					</step>" + 
"					<step>" + 
"						<para>" + 
"							If the example is successfully packaged, the result will be available in: <filename>gatein-simplest-helloworld-6.1.0.GA.war</filename>." + 
"						</para>" + 
"					</step>" + 
"					<step>" + 
"						<para>" + 
"							Copy the package file into <literal><replaceable>JPP_HOME</replaceable>/standalone/deployments</literal>." + 
"						</para>" + 
"					</step>" + 
"					<step>" + 
"						<para>" + 
"							Start the portal (if it is not already running)." + 
"						</para>" + 
"					</step>" + 
"					<step>" + 
"						<para>" + 
"							Add the new portlet to the Application Registry." + 
"						</para>" + 
"					</step>" + 
"					<step>" + 
"						<para>" + 
"							Create a new portal page and add the portlet to it." + 
"						</para>" + 
"					</step>" + 
"				</procedure>" + 
"				<para role=\"RoleCreateBugPara\">" + 
"					<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18826-565949+%5BLatest%5D&amp;cf_build_id=18826-565949+05+Dec+2013+13%3A30+en-US+%5BLatest%5D&amp;comment=Title%3A+Compiling%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"				</para>" + 
"			</section>" + 
"			<section id=\"Package_Structure1\" remap=\"TID_18827\">" + 
"				<title>Package Structure</title>" + 
"				<para>" + 
"					Like other Java EE applications, the Red Hat JBoss Portal portlets are packaged in <literal>WAR</literal> files. A typical portlet <literal>WAR</literal> file can include servlets, resource bundles, images, HTML, JavaServer Pages (JSP), and other static or dynamic files." + 
"				</para>" + 
"				<para>" + 
"					The following is an example of the directory structure of the <filename>SimplestHelloWorld</filename> portlet." + 
"				</para>" + 
"				<example>" + 
"					<title>Portlet Directory Structure Explanation</title>" + 
"					<programlisting>" + 
"|-- SimplestHelloWorld-0.0.1.war" + 
"|   `-- WEB-INF" + 
"|       |-- classes" + 
"|       |   `-- org" + 
"|       |       `-- jboss" + 
"|       |           `-- portal" + 
"|       |               `-- portlet" + 
"|       |                   `-- samples" + 
"|       |                       `-- SimplestHelloWorldPortlet.class" + 
"|       |-- portlet.xml" + 
"|       `-- web.xml" + 
"</programlisting>" + 
"					<variablelist>" + 
"						<title>Directory Structure Elements</title>" + 
"						<varlistentry>" + 
"							<term>SimplestHelloWorldPortlet.class</term>" + 
"							<listitem>" + 
"								<para>" + 
"									The compiled Java class, which implements <emphasis>javax.portlet.Portlet</emphasis> through <emphasis>javax.portlet.GenericPortlet</emphasis>." + 
"								</para>" + 
"							</listitem>" + 
"						</varlistentry>" + 
"						<varlistentry>" + 
"							<term>portlet.xml</term>" + 
"							<listitem>" + 
"								<para>" + 
"									The mandatory descriptor file for portlets, which is used during deployment." + 
"								</para>" + 
"							</listitem>" + 
"						</varlistentry>" + 
"						<varlistentry>" + 
"							<term>web.xml</term>" + 
"							<listitem>" + 
"								<para>" + 
"									The mandatory descriptor for web applications." + 
"								</para>" + 
"							</listitem>" + 
"						</varlistentry>" + 
"					</variablelist>" + 
"				</example>" + 
"				<para role=\"RoleCreateBugPara\">" + 
"					<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18827-565949+%5BLatest%5D&amp;cf_build_id=18827-565949+05+Dec+2013+13%3A30+en-US+%5BLatest%5D&amp;comment=Title%3A+Package+Structure%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"				</para>" + 
"			</section>" + 
"			<section id=\"Portlet_Class\" remap=\"TID_18828\">" + 
"				<title>Portlet Class</title>" + 
"				<para>" + 
"					Below is the Java source for an example portlet named <filename>SimplestHelloWorldPortlet</filename>." + 
"				</para>" + 
"				<note>" + 
"					<para>" + 
"						Portlets are responsible for generating markup fragments, as they are included on a page and are surrounded by other portlets. This means that a portlet outputting HTML must not output any markup that cannot be found in a <literal>&lt;body&gt;</literal> element." + 
"					</para>" + 
"				</note>" + 
"				<example>" + 
"					<title>SimplestHelloWorldPortlet Explanation</title>" + 
"					<programlisting language=\"Java\">package org.jboss.portal.portlet.samples;" + 
"" + 
"import java.io.IOException;" + 
"import java.io.PrintWriter;" + 
"// Comment #1" + 
"import javax.portlet.GenericPortlet;" + 
"import javax.portlet.RenderRequest;" + 
"import javax.portlet.RenderResponse;" + 
"" + 
"public class SimplestHelloWorldPortlet extends GenericPortlet" + 
"{" + 
"   // Comment #2" + 
"   public void doView(RenderRequest request, RenderResponse response) throws IOException" + 
"   {" + 
"      // Comment #3" + 
"      PrintWriter writer = response.getWriter();" + 
"      // Comment #4" + 
"      writer.write(\"Hello World !\");" + 
"      // Comment #5" + 
"      writer.close();" + 
"   }" + 
"}" + 
"</programlisting>" + 
"					<variablelist>" + 
"						<varlistentry>" + 
"							<term> Comment #1</term>" + 
"							<listitem>" + 
"								<para>" + 
"									All portlets must implement the <literal>javax.portlet.Portlet</literal> interface. The <classname>GenericPortlet</classname> class provides a default implementation for the Portlet interface." + 
"								</para>" + 
"								<para>" + 
"									The <classname>javax.portlet.GenericPortlet</classname> class implements the <methodname>render</methodname> method to dispatch to abstract mode-specific methods. This makes it easier to support the standard portlet modes." + 
"								</para>" + 
"								<para>" + 
"									<classname>GenericPortlet</classname> also provides a default implementation for the <methodname>processAction</methodname>, <methodname>init</methodname> and <methodname>destroy</methodname> methods. It is recommended to extend <literal>GenericPortlet</literal> for most cases." + 
"								</para>" + 
"							</listitem>" + 
"						</varlistentry>" + 
"						<varlistentry>" + 
"							<term> Comment #2</term>" + 
"							<listitem>" + 
"								<para>" + 
"									If only the <literal>view</literal> mode is required, then only the <literal>doView</literal> method needs to be implemented. The <classname>GenericPortlet</classname> render implementation calls our implementation when the <literal>view</literal> mode is requested." + 
"								</para>" + 
"							</listitem>" + 
"						</varlistentry>" + 
"						<varlistentry>" + 
"							<term>Comment #3</term>" + 
"							<listitem>" + 
"								<para>" + 
"									To obtain a writer that can produce content, use the <methodname>response.GetWriter()</methodname> method from the RenderResponse object." + 
"								</para>" + 
"							</listitem>" + 
"						</varlistentry>" + 
"						<varlistentry>" + 
"							<term> Comment #4</term>" + 
"							<listitem>" + 
"								<para>" + 
"									Write the markup to display." + 
"								</para>" + 
"							</listitem>" + 
"						</varlistentry>" + 
"						<varlistentry>" + 
"							<term> Comment #5</term>" + 
"							<listitem>" + 
"								<para>" + 
"									Closing the writer." + 
"								</para>" + 
"							</listitem>" + 
"						</varlistentry>" + 
"					</variablelist>" + 
"				</example>" + 
"				<para role=\"RoleCreateBugPara\">" + 
"					<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18828-565949+%5BLatest%5D&amp;cf_build_id=18828-565949+05+Dec+2013+13%3A30+en-US+%5BLatest%5D&amp;comment=Title%3A+Portlet+Class%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"				</para>" + 
"			</section>" + 
"			<section id=\"Application_Descriptors\" remap=\"TID_18829\">" + 
"				<title>Application Descriptors</title>" + 
"				<para>" + 
"					The portal requires certain descriptors to be included in a portlet <literal>WAR</literal> file. These descriptors are defined by the Java EE (<filename>web.xml</filename>) and Portlet Specification (<filename>portlet.xml</filename>)." + 
"				</para>" + 
"				<para>" + 
"					Below is an example of the <filename>SimplestHelloWorldPortlet/WEB-INF/portlet.xml</filename> file. This file must adhere to its definition in the JSR-286 Portlet Specification. More than one portlet application may be defined in this file." + 
"				</para>" + 
"				<example>" + 
"					<title>The portlet.xml File Explanation</title>" + 
"					<programlisting language=\"XML\">&lt;portlet-app xmlns=\"http://java.sun.com/xml/ns/portlet/portlet-app_2_0.xsd\"" + 
"   xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"" + 
"   xsi:schemaLocation=\"http://java.sun.com/xml/ns/portlet/portlet-app_2_0.xsd http://java.sun.com/xml/ns/portlet/portlet-app_2_0.xsd\"" + 
"   version=\"2.0\"&gt;" + 
"   &lt;portlet&gt;" + 
"   	  &lt;!-- Comment #1 --&gt;" + 
"      &lt;portlet-name&gt;SimplestHelloWorldPortlet&lt;/portlet-name&gt;" + 
"      &lt;!-- Comment #2 --&gt;" + 
"      &lt;portlet-class&gt;" + 
"	org.jboss.portal.portlet.samples.SimplestHelloWorldPortlet" + 
"      &lt;/portlet-class&gt;" + 
"      &lt;!-- Comment #3 --&gt;" + 
"      &lt;supports&gt;" + 
"        &lt;mime-type&gt;text/html&lt;/mime-type&gt;" + 
"      &lt;/supports&gt;" + 
"      &lt;!-- Comment #4 --&gt;" + 
"      &lt;portlet-info&gt;" + 
"          &lt;title&gt;Simplest Hello World Portlet&lt;/title&gt;" + 
"      &lt;/portlet-info&gt;" + 
"   &lt;/portlet&gt;" + 
"&lt;/portlet-app&gt;" + 
"</programlisting>" + 
"					<variablelist>" + 
"						<title>Notes</title>" + 
"						<varlistentry>" + 
"							<term>Comment #1</term>" + 
"							<listitem>" + 
"								<para>" + 
"									Define the portlet name. It does not have to be the class name." + 
"								</para>" + 
"							</listitem>" + 
"						</varlistentry>" + 
"						<varlistentry>" + 
"							<term>Comment #2</term>" + 
"							<listitem>" + 
"								<para>" + 
"									The Fully Qualified Name (<literal>FQN</literal>) of your portlet class must be declared here." + 
"								</para>" + 
"							</listitem>" + 
"						</varlistentry>" + 
"						<varlistentry>" + 
"							<term>Comment #3</term>" + 
"							<listitem>" + 
"								<para>" + 
"									The <literal>&lt;supports&gt;</literal> element declares all of the markup types that a portlet supports in the <literal>render</literal> method. This is accomplished via the <literal>&lt;mime-type&gt;</literal> element, which is required for every portlet." + 
"								</para>" + 
"								<para>" + 
"									The declared MIME types must match the capability of the portlet. It allows administrators to pair which modes and window states are supported for each markup type. This does not have to be declared as all portlets must support the <literal>view</literal> portlet mode." + 
"								</para>" + 
"								<para>" + 
"									Use the <literal>&lt;mime-type&gt;</literal> element to define which markup type the portlet supports. In the example above this is <literal>text/html</literal>. This section tells the portal to only output <literal>HTML</literal>." + 
"								</para>" + 
"							</listitem>" + 
"						</varlistentry>" + 
"						<varlistentry>" + 
"							<term>Comment #4</term>" + 
"							<listitem>" + 
"								<para>" + 
"									When rendered, the portlet's title is displayed as the header in the portlet window, unless it is overridden programmatically. In the example above the title would be <literal>Simplest Hello World Portlet</literal>." + 
"								</para>" + 
"							</listitem>" + 
"						</varlistentry>" + 
"					</variablelist>" + 
"				</example>" + 
"				<para role=\"RoleCreateBugPara\">" + 
"					<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18829-565949+%5BLatest%5D&amp;cf_build_id=18829-565949+05+Dec+2013+13%3A30+en-US+%5BLatest%5D&amp;comment=Title%3A+Application+Descriptors%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"				</para>" + 
"			</section>" + 
"		</section>" + 
"		<section id=\"sect-JavaServer_Pages_Portlet_Example\">" + 
"			<title>JavaServer Pages Portlet Example</title>" + 
"			<para>" + 
"				This section discusses:" + 
"			</para>" + 
"			<orderedlist numeration=\"arabic\">" + 
"				<listitem>" + 
"					<para>" + 
"						Adding more features to the previous example." + 
"					</para>" + 
"				</listitem>" + 
"				<listitem>" + 
"					<para>" + 
"						Using a JSP page to render the markup." + 
"					</para>" + 
"				</listitem>" + 
"				<listitem>" + 
"					<para>" + 
"						Using the portlet tag library to generate links to the portlet in different ways." + 
"					</para>" + 
"				</listitem>" + 
"				<listitem>" + 
"					<para>" + 
"						Using the other standard portlet modes." + 
"					</para>" + 
"				</listitem>" + 
"			</orderedlist>" + 
"			<note>" + 
"				<para>" + 
"					The example used in this section is available in the directory of the portal sources package." + 
"				</para>" + 
"			</note>" + 
"			<procedure>" + 
"				<title>Compile JavaServer Pages Portlet</title>" + 
"				<step>" + 
"					<remark>" + 
"						NEEDINFO - isn't this now part of the Wolf Repo stuff?" + 
"					</remark>" + 
"					<para>" + 
"						Obtain the Red Hat JBoss Portal sources package from the Customer Support portal." + 
"					</para>" + 
"				</step>" + 
"				<step>" + 
"					<para>" + 
"						Move to <filename>/jboss-jpp-<replaceable>VERSION</replaceable>-src/portal/examples/portlets/jsphellouser</filename>" + 
"					</para>" + 
"				</step>" + 
"				<step>" + 
"					<para>" + 
"						Execute <code>mvn package</code>." + 
"					</para>" + 
"				</step>" + 
"				<step>" + 
"					<para>" + 
"						Copy <filename>jsphellouser/target/gatein-jsp-hellouser-6.1.0.GA.war</filename> to the <literal>deploy</literal> directory of JBoss Application Server." + 
"					</para>" + 
"				</step>" + 
"				<step>" + 
"					<para>" + 
"						Add the new portlet to the Application Registry." + 
"					</para>" + 
"				</step>" + 
"				<step>" + 
"					<para>" + 
"						Create a new portal page and add the portlet to it." + 
"					</para>" + 
"				</step>" + 
"			</procedure>" + 
"			<remark>" + 
"				SCREENSHOT - This image must be recaptured to reflect the new branding." + 
"			</remark>" + 
"			<figure>" + 
"				<title id=\"fig_output\">Create New Portal Page and Add Portlet</title>" + 
"				<mediaobject>" + 
"					<imageobject role=\"html\">" + 
"						<imagedata align=\"center\" fileref=\"images/2872.png\" format=\"PNG\"/>" + 
"					</imageobject>" + 
"					<textobject>" + 
"						<phrase>The JSP Hello User portlet displayed on a new portlet page. The portlet has a single available field (Name) and a Submit button.</phrase>" + 
"					</textobject>" + 
"				</mediaobject>" + 
"			</figure>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18830-565953+%5BLatest%5D&amp;cf_build_id=18830-565953+05+Dec+2013+13%3A37+en-US+%5BLatest%5D&amp;comment=Title%3A+JavaServer+Pages+Portlet+Example%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"			<section id=\"Package_Structure\" remap=\"TID_18831\">" + 
"				<title>Package Structure</title>" + 
"				<para>" + 
"					The package structure in this tutorial does not differ greatly from the previous example, with the exception of adding some JSP files which are detailed later." + 
"				</para>" + 
"				<para>" + 
"					The <literal>JSPHelloUser</literal> portlet contains the mandatory portlet application descriptors. The following is an example of the directory structure of the <literal>JSPHelloUser</literal> portlet:" + 
"				</para>" + 
"				<programlisting language=\"Java\" role=\"Java\">gatein-jsp-hellouser-&gt;1.0.0-GA-SNAPSHOT.war" + 
"    |-- META-INF" + 
"    |   |-- MANIFEST.MF" + 
"    |-- WEB-INF" + 
"    |   |-- classes" + 
"    |   |   `-- org" + 
"    |   |       `-- jboss" + 
"    |   |           `-- portal" + 
"    |   |               `-- portlet" + 
"    |   |                   `-- samples" + 
"    |   |                       `-- JSPHelloUserPortlet.class" + 
"    |   |-- portlet.xml" + 
"    |   `-- web.xml" + 
"    `-- jsp" + 
"        |-- edit.jsp" + 
"        |-- hello.jsp" + 
"        |-- help.jsp" + 
"        `-- welcome.jsp" + 
"</programlisting>" + 
"				<para role=\"RoleCreateBugPara\">" + 
"					<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18831-565953+%5BLatest%5D&amp;cf_build_id=18831-565953+05+Dec+2013+13%3A37+en-US+%5BLatest%5D&amp;comment=Title%3A+Package+Structure%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"				</para>" + 
"			</section>" + 
"			<section id=\"Portlet_Class1\" remap=\"TID_18832\">" + 
"				<title>Portlet Class</title>" + 
"				<para>" + 
"					The code below is from the <filename> jsphellouser/src/main/java/org/jboss/portal/portlet/samples/JSPHelloUserPortlet.java</filename> Java source. It is split in different pieces." + 
"				</para>" + 
"				<example>" + 
"					<title>JSPHelloUserPortlet Explanation</title>" + 
"					<programlisting language=\"Java\">package org.jboss.portal.portlet.samples;" + 
" " + 
"import java.io.IOException;" + 
" " + 
"import javax.portlet.ActionRequest;" + 
"import javax.portlet.ActionResponse;" + 
"import javax.portlet.GenericPortlet;" + 
"import javax.portlet.PortletException;" + 
"import javax.portlet.PortletRequestDispatcher;" + 
"import javax.portlet.RenderRequest;" + 
"import javax.portlet.RenderResponse;" + 
"import javax.portlet.UnavailableException;" + 
" " + 
"public class JSPHelloUserPortlet extends GenericPortlet" + 
"{" + 
"// Comment #1    " + 
"   public void doView(RenderRequest request, RenderResponse response)" + 
"       throws PortletException, IOException" + 
"   {" + 
"// Comment #2" + 
"      String sYourName = (String) request.getParameter(\"yourname\");" + 
"      if (sYourName != null)" + 
"      {" + 
"         request.setAttribute(\"yourname\", sYourName);" + 
"// Comment #3" + 
"         PortletRequestDispatcher prd = " + 
"            getPortletContext().getRequestDispatcher(\"/jsp/hello.jsp\");" + 
"// Comment #4" + 
"         prd.include(request, response);" + 
"      }" + 
"      else" + 
"      {" + 
"//Code split between lines. Direct copy will result in parse errors." + 
"         PortletRequestDispatcher prd = getPortletContext()." + 
"          getRequestDispatcher(\"/jsp/welcome.jsp\");" + 
"         prd.include(request, response);" + 
"      }" + 
"   }" + 
"..." + 
"</programlisting>" + 
"					<variablelist>" + 
"						<varlistentry>" + 
"							<term>Comment #1</term>" + 
"							<listitem>" + 
"								<para>" + 
"									Override the <emphasis>doView</emphasis> method (as in the first tutorial)." + 
"								</para>" + 
"							</listitem>" + 
"						</varlistentry>" + 
"						<varlistentry>" + 
"							<term>Comment #2</term>" + 
"							<listitem>" + 
"								<para>" + 
"									This entry attempts to obtain the value of the render parameter named <literal>yourname</literal>. If defined it should redirect to the <filename>hello.jsp</filename> JSP page, otherwise to the <filename>welcome.jsp</filename> JSP page." + 
"								</para>" + 
"							</listitem>" + 
"						</varlistentry>" + 
"						<varlistentry>" + 
"							<term>Comment #3</term>" + 
"							<listitem>" + 
"								<para>" + 
"									Get a request dispatcher on a file located within the web archive." + 
"								</para>" + 
"							</listitem>" + 
"						</varlistentry>" + 
"						<varlistentry>" + 
"							<term>Comment #4</term>" + 
"							<listitem>" + 
"								<para>" + 
"									Perform the inclusion of the markup obtained from the JSP." + 
"								</para>" + 
"							</listitem>" + 
"						</varlistentry>" + 
"					</variablelist>" + 
"				</example>" + 
"				<para>" + 
"					As well as the <literal>VIEW</literal> portlet mode, the specification defines two other modes; <literal>EDIT</literal> and <literal>HELP</literal>." + 
"				</para>" + 
"				<para>" + 
"					These modes need to be defined in the <filename>portlet.xml</filename> descriptor. This will enable the corresponding buttons on the portlet's window." + 
"				</para>" + 
"				<para>" + 
"					The generic portlet that is inherited dispatches the different views to the methods: <literal>doView</literal> , <literal>doHelp</literal> and <literal>doEdit</literal>." + 
"				</para>" + 
"				<programlisting language=\"Java\">..." + 
"   protected void doHelp(RenderRequest rRequest, RenderResponse rResponse) throws PortletException, IOException," + 
"         UnavailableException" + 
"   {" + 
"      rResponse.setContentType(\"text/html\");" + 
"      PortletRequestDispatcher prd = getPortletContext().getRequestDispatcher(\"/jsp/help.jsp\");" + 
"      prd.include(rRequest, rResponse);" + 
"   }" + 
"" + 
"   protected void doEdit(RenderRequest rRequest, RenderResponse rResponse) throws PortletException, IOException," + 
"         UnavailableException" + 
"   {" + 
"      rResponse.setContentType(\"text/html\");" + 
"      PortletRequestDispatcher prd = getPortletContext().getRequestDispatcher(\"/jsp/edit.jsp\");" + 
"      prd.include(rRequest, rResponse);" + 
"   }" + 
"..." + 
"</programlisting>" + 
"				<para>" + 
"					Portlet calls happen in one or two phases. One when the portlet is rendered and two when the portlet is actioned <emphasis>then</emphasis> rendered." + 
"				</para>" + 
"				<para>" + 
"					An action phase is a phase where a state changes. The render phase will have access to render parameters that will be passed each time the portlet is refreshed (with the exception of caching capabilities)." + 
"				</para>" + 
"				<para>" + 
"					The code to be executed during an action has to be implemented in the <emphasis>processAction</emphasis> method of the portlet." + 
"				</para>" + 
"				<example>" + 
"					<title>processAction Explanation</title>" + 
"					<programlisting language=\"Java\">..." + 
"// Comment #1" + 
"         public void processAction(ActionRequest aRequest, ActionResponse aResponse) throws PortletException, IOException, UnavailableException" + 
"   {" + 
"// Comment #2" + 
"      String sYourname = (String) aRequest.getParameter(\"yourname\");" + 
"// Comment #3" + 
"      aResponse.setRenderParameter(\"yourname\", sYourname);" + 
"   }" + 
"..." + 
"</programlisting>" + 
"					<variablelist>" + 
"						<varlistentry>" + 
"							<term>Comment #1</term>" + 
"							<listitem>" + 
"								<para>" + 
"									<literal>processAction</literal> is the method from <literal>GenericPortlet</literal> to override for the <emphasis>action</emphasis> phase." + 
"								</para>" + 
"							</listitem>" + 
"						</varlistentry>" + 
"						<varlistentry>" + 
"							<term>Comment #2</term>" + 
"							<listitem>" + 
"								<para>" + 
"									Here the parameter is retrieved through an <emphasis>action URL</emphasis>." + 
"								</para>" + 
"							</listitem>" + 
"						</varlistentry>" + 
"						<varlistentry>" + 
"							<term>Comment #3</term>" + 
"							<listitem>" + 
"								<para>" + 
"									The value of <literal>yourname</literal> is kept to make it available in the rendering phase. The previous line simply copies an action parameter to a render parameter for this example." + 
"								</para>" + 
"							</listitem>" + 
"						</varlistentry>" + 
"					</variablelist>" + 
"				</example>" + 
"				<para role=\"RoleCreateBugPara\">" + 
"					<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18832-565953+%5BLatest%5D&amp;cf_build_id=18832-565953+05+Dec+2013+13%3A37+en-US+%5BLatest%5D&amp;comment=Title%3A+Portlet+Class%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"				</para>" + 
"			</section>" + 
"			<section id=\"JSP_files_and_the_Portlet_Tag_Library\" remap=\"TID_18833\">" + 
"				<title>JSP files and the Portlet Tag Library</title>" + 
"				<para>" + 
"					The <filename>help.jsp</filename> and <filename>edit.jsp</filename> files are very simple. Note that CSS styles are used as defined in the portlet specification. This ensures that the portlet will render well within the theme and across portal vendors." + 
"				</para>" + 
"				<programlisting language=\"CSS\">&lt;div class=\"portlet-section-header\"&gt;Help mode&lt;/div&gt;" + 
"&lt;div class=\"portlet-section-body\"&gt;This is the help mode, a convenient place to give the user some help information.&lt;/div&gt;" + 
"</programlisting>" + 
"				<programlisting language=\"CSS\">&lt;div class=\"portlet-section-header\"&gt;Edit mode&lt;/div&gt;" + 
"&lt;div class=\"portlet-section-body\"&gt;This is the edit mode, a convenient place to let the user change his portlet preferences.&lt;/div&gt;" + 
"</programlisting>" + 
"				<para>" + 
"					The landing page contains the links and form to call our portlet." + 
"				</para>" + 
"				<example>" + 
"					<title>Landing Page Explanation</title>" + 
"					<programlisting language=\"CSS\">&lt;!-- Comment #1 --&gt;" + 
"&lt;%@ taglib uri=\"http://java.sun.com/portlet\" prefix=\"portlet\" %&gt;" + 
" " + 
"&lt;div class=\"portlet-section-header\"&gt;Welcome !&lt;/div&gt;" + 
" " + 
"&lt;br/&gt;" + 
" " + 
"&lt;div class=\"portlet-font\"&gt;Welcome on the JSP Hello User portlet," + 
"my name is GateIn Portal. What's yours ?&lt;/div&gt;" + 
" " + 
"&lt;br/&gt;" + 
" " + 
"&lt;div class=\"portlet-font\"&gt;Method 1: We simply pass the parameter to the render phase:&lt;br/&gt;" + 
"&lt;!-- Comment #2 --&gt;" + 
"&lt;a href=\"&lt;portlet:renderURL&gt;&lt;portlet:param name=\"yourname\" value=\"John Doe\"/&gt;" + 
"                &lt;/portlet:renderURL&gt;\"&gt;John Doe&lt;/a&gt;&lt;/div&gt;" + 
" " + 
"&lt;br/&gt;" + 
" " + 
"&lt;div class=\"portlet-font\"&gt;Method 2: We pass the parameter to the render phase, using valid XML:" + 
"Please check the source code to see the difference with Method 1." + 
"&lt;!-- Comment #3 --&gt;" + 
"&lt;portlet:renderURL var=\"myRenderURL\"&gt;" + 
"    &lt;portlet:param name=\"yourname\" value='John Doe'/&gt;" + 
"&lt;/portlet:renderURL&gt;" + 
"&lt;br/&gt;" + 
"&lt;!-- Comment #4 --&gt;" + 
"&lt;a href=\"&lt;%= myRenderURL %&gt;\"&gt;John Doe&lt;/a&gt;&lt;/div&gt;" + 
" " + 
"&lt;br/&gt;" + 
" " + 
"&lt;div class=\"portlet-font\"&gt;Method 3: We use a form:&lt;br/&gt;" + 
"&lt;!-- Comment #5 --&gt;" + 
"&lt;portlet:actionURL var=\"myActionURL\"/&gt;" + 
"&lt;!-- Comment #6 --&gt;" + 
"&lt;form action=\"&lt;%= myActionURL %&gt;\" method=\"POST\"&gt;" + 
"         &lt;span class=\"portlet-form-field-label\"&gt;Name:&lt;/span&gt;" + 
"         &lt;input class=\"portlet-form-input-field\" type=\"text\" name=\"yourname\"/&gt;" + 
"         &lt;input class=\"portlet-form-button\" type=\"Submit\"/&gt;" + 
"&lt;/form&gt;" + 
"&lt;/div&gt;" + 
"</programlisting>" + 
"					<variablelist>" + 
"						<varlistentry>" + 
"							<term> Comment #1</term>" + 
"							<listitem>" + 
"								<para>" + 
"									The portlet taglib. This is required." + 
"								</para>" + 
"							</listitem>" + 
"						</varlistentry>" + 
"						<varlistentry>" + 
"							<term> Comment #2</term>" + 
"							<listitem>" + 
"								<para>" + 
"									The first method showed here is the simplest one. <literal>portlet:renderURL</literal> will create a URL that calls the render phase of the current portlet and append the result at the place of the markup (within a tag). A parameter is also added directly to the URL." + 
"								</para>" + 
"							</listitem>" + 
"						</varlistentry>" + 
"						<varlistentry>" + 
"							<term> Comment #3</term>" + 
"							<listitem>" + 
"								<para>" + 
"									In this method the <literal>var</literal> attribute is used. This avoids having one XML tag within another. Instead of printing the URL the <literal>portlet:renderURL</literal> tag will store the result in the referenced variable ( <literal>myRenderURL</literal>)." + 
"								</para>" + 
"							</listitem>" + 
"						</varlistentry>" + 
"						<varlistentry>" + 
"							<term> Comment #4</term>" + 
"							<listitem>" + 
"								<para>" + 
"									The variable <literal>myRenderURL</literal> is used like any other JSP variable." + 
"								</para>" + 
"							</listitem>" + 
"						</varlistentry>" + 
"						<varlistentry>" + 
"							<term> Comment #5</term>" + 
"							<listitem>" + 
"								<para>" + 
"									The third method mixes form submission and action request. Again, a temporary variable is used to put the created URL into." + 
"								</para>" + 
"							</listitem>" + 
"						</varlistentry>" + 
"						<varlistentry>" + 
"							<term> Comment #6</term>" + 
"							<listitem>" + 
"								<para>" + 
"									The action URL is used in HTML form." + 
"								</para>" + 
"							</listitem>" + 
"						</varlistentry>" + 
"					</variablelist>" + 
"				</example>" + 
"				<para>" + 
"					In the third method, the action phase is triggered first then the render phase is triggered, which outputs some content back to the web browser based on the available render parameters." + 
"				</para>" + 
"				<figure>" + 
"					<title id=\"process\">Render Phase Process</title>" + 
"					<mediaobject>" + 
"						<imageobject role=\"html\">" + 
"							<imagedata align=\"center\" fileref=\"images/2873.png\" format=\"PNG\"/>" + 
"						</imageobject>" + 
"						<textobject>" + 
"							<phrase>Diagram showing how the action phase is triggered first then the render phase is triggered, which outputs some content back to the web browser based on the available render parameters.</phrase>" + 
"						</textobject>" + 
"					</mediaobject>" + 
"				</figure>" + 
"				<para role=\"RoleCreateBugPara\">" + 
"					<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18833-565953+%5BLatest%5D&amp;cf_build_id=18833-565953+05+Dec+2013+13%3A37+en-US+%5BLatest%5D&amp;comment=Title%3A+JSP+files+and+the+Portlet+Tag+Library%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"				</para>" + 
"			</section>" + 
"		</section>" + 
"	</section>" + 
"</chapter>" + 
"	<chapter id=\"chap-Portlet_Development\">" + 
"	<title>Portlet Development</title>" + 
"	<!--" + 
"		Source: https://docs.jboss.org/author/display/GTNPORTAL36/GDG-Portlet+Development" + 
"	-->" + 
"	<para>" + 
"		The Red Hat JBoss Portal (JBoss Portal) interface is fully customizable with applications called portlets. Application development can be done by using the plain Portlet specification JSR-286. It is also possible to use the JBoss Portlet Bridge to write applications with JavaServerFaces (JSF), RichFaces or Seam." + 
"	</para>" + 
"	<para>" + 
"		Learn how to set up your project in a robust and effective way by using the JBoss Portal Bill of Materials (BOM)." + 
"	</para>" + 
"	<itemizedlist role=\"see-also-list\">" + 
"		<title>See Also:</title>" + 
"		<listitem>" + 
"			<para>" + 
"				<xref linkend=\"sect-JSR-168_and_JSR-286_overview\" xrefstyle=\"see-also\"/>" + 
"			</para>" + 
"		</listitem>" + 
"		<listitem>" + 
"			<para>" + 
"				<xref linkend=\"JBoss_Portlet_Bridge\" xrefstyle=\"see-also\"/>" + 
"			</para>" + 
"		</listitem>" + 
"		<listitem>" + 
"			<para>" + 
"				<xref linkend=\"chap-Architectural_Choices\" xrefstyle=\"see-also\"/>" + 
"			</para>" + 
"		</listitem>" + 
"	</itemizedlist>" + 
"	<para role=\"RoleCreateBugPara\">" + 
"		<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18834-565953+%5BLatest%5D&amp;cf_build_id=18834-565953+05+Dec+2013+13%3A37+en-US+%5BLatest%5D&amp;comment=Title%3A+Portlet+Development%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"	</para>" + 
"	<section id=\"sect-Starting_a_Portlet_Project\">" + 
"		<title>Starting a Portlet Project</title>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18835-565953+%5BLatest%5D&amp;cf_build_id=18835-565953+05+Dec+2013+13%3A37+en-US+%5BLatest%5D&amp;comment=Title%3A+Starting+a+Portlet+Project%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"		<section id=\"The_Bill_of_Materials_BOM_Concept\" remap=\"TID_18836\">" + 
"			<title>The Bill of Materials (BOM) Concept</title>" + 
"			<para>" + 
"				To make managing dependencies easier, the BOM needed for developing typical portlet applications is available. The BOM is a Maven <filename>pom.xml</filename> file which specifies the versions of dependencies compatible with or provided by the Red Hat JBoss Portal (JBoss Portal)." + 
"			</para>" + 
"			<note>" + 
"				<para>" + 
"					The JBoss Portal BOM is closely tied to JBoss EAP for maximum compatibility with the Red Hat JBoss Middleware stack." + 
"				</para>" + 
"			</note>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18836-565953+%5BLatest%5D&amp;cf_build_id=18836-565953+05+Dec+2013+13%3A37+en-US+%5BLatest%5D&amp;comment=Title%3A+The+Bill+of+Materials+%28BOM%29+Concept%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"		<section id=\"Using_the_BOM\" remap=\"TID_18837\">" + 
"			<title>Using the BOM</title>" + 
"			<para>" + 
"				Below is the <filename>pom.xml</filename> file from the \"Simplest Hello World\" example portlet. This file contains all the necessary details." + 
"			</para>" + 
"			<para>" + 
"				In the <parameter>&lt;dependencyManagement&gt;</parameter> section, it declares <parameter>gatein-3.5-bom</parameter> as a <parameter>&lt;dependency&gt;</parameter> with <parameter>import</parameter> as the defined <parameter>&lt;scope&gt;</parameter>." + 
"			</para>" + 
"			<para>" + 
"				It indicates that the dependency will <emphasis>de facto</emphasis> be replaced with the dependencies in its <parameter>dependencyManagement</parameter> section." + 
"			</para>" + 
"			<para>" + 
"				As a result it is possible to declare the <code>javax.portlet:portlet-api</code> dependency in the <parameter>&lt;dependencies&gt;</parameter> section of the \"Simplest Hello World\" <filename>pom.xml</filename>, without specifying its <parameter>&lt;version&gt;</parameter>, <parameter>&lt;type&gt;</parameter> or <parameter>&lt;scope&gt;</parameter>. All of those parameters are managed by <parameter>gatein-3.5-bom</parameter>." + 
"			</para>" + 
"			<example>" + 
"				<title>Simplest Hello World Portlet</title>" + 
"				<programlisting language=\"XML\">" + 
"&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"" + 
"xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd\"&gt;" + 
"&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;" + 
"" + 
"&lt;artifactId&gt;simplest-hello-world-portlet&lt;/artifactId&gt;" + 
"&lt;groupId&gt;org.gatein.portal.quickstarts&lt;/groupId&gt;" + 
"&lt;name&gt;Simplest Hello World Portlet&lt;/name&gt;" + 
"&lt;version&gt;3.5.0.Final&lt;/version&gt;" + 
"&lt;packaging&gt;war&lt;/packaging&gt;" + 
"&lt;description&gt;The very essence of every possible portlet.&lt;/description&gt;" + 
"&lt;url&gt;http://www.gatein.org&lt;/url&gt;" + 
"&lt;licenses&gt;" + 
"    &lt;license&gt;" + 
"        &lt;name&gt;Apache License, Version 2.0&lt;/name&gt;" + 
"        &lt;distribution&gt;repo&lt;/distribution&gt;" + 
"        &lt;url&gt;http://www.apache.org/licenses/LICENSE-2.0.html&lt;/url&gt;" + 
"    &lt;/license&gt;" + 
"&lt;/licenses&gt;" + 
"" + 
"&lt;properties&gt;" + 
"    &lt;!-- GateIn Bill of Materials (BOM) version --&gt;" + 
"    &lt;org.jboss.bom.gatein-bom.version&gt;1.0.0.Final&lt;/org.jboss.bom.gatein-bom.version&gt;" + 
"    " + 
"    &lt;!-- Plugin versions and settings --&gt;" + 
"    &lt;jboss.as.plugin.version&gt;7.1.1.Final&lt;/jboss.as.plugin.version&gt;" + 
"    &lt;!-- maven-compiler-plugin --&gt;" + 
"    &lt;maven.compiler.plugin.version&gt;2.5.1&lt;/maven.compiler.plugin.version&gt;" + 
"    &lt;maven.compiler.target&gt;1.6&lt;/maven.compiler.target&gt;" + 
"    &lt;maven.compiler.source&gt;1.6&lt;/maven.compiler.source&gt;" + 
"    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;" + 
"&lt;/properties&gt;" + 
"" + 
"&lt;dependencyManagement&gt;" + 
"    &lt;dependencies&gt;" + 
"        &lt;!--" + 
"            Define the version of JBoss Portal we build for. In its dependencyManagement," + 
"            JBoss Portal Bill of Materials (BOM) specifies the versions, types and scopes" + 
"            of dependencies which are granted to be compatible with (or indeed in many cases" + 
"            provided by) JBoss Portal." + 
"        --&gt;" + 
"        &lt;dependency&gt;" + 
"            &lt;groupId&gt;org.jboss.bom&lt;/groupId&gt;" + 
"            &lt;artifactId&gt;gatein-3.5-bom&lt;/artifactId&gt;" + 
"            &lt;version&gt;${org.jboss.bom.gatein-bom.version}&lt;/version&gt;" + 
"            &lt;type&gt;pom&lt;/type&gt;" + 
"            &lt;scope&gt;import&lt;/scope&gt;" + 
"        &lt;/dependency&gt;" + 
"    &lt;/dependencies&gt;" + 
"&lt;/dependencyManagement&gt;" + 
"" + 
"&lt;dependencies&gt;" + 
"    &lt;!-- " + 
"        The versions, scopes and types of these dependencies are managed in gatein-*-bom." + 
"        You need to name only groupId and artifactId here." + 
"        Name only those artifacts you refer to in your code." + 
"        Look at gatein-*-bom POM file for the complete list of available artifacts." + 
"    --&gt;" + 
"    &lt;dependency&gt;" + 
"        &lt;groupId&gt;javax.portlet&lt;/groupId&gt;" + 
"        &lt;artifactId&gt;portlet-api&lt;/artifactId&gt;" + 
"    &lt;/dependency&gt;" + 
"&lt;/dependencies&gt;" + 
"" + 
"&lt;build&gt;" + 
"    &lt;finalName&gt;${project.artifactId}&lt;/finalName&gt;" + 
"    &lt;plugins&gt;" + 
"        &lt;plugin&gt;" + 
"            &lt;groupId&gt;org.jboss.as.plugins&lt;/groupId&gt;" + 
"            &lt;artifactId&gt;jboss-as-maven-plugin&lt;/artifactId&gt;" + 
"            &lt;version&gt;${jboss.as.plugin.version}&lt;/version&gt;" + 
"        &lt;/plugin&gt;" + 
"        &lt;plugin&gt;" + 
"            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;" + 
"            &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;" + 
"            &lt;version&gt;${maven.compiler.plugin.version}&lt;/version&gt;" + 
"            &lt;configuration&gt;" + 
"                &lt;source&gt;${maven.compiler.source}&lt;/source&gt;" + 
"                &lt;target&gt;${maven.compiler.target}&lt;/target&gt;" + 
"            &lt;/configuration&gt;" + 
"        &lt;/plugin&gt;" + 
"    &lt;/plugins&gt;" + 
"&lt;/build&gt;" + 
"" + 
"&lt;/project&gt;" + 
"</programlisting>" + 
"			</example>" + 
"			<para>" + 
"				Further steps, after you have set up the <filename>pom.xml</filename> file for your project, depend on the technology you have chosen for writing portlets." + 
"			</para>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18837-565953+%5BLatest%5D&amp;cf_build_id=18837-565953+05+Dec+2013+13%3A37+en-US+%5BLatest%5D&amp;comment=Title%3A+Using+the+BOM%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"	</section>" + 
"	<section id=\"Building_and_Deploying_Portlets\" remap=\"TID_18838\">" + 
"		<title>Building and Deploying Portlets</title>" + 
"		<orderedlist>" + 
"			<listitem>" + 
"				<para>" + 
"					Ensure that the instance of your JBoss Portal is running." + 
"				</para>" + 
"			</listitem>" + 
"			<listitem>" + 
"				<para>" + 
"					Open a command line and navigate to the root directory of your portlet project." + 
"				</para>" + 
"			</listitem>" + 
"			<listitem>" + 
"				<para>" + 
"					Type this command to build and deploy the archive: <command>mvn clean package jboss-as:deploy</command>" + 
"				</para>" + 
"			</listitem>" + 
"		</orderedlist>" + 
"		<para>" + 
"			To deploy to other than default localhost:9999 JBoss instance, copy the following configuration just after &lt;version&gt;${jboss.as.plugin.version}&lt;/version&gt; in the <filename> pom.xml</filename> file and adjust it to suit your needs. Note that &lt;username&gt; and &lt;password&gt; elements can be omitted sometimes, depending on your JBoss security settings." + 
"		</para>" + 
"		<programlisting>" + 
"&lt;configuration&gt;" + 
"    &lt;hostname&gt;127.0.0.1&lt;/hostname&gt;" + 
"    &lt;port&gt;9999&lt;/port&gt;" + 
"    &lt;username&gt;admin&lt;/username&gt;" + 
"    &lt;password&gt;secret&lt;/password&gt;" + 
"&lt;/configuration&gt;" + 
"</programlisting>" + 
"		<para>" + 
"			This will deploy <filename>target/simplest-hello-world-portlet.war</filename> to the running instance of the portal." + 
"		</para>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18838-565953+%5BLatest%5D&amp;cf_build_id=18838-565953+05+Dec+2013+13%3A37+en-US+%5BLatest%5D&amp;comment=Title%3A+Building+and+Deploying+Portlets%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"	</section>" + 
"	<section id=\"sect-Standard_Portlet_Development_JSR-286\">" + 
"		<title>Standard Portlet Development (JSR-286)</title>" + 
"		<note>" + 
"			<para>" + 
"				For an introduction to Portlet development, see <xref linkend=\"sect-JSR-168_and_JSR-286_overview\"/>" + 
"			</para>" + 
"			<para>" + 
"				JSR-286 information is available from the <citetitle>Java Community Process Program</citetitle> located at: <ulink url=\"http://jcp.org/en/jsr/detail?id=286\"/>." + 
"			</para>" + 
"		</note>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18839-565953+%5BLatest%5D&amp;cf_build_id=18839-565953+05+Dec+2013+13%3A37+en-US+%5BLatest%5D&amp;comment=Title%3A+Standard+Portlet+Development+%28JSR-286%29%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"		<section id=\"Java_Configuration1\" remap=\"TID_18840\">" + 
"			<title>Java Configuration</title>" + 
"			<para>" + 
"				After configuring the Maven <filename>pom.xml</filename> file, continue implementing a basic JSR-286 compatible portlet. An example of such a portlet is contained in the portal Quickstart \"Simplest Hello World Portlet\"" + 
"			</para>" + 
"			<example>" + 
"				<title>SimplestHelloWorldPortlet.java</title>" + 
"				<programlisting language=\"Java\">" + 
"package org.jboss.portal.portlet.samples;" + 
"" + 
"import java.io.IOException;" + 
"import java.io.PrintWriter;" + 
"" + 
"import javax.portlet.GenericPortlet;" + 
"import javax.portlet.RenderRequest;" + 
"import javax.portlet.RenderResponse;" + 
"" + 
"/**" + 
"* The simplest posible Portlet." + 
"* " + 
"* @author Peter Palaga" + 
"*/" + 
"public class SimplestHelloWorldPortlet extends GenericPortlet {" + 
"/**" + 
" * Serves the VIEW mode. Writes \"Hello World !\" to the response writer." + 
" * " + 
" * @see javax.portlet.GenericPortlet#doView(javax.portlet.RenderRequest, javax.portlet.RenderResponse)" + 
" */" + 
"@Override" + 
"public void doView(RenderRequest request, RenderResponse response) throws IOException {" + 
"    PrintWriter writer = response.getWriter();" + 
"    writer.write(\"Hello World !\");" + 
"    writer.close();" + 
"}" + 
"}" + 
"</programlisting>" + 
"				<para>" + 
"					Two important things have occurred:" + 
"				</para>" + 
"				<itemizedlist>" + 
"					<listitem>" + 
"						<para>" + 
"							<code>javax.portlet.GenericPortlet</code> was extended from the <code>javax.portlet:portlet-api</code> artifact." + 
"						</para>" + 
"					</listitem>" + 
"					<listitem>" + 
"						<para>" + 
"							The <code>doView()</code> method has been overridden." + 
"						</para>" + 
"					</listitem>" + 
"				</itemizedlist>" + 
"				<para>" + 
"					Edit and help portlet modes are not supported in this portlet. To add them, override the <code>doEdit()</code> and <code>doHelp</code> from <code>javax.portlet.GenericPortlet</code> and configure the <filename>portlet.xml</filename> file accordingly." + 
"				</para>" + 
"			</example>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18840-565953+%5BLatest%5D&amp;cf_build_id=18840-565953+05+Dec+2013+13%3A37+en-US+%5BLatest%5D&amp;comment=Title%3A+Java+Configuration%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"		<section id=\"portlet.xml\" remap=\"TID_18841\">" + 
"			<title>portlet.xml</title>" + 
"			<para>" + 
"				The <filename>portlet.xml</filename> file for a plain JSR- 286 portlet is as follows:" + 
"			</para>" + 
"			<example>" + 
"				<title>portlet.xml</title>" + 
"				<programlisting language=\"XML\">" + 
"&lt;portlet-app xmlns=\"http://java.sun.com/xml/ns/portlet/portlet-app_2_0.xsd\" version=\"2.0\"" + 
"xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://java.sun.com/xml/ns/portlet/portlet-app_2_0.xsd http://java.sun.com/xml/ns/portlet/portlet-app_2_0.xsd\"&gt;" + 
"&lt;portlet&gt;" + 
"    &lt;description&gt;Simplest Hello World Portlet is the very essence of every possible Portlet.&lt;/description&gt;" + 
"    &lt;portlet-name&gt;SimplestHelloWorldPortlet&lt;/portlet-name&gt;" + 
"    &lt;display-name&gt;Simplest Hello World Portlet&lt;/display-name&gt;" + 
"    &lt;portlet-class&gt;org.jboss.portal.portlet.samples.SimplestHelloWorldPortlet&lt;/portlet-class&gt;" + 
"    &lt;supports&gt;" + 
"        &lt;mime-type&gt;text/html&lt;/mime-type&gt;" + 
"        &lt;portlet-mode&gt;view&lt;/portlet-mode&gt;" + 
"        &lt;!-- You can uncomment the other modes when your portlet-class supports them" + 
"        &lt;portlet-mode&gt;edit&lt;/portlet-mode&gt;" + 
"        &lt;portlet-mode&gt;help&lt;/portlet-mode&gt;" + 
"        --&gt;" + 
"    &lt;/supports&gt;" + 
"    &lt;portlet-info&gt;" + 
"        &lt;title&gt;Simplest Hello World Portlet&lt;/title&gt;" + 
"    &lt;/portlet-info&gt;" + 
"&lt;/portlet&gt;" + 
"&lt;/portlet-app&gt;" + 
"</programlisting>" + 
"			</example>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18841-565953+%5BLatest%5D&amp;cf_build_id=18841-565953+05+Dec+2013+13%3A37+en-US+%5BLatest%5D&amp;comment=Title%3A+portlet.xml%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"		<section id=\"web.xml\" remap=\"TID_18842\">" + 
"			<title>web.xml</title>" + 
"			<para>" + 
"				There is no need to configure filters, servlets or mapping for a plain JSR- 286 portlet to work. However the <literal>maven-war-plugin</literal> artifact requires the <filename>web.xml</filename> by default. It can suffice to include a <filename>web.xml</filename> file which contains only the root element:" + 
"			</para>" + 
"			<example>" + 
"				<title>web.xml</title>" + 
"				<programlisting language=\"XML\">" + 
"&lt;web-app xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"" + 
"    xsi:schemaLocation=\"http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd\"" + 
"    version=\"2.5\"&gt;" + 
"    &lt;!-- " + 
"        There is no need to configure any filters, servlets, mapping &amp; co. for this demo to work" + 
"        but maven-war-plugin by default requires this file." + 
"    --&gt;" + 
"&lt;/web-app&gt;" + 
"</programlisting>" + 
"			</example>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18842-565953+%5BLatest%5D&amp;cf_build_id=18842-565953+05+Dec+2013+13%3A37+en-US+%5BLatest%5D&amp;comment=Title%3A+web.xml%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"		<section id=\"Building_and_Deploying_Portlets1\" remap=\"TID_18853\">" + 
"			<title>Building and Deploying Portlets</title>" + 
"			<para>" + 
"				Build and deploy the portlet by following the included procedure." + 
"			</para>" + 
"			<para>" + 
"				Import the portlet and add the portlet to a page to test its functionality. See the <citetitle>User Guide</citetitle> for instructions." + 
"			</para>" + 
"			<procedure>" + 
"				<title>Build and Deploy the Portlet</title>" + 
"				<step>" + 
"					<para>" + 
"						Ensure the portal instance is running." + 
"					</para>" + 
"				</step>" + 
"				<step>" + 
"					<para>" + 
"						Open a command line and navigate to the root directory of the portlet project." + 
"					</para>" + 
"				</step>" + 
"				<step>" + 
"					<remark>" + 
"						NEEDINFO - jmorgan - this is no longer the default port number, correct?" + 
"					</remark>" + 
"					<para>" + 
"						To deploy to portal instances not listening on <uri>localhost:9999</uri> paste the following configuration immediately after <replaceable>&lt;version&gt;${jboss.as.plugin.version}&lt;/version&gt;</replaceable> in the <filename>pom.xml</filename> file" + 
"					</para>" + 
"					<programlisting language=\"XML\">" + 
"&lt;configuration&gt;" + 
"  &lt;hostname&gt;127.0.0.1&lt;/hostname&gt;" + 
"  &lt;port&gt;9999&lt;/port&gt;" + 
"  &lt;username&gt;admin&lt;/username&gt;" + 
"  &lt;password&gt;secret&lt;/password&gt;" + 
"&lt;/configuration&gt;</programlisting>" + 
"					<para>" + 
"						Adjust the configuration to suit individual requirements. <replaceable>&lt;username&gt;</replaceable> and <replaceable>&lt;password&gt;</replaceable> may be omitted depending on the portal's security settings." + 
"					</para>" + 
"					<para>" + 
"						This will deploy <code>target/simplest-hello-world-portlet.war</code> to the running instance of the portal." + 
"					</para>" + 
"				</step>" + 
"				<step>" + 
"					<para>" + 
"						Run <command>mvn clean package jboss-as:deploy</command>" + 
"					</para>" + 
"				</step>" + 
"			</procedure>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18853-565955+%5BLatest%5D&amp;cf_build_id=18853-565955+05+Dec+2013+13%3A43+en-US+%5BLatest%5D&amp;comment=Title%3A+Building+and+Deploying+Portlets%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"	</section>" + 
"</chapter>" + 
"	<chapter id=\"chap-Basic_JSF_Portlet_Development\">" + 
"	<title>Basic JSF Portlet Development</title>" + 
"	<remark>" + 
"		Added upto version V4 from Confluence, source: https://docs.jboss.org/author/display/GTNPORTAL36/Basic+JSF+Portlet+Development" + 
"	</remark>" + 
"	<para>" + 
"		JSF stands for JavaServer Pages. The JSF version delivered by the built-in Portlet Bridge is 2.1." + 
"	</para>" + 
"	<para role=\"RoleCreateBugPara\">" + 
"		<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18854-565955+%5BLatest%5D&amp;cf_build_id=18854-565955+05+Dec+2013+13%3A43+en-US+%5BLatest%5D&amp;comment=Title%3A+Basic+JSF+Portlet+Development%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"	</para>" + 
"	<section id=\"sect-Example_Code\">" + 
"		<title>Example Code</title>" + 
"		<para>" + 
"			This section cites code from JSF2 Hello World Portlet from the <ulink url=\"https://docs.jboss.org/author/pages/viewpage.action?pageId=62587128\">Quickstarts Collection</ulink> ." + 
"		</para>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18855-565955+%5BLatest%5D&amp;cf_build_id=18855-565955+05+Dec+2013+13%3A43+en-US+%5BLatest%5D&amp;comment=Title%3A+Example+Code%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"		<section id=\"pom.xml\" remap=\"TID_18856\">" + 
"			<title>pom.xml</title>" + 
"			<para>" + 
"				There is only one noticeable difference in <code>pom.xml</code> against what we have shown as a general case in the <ulink url=\"https://docs.jboss.org/author/pages/viewpage.action?pageId=62587097\">Starting a Portlet Project</ulink> section: we only need to add JSF-specific dependencies:" + 
"			</para>" + 
"			<example>" + 
"				<title>pom.xml</title>" + 
"				<programlisting language=\"XML\">" + 
"&lt;dependencies&gt;" + 
"    &lt;!-- " + 
"   The versions, scopes and types of these dependencies are managed in gatein-*-bom." + 
"   You need to name only groupId and artifactId here." + 
"   Name only those artifacts you refer to in your code." + 
"   Look at gatein-*-bom POM file for the complete list of available artifacts." + 
"    --&gt;" + 
"    &lt;dependency&gt;" + 
"   &lt;groupId&gt;org.jboss.spec.javax.faces&lt;/groupId&gt;" + 
"   &lt;artifactId&gt;jboss-jsf-api_2.1_spec&lt;/artifactId&gt;" + 
"    &lt;/dependency&gt;" + 
"    &lt;dependency&gt;" + 
"   &lt;groupId&gt;org.jboss.portletbridge&lt;/groupId&gt;" + 
"   &lt;artifactId&gt;portletbridge-api&lt;/artifactId&gt;" + 
"    &lt;/dependency&gt;" + 
"&lt;/dependencies&gt;" + 
"</programlisting>" + 
"			</example>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18856-565955+%5BLatest%5D&amp;cf_build_id=18856-565955+05+Dec+2013+13%3A43+en-US+%5BLatest%5D&amp;comment=Title%3A+pom.xml%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"		<section id=\"JSF_Template_Files1\" remap=\"TID_18857\">" + 
"			<title>JSF Template Files</title>" + 
"			<example>" + 
"				<title>Beginning of a JSF portlet template</title>" + 
"				<para>" + 
"					This example shows the start of a typical JSF portlet template declaration. It is taken from <filename>main.xhtml</filename> file located in the <filename>src/main/webapp/pages</filename> directory." + 
"				</para>" + 
"				<programlisting language=\"HTML\">" + 
"&lt;f:view xmlns=\"http://www.w3.org/1999/xhtml\"  xmlns:f=\"http://java.sun.com/jsf/core\" xmlns:h=\"http://java.sun.com/jsf/html\"&gt;" + 
"	&lt;!-- the f:view above prevents an erroneous &lt;html&gt; within &lt;body&gt; coming from portal. --&gt;" + 
"	&lt;!-- &lt;h:head /&gt; and &lt;h:body&gt; in the following are always needed otherwise JSF Facelets will not work --&gt;" + 
"	&lt;h:head /&gt;" + 
"	&lt;h:body styleClass=\"jsf2HelloWorldPortlet\"&gt;" + 
"	    &lt;h:outputStylesheet library=\"css\" name=\"jsf2-hello-world-portlet.css\" /&gt;" + 
"	    &lt;h2&gt;JSF2 Hello World Portlet&lt;/h2&gt;" + 
"</programlisting>" + 
"			</example>" + 
"			<para>" + 
"				Note that <code>&lt;f:view&gt;</code> as a root element of the portlet template above prevents an erroneous <code>&lt;html&gt;</code> within <code>&lt;body&gt;</code> coming from portal. Moreover, the <code>&lt;h:head&gt;</code> and <code>&lt;h:body&gt;</code> elements are always needed for JSF Facelets to work." + 
"			</para>" + 
"			<example>" + 
"				<title>A form in a JSF portlet template</title>" + 
"				<para>" + 
"					This example demonstrates how to use several JSF elements, such as <code>&lt;h:outputLabel&gt;</code> , <code>&lt;h:inputText&gt;</code> and <code>&lt;h:commandButton&gt;</code> within <code>&lt;h:form&gt;</code>." + 
"				</para>" + 
"				<programlisting language=\"HTML\">" + 
"&lt;h:form id=\"jsf2HelloWorldPortlet\"&gt;" + 
"   &lt;h:outputLabel value=\"#{msgs.Name}\" for=\"nameInput\"/&gt;" + 
"   &lt;h:inputText id=\"nameInput\" value=\"#{helloBean.name}\"&gt;" + 
"       &lt;f:ajax render=\"output\" event=\"keyup\"/&gt;" + 
"   &lt;/h:inputText&gt;" + 
"   &lt;br /&gt;" + 
"   " + 
"   &lt;p&gt;" + 
"       &lt;h:panelGroup id=\"output\"&gt;" + 
"           &lt;strong&gt;" + 
"               &lt;h:outputFormat value=\"#{msgs.Hello_0}\" rendered=\"#{not empty helloBean.name}\"&gt;" + 
"                   &lt;f:param value=\"#{helloBean.name}\" /&gt;" + 
"              &lt;/h:outputFormat&gt;" + 
"           &lt;/strong&gt;" + 
"       &lt;/h:panelGroup&gt;" + 
"   &lt;/p&gt;" + 
"   " + 
"   &lt;h:commandButton id=\"reset\" value=\"#{msgs.Reset}\" actionListener=\"#{helloBean.reset}\"&gt;" + 
"       &lt;f:ajax render=\"@form\" /&gt;" + 
"   &lt;/h:commandButton&gt; - #{msgs.ResetComment}" + 
"   &lt;br /&gt;" + 
"   &lt;h:commandButton id=\"reload\" value=\"#{msgs.Reload}\" /&gt; - #{msgs.ReloadComment}" + 
"   &lt;br /&gt;" + 
"   " + 
"   &lt;h:messages /&gt;" + 
"&lt;/h:form&gt;" + 
"</programlisting>" + 
"			</example>" + 
"			<para>" + 
"				The complete source code of the above template is located in <code>src/main/webapp/pages/main.xhtml</code> of JSF2 Hello World Portlet project." + 
"			</para>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18857-565955+%5BLatest%5D&amp;cf_build_id=18857-565955+05+Dec+2013+13%3A43+en-US+%5BLatest%5D&amp;comment=Title%3A+JSF+Template+Files%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"		<section id=\"Java_Beans\" remap=\"TID_18858\">" + 
"			<title>Java Beans</title>" + 
"			<para>" + 
"				In the JSF template file shown above, we reference the <code>helloBean</code> bean. This bean is implemented in Java as follows:" + 
"			</para>" + 
"			<example>" + 
"				<title>helloBean Implementation</title>" + 
"				<programlisting language=\"Java\">" + 
"/**" + 
"* {@link HelloBean} is the JSF backing bean for the application, holding the input data to be re-displayed." + 
"*/" + 
"@ManagedBean(name = \"helloBean\")" + 
"@SessionScoped" + 
"public class HelloBean implements Serializable {" + 
"" + 
"   private static final long serialVersionUID = -6239437588285327644L;" + 
"" + 
"   /**" + 
"    * Stores the name which will be used to greet the application user." + 
"    */" + 
"   private String name;" + 
"" + 
"   /**" + 
"    * Initializes {@link #name} with the value {@code \"World\"}." + 
"    */" + 
"   @PostConstruct" + 
"   public void postContruct() {" + 
"       this.name = \"World\";" + 
"   }" + 
"" + 
"   /**" + 
"    * Returns {@link #name}." + 
"    * " + 
"    * @return {@link #name}" + 
"    */" + 
"   public String getName() {" + 
"       return name;" + 
"   }" + 
"" + 
"   /**" + 
"    * Set {@link #name}." + 
"    * " + 
"    * @param name" + 
"    */" + 
"   public void setName(String name) {" + 
"       this.name = name;" + 
"   }" + 
"" + 
"   /**" + 
"    * Resets {@link #name} to the default value {@code \"World\"}." + 
"    * " + 
"    * @param ae ignored" + 
"    */" + 
"   public void reset(ActionEvent ae) {" + 
"       this.name = \"World\";" + 
"   }" + 
"" + 
"}" + 
"</programlisting>" + 
"			</example>" + 
"			<para>" + 
"				The <code>@ManagedBean</code> and <code>@SessionScoped</code> annotations allow for omitting of equivalent declarations in the <code>faces-config.xml</code> file." + 
"			</para>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18858-565955+%5BLatest%5D&amp;cf_build_id=18858-565955+05+Dec+2013+13%3A43+en-US+%5BLatest%5D&amp;comment=Title%3A+Java+Beans%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"		<section id=\"portlet.xml1\" remap=\"TID_18859\">" + 
"			<title>portlet.xml</title>" + 
"			<para>" + 
"				portlet.xml is the place where we tie the JSF templates with the portlet." + 
"			</para>" + 
"			<example>" + 
"				<title>portlet.xml</title>" + 
"				<programlisting language=\"XML\">" + 
"&lt;portlet-app xmlns=\"http://java.sun.com/xml/ns/portlet/portlet-app_2_0.xsd\" version=\"2.0\"" + 
"    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"" + 
"    xsi:schemaLocation=\"http://java.sun.com/xml/ns/portlet/portlet-app_2_0.xsd" + 
"   http://java.sun.com/xml/ns/portlet/portlet-app_2_0.xsd\"&gt;" + 
"    &lt;portlet&gt;" + 
"        &lt;description&gt;A simple JSF2 portlet.&lt;/description&gt;" + 
"        &lt;portlet-name&gt;jsf2HelloWorldPortlet&lt;/portlet-name&gt;" + 
"        &lt;display-name&gt;JSF2 Hello World Portlet&lt;/display-name&gt;" + 
"        &lt;portlet-class&gt;javax.portlet.faces.GenericFacesPortlet&lt;/portlet-class&gt;" + 
"        &lt;init-param&gt;" + 
"            &lt;name&gt;javax.portlet.faces.defaultViewId.view&lt;/name&gt;" + 
"            &lt;value&gt;/pages/main.xhtml&lt;/value&gt;" + 
"        &lt;/init-param&gt;" + 
"        &lt;init-param&gt;" + 
"            &lt;name&gt;javax.portlet.faces.defaultViewId.edit&lt;/name&gt;" + 
"            &lt;value&gt;/pages/edit.xhtml&lt;/value&gt;" + 
"        &lt;/init-param&gt;" + 
"        &lt;init-param&gt;" + 
"            &lt;name&gt;javax.portlet.faces.defaultViewId.help&lt;/name&gt;" + 
"            &lt;value&gt;/pages/help.xhtml&lt;/value&gt;" + 
"        &lt;/init-param&gt;" + 
"        &lt;init-param&gt;" + 
"            &lt;name&gt;javax.portlet.faces.preserveActionParams&lt;/name&gt;" + 
"            &lt;value&gt;true&lt;/value&gt;" + 
"        &lt;/init-param&gt;" + 
"        &lt;expiration-cache&gt;0&lt;/expiration-cache&gt;" + 
"        &lt;supports&gt;" + 
"            &lt;mime-type&gt;text/html&lt;/mime-type&gt;" + 
"            &lt;portlet-mode&gt;VIEW&lt;/portlet-mode&gt;" + 
"            &lt;portlet-mode&gt;EDIT&lt;/portlet-mode&gt;" + 
"            &lt;portlet-mode&gt;HELP&lt;/portlet-mode&gt;" + 
"        &lt;/supports&gt;" + 
"        &lt;portlet-info&gt;" + 
"            &lt;title&gt;JSF2 Hello World Portlet&lt;/title&gt;" + 
"        &lt;/portlet-info&gt;" + 
"        &lt;container-runtime-option&gt;" + 
"            &lt;name&gt;org.gatein.pc.remotable&lt;/name&gt;" + 
"            &lt;value&gt;true&lt;/value&gt;" + 
"        &lt;/container-runtime-option&gt;" + 
"    &lt;/portlet&gt;" + 
"&lt;/portlet-app&gt;" + 
"" + 
"   " + 
"</programlisting>" + 
"			</example>" + 
"			<para>" + 
"				Note that the <code>javax.portlet.faces.defaultViewId.*</code><code>init-params</code> are used to bind the JSF templates with the respective portlet view modes. <code>javax.portlet.faces.GenericFacesPortlet</code> as a <code>&lt;portlet-class&gt;</code> will serve the purpose for most JSF portlets." + 
"			</para>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18859-565955+%5BLatest%5D&amp;cf_build_id=18859-565955+05+Dec+2013+13%3A43+en-US+%5BLatest%5D&amp;comment=Title%3A+portlet.xml%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"		<section id=\"web.xml1\" remap=\"TID_18860\">" + 
"			<title>web.xml</title>" + 
"			<para>" + 
"				JSF portlets require a few tweaks in the <code>web.xml</code> file:" + 
"			</para>" + 
"			<example>" + 
"				<title>web.xml</title>" + 
"				<programlisting language=\"XML\">" + 
"&lt;web-app xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns=\"http://java.sun.com/xml/ns/javaee\" xmlns:web=\"http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd\"" + 
"    xsi:schemaLocation=\"http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd\" version=\"2.5\"&gt;" + 
"    &lt;display-name&gt;jsf2-hello-world-portlet&lt;/display-name&gt;" + 
"    &lt;context-param&gt;" + 
"        &lt;description&gt;See https://docs.jboss.org/author/display/PBR/Render+Policy&lt;/description&gt;" + 
"        &lt;param-name&gt;javax.portlet.faces.RENDER_POLICY&lt;/param-name&gt;" + 
"        &lt;param-value&gt;ALWAYS_DELEGATE&lt;/param-value&gt;" + 
"    &lt;/context-param&gt;" + 
"    " + 
"    &lt;!-- The following params are documented here: http://myfaces.apache.org/core21/myfaces-impl/webconfig.html --&gt;" + 
"    &lt;context-param&gt;" + 
"        &lt;param-name&gt;javax.faces.FACELETS_VIEW_MAPPINGS&lt;/param-name&gt;" + 
"        &lt;param-value&gt;*.xhtml&lt;/param-value&gt;" + 
"    &lt;/context-param&gt;" + 
"    &lt;context-param&gt;" + 
"        &lt;param-name&gt;facelets.DEVELOPMENT&lt;/param-name&gt;" + 
"        &lt;param-value&gt;false&lt;/param-value&gt;" + 
"    &lt;/context-param&gt;" + 
"    &lt;context-param&gt;" + 
"        &lt;param-name&gt;javax.faces.DEFAULT_SUFFIX&lt;/param-name&gt;" + 
"        &lt;param-value&gt;.xhtml&lt;/param-value&gt;" + 
"    &lt;/context-param&gt;" + 
"    " + 
"    &lt;servlet&gt;" + 
"        &lt;servlet-name&gt;Faces Servlet&lt;/servlet-name&gt;" + 
"        &lt;servlet-class&gt;javax.faces.webapp.FacesServlet&lt;/servlet-class&gt;" + 
"        &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;" + 
"    &lt;/servlet&gt;" + 
"    &lt;servlet-mapping&gt;" + 
"        &lt;servlet-name&gt;Faces Servlet&lt;/servlet-name&gt;" + 
"        &lt;url-pattern&gt;*.faces&lt;/url-pattern&gt;" + 
"    &lt;/servlet-mapping&gt;" + 
"&lt;/web-app&gt;" + 
"</programlisting>" + 
"			</example>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18860-565955+%5BLatest%5D&amp;cf_build_id=18860-565955+05+Dec+2013+13%3A43+en-US+%5BLatest%5D&amp;comment=Title%3A+web.xml%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"		<section id=\"Custom_CSS\" remap=\"TID_18861\">" + 
"			<title>Custom CSS</title>" + 
"			<para>" + 
"				Portlet Bridge supports loading of CSS resources in the \"JSF way\". Just use the <code>&lt;h:outputStylesheet library=\"css\" name=\"jsf2-hello-world-portlet.css\" /&gt;</code> as we do in the <code>main.xhtml</code> file above. The <code>jsf2-hello-world-portlet.css</code> file needs to be placed in <code>resources/css</code> folder of the web application." + 
"			</para>" + 
"			<para>" + 
"				Note that relative paths like <code>url('css/background/jsf-logo.png')</code> do not work when used in CSS loaded via <code>&lt;h:outputStylesheet ...&gt;</code> . Rather a JSF Expression Language expression <code>#{resource['/css/background/jsf-logo.png']</code> } needs to be used. This expression is dynamically evaluated to a proper public URL. The path <code>'/css/background/jsf-logo.png'</code> used in the expression is relative to <code>resources</code> folder of the web application. See also <ulink url=\"https://docs.jboss.org/author/pages/viewpage.action?pageId=51806374\">Resource Serving</ulink> ." + 
"			</para>" + 
"			<example>" + 
"				<title>jsf2-hello-world-portlet.css</title>" + 
"				<programlisting>" + 
"17. div.jsf2HelloWorldPortlet {" + 
"18.     padding: 10px;" + 
"19.     /* In the following we use a JSF Expression Language expression rather then plain relative path. " + 
"20.        Plain relative paths do not work in JSF portlets. The expression #{resource['...']} is " + 
"21.        dynamically evaluated to a proper public URL. The path '/css/background/jsf-logo.png' " + 
"22.        used in the expression is relative to  resources folder of this web application." + 
"23.        See https://docs.jboss.org/author/display/PBR/Resource+Serving */" + 
"24.     background: url(#{resource['/css/background/jsf-logo.png']}) no-repeat;" + 
"25.     background-position-x: 753px;" + 
"26.     background-position-y: 10px;" + 
"27. }" + 
"28. div.jsf2HelloWorldPortlet p {" + 
"29.     width: 713px; " + 
"30. }" + 
"</programlisting>" + 
"			</example>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18861-565955+%5BLatest%5D&amp;cf_build_id=18861-565955+05+Dec+2013+13%3A43+en-US+%5BLatest%5D&amp;comment=Title%3A+Custom+CSS%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"		<section id=\"Internationalization\" remap=\"TID_18862\">" + 
"			<title>Internationalization</title>" + 
"			<para>" + 
"				Internationalization is supported via standard Java Resource bundles. In our example project the <code>*.property</code> files of <code>org.jboss.as.quickstarts.jsf.messages</code> resource bundle are stored under <code>src/main/resources/org/jboss/as/quickstarts/jsf</code> . The following settings in <code>faces-config.xml</code> are needed so that this bundle can be used in JSF templates." + 
"			</para>" + 
"			<example>" + 
"				<title>faces-config.xml</title>" + 
"				<programlisting>" + 
"&lt;faces-config xmlns=\"http://java.sun.com/xml/ns/javaee\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"" + 
"    xsi:schemaLocation=\"http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-facesconfig_2_0.xsd\" version=\"2.0\"&gt;" + 
"    &lt;application&gt;" + 
"        &lt;!-- Declare the internationalization resources --&gt;" + 
"        &lt;resource-bundle&gt;" + 
"            &lt;!-- The resource bundle property files are in src/main/resources/org/jboss/as/quickstarts/jsf --&gt;" + 
"            &lt;base-name&gt;org.jboss.as.quickstarts.jsf.messages&lt;/base-name&gt;" + 
"            &lt;var&gt;msgs&lt;/var&gt;" + 
"        &lt;/resource-bundle&gt;" + 
"        &lt;locale-config&gt;" + 
"            &lt;default-locale&gt;en&lt;/default-locale&gt;" + 
"            &lt;supported-locale&gt;de&lt;/supported-locale&gt;" + 
"        &lt;/locale-config&gt;" + 
"    &lt;/application&gt;" + 
"&lt;/faces-config&gt;" + 
"</programlisting>" + 
"			</example>" + 
"			<para>" + 
"				Note that in the above faces-config.xml, we have made our bundle visible in JSF templates under the variable <code>msgs</code> . Its individual entries can then be accessed using the usual Expression Language dot notation: e.g. <code>#{msgs.Name</code> }." + 
"			</para>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18862-565955+%5BLatest%5D&amp;cf_build_id=18862-565955+05+Dec+2013+13%3A43+en-US+%5BLatest%5D&amp;comment=Title%3A+Internationalization%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"	</section>" + 
"	<section id=\"Further_Steps\" remap=\"TID_18863\">" + 
"		<title>Further Steps</title>" + 
"		<para>" + 
"			After having done all the above, it is time to <ulink url=\"https://docs.jboss.org/author/pages/viewpage.action?pageId=62587099\">build and deploy the portlet</ulink> , <ulink url=\"https://docs.jboss.org/author/pages/viewpage.action?pageId=62587089\">import it</ulink> and <ulink url=\"https://docs.jboss.org/author/pages/viewpage.action?pageId=62587081\">add it to a page</ulink> so that you can test its functionality." + 
"		</para>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18863-565955+%5BLatest%5D&amp;cf_build_id=18863-565955+05+Dec+2013+13%3A43+en-US+%5BLatest%5D&amp;comment=Title%3A+Further+Steps%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"	</section>" + 
"	<section id=\"See_also1\" remap=\"TID_18864\">" + 
"		<title>See also</title>" + 
"		<itemizedlist>" + 
"			<listitem>" + 
"				<para>" + 
"					<ulink url=\"https://docs.jboss.org/author/pages/viewpage.action?pageId=62587002\">Portlet Primer</ulink>" + 
"				</para>" + 
"			</listitem>" + 
"		</itemizedlist>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18864-565955+%5BLatest%5D&amp;cf_build_id=18864-565955+05+Dec+2013+13%3A43+en-US+%5BLatest%5D&amp;comment=Title%3A+See+also%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"	</section>" + 
"</chapter>" + 
"	<chapter id=\"chap-JSF_Portlet_Development_with_RichFaces\">" + 
"	<title>JSF Portlet Development with RichFaces</title>" + 
"	<remark>" + 
"		Added upto version V2 from Confluence, source: https://docs.jboss.org/author/display/GTNPORTAL36/JSF+Portlet+Development+with+RichFaces" + 
"	</remark>" + 
"	<para>" + 
"		As we have already noted, RichFaces (RF) is just a component library for JavaServer Faces (JSF). Therefore, everything said in <xref linkend=\"sect-Example_Code\"/> applies here too." + 
"	</para>" + 
"	<para role=\"RoleCreateBugPara\">" + 
"		<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18865-565955+%5BLatest%5D&amp;cf_build_id=18865-565955+05+Dec+2013+13%3A43+en-US+%5BLatest%5D&amp;comment=Title%3A+JSF+Portlet+Development+with+RichFaces%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"	</para>" + 
"	<section id=\"sect-Example_Code-1\">" + 
"		<title>Example Code</title>" + 
"		<para>" + 
"			This section cites code from JSF2+RF4 Hello World Portlet from the <ulink url=\"https://docs.jboss.org/author/pages/viewpage.action?pageId=62587128\">Quickstarts Collection</ulink> ." + 
"		</para>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18866-565955+%5BLatest%5D&amp;cf_build_id=18866-565955+05+Dec+2013+13%3A43+en-US+%5BLatest%5D&amp;comment=Title%3A+Example+Code%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"		<section id=\"pom.xml1\" remap=\"TID_18867\">" + 
"			<title>pom.xml</title>" + 
"			<para>" + 
"				We need to add several RF-specific dependencies to the general JSF ones:" + 
"			</para>" + 
"			<example>" + 
"				<title>pom.xml</title>" + 
"				<programlisting language=\"XML\"><![CDATA[<dependencies>" + 
"  <!-- " + 
"   The versions, scopes and types of these dependencies are managed in gatein-*-bom." + 
"   You need to name only groupId and artifactId here." + 
"   Name only those artifacts you refer to in your code." + 
"   Look at gatein-*-bom POM file for the complete list of available artifacts." + 
"  -->" + 
"  <!-- General JSF dependencies -->" + 
"  <dependency>" + 
"    <groupId>org.jboss.spec.javax.faces</groupId>" + 
"    <artifactId>jboss-jsf-api_2.1_spec</artifactId>" + 
"  </dependency>" + 
"  <dependency>" + 
"    <groupId>org.jboss.portletbridge</groupId>" + 
"    <artifactId>portletbridge-api</artifactId>" + 
"  </dependency>" + 
" " + 
"  <!-- RF-sprecific dependencies -->" + 
"  <dependency>" + 
"    <groupId>org.jboss.portletbridge</groupId>" + 
"    <artifactId>portletbridge-extension-richfaces</artifactId>" + 
"  </dependency>" + 
"  <dependency>" + 
"    <groupId>org.richfaces.ui</groupId>" + 
"    <artifactId>richfaces-components-api</artifactId>" + 
"  </dependency>" + 
"  <dependency>" + 
"    <groupId>org.richfaces.ui</groupId>" + 
"  <artifactId>richfaces-components-ui</artifactId>" + 
"  </dependency>" + 
"  <dependency>" + 
"    <groupId>org.richfaces.core</groupId>" + 
"    <artifactId>richfaces-core-impl</artifactId>" + 
"  </dependency>" + 
"</dependencies>]]>" + 
"" + 
"</programlisting>" + 
"			</example>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18867-565955+%5BLatest%5D&amp;cf_build_id=18867-565955+05+Dec+2013+13%3A43+en-US+%5BLatest%5D&amp;comment=Title%3A+pom.xml%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"		<section id=\"JSF_Template_Files2\" remap=\"TID_18868\">" + 
"			<title>JSF Template Files</title>" + 
"			<para>" + 
"				We use <code>&lt;rich:*&gt;</code> components in the templates:" + 
"			</para>" + 
"			<example>" + 
"				<title>Form with rich: components in main.xhtml</title>" + 
"				<programlisting language=\"HTML\"><![CDATA[</p>" + 
"<h:form id=\"jsf2HelloWorldPortlet\">" + 
"    <h:panelGrid columns=\"2\">" + 
"        <h:outputLabel value=\"#{msgs.Greeting}\" for=\"greeting\"/>" + 
"        <rich:select id=\"greeting\" value=\"#{helloBean.greeting}\">" + 
"   <f:selectItems value=\"#{helloBean.greetings}\" />" + 
"   <f:ajax render=\"output\" event=\"selectitem\"/>" + 
"        </rich:select>" + 
"        " + 
"        <h:outputLabel value=\"#{msgs.Name}\" for=\"nameInput\"/>" + 
"        <h:inputText id=\"nameInput\" value=\"#{helloBean.name}\">" + 
"   <f:validateLength minimum=\"1\" maximum=\"50\" />" + 
"   <f:ajax render=\"output\" event=\"keyup\"/>" + 
"        </h:inputText>" + 
"    </h:panelGrid>" + 
"    <p>" + 
"        <h:panelGroup id=\"output\">" + 
"   <strong><h:outputText value=\"#{helloBean.greeting} #{helloBean.name}!\" rendered=\"#{not empty helloBean.name}\"/></strong>" + 
"        </h:panelGroup>" + 
"    </p>" + 
"    <p>" + 
"        <h:commandButton id=\"reset\" value=\"#{msgs.Reset}\" actionListener=\"#{helloBean.reset}\">" + 
"   <f:ajax render=\"@form\" />" + 
"        </h:commandButton> - #{msgs.ResetComment}" + 
"    </p>" + 
"    <p>" + 
"        <h:commandButton id=\"reload\" value=\"#{msgs.Reload}\" /> - #{msgs.ReloadComment}" + 
"    </p>]]>" + 
"" + 
"</programlisting>" + 
"			</example>" + 
"			<para>" + 
"				The complete source code of the above template can be found in <code>src/main/webapp/pages/main.xhtml</code> of JSF2+RF4 Hello World Portlet quickstart." + 
"			</para>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18868-565955+%5BLatest%5D&amp;cf_build_id=18868-565955+05+Dec+2013+13%3A43+en-US+%5BLatest%5D&amp;comment=Title%3A+JSF+Template+Files%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"		<section id=\"Java_Beans2\" remap=\"TID_18869\">" + 
"			<title>Java Beans</title>" + 
"			<para>" + 
"				The <code>HelloBean</code> presented in the <xref linkend=\"sect-Example_Code\"/> chapter was extended firstly to provide a list of greeting phrases selectable in the drop-down box on the <code>main.xhtml</code> page and secondly to be able to store the greeting phrase selected in the drop-down box." + 
"			</para>" + 
"			<remark>" + 
"				Docs Note - jmorgan - all these code samples need to have the line numbers removed. They will break the code if someone copypastes them." + 
"			</remark>" + 
"			<example>" + 
"				<title>HelloBean.java</title>" + 
"				<programlisting language=\"Java\">" + 
"<![CDATA[/**" + 
"* Static list of greetings. Contains {@code \"Hello\"} and {@code \"Hi\"}." + 
"*/" + 
"private static final List&lt;SelectItem&gt; GREETINGS;" + 
" " + 
"static {" + 
"    List&lt;SelectItem&gt; l = new ArrayList&lt;SelectItem&gt;(2);" + 
"    l.add(new SelectItem(\"Hello\"));" + 
"    l.add(new SelectItem(\"Hi\"));" + 
"    GREETINGS = Collections.unmodifiableList(l);" + 
"}" + 
" " + 
"/**" + 
" * Stores the greeting phrase which will be used to greet the application user." + 
" */" + 
"private String greeting;]]>" + 
"</programlisting>" + 
"			</example>" + 
"			<example>" + 
"				<title>HelloBean.java</title>" + 
"				<programlisting language=\"Java\"><![CDATA[/**" + 
" * Returns {@link #greeting}." + 
" * " + 
" * @return {@link #greeting}" + 
" */" + 
"public String getGreeting() {" + 
"    return greeting;" + 
"}" + 
" " + 
"/**" + 
" * Set {@link #greeting}." + 
" * " + 
" * @param greeting" + 
" */" + 
"public void setGreeting(String greeting) {" + 
"    this.greeting = greeting;" + 
"}" + 
" " + 
"/**" + 
" * Returns {@link #GREETINGS}." + 
" * " + 
" * @return {@link #GREETINGS}" + 
" */" + 
"public List&lt;SelectItem&gt; getGreetings() {" + 
"    return GREETINGS;" + 
"}" + 
" " + 
" " + 
"/**" + 
" * Resets {@link #name} to the default value {@code \"World\"} and {@link #greeting} with the default value {@code \"Hello\"}." + 
" * " + 
" * @param ae ignored" + 
" */" + 
"public void reset(ActionEvent ae) {" + 
"    this.name = \"World\";" + 
"    this.greeting = \"Hello\";" + 
"}" + 
" " + 
" }]]>" + 
"" + 
"</programlisting>" + 
"			</example>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18869-565955+%5BLatest%5D&amp;cf_build_id=18869-565955+05+Dec+2013+13%3A43+en-US+%5BLatest%5D&amp;comment=Title%3A+Java+Beans%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"		<section id=\"portlet.xml3\" remap=\"TID_18870\">" + 
"			<title>portlet.xml</title>" + 
"			<para>" + 
"				There is no substantial change in <code>portlet.xml</code> against <xref linkend=\"sect-Example_Code\"/>. Only <code>&lt;description&gt;</code> , <code>&lt;portlet-name&gt;</code> , <code>&lt;display-name&gt;</code> and <code>&lt;title&gt;</code> have been changed." + 
"			</para>" + 
"			<example>" + 
"				<title>portlet.xml</title>" + 
"				<programlisting language=\"XML\">&lt;portlet-app xmlns=\"http://java.sun.com/xml/ns/portlet/portlet-app_2_0.xsd\" version=\"2.0\"" + 
"    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"" + 
"    xsi:schemaLocation=\"http://java.sun.com/xml/ns/portlet/portlet-app_2_0.xsd" + 
"   http://java.sun.com/xml/ns/portlet/portlet-app_2_0.xsd\"&gt;" + 
"    &lt;portlet&gt;" + 
"        &lt;description&gt;A simple portlet usinf JSF2 and RF4.&lt;/description&gt;" + 
"        &lt;portlet-name&gt;jsf2Rf4HelloWorldPortlet&lt;/portlet-name&gt;" + 
"        &lt;display-name&gt;JSF2+RF4 Hello World Portlet&lt;/display-name&gt;" + 
"        &lt;portlet-class&gt;javax.portlet.faces.GenericFacesPortlet&lt;/portlet-class&gt;" + 
"        &lt;init-param&gt;" + 
"            &lt;name&gt;javax.portlet.faces.defaultViewId.view&lt;/name&gt;" + 
"            &lt;value&gt;/pages/main.xhtml&lt;/value&gt;" + 
"        &lt;/init-param&gt;" + 
"        &lt;init-param&gt;" + 
"            &lt;name&gt;javax.portlet.faces.defaultViewId.edit&lt;/name&gt;" + 
"            &lt;value&gt;/pages/edit.xhtml&lt;/value&gt;" + 
"        &lt;/init-param&gt;" + 
"        &lt;init-param&gt;" + 
"            &lt;name&gt;javax.portlet.faces.defaultViewId.help&lt;/name&gt;" + 
"            &lt;value&gt;/pages/help.xhtml&lt;/value&gt;" + 
"        &lt;/init-param&gt;" + 
"        &lt;init-param&gt;" + 
"            &lt;name&gt;javax.portlet.faces.preserveActionParams&lt;/name&gt;" + 
"            &lt;value&gt;true&lt;/value&gt;" + 
"        &lt;/init-param&gt;" + 
"        &lt;expiration-cache&gt;0&lt;/expiration-cache&gt;" + 
"        &lt;supports&gt;" + 
"            &lt;mime-type&gt;text/html&lt;/mime-type&gt;" + 
"            &lt;portlet-mode&gt;VIEW&lt;/portlet-mode&gt;" + 
"            &lt;portlet-mode&gt;EDIT&lt;/portlet-mode&gt;" + 
"            &lt;portlet-mode&gt;HELP&lt;/portlet-mode&gt;" + 
"        &lt;/supports&gt;" + 
"        &lt;portlet-info&gt;" + 
"            &lt;title&gt;JSF2+RF4 Hello World Portlet&lt;/title&gt;" + 
"        &lt;/portlet-info&gt;" + 
"        &lt;container-runtime-option&gt;" + 
"            &lt;name&gt;org.gatein.pc.remotable&lt;/name&gt;" + 
"            &lt;value&gt;true&lt;/value&gt;" + 
"        &lt;/container-runtime-option&gt;" + 
"    &lt;/portlet&gt;" + 
"&lt;/portlet-app&gt;" + 
"</programlisting>" + 
"			</example>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18870-565956+%5BLatest%5D&amp;cf_build_id=18870-565956+05+Dec+2013+13%3A49+en-US+%5BLatest%5D&amp;comment=Title%3A+portlet.xml%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"		<section id=\"web.xml3\" remap=\"TID_18871\">" + 
"			<title>web.xml</title>" + 
"			<para>" + 
"				We set a few more <code>init-params</code> in <code>web.xml</code> for RichFaces components to work:" + 
"			</para>" + 
"			<example>" + 
"				<title>web.xml</title>" + 
"				<programlisting language=\"XML\">" + 
"&lt;web-app xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns=\"http://java.sun.com/xml/ns/javaee\" xmlns:web=\"http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd\"" + 
"    xsi:schemaLocation=\"http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd\" version=\"2.5\"&gt;" + 
"    &lt;display-name&gt;jsf2-rf4-hello-world-portlet&lt;/display-name&gt;" + 
"    &lt;context-param&gt;" + 
"        &lt;description&gt;See https://docs.jboss.org/author/display/PBR/Installing+Portlet+Bridge#InstallingPortletBridge-DisableautomaticinclusionofPortletBridge&lt;/description&gt;" + 
"        &lt;param-name&gt;org.gatein.portletbridge.WAR_BUNDLES_PORTLETBRIDGE&lt;/param-name&gt;" + 
"        &lt;param-value&gt;true&lt;/param-value&gt;" + 
"    &lt;/context-param&gt;" + 
"    &lt;context-param&gt;" + 
"        &lt;description&gt;See https://docs.jboss.org/author/display/PBR/Render+Policy&lt;/description&gt;" + 
"        &lt;param-name&gt;javax.portlet.faces.RENDER_POLICY&lt;/param-name&gt;" + 
"        &lt;param-value&gt;ALWAYS_DELEGATE&lt;/param-value&gt;" + 
"    &lt;/context-param&gt;" + 
"    " + 
"    &lt;!-- The following params are documented here: http://myfaces.apache.org/core21/myfaces-impl/webconfig.html --&gt;" + 
"    &lt;context-param&gt;" + 
"        &lt;param-name&gt;javax.faces.FACELETS_VIEW_MAPPINGS&lt;/param-name&gt;" + 
"        &lt;param-value&gt;*.xhtml&lt;/param-value&gt;" + 
"    &lt;/context-param&gt;" + 
"    &lt;context-param&gt;" + 
"        &lt;param-name&gt;facelets.DEVELOPMENT&lt;/param-name&gt;" + 
"        &lt;param-value&gt;false&lt;/param-value&gt;" + 
"    &lt;/context-param&gt;" + 
"    &lt;context-param&gt;" + 
"        &lt;param-name&gt;javax.faces.DEFAULT_SUFFIX&lt;/param-name&gt;" + 
"        &lt;param-value&gt;.xhtml&lt;/param-value&gt;" + 
"    &lt;/context-param&gt;" + 
"    &lt;context-param&gt;" + 
"        &lt;param-name&gt;javax.faces.STATE_SAVING_METHOD&lt;/param-name&gt;" + 
"        &lt;param-value&gt;server&lt;/param-value&gt;" + 
"    &lt;/context-param&gt;" + 
"    &lt;context-param&gt;" + 
"        &lt;param-name&gt;javax.faces.PROJECT_STAGE&lt;/param-name&gt;" + 
"        &lt;!-- Change to Production to compress js files, etc. --&gt;" + 
"        &lt;param-value&gt;Development&lt;/param-value&gt;" + 
"    &lt;/context-param&gt;" + 
"" + 
"    &lt;context-param&gt;" + 
"        &lt;description&gt;http://docs.jboss.org/richfaces/latest_4_X/Developer_Guide/en-US/html/chap-Developer_Guide-Skinning_and_theming.html&lt;/description&gt;" + 
"        &lt;param-name&gt;org.richfaces.skin&lt;/param-name&gt;" + 
"        &lt;param-value&gt;#{skinBean.skin}&lt;/param-value&gt;" + 
"    &lt;/context-param&gt;" + 
"    &lt;context-param&gt;" + 
"        &lt;description&gt;See http://docs.jboss.org/richfaces/latest_4_X/Developer_Guide/en-US/html/chap-Developer_Guide-Advanced_features.html&lt;/description&gt;" + 
"        &lt;param-name&gt;org.richfaces.resourceOptimization.enabled&lt;/param-name&gt;" + 
"        &lt;param-value&gt;true&lt;/param-value&gt;" + 
"    &lt;/context-param&gt;" + 
"" + 
"    &lt;servlet&gt;" + 
"        &lt;servlet-name&gt;Faces Servlet&lt;/servlet-name&gt;" + 
"        &lt;servlet-class&gt;javax.faces.webapp.FacesServlet&lt;/servlet-class&gt;" + 
"        &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;" + 
"    &lt;/servlet&gt;" + 
"    &lt;servlet-mapping&gt;" + 
"        &lt;servlet-name&gt;Faces Servlet&lt;/servlet-name&gt;" + 
"        &lt;url-pattern&gt;*.faces&lt;/url-pattern&gt;" + 
"    &lt;/servlet-mapping&gt;" + 
"    &lt;servlet-mapping&gt;" + 
"        &lt;servlet-name&gt;Faces Servlet&lt;/servlet-name&gt;" + 
"        &lt;url-pattern&gt;*.jsf&lt;/url-pattern&gt;" + 
"    &lt;/servlet-mapping&gt;" + 
"    &lt;servlet-mapping&gt;" + 
"        &lt;servlet-name&gt;Faces Servlet&lt;/servlet-name&gt;" + 
"        &lt;url-pattern&gt;/faces/*&lt;/url-pattern&gt;" + 
"    &lt;/servlet-mapping&gt;" + 
"" + 
"    &lt;mime-mapping&gt;" + 
"        &lt;extension&gt;xcss&lt;/extension&gt;" + 
"        &lt;mime-type&gt;text/css&lt;/mime-type&gt;" + 
"    &lt;/mime-mapping&gt;" + 
"" + 
"&lt;/web-app&gt;" + 
"</programlisting>" + 
"			</example>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18871-565956+%5BLatest%5D&amp;cf_build_id=18871-565956+05+Dec+2013+13%3A49+en-US+%5BLatest%5D&amp;comment=Title%3A+web.xml%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"		<section id=\"Custom_CSS2\" remap=\"TID_18872\">" + 
"			<title>Custom CSS</title>" + 
"			<para>" + 
"				Fully analogous with basic JSF portlets. See <xref linkend=\"chap-Basic_JSF_Portlet_Development\"/> for more information about basic JSF Portlet Development." + 
"			</para>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18872-565956+%5BLatest%5D&amp;cf_build_id=18872-565956+05+Dec+2013+13%3A49+en-US+%5BLatest%5D&amp;comment=Title%3A+Custom+CSS%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"		<section id=\"Internationalization2\" remap=\"TID_18873\">" + 
"			<title>Internationalization</title>" + 
"			<para>" + 
"				Fully analogous with basic JSF portlets. See <xref linkend=\"chap-Basic_JSF_Portlet_Development\"/> for more information about JSF portlet development." + 
"			</para>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18873-565956+%5BLatest%5D&amp;cf_build_id=18873-565956+05+Dec+2013+13%3A49+en-US+%5BLatest%5D&amp;comment=Title%3A+Internationalization%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"	</section>" + 
"	<section id=\"Further_Steps1\" remap=\"TID_18874\">" + 
"		<title>Further Steps</title>" + 
"		<para>" + 
"			After having done all the above, it is time to <ulink url=\"https://docs.jboss.org/author/pages/viewpage.action?pageId=62587099\">build and deploy the portlet</ulink> , <ulink url=\"https://docs.jboss.org/author/pages/viewpage.action?pageId=62587089\">import it</ulink> and <ulink url=\"https://docs.jboss.org/author/pages/viewpage.action?pageId=62587081\">add it to a page</ulink> so that you can test its functionality." + 
"		</para>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18874-565956+%5BLatest%5D&amp;cf_build_id=18874-565956+05+Dec+2013+13%3A49+en-US+%5BLatest%5D&amp;comment=Title%3A+Further+Steps%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"	</section>" + 
"	<section id=\"See_also\" remap=\"TID_18875\">" + 
"		<title>See also</title>" + 
"		<itemizedlist>" + 
"			<listitem>" + 
"				<para>" + 
"					<ulink url=\"https://docs.jboss.org/author/pages/viewpage.action?pageId=62587002\">Portlet Primer</ulink>" + 
"				</para>" + 
"			</listitem>" + 
"		</itemizedlist>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18875-565956+%5BLatest%5D&amp;cf_build_id=18875-565956+05+Dec+2013+13%3A49+en-US+%5BLatest%5D&amp;comment=Title%3A+See+also%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"	</section>" + 
"</chapter>" + 
"	<chapter id=\"chap-Portlets_with_JSF_and_CDI\">" + 
"	<title>Portlets with JSF and CDI</title>" + 
"	<!--" + 
"		Source: https://docs.jboss.org/author/display/GTNPORTAL36/Portlets+with+JSF+and+CDI" + 
"	-->" + 
"	<remark>" + 
"		QE Note - jmorgan - 20130919 - Removed the link to community docs here and referenced the Quickstarts collection generically to imply the RHJP quickstarts collection." + 
"	</remark>" + 
"	<para>" + 
"		See the <citetitle>CDI Portlet with JSF</citetitle> Example in the Quickstarts Collection. Review the comments in the Quickstart files for necessary details." + 
"	</para>" + 
"	<para role=\"RoleCreateBugPara\">" + 
"		<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18876-565956+%5BLatest%5D&amp;cf_build_id=18876-565956+05+Dec+2013+13%3A49+en-US+%5BLatest%5D&amp;comment=Title%3A+Portlets+with+JSF+and+CDI%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"	</para>" + 
"</chapter>" + 
"	<chapter id=\"chap-CDI_Portlet_Development\">" + 
"	<title>CDI Portlet Development</title>" + 
"	<!--" + 
"		Source: https://docs.jboss.org/author/display/GTNPORTAL36/CDI+Portlet+Development" + 
"	-->" + 
"	<para>" + 
"		Red Hat JBoss Portal supports portlet development using Contexts and Dependency Injection (CDI) as specified by <ulink url=\"http://jcp.org/en/jsr/detail?id=299\">JSR 299</ulink>. You can perform CDI injection directly into GenericPortlet instances and Portlet Filters. There are two new CDI scopes to specifically support the portlet lifecycle." + 
"	</para>" + 
"	<para role=\"RoleCreateBugPara\">" + 
"		<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18877-565956+%5BLatest%5D&amp;cf_build_id=18877-565956+05+Dec+2013+13%3A49+en-US+%5BLatest%5D&amp;comment=Title%3A+CDI+Portlet+Development%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"	</para>" + 
"	<section id=\"GenericPortlet_and_Portlet_Filter_Injection\" remap=\"TID_18878\">" + 
"		<title>GenericPortlet and Portlet Filter Injection</title>" + 
"		<remark>" + 
"			Source: https://docs.jboss.org/author/display/GTNPORTAL36/GenericPortlet+and+Portlet+Filter+Injection" + 
"		</remark>" + 
"		<remark>" + 
"			Raw content imported from confluence upto V6" + 
"		</remark>" + 
"		<remark>" + 
"			QE NOTE - jmorgan -Edited 20130613" + 
"		</remark>" + 
"		<para>" + 
"			To activate CDI in portlet applications, the <code>WEB-INF/beans.xml</code> file must be present inside the WAR, as defined by the <ulink url=\"http://jcp.org/en/jsr/detail?id=299\">JSR 299</ulink> specification. There is no additional configuration required to use CDI within a portlet or portlet filter." + 
"		</para>" + 
"		<para>" + 
"			Even if a portlet class is not managed by the CDI container, it can have CDI beans injected into it. These classes include any portlet class extending <code>GenericPortlet</code> or implementing the <code>Portlet</code> interface. Additionally, filters including <code>PortletFilter</code> , <code>RenderFilter</code> , <code>ActionFilter</code> , <code>EventFilter</code>, or <code>ResourceFilter</code> can use CDI injection. As with any kind of injection, use <code>@Inject</code> and specify the type of the bean to inject." + 
"		</para>" + 
"		<para>" + 
"			The point at which the injection is performed on the portlet class or filter, some contexts such as session will not be active. This will cause <code>ContextNotActiveException</code> to appear. Such a situation could arise if the injected bean is produced by a bean that is in session scope." + 
"		</para>" + 
"		<note>" + 
"			<para>" + 
"				The examples for CDI Generic Portlet are available in the Quickstarts Collection. See <xref linkend=\"Quickstarts1\"/>. The quickstarts show a basic portlet, and portlet filter using CDI." + 
"			</para>" + 
"			<para>" + 
"				The CDI Portlet with JSF quickstart shows how to use CDI in combination with JSF." + 
"			</para>" + 
"		</note>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18878-565956+%5BLatest%5D&amp;cf_build_id=18878-565956+05+Dec+2013+13%3A49+en-US+%5BLatest%5D&amp;comment=Title%3A+GenericPortlet+and+Portlet+Filter+Injection%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"	</section>" + 
"	<section id=\"sect-Portlet_CDI_Scopes\">" + 
"		<title>Portlet CDI Scopes</title>" + 
"		<remark>" + 
"			Source: https://docs.jboss.org/author/display/GTNPORTAL36/Portlet+CDI+Scopes" + 
"		</remark>" + 
"		<remark>" + 
"			Raw content imported from confluence upto V6 ," + 
"		</remark>" + 
"		<remark>" + 
"			QE NOTE - jmorgan -Edited and fixed IDREFS" + 
"		</remark>" + 
"		<note>" + 
"			<para>" + 
"				The example titled Portlet Using CDI Scopes project is available in the Quickstarts Collection, see <xref linkend=\"Quickstarts1\"/>. The quickstart demonstrates the usage of CDI Scopes <code>@PortletLifecycleScoped</code> and <code>@PortletRedisplayScoped</code> ." + 
"			</para>" + 
"		</note>" + 
"		<para>" + 
"			To support the complex Portlet Lifecycle within CDI, <code>@PortletLifecycleScoped</code> and <code>@PortletRedisplayScoped</code> are available for use with either JSF portlets or portlets extending <code>GenericPortlet</code> . These scopes are present within the portal artifact, and are available to your portlet project by adding the Maven dependency described in the example API Maven Dependency." + 
"		</para>" + 
"		<example>" + 
"			<title>API Maven Dependency</title>" + 
"			<para>" + 
"				There is no <code>&lt;version&gt;</code> necessary in <code>&lt;dependency&gt;</code> if the Bill of Materials (BOM) is imported as described in <xref linkend=\"sect-Starting_a_Portlet_Project\"/>." + 
"			</para>" + 
"			<programlisting language=\"XML\">&lt;dependency&gt;" + 
"    &lt;groupId&gt;org.gatein.api&lt;/groupId&gt;" + 
"    &lt;artifactId&gt;gatein-api&lt;/artifactId&gt;" + 
"    &lt;scope&gt;provided&lt;/scope&gt;" + 
"&lt;/dependency&gt;</programlisting>" + 
"		</example>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18879-565956+%5BLatest%5D&amp;cf_build_id=18879-565956+05+Dec+2013+13%3A49+en-US+%5BLatest%5D&amp;comment=Title%3A+Portlet+CDI+Scopes%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"		<section id=\"PortletLifecycleScoped\" remap=\"TID_18880\">" + 
"			<title>@PortletLifecycleScoped</title>" + 
"			<para>" + 
"				A bean annotated with <code>@PortletLifecycleScoped</code> is active for the full Portlet Lifecycle, from Action to Render." + 
"			</para>" + 
"			<para>" + 
"				If you set a value from within an <code>ActionRequest</code> or <code>EventRequest,</code> then retrieve that value from the bean within a <code>RenderRequest</code>, the value that was previously set is returned." + 
"			</para>" + 
"			<para>" + 
"				However, any further <code>RenderRequest</code> events that occur after the initial Portlet Lifecycle has completed will not contain any values that may have been set as part of an <code>ActionRequest</code> or <code>EventRequest</code>." + 
"			</para>" + 
"			<para>" + 
"				The <code>@PortletLifecycleScoped</code> is best suited to situations where it does not matter if the value is only present for the first render, such as wanting to display a message on the portlet to the user as a result of some action that was performed." + 
"			</para>" + 
"			<note>" + 
"				<para>" + 
"					A <code>ResourceRequest</code> is considered separate from the regular Portlet Lifecycle, therefore any changes to a CDI bean within a <code>ResourceRequest</code> will not be reflected in the instance of the bean used during an <code>ActionRequest</code> , <code>EventRequest</code> or <code>RenderRequest</code>, just as any changes to bean state within these requests will not be reflected in the instance that a <code>ResourceRequest</code> sees." + 
"				</para>" + 
"			</note>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18880-565956+%5BLatest%5D&amp;cf_build_id=18880-565956+05+Dec+2013+13%3A49+en-US+%5BLatest%5D&amp;comment=Title%3A+%40PortletLifecycleScoped%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"		<section id=\"PortletRedisplayScoped\" remap=\"TID_18881\">" + 
"			<title>@PortletRedisplayScoped</title>" + 
"			<remark>" + 
"				BZ#920896 - 20130919 - Incorporated comments with some minor rework." + 
"			</remark>" + 
"			<para>" + 
"				A bean annotated with <code>@PortletRedisplayScoped</code> is active until a subsequent Portlet Lifecycle triggered by an <code>ActionRequest</code> or <code>EventRequest</code> is initiated." + 
"			</para>" + 
"			<para>" + 
"				This takes <code>@PortletLifecycleScoped</code> a step further by supporting the use case of needing to display the same data each time the portlet is refreshed without any new actions or events being triggered." + 
"			</para>" + 
"			<para>" + 
"				It does not matter how many <code>RenderRequest</code> are made, the data will be retained for redisplay until a new <code>ActionRequest</code> or <code>EventRequest</code> is triggered, causing the beans to be re-initialized to their default state." + 
"			</para>" + 
"			<important>" + 
"				<para>" + 
"					Because the <code>@PortletRedisplayScoped</code> bean is passivation capable, it must implement <code>Serializable</code> ." + 
"				</para>" + 
"			</important>" + 
"			<para>" + 
"				A <code>ResourceRequest</code> has any <code>@PortletRedisplayScoped</code> annotated bean initialized to its default state, however any bean that has its methods called will overwrite any existing instances of that bean upon completion of the <code>ResourceRequest</code> . This enables a subsequent <code>RenderRequest</code> to reflect the values that were set as part of a <code>ResourceRequest</code>. The typical use case for this scenario is Ajax calls from the browser." + 
"			</para>" + 
"			<important>" + 
"				<para>" + 
"					As <code>@PortletRedisplayScoped</code> beans have a CDI client proxy injected into the beans instead of the actual instance, it's important to remember that calling a <emphasis role=\"strong\">get</emphasis> method on a bean during a <code>ResourceRequest</code> will result in its initialized state overwriting whatever is present in the instance that will be used for a <code>RenderRequest</code> ." + 
"				</para>" + 
"				<para>" + 
"					Therefore it is recommended to only call beans methods during <code>RenderRequest</code> to avoid unexpected data changes on a portlet refresh." + 
"				</para>" + 
"			</important>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18881-565956+%5BLatest%5D&amp;cf_build_id=18881-565956+05+Dec+2013+13%3A49+en-US+%5BLatest%5D&amp;comment=Title%3A+%40PortletRedisplayScoped%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"	</section>" + 
"</chapter>" + 
"	<chapter id=\"chap-Portlet_Bridge\">" + 
"	<title>Portlet Bridge</title>" + 
"	<para>" + 
"		A portlet bridge is a mediator that allows non-native application frameworks to run in a portal environment, independent to the underlying portlet API, or portlet concept. This functionality provides a developer flexibility to continue writing applications in a preferred language, and allows a controlled transition to new technologies." + 
"	</para>" + 
"	<para role=\"RoleCreateBugPara\">" + 
"		<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+20040-566194+%5BLatest%5D&amp;cf_build_id=20040-566194+05+Dec+2013+19%3A47+en-US+%5BLatest%5D&amp;comment=Title%3A+Portlet+Bridge%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"	</para>" + 
"	<section id=\"JBoss_Portlet_Bridge\" remap=\"TID_20022\">" + 
"		<title>JBoss Portlet Bridge</title>" + 
"		<para>" + 
"			The JBoss Portlet Bridge is an implementation of the JSR-329 specification. It supports the JSF 2.0 runtime within a JSR 168 or 286 portlet. Version 3.x of the bridge is compatible with JSF 2.0 and RichFaces 4.x." + 
"		</para>" + 
"		<para>" + 
"			JBoss Portlet Bridge allows JSF applications to run using supported JBoss frameworks such as <application>RichFaces</application>. Seam 3.2 support is not yet available for JSF2, however support may be included in a future release." + 
"		</para>" + 
"		<para>" + 
"			The bridge is used to execute <literal>Faces</literal> requests on behalf of the portlet. During each request, the <literal>Faces</literal> environment is setup and handled by the bridge." + 
"		</para>" + 
"		<para>" + 
"			Part of this implementation acts as a <literal>Faces</literal> controller, much like the FacesServlet does in the direct client request environment." + 
"		</para>" + 
"		<para>" + 
"			The other part of this implementation is provided by implementing a variety of (standard) <literal>Faces</literal> extensions." + 
"		</para>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+20022-566191+%5BLatest%5D&amp;cf_build_id=20022-566191+05+Dec+2013+19%3A40+en-US+%5BLatest%5D&amp;comment=Title%3A+JBoss+Portlet+Bridge%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"	</section>" + 
"	<section id=\"Portlet_application\" remap=\"TID_20041\">" + 
"		<title>Portlet application</title>" + 
"		<para>" + 
"			A portlet application is defined as a single web archive (WAR)." + 
"		</para>" + 
"		<para>" + 
"			All portlets that are part of the same WAR are considered to form part of the same portlet application." + 
"		</para>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+20041-566194+%5BLatest%5D&amp;cf_build_id=20041-566194+05+Dec+2013+19%3A47+en-US+%5BLatest%5D&amp;comment=Title%3A+Portlet+application%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"	</section>" + 
"	<section id=\"Extensions1\" remap=\"TID_20033\">" + 
"		<title>Extensions</title>" + 
"		<para>" + 
"			Portlet extensions sit atop the portlet bridge framework. They extend the functionality of other JBoss portlet applications, and are critical in JSF portlet development." + 
"		</para>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+20033-566194+%5BLatest%5D&amp;cf_build_id=20033-566194+05+Dec+2013+19%3A47+en-US+%5BLatest%5D&amp;comment=Title%3A+Extensions%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"	</section>" + 
"	<section id=\"Examples1\" remap=\"TID_20034\">" + 
"		<title>Examples</title>" + 
"		<remark>" + 
"			Info taken from https://docs.jboss.org/author/display/PBR/Examples" + 
"		</remark>" + 
"		<para>" + 
"			Portlet Bridge provides example JSF2 portlets, which provide a good starting point for including the framework in portlets, as well as demonstrating the functionality available in Portlet Bridge." + 
"		</para>" + 
"		<important>" + 
"			<para>" + 
"				The provided examples are not officially supported by Red Hat." + 
"			</para>" + 
"		</important>" + 
"		<variablelist>" + 
"			<varlistentry>" + 
"				<term>JSF2 Portlet</term>" + 
"				<listitem>" + 
"					<para>" + 
"						<ulink url=\"https://github.com/jbossportletbridge/jbossportletbridge/tree/master/examples/jsf2portlet\"/>" + 
"					</para>" + 
"					<para>" + 
"						This example provides a basic JSF2 portlet demonstrating Ajax functionality. This example provides a solid foundation for basic JSF2 functionality." + 
"					</para>" + 
"				</listitem>" + 
"			</varlistentry>" + 
"			<varlistentry>" + 
"				<term>RichFaces 4 Simple</term>" + 
"				<listitem>" + 
"					<para>" + 
"						<ulink url=\"https://github.com/jbossportletbridge/jbossportletbridge/tree/master/examples/richfaces-simple\"/>" + 
"					</para>" + 
"					<para>" + 
"						This example demonstrates a simple RichFaces 4 form with ajax submission and an extended data table showing the submitted data. This example provides a solid foundation for basic RichFaces 4 functionality." + 
"					</para>" + 
"				</listitem>" + 
"			</varlistentry>" + 
"			<varlistentry>" + 
"				<term>RichFaces 4 Showcase</term>" + 
"				<listitem>" + 
"					<para>" + 
"						This example demonstrates a RichFaces 4 application, with portlet-specific changes. This example is worth deploying for advanced RichFaces 4 functionality, and shows the full spectrum of what can be achieved with RichFaces 4 and Portlet Bridge" + 
"					</para>" + 
"				</listitem>" + 
"			</varlistentry>" + 
"		</variablelist>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+20034-566194+%5BLatest%5D&amp;cf_build_id=20034-566194+05+Dec+2013+19%3A47+en-US+%5BLatest%5D&amp;comment=Title%3A+Examples%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"	</section>" + 
"	<section id=\"Render_Policy_Parameters\" remap=\"TID_20035\">" + 
"		<title>Render Policy Parameters</title>" + 
"		<para>" + 
"			Different JSF View Declaration Languages require different behavior from the JBoss Portlet Bridge when it comes to rendering views. Instructing the Bridge on which policy to use is done using the javax.portlet.faces.RENDER_POLICY &lt;context-param&gt; directive in <filename>web.xml</filename>." + 
"		</para>" + 
"		<variablelist id=\"vari-Reference_Guide-web.xml-RenderPolicy_Options\">" + 
"			<title>RenderPolicy Options</title>" + 
"			<varlistentry>" + 
"				<term>ALWAYS_DELEGATE</term>" + 
"				<listitem>" + 
"					<para>" + 
"						Indicates the bridge should not render the view itself, but rather always delegate the rendering." + 
"					</para>" + 
"				</listitem>" + 
"			</varlistentry>" + 
"			<varlistentry>" + 
"				<term>NEVER_DELEGATE</term>" + 
"				<listitem>" + 
"					<para>" + 
"						Indicates the bridge should always render the view itself and never delegate." + 
"					</para>" + 
"				</listitem>" + 
"			</varlistentry>" + 
"			<varlistentry>" + 
"				<term>DEFAULT</term>" + 
"				<listitem>" + 
"					<para>" + 
"						Directs the bridge to first delegate the render. If an exception is thrown, the bridge renders the view based on its own logic. If the configuration parameter is not present or has an invalid value the bridge renders using default behavior as it would if DEFAULT was set." + 
"					</para>" + 
"				</listitem>" + 
"			</varlistentry>" + 
"		</variablelist>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+20035-566194+%5BLatest%5D&amp;cf_build_id=20035-566194+05+Dec+2013+19%3A47+en-US+%5BLatest%5D&amp;comment=Title%3A+Render+Policy+Parameters%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"	</section>" + 
"	<section id=\"Facelets_Configuration\" remap=\"TID_20042\">" + 
"		<title>Facelets Configuration</title>" + 
"		<para>" + 
"			The following <filename>web.xml</filename> setting is only for <literal>Facelets</literal> based applications." + 
"		</para>" + 
"		<example>" + 
"			<title>Facelets web.xml Configuration</title>" + 
"			<programlisting language=\"XML\"><![CDATA[<context-param>" + 
"<param-name>javax.portlet.faces.RENDER_POLICY</param-name>" + 
"<param-value>ALWAYS_DELEGATE</param-value>" + 
"</context-param>]]></programlisting>" + 
"		</example>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+20042-566194+%5BLatest%5D&amp;cf_build_id=20042-566194+05+Dec+2013+19%3A47+en-US+%5BLatest%5D&amp;comment=Title%3A+Facelets+Configuration%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"	</section>" + 
"	<section id=\"JSP-only_Configuration\" remap=\"TID_20037\">" + 
"		<title>JSP-only Configuration</title>" + 
"		<para>" + 
"			The following <filename>web.xml</filename> setting is only for JSP based applications. Download the demonstration application <ulink url=\"http://anonsvn.jboss.org/repos/portletbridge/trunk/examples/jsf-ri/1.2-basic/\">here</ulink>." + 
"		</para>" + 
"		<example>" + 
"			<title>web.xml</title>" + 
"			<programlisting language=\"XML\" role=\"XML\"><![CDATA[<context-param>" + 
"<param-name>javax.portlet.faces.RENDER_POLICY</param-name>" + 
"<param-value>NEVER_DELEGATE</param-value>" + 
"</context-param>]]></programlisting>" + 
"		</example>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+20037-566194+%5BLatest%5D&amp;cf_build_id=20037-566194+05+Dec+2013+19%3A47+en-US+%5BLatest%5D&amp;comment=Title%3A+JSP-only+Configuration%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"	</section>" + 
"	<section id=\"RichFaces_Local_and_Remote_Portlet_Support\" remap=\"TID_20012\">" + 
"		<title>RichFaces Local and Remote Portlet Support</title>" + 
"		<remark>" + 
"			BZ#856417 - NEEDINFO 20121105 - Awaiting mvanco to provide an updated table of features. Update 20130628 This info was never provided by mvanco. theute provided the required info in an email sent 20130522" + 
"		</remark>" + 
"		<para>" + 
"			<xref linkend=\"table-RichFaces_Feature_Support_Exceptions\"/> outlines exceptions between RichFaces component features when used in both local and remote portlets. The full matrix listing all supported components can be viewed at <ulink url=\"https://community.jboss.org/wiki/RichFaces42xComponentCompatibility\"/>." + 
"		</para>" + 
"		<remark>" + 
"			Table Source: https://community.jboss.org/wiki/RichFaces42xComponentCompatibility" + 
"		</remark>" + 
"		<table id=\"table-RichFaces_Feature_Support_Exceptions\">" + 
"			<title>RichFaces Feature Support Exceptions</title>" + 
"			<tgroup cols=\"4\">" + 
"				<thead>" + 
"					<row>" + 
"						<entry>" + 
"							RichFaces Component" + 
"						</entry>" + 
"						<entry>" + 
"							Local Portlet" + 
"						</entry>" + 
"						<entry>" + 
"							Remote Portlet using WSRP" + 
"						</entry>" + 
"						<entry>" + 
"							Additional Comments" + 
"						</entry>" + 
"					</row>" + 
"				</thead>" + 
"				<tbody>" + 
"					<row>" + 
"						<entry>" + 
"							<literal>rich:editor</literal>" + 
"						</entry>" + 
"						<entry>" + 
"							Yes" + 
"						</entry>" + 
"						<entry>" + 
"							Yes" + 
"						</entry>" + 
"						<entry>" + 
"							Some issues with editor icons over WSRP may be encountered when the Consumer and Producer are on different servers because the URLs are relative and are generated through JavaScript" + 
"						</entry>" + 
"					</row>" + 
"					<row>" + 
"						<entry>" + 
"							<literal>rich:focus</literal>" + 
"						</entry>" + 
"						<entry>" + 
"							Yes" + 
"						</entry>" + 
"						<entry>" + 
"							Untested" + 
"						</entry>" + 
"						<entry>" + 
"							Available since RichFaces 4.3.0.M3" + 
"						</entry>" + 
"					</row>" + 
"					<row>" + 
"						<entry>" + 
"							<literal>rich:placeholder</literal>" + 
"						</entry>" + 
"						<entry>" + 
"							Yes" + 
"						</entry>" + 
"						<entry>" + 
"							Untested" + 
"						</entry>" + 
"						<entry>" + 
"							Available since RichFaces 4.3.0.M3" + 
"						</entry>" + 
"					</row>" + 
"				</tbody>" + 
"			</tgroup>" + 
"		</table>" + 
"		<remark>" + 
"			Table listing all of the supported components commented out in favor of the one above, which only describes components with exceptions. If the original table is requried, it will need to be analyzed for missing Components." + 
"		</remark>" + 
"		<!--<table>" + 
"		<title>RichFaces Feature Status</title>" + 
"		<tgroup cols=\"3\">" + 
"			<thead>" + 
"				<row>" + 
"					<entry>" + 
"						RichFaces Component" + 
"					</entry>" + 
"					<entry>" + 
"						Supported as Local Portlet" + 
"					</entry>" + 
"					<entry>" + 
"						Supported as Remote Portlet using WSRP" + 
"					</entry>" + 
"				</row>" + 
"			</thead>" + 
"			<tbody>" + 
"				<row>" + 
"					<entry>" + 
"						<literal>a4j:commandButton</literal>" + 
"					</entry>" + 
"					<entry>" + 
"						Yes" + 
"					</entry>" + 
"					<entry>" + 
"						Yes" + 
"					</entry>" + 
"				</row>" + 
"				<row>" + 
"					<entry>" + 
"						<literal>a4j:commandLink</literal>" + 
"					</entry>" + 
"					<entry>" + 
"						Yes" + 
"					</entry>" + 
"					<entry>" + 
"						Yes" + 
"					</entry>" + 
"				</row>" + 
"				<row>" + 
"					<entry>" + 
"						<literal>a4j:jsFunction</literal>" + 
"					</entry>" + 
"					<entry>" + 
"						Yes" + 
"					</entry>" + 
"					<entry>" + 
"						Yes" + 
"					</entry>" + 
"				</row>" + 
"				<row>" + 
"					<entry>" + 
"						<literal>a4j:push</literal>" + 
"					</entry>" + 
"					<entry>" + 
"						Yes" + 
"					</entry>" + 
"					<entry>" + 
"						Yes" + 
"					</entry>" + 
"				</row>" + 
"				<row>" + 
"					<entry>" + 
"						<literal>a4j:poll</literal>" + 
"					</entry>" + 
"					<entry>" + 
"						Yes" + 
"					</entry>" + 
"					<entry>" + 
"						Yes" + 
"					</entry>" + 
"				</row>" + 
"				<row>" + 
"					<entry>" + 
"						<literal>a4j:queue</literal>" + 
"					</entry>" + 
"					<entry>" + 
"						No" + 
"					</entry>" + 
"					<entry>" + 
"						No" + 
"					</entry>" + 
"				</row>" + 
"				<row>" + 
"					<entry>" + 
"						<literal>a4j:status</literal>" + 
"					</entry>" + 
"					<entry>" + 
"						Yes" + 
"					</entry>" + 
"					<entry>" + 
"						Yes" + 
"					</entry>" + 
"				</row>" + 
"				<row>" + 
"					<entry>" + 
"						<literal>a4j:keepAlive</literal>" + 
"					</entry>" + 
"					<entry>" + 
"						Yes" + 
"					</entry>" + 
"					<entry>" + 
"						Yes" + 
"					</entry>" + 
"				</row>" + 
"				<row>" + 
"					<entry>" + 
"						<literal>a4j:include</literal>" + 
"					</entry>" + 
"					<entry>" + 
"						Yes" + 
"					</entry>" + 
"					<entry>" + 
"						Yes" + 
"					</entry>" + 
"				</row>" + 
"				<row>" + 
"					<entry>" + 
"						<literal>a4j:loadStyle</literal>" + 
"					</entry>" + 
"					<entry>" + 
"						No" + 
"					</entry>" + 
"					<entry>" + 
"						No" + 
"					</entry>" + 
"				</row>" + 
"				<row>" + 
"					<entry>" + 
"						<literal>a4j:loadScript</literal>" + 
"					</entry>" + 
"					<entry>" + 
"						Yes" + 
"					</entry>" + 
"					<entry>" + 
"						Yes" + 
"					</entry>" + 
"				</row>" + 
"				<row>" + 
"					<entry>" + 
"						<literal>a4j:ajaxValidator</literal>" + 
"					</entry>" + 
"					<entry>" + 
"						Yes" + 
"					</entry>" + 
"					<entry>" + 
"						Yes" + 
"					</entry>" + 
"				</row>" + 
"				<row>" + 
"					<entry>" + 
"						<literal>a4j:beanValidator</literal>" + 
"					</entry>" + 
"					<entry>" + 
"						Yes" + 
"					</entry>" + 
"					<entry>" + 
"						Yes" + 
"					</entry>" + 
"				</row>" + 
"				<row>" + 
"					<entry>" + 
"						<literal>a4j:graphValidator</literal>" + 
"					</entry>" + 
"					<entry>" + 
"						Yes" + 
"					</entry>" + 
"					<entry>" + 
"						Yes" + 
"					</entry>" + 
"				</row>" + 
"				<row>" + 
"					<entry>" + 
"						<literal>a4j:mediaOutput</literal>" + 
"					</entry>" + 
"					<entry>" + 
"						No" + 
"					</entry>" + 
"					<entry>" + 
"						Yes" + 
"					</entry>" + 
"				</row>" + 
"				<row>" + 
"					<entry>" + 
"						<literal>a4j:outputPanel</literal>" + 
"					</entry>" + 
"					<entry>" + 
"						Yes" + 
"					</entry>" + 
"					<entry>" + 
"						Yes" + 
"					</entry>" + 
"				</row>" + 
"				<row>" + 
"					<entry>" + 
"						<literal>a4j:log</literal>" + 
"					</entry>" + 
"					<entry>" + 
"						Yes" + 
"					</entry>" + 
"					<entry>" + 
"						Yes" + 
"					</entry>" + 
"				</row>" + 
"				<row>" + 
"					<entry>" + 
"						<literal>rich:dataTable</literal>" + 
"					</entry>" + 
"					<entry>" + 
"						Yes" + 
"					</entry>" + 
"					<entry>" + 
"						No" + 
"					</entry>" + 
"				</row>" + 
"				<row>" + 
"					<entry>" + 
"						<literal>a4j:dataFilterSlider</literal>" + 
"					</entry>" + 
"					<entry>" + 
"						Yes" + 
"					</entry>" + 
"					<entry>" + 
"						Yes" + 
"					</entry>" + 
"				</row>" + 
"				<row>" + 
"					<entry>" + 
"						<literal>rich:dataGrid</literal>" + 
"					</entry>" + 
"					<entry>" + 
"						Yes" + 
"					</entry>" + 
"					<entry>" + 
"						No" + 
"					</entry>" + 
"				</row>" + 
"				<row>" + 
"					<entry>" + 
"						<literal>rich:dataList</literal>" + 
"					</entry>" + 
"					<entry>" + 
"						Yes" + 
"					</entry>" + 
"					<entry>" + 
"						Yes" + 
"					</entry>" + 
"				</row>" + 
"				<row>" + 
"					<entry>" + 
"						<literal>rich:datascroller</literal>" + 
"					</entry>" + 
"					<entry>" + 
"						No" + 
"					</entry>" + 
"					<entry>" + 
"						No" + 
"					</entry>" + 
"				</row>" + 
"				<row>" + 
"					<entry>" + 
"						<literal>rich:extendedDataTable</literal>" + 
"					</entry>" + 
"					<entry>" + 
"						Yes" + 
"					</entry>" + 
"					<entry>" + 
"						No" + 
"					</entry>" + 
"				</row>" + 
"				<row>" + 
"					<entry>" + 
"						<literal>rich:repeat</literal>" + 
"					</entry>" + 
"					<entry>" + 
"						Yes" + 
"					</entry>" + 
"					<entry>" + 
"						Yes" + 
"					</entry>" + 
"				</row>" + 
"				<row>" + 
"					<entry>" + 
"						<literal>rich:scrollableDataTable</literal>" + 
"					</entry>" + 
"					<entry>" + 
"						Yes" + 
"					</entry>" + 
"					<entry>" + 
"						Yes" + 
"					</entry>" + 
"				</row>" + 
"				<row>" + 
"					<entry>" + 
"						<literal>drag-drop support</literal>" + 
"					</entry>" + 
"					<entry>" + 
"						Yes" + 
"					</entry>" + 
"					<entry>" + 
"						Yes" + 
"					</entry>" + 
"				</row>" + 
"				<row>" + 
"					<entry>" + 
"						<literal>rich:contextMenu</literal>" + 
"					</entry>" + 
"					<entry>" + 
"						No" + 
"					</entry>" + 
"					<entry>" + 
"						No" + 
"					</entry>" + 
"				</row>" + 
"				<row>" + 
"					<entry>" + 
"						<literal>rich:dropDownMenu</literal>" + 
"					</entry>" + 
"					<entry>" + 
"						Yes" + 
"					</entry>" + 
"					<entry>" + 
"						Yes" + 
"					</entry>" + 
"				</row>" + 
"				<row>" + 
"					<entry>" + 
"						<literal>rich:tree</literal>" + 
"					</entry>" + 
"					<entry>" + 
"						Yes" + 
"					</entry>" + 
"					<entry>" + 
"						Yes" + 
"					</entry>" + 
"				</row>" + 
"				<row>" + 
"					<entry>" + 
"						<literal>rich:modalPanel</literal>" + 
"					</entry>" + 
"					<entry>" + 
"						Yes" + 
"					</entry>" + 
"					<entry>" + 
"						Yes" + 
"					</entry>" + 
"				</row>" + 
"				<row>" + 
"					<entry>" + 
"						<literal>rich:paint2d</literal>" + 
"					</entry>" + 
"					<entry>" + 
"						Yes" + 
"					</entry>" + 
"					<entry>" + 
"						Yes" + 
"					</entry>" + 
"				</row>" + 
"				<row>" + 
"					<entry>" + 
"						<literal>rich:panel</literal>" + 
"					</entry>" + 
"					<entry>" + 
"						Yes" + 
"					</entry>" + 
"					<entry>" + 
"						Yes" + 
"					</entry>" + 
"				</row>" + 
"				<row>" + 
"					<entry>" + 
"						<literal>rich:panelBar</literal>" + 
"					</entry>" + 
"					<entry>" + 
"						Yes" + 
"					</entry>" + 
"					<entry>" + 
"						Yes" + 
"					</entry>" + 
"				</row>" + 
"				<row>" + 
"					<entry>" + 
"						<literal>rich:panelMenu</literal>" + 
"					</entry>" + 
"					<entry>" + 
"						Yes" + 
"					</entry>" + 
"					<entry>" + 
"						Yes" + 
"					</entry>" + 
"				</row>" + 
"				<row>" + 
"					<entry>" + 
"						<literal>rich:progressBar</literal>" + 
"					</entry>" + 
"					<entry>" + 
"						Yes" + 
"					</entry>" + 
"					<entry>" + 
"						Yes" + 
"					</entry>" + 
"				</row>" + 
"				<row>" + 
"					<entry>" + 
"						<literal>rich:separator</literal>" + 
"					</entry>" + 
"					<entry>" + 
"						Yes" + 
"					</entry>" + 
"					<entry>" + 
"						Yes" + 
"					</entry>" + 
"				</row>" + 
"				<row>" + 
"					<entry>" + 
"						<literal>rich:simpleTogglePanel</literal>" + 
"					</entry>" + 
"					<entry>" + 
"						Yes" + 
"					</entry>" + 
"					<entry>" + 
"						Yes" + 
"					</entry>" + 
"				</row>" + 
"				<row>" + 
"					<entry>" + 
"						<literal>rich:spacer</literal>" + 
"					</entry>" + 
"					<entry>" + 
"						Yes" + 
"					</entry>" + 
"					<entry>" + 
"						Yes" + 
"					</entry>" + 
"				</row>" + 
"				<row>" + 
"					<entry>" + 
"						<literal>rich:tabPanel</literal>" + 
"					</entry>" + 
"					<entry>" + 
"						Yes" + 
"					</entry>" + 
"					<entry>" + 
"						Yes (except tab deletion)" + 
"					</entry>" + 
"				</row>" + 
"				<row>" + 
"					<entry>" + 
"						<literal>rich:togglePanel</literal>" + 
"					</entry>" + 
"					<entry>" + 
"						Yes" + 
"					</entry>" + 
"					<entry>" + 
"						Yes" + 
"					</entry>" + 
"				</row>" + 
"				<row>" + 
"					<entry>" + 
"						<literal>rich:toolBar</literal>" + 
"					</entry>" + 
"					<entry>" + 
"						Yes" + 
"					</entry>" + 
"					<entry>" + 
"						Yes" + 
"					</entry>" + 
"				</row>" + 
"				<row>" + 
"					<entry>" + 
"						<literal>rich:toolTip</literal>" + 
"					</entry>" + 
"					<entry>" + 
"						Yes" + 
"					</entry>" + 
"					<entry>" + 
"						Yes" + 
"					</entry>" + 
"				</row>" + 
"				<row>" + 
"					<entry>" + 
"						<literal>rich:calendar</literal>" + 
"					</entry>" + 
"					<entry>" + 
"						Yes" + 
"					</entry>" + 
"					<entry>" + 
"						No" + 
"					</entry>" + 
"				</row>" + 
"				<row>" + 
"					<entry>" + 
"						<literal>rich:colorPicker</literal>" + 
"					</entry>" + 
"					<entry>" + 
"						Yes" + 
"					</entry>" + 
"					<entry>" + 
"						Yes" + 
"					</entry>" + 
"				</row>" + 
"				<row>" + 
"					<entry>" + 
"						<literal>rich:comboBox</literal>" + 
"					</entry>" + 
"					<entry>" + 
"						Yes" + 
"					</entry>" + 
"					<entry>" + 
"						Yes" + 
"					</entry>" + 
"				</row>" + 
"				<row>" + 
"					<entry>" + 
"						<literal>rich:editor</literal>" + 
"					</entry>" + 
"					<entry>" + 
"						No" + 
"					</entry>" + 
"					<entry>" + 
"						No" + 
"					</entry>" + 
"				</row>" + 
"				<row>" + 
"					<entry>" + 
"						<literal>rich:fileUpload</literal>" + 
"					</entry>" + 
"					<entry>" + 
"						No" + 
"					</entry>" + 
"					<entry>" + 
"						No" + 
"					</entry>" + 
"				</row>" + 
"				<row>" + 
"					<entry>" + 
"						<literal>rich:inplaceSelect</literal>" + 
"					</entry>" + 
"					<entry>" + 
"						Yes" + 
"					</entry>" + 
"					<entry>" + 
"						Yes" + 
"					</entry>" + 
"				</row>" + 
"				<row>" + 
"					<entry>" + 
"						<literal>rich:inplaceInput</literal>" + 
"					</entry>" + 
"					<entry>" + 
"						Yes" + 
"					</entry>" + 
"					<entry>" + 
"						Yes" + 
"					</entry>" + 
"				</row>" + 
"				<row>" + 
"					<entry>" + 
"						<literal>rich:inputNumberSpinner</literal>" + 
"					</entry>" + 
"					<entry>" + 
"						Yes" + 
"					</entry>" + 
"					<entry>" + 
"						Yes" + 
"					</entry>" + 
"				</row>" + 
"				<row>" + 
"					<entry>" + 
"						<literal>rich:inputNumberSlider</literal>" + 
"					</entry>" + 
"					<entry>" + 
"						Yes" + 
"					</entry>" + 
"					<entry>" + 
"						Yes" + 
"					</entry>" + 
"				</row>" + 
"				<row>" + 
"					<entry>" + 
"						<literal>rich:suggestionBox</literal>" + 
"					</entry>" + 
"					<entry>" + 
"						Yes" + 
"					</entry>" + 
"					<entry>" + 
"						Yes" + 
"					</entry>" + 
"				</row>" + 
"				<row>" + 
"					<entry>" + 
"						<literal>rich:listShuttle</literal>" + 
"					</entry>" + 
"					<entry>" + 
"						Yes" + 
"					</entry>" + 
"					<entry>" + 
"						Yes" + 
"					</entry>" + 
"				</row>" + 
"				<row>" + 
"					<entry>" + 
"						<literal>rich:orderingList</literal>" + 
"					</entry>" + 
"					<entry>" + 
"						Yes" + 
"					</entry>" + 
"					<entry>" + 
"						Yes" + 
"					</entry>" + 
"				</row>" + 
"				<row>" + 
"					<entry>" + 
"						<literal>rich:pickList</literal>" + 
"					</entry>" + 
"					<entry>" + 
"						Yes" + 
"					</entry>" + 
"					<entry>" + 
"						Yes" + 
"					</entry>" + 
"				</row>" + 
"			</tbody>" + 
"		</tgroup>" + 
"	</table>-->" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+20012-566191+%5BLatest%5D&amp;cf_build_id=20012-566191+05+Dec+2013+19%3A40+en-US+%5BLatest%5D&amp;comment=Title%3A+RichFaces+Local+and+Remote+Portlet+Support%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"	</section>" + 
"	<section id=\"Sending_and_Receiving_Events\" remap=\"TID_20013\">" + 
"		<title>Sending and Receiving Events</title>" + 
"		<para>" + 
"			The bridge considers a portlet event a model event, which means the event is targeted to the applications data model, not its view." + 
"		</para>" + 
"		<para>" + 
"			Because JSF events primarily concern its view, the bridge processes the portlet events manually. Provisions are made to ensure that any model changes resulting from processing the event are updated in the view." + 
"		</para>" + 
"		<para>" + 
"			Because event payloads are arbitrarily complex however, the manual data processing is left primarily to the portlet application to support." + 
"		</para>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+20013-566191+%5BLatest%5D&amp;cf_build_id=20013-566191+05+Dec+2013+19%3A40+en-US+%5BLatest%5D&amp;comment=Title%3A+Sending+and+Receiving+Events%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"	</section>" + 
"	<section id=\"Sending_Events\" remap=\"TID_20027\">" + 
"		<title>Sending Events</title>" + 
"		<remark>" + 
"			BZ#856410 - Adjusted the info that related to the seam booking example specifically." + 
"		</remark>" + 
"		<para>" + 
"			The following configuration uses information relating to a generic Booking Event portlet. The concepts contained within each example can be applied to other event sending scenarios." + 
"		</para>" + 
"		<procedure>" + 
"			<title>Sending Events</title>" + 
"			<step>" + 
"				<para>" + 
"					Define the autoDispatchEvents &lt;init-param&gt; in <filename>portlet.xml</filename> to specify the GenericFacesPortlet should override event handling and dispatch all events to the bridge." + 
"				</para>" + 
"				<important>" + 
"					<para>" + 
"						If the application is written entirely in JSF (as opposed to a mix of view technologies), this &lt;init-param&gt; must be set to <parameter>true</parameter>." + 
"					</para>" + 
"				</important>" + 
"				<programlisting language=\"XML\">&lt;init-param&gt;" + 
"  &lt;name&gt;javax.portlet.faces.autoDispatchEvents&lt;/name&gt;" + 
"  &lt;value&gt;true&lt;/value&gt;" + 
"&lt;/init-param&gt;</programlisting>" + 
"			</step>" + 
"			<step>" + 
"				<para>" + 
"					Define the &lt;supported-publishing-event&gt; in <filename>portlet.xml</filename> to enable the portlet to publish an event to the portal." + 
"				</para>" + 
"				<programlisting language=\"XML\">&lt;supported-publishing-event&gt;" + 
"  &lt;qname xmlns:jbp=\"urn:jboss:portal:samples:event\"&gt;jbp:BookingEvent&lt;/qname&gt;" + 
"&lt;/supported-publishing-event&gt;</programlisting>" + 
"			</step>" + 
"			<step>" + 
"				<para>" + 
"					Define the &lt;event-definition&gt; directive in <filename>portlet.xml</filename> to specify how the event namespace (&lt;qname&gt;) is linked to an actual type within the application." + 
"				</para>" + 
"				<programlisting language=\"XML\">&lt;event-definition&gt;" + 
"  &lt;qname xmlns:jbp=\"urn:jboss:portal:samples:event\"&gt;jbp:BookingEvent&lt;/qname&gt;" + 
"  &lt;value-type&gt;org.jboss.example.booking.BookingEvent&lt;/value-type&gt;" + 
"&lt;/event-definition&gt;</programlisting>" + 
"			</step>" + 
"		</procedure>" + 
"		<example>" + 
"			<title>Event type example</title>" + 
"			<para>" + 
"				To publish an event, define an event type that represents the actual object that will be attached to the event." + 
"			</para>" + 
"			<para>" + 
"				The type requires the @XmlRootElement annotation to allow the event to be serialized into a JAXB object for publishing." + 
"			</para>" + 
"			<programlisting language=\"Java\">" + 
"@XmlRootElement" + 
"public class BookingEvent implements Serializable {" + 
" " + 
"  private String id;" + 
"  public static final QName QNAME = new QName(\"urn:jboss:portal:samples:event\", \"BookingEvent\");" + 
" " + 
"  public BookingEvent(String id) {" + 
"      this.id = id;" + 
"  }" + 
" " + 
"  public String getId() {" + 
"    return id;" + 
"  }" + 
"}</programlisting>" + 
"		</example>" + 
"		<example>" + 
"			<title>Dispatch event example</title>" + 
"			<para>" + 
"				To dispatch an event to other portlets within the portal, one approach is to use a bean method triggered by an action." + 
"			</para>" + 
"			<programlisting language=\"Java\">Object response = FacesContext.getCurrentInstance().getExternalContext().getResponse();" + 
"  if (response instanceof StateAwareResponse) {" + 
"    String id = \"an id\";" + 
"    StateAwareResponse stateResponse = (StateAwareResponse) response;" + 
"    stateResponse.setEvent(BookingEvent.QNAME, new BookingEvent(id));" + 
"  }</programlisting>" + 
"		</example>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+20027-566194+%5BLatest%5D&amp;cf_build_id=20027-566194+05+Dec+2013+19%3A47+en-US+%5BLatest%5D&amp;comment=Title%3A+Sending+Events%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"	</section>" + 
"	<section id=\"Receiving_Events\" remap=\"TID_20029\">" + 
"		<title>Receiving Events</title>" + 
"		<para>" + 
"			The following configuration uses information relating to a generic Booking Event portlet. The concepts contained within each example can be applied to other event receiving scenarios." + 
"		</para>" + 
"		<procedure>" + 
"			<title/>" + 
"			<step>" + 
"				<para>" + 
"					Define the bridgeEventHandler &lt;init-param&gt; directive in <filename>portlet.xml</filename> to specify the portlet can receive an event from Portlet Bridge." + 
"				</para>" + 
"				<programlisting language=\"XML\">&lt;init-param&gt;" + 
"  &lt;name&gt;javax.portlet.faces.bridgeEventHandler&lt;/name&gt;" + 
"  &lt;value&gt;org.jboss.example.booking.BookingEventHandler&lt;/value&gt;" + 
"&lt;/init-param&gt;</programlisting>" + 
"			</step>" + 
"			<step>" + 
"				<para>" + 
"					Define the &lt;supported-processing-event&gt; directive in <filename>portal.xml</filename> to specify the portlet can also receive an event from the portal." + 
"				</para>" + 
"				<programlisting language=\"XML\">&lt;supported-processing-event&gt;" + 
"  &lt;qname xmlns:jbp=\"urn:jboss:portal:samples:event\"&gt;jbp:BookingEvent&lt;/qname&gt;" + 
"&lt;/supported-processing-event&gt;</programlisting>" + 
"			</step>" + 
"		</procedure>" + 
"		<para>" + 
"			To process a received event within a portlet, specify in the portlet code that the event handler implements the BridgeEventHandler." + 
"		</para>" + 
"		<programlisting>public class BookingEventHandler implements BridgeEventHandler {" + 
"  public EventNavigationResult handleEvent(FacesContext context, Event event) {" + 
"    // Process event payload as appropriate" + 
"  }" + 
"}</programlisting>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+20029-566194+%5BLatest%5D&amp;cf_build_id=20029-566194+05+Dec+2013+19%3A47+en-US+%5BLatest%5D&amp;comment=Title%3A+Receiving+Events%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"	</section>" + 
"	<section id=\"Public_Render_Parameters\" remap=\"TID_20039\">" + 
"		<title>Public Render Parameters</title>" + 
"		<para>" + 
"			Public Render Parameters (or PRPs) are one of the most powerful and simple Portlet 2.0 features. Several portlets (JSF or otherwise) can share the same PRPs. This feature can be used to present a cohesive UI to the user across all portlets on the page. An example would be using an employee ID to display relative data." + 
"		</para>" + 
"		<para>" + 
"			The bridge automates public render parameter processing." + 
"		</para>" + 
"		<para>" + 
"			A public render parameter can be mapped to an object's accessor (<literal>get</literal>/<literal>set</literal> method) designed to handle a String representation of the value through a <application>Faces</application> <literal>ValueExpression</literal>." + 
"		</para>" + 
"		<para>" + 
"			Unlike Events, PRPs can only be used to set/get a string value, and not an object." + 
"		</para>" + 
"		<para>" + 
"			When a new public render parameter value is received in a request, the bridge sets the value by calling the <literal>ValueExpression</literal>'s <parameter>setValue()</parameter>." + 
"		</para>" + 
"		<para>" + 
"			The bridge maps a render parameter to a backing bean using settings in the <filename>faces-config.xml</filename> and <filename>portlet.xml</filename> files." + 
"		</para>" + 
"		<para>" + 
"			At the end of a request, if the current value of any mapped public render parameter does not match the current incoming value, the bridge sets the new value in an outgoing public render parameter (if feasible in the given phase)." + 
"		</para>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+20039-566194+%5BLatest%5D&amp;cf_build_id=20039-566194+05+Dec+2013+19%3A47+en-US+%5BLatest%5D&amp;comment=Title%3A+Public+Render+Parameters%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"	</section>" + 
"	<section id=\"PRP_portlet_configuration\" remap=\"TID_20014\">" + 
"		<title>PRP portlet configuration</title>" + 
"		<para>" + 
"			The following configuration uses information relating to a generic Booking Event portlet. The concepts contained within each example can be applied to other PRP portlet configuration." + 
"		</para>" + 
"		<para>" + 
"			PRPs must be configured in both the portlet that sends (sets) the PRP, and the portlet that retrieves (gets) the PRP." + 
"		</para>" + 
"		<programlisting language=\"XML\">&lt;portlet&gt;" + 
"&lt;!-- Unnecessary configuration information removed for clarity --&gt;" + 
"  &lt;supported-public-render-parameter&gt;hotelName&lt;/supported-public-render-parameter&gt;" + 
"&lt;/portlet&gt;" + 
" " + 
"&lt;public-render-parameter&gt;" + 
"  &lt;identifier&gt;hotelName&lt;/identifier&gt;" + 
"  &lt;qname xmlns:j=\"http://jboss.org/params\"&gt;j:hotelName&lt;/qname&gt;" + 
"&lt;/public-render-parameter&gt;</programlisting>" + 
"		<para>" + 
"			In the portlet that retrieves the PRP, a PRP handler must be specified as an &lt;init-param&gt; directive." + 
"		</para>" + 
"		<programlisting language=\"XML\">&lt;init-param&gt;" + 
"  " + 
"&lt;name&gt;javax.portlet.faces.bridgePublicRenderParameterHandler&lt;/name&gt;" + 
"  &lt;value&gt;org.jboss.example.booking.BookingPRPHandler&lt;/value&gt;" + 
"&lt;/init-param&gt;</programlisting>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+20014-566191+%5BLatest%5D&amp;cf_build_id=20014-566191+05+Dec+2013+19%3A40+en-US+%5BLatest%5D&amp;comment=Title%3A+PRP+portlet+configuration%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"	</section>" + 
"	<section id=\"Application_configuration\" remap=\"TID_20032\">" + 
"		<title>Application configuration</title>" + 
"		<para>" + 
"			The following configuration uses information relating to a generic Booking Event portlet. The concepts contained within each example can be applied to other PRP portlet configuration." + 
"		</para>" + 
"		<example>" + 
"			<title>Set Parameter</title>" + 
"			<para>" + 
"				To set the PRP, create a Bean method for the portlet setting the parameter that is triggered from a UI action, and sets the PRP onto the response." + 
"			</para>" + 
"			<programlisting language=\"Java\"><![CDATA[Object response = FacesContext.getCurrentInstance().getExternalContext().getResponse();" + 
"if (response instanceof StateAwareResponse) {" + 
"  StateAwareResponse stateResponse = (StateAwareResponse) response;" + 
"  stateResponse.setRenderParameter(&quot;hotelName&quot;, &quot;Name of Hotel&quot;);" + 
"}]]></programlisting>" + 
"		</example>" + 
"		<example>" + 
"			<title>Retrieve parameter</title>" + 
"			<para>" + 
"				The retrieving portlet requires a Bean with a getter/setter for the parameter, to enable Portlet Bridge to set the parameter." + 
"			</para>" + 
"			<programlisting language=\"Java\">public class BookingPRP {" + 
"  private String hotelName;" + 
" " + 
"  public String getHotelName() {" + 
"    return hotelName;" + 
"  }" + 
" " + 
"  public void setHotelName(String hotelName) {" + 
"    this.hotelName = hotelName;" + 
"  }" + 
"}</programlisting>" + 
"		</example>" + 
"		<para>" + 
"			To set the value on the bean, the Bridge needs to be informed which PRP to retrieve and which Bean to set it on." + 
"		</para>" + 
"		<para>" + 
"			If the getter/setter Bean is defined with a EL name of bookingPRP, the following configuration is required in <filename>faces-config.xml</filename>." + 
"		</para>" + 
"		<programlisting>&lt;application&gt;" + 
"    &lt;application-extension&gt;" + 
"       &lt;bridge:public-parameter-mappings&gt;" + 
"          &lt;bridge:public-parameter-mapping&gt;" + 
"             &lt;parameter&gt;[bookingMapPortlet]:[hotelName]&lt;/parameter&gt;" + 
"             &lt;model-el&gt;#{bookingPRP.hotelName}&lt;/model-el&gt;" + 
"           &lt;/bridge:public-parameter-mapping&gt;" + 
"        &lt;/bridge:public-parameter-mappings&gt;" + 
"     &lt;/application-extension&gt;" + 
"&lt;/application&gt;</programlisting>" + 
"		<important>" + 
"			<para>" + 
"				Specifying the portlet name restricts model updates to the specified portlet only. If the portlet name is omitted and only the render parameter specified, every portlet within the web application that supports that render parameter will have its model updated." + 
"			</para>" + 
"		</important>" + 
"		<variablelist>" + 
"			<varlistentry>" + 
"				<term>[bookingMapPortlet]</term>" + 
"				<listitem>" + 
"					<para>" + 
"						The arbitrary name of the portlet, as set in <filename>portlet.xml</filename>" + 
"					</para>" + 
"				</listitem>" + 
"			</varlistentry>" + 
"			<varlistentry>" + 
"				<term>[hotelName]</term>" + 
"				<listitem>" + 
"					<para>" + 
"						The arbitrary name of the render parameter." + 
"					</para>" + 
"				</listitem>" + 
"			</varlistentry>" + 
"		</variablelist>" + 
"		<para>" + 
"			The handler specified in the <filename>portlet.xml</filename> requires a bean to process the updates to the model, as a result of the Public Render Parameter." + 
"		</para>" + 
"		<programlisting language=\"Java\"><![CDATA[public class BookingPRPHandler implements BridgePublicRenderParameterHandler {" + 
"  public void processUpdates(FacesContext context) {" + 
"    ELContext elContext = context.getELContext();" + 
"    BookingPRPBean bean = (BookingPRPBean) elContext.getELResolver().getValue(elContext, null, &quot;bookingPRP&quot;);" + 
" " + 
"    if(null != bean) {" + 
"      System.out.println(&quot;******processUpdates from BookingPRPHandler: &quot; + bean.getHotelName());" + 
"    }" + 
"  }" + 
"}]]></programlisting>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+20032-566194+%5BLatest%5D&amp;cf_build_id=20032-566194+05+Dec+2013+19%3A47+en-US+%5BLatest%5D&amp;comment=Title%3A+Application+configuration%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"	</section>" + 
"	<section id=\"Portlet_Session\" remap=\"TID_20038\">" + 
"		<title>Portlet Session</title>" + 
"		<para>" + 
"			To share data with other portlets within the same portlet application, use name/value pairs within the PortletSession." + 
"		</para>" + 
"		<programlisting language=\"Java\">" + 
"Object objSession = FacesContext.getCurrentInstance().getExternalContext().getSession(false);" + 
"  try {" + 
"    if (objSession instanceof PortletSession) {" + 
"      PortletSession portalSession = (PortletSession)objSession;" + 
"      portalSession.setAttribute(\"your parameter name\", \"parameter value\", PortletSession.APPLICATION_SCOPE);" + 
"    }" + 
"  }</programlisting>" + 
"		<para>" + 
"			In the JSP or Facelets page, the value string can be retrieved using the following code." + 
"		</para>" + 
"		<programlisting>#{httpSessionScope['your parameter name']}</programlisting>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+20038-566194+%5BLatest%5D&amp;cf_build_id=20038-566194+05+Dec+2013+19%3A47+en-US+%5BLatest%5D&amp;comment=Title%3A+Portlet+Session%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"	</section>" + 
"	<section id=\"Resource_serving\" remap=\"TID_20043\">" + 
"		<title>Resource serving</title>" + 
"		<para>" + 
"			When using resources from a JSF portlet, it is important to ensure that they are accessed in a way that allows JBoss Portlet Bridge to construct an appropriate Portal URL to the resource being requested." + 
"		</para>" + 
"		<para>" + 
"			The correct way to reference a resource is to locate it within the web application, in the <filename>/ resources</filename> directory. This placement allows the resource to be retrieved using JSF2 resource handling." + 
"		</para>" + 
"		<programlisting>#{resource['/stylesheet.css']}</programlisting>" + 
"		<important>" + 
"			<para>" + 
"				#{resource} is particularly important when using <methodname>@import</methodname> to retrieve content within CSS files." + 
"			</para>" + 
"		</important>" + 
"		<para>" + 
"			In this instance, stylesheet.css would be present in the root of the <filename>/resources</filename> directory, because it does not specify a resource library. For resources that do specify a library, these must be placed in the library sub-directory." + 
"		</para>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+20043-566199+%5BLatest%5D&amp;cf_build_id=20043-566199+05+Dec+2013+19%3A54+en-US+%5BLatest%5D&amp;comment=Title%3A+Resource+serving%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"	</section>" + 
"	<section id=\"Serving_JSF_Resources_in_a_Portlet\" remap=\"TID_20036\">" + 
"		<title>Serving JSF Resources in a Portlet</title>" + 
"		<para>" + 
"			The bridge deals with portlet served resources in one of two ways:" + 
"		</para>" + 
"		<itemizedlist>" + 
"			<listitem>" + 
"				<para>" + 
"					If the request is for a non-JSF resource, the bridge handles the request by acquiring a request dispatcher and forwarding the request to the named resource." + 
"				</para>" + 
"			</listitem>" + 
"			<listitem>" + 
"				<para>" + 
"					If the request is for a JSF resource, the bridge runs the full JSF life cycle ensuring that data is processed and the resource (markup) is rendered." + 
"				</para>" + 
"			</listitem>" + 
"		</itemizedlist>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+20036-566194+%5BLatest%5D&amp;cf_build_id=20036-566194+05+Dec+2013+19%3A47+en-US+%5BLatest%5D&amp;comment=Title%3A+Serving+JSF+Resources+in+a+Portlet%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"	</section>" + 
"	<section id=\"Expression_Language_Reference\" remap=\"TID_20031\">" + 
"		<title>Expression Language Reference</title>" + 
"		<para>" + 
"			Some examples demonstrating how to use <literal>EL</literal> and a simple bean are provided in the ResourceBean.java file of the Richfaces Portlet example." + 
"		</para>" + 
"		<para>" + 
"			Additional information about <literal>EL</literal> is located in <xref linkend=\"Using_Provided_EL_Variables\"/>" + 
"		</para>" + 
"		<programlisting language=\"Java\"><![CDATA[package org.richfaces.demo.common;" + 
"" + 
"import java.util.Collection;" + 
"import java.util.Collections;" + 
"import java.util.Map;" + 
"import java.util.Set;" + 
"" + 
"import javax.faces.bean.ManagedBean;" + 
"import javax.faces.context.ExternalContext;" + 
"import javax.faces.context.FacesContext;" + 
"import javax.portlet.MimeResponse;" + 
"import javax.portlet.ResourceURL;" + 
"" + 
"/**" + 
" * @author <a href=\"http://community.jboss.org/people/kenfinni\">Ken Finnigan</a>" + 
" */" + 
"@ManagedBean(name = \"portletRes\")" + 
"public class PortletResource implements Map<String, String> {" + 
"" + 
"    @Override" + 
"    public void clear() {" + 
"    }" + 
"" + 
"    @Override" + 
"    public boolean containsKey(Object arg0) {" + 
"        return true;" + 
"    }" + 
"" + 
"    @Override" + 
"    public boolean containsValue(Object arg0) {" + 
"        return true;" + 
"    }" + 
"" + 
"    @Override" + 
"    public Set<java.util.Map.Entry<String, String>> entrySet() {" + 
"        return Collections.emptySet();" + 
"    }" + 
"" + 
"    @Override" + 
"    public String get(Object resourceKey) {" + 
"        FacesContext context = FacesContext.getCurrentInstance();" + 
"        String resourceUrl = null;" + 
"" + 
"        if (null != resourceKey) {" + 
"            ExternalContext extCon = context.getExternalContext();" + 
"            MimeResponse response = (MimeResponse) extCon.getResponse();" + 
"            ResourceURL resUrl = response.createResourceURL();" + 
"            resUrl.setResourceID(resourceKey.toString());" + 
"            resourceUrl = resUrl.toString();" + 
"        }" + 
"        return resourceUrl;" + 
"    }" + 
"" + 
"    @Override" + 
"    public boolean isEmpty() {" + 
"        return false;" + 
"    }" + 
"" + 
"    @Override" + 
"    public Set<String> keySet() {" + 
"        return Collections.emptySet();" + 
"    }" + 
"" + 
"    @Override" + 
"    public String put(String arg0, String arg1) {" + 
"        return null;" + 
"    }" + 
"" + 
"    @Override" + 
"    public void putAll(Map<? extends String, ? extends String> arg0) {" + 
"    }" + 
"" + 
"    @Override" + 
"    public String remove(Object arg0) {" + 
"        return null;" + 
"    }" + 
"" + 
"    @Override" + 
"    public int size() {" + 
"        return 0;" + 
"    }" + 
"" + 
"    @Override" + 
"    public Collection<String> values() {" + 
"        return Collections.emptySet();" + 
"    }" + 
"" + 
"}]]></programlisting>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+20031-566194+%5BLatest%5D&amp;cf_build_id=20031-566194+05+Dec+2013+19%3A47+en-US+%5BLatest%5D&amp;comment=Title%3A+Expression+Language+Reference%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"	</section>" + 
"	<section id=\"Expression_Language_Configuration\" remap=\"TID_20017\">" + 
"		<title>Expression Language Configuration</title>" + 
"		<para>" + 
"			When you have the normal \"<filename>/images</filename>\", \"<filename>/styles</filename>\" and other resource folders in your web application, you can use the following <literal>EL</literal> expression to serve them in your JSF application." + 
"		</para>" + 
"		<programlisting language=\"Java\"><![CDATA[#{resource['/img/the-path-to-my-image.png']}]]></programlisting>" + 
"		<para>" + 
"			Copy the <literal>ResourceBean.java</literal> code described in <xref linkend=\"Expression_Language_Reference\"/>, and add an entry to the <filename>faces-config.xml</filename> for the bean." + 
"		</para>" + 
"		<programlisting language=\"XML\"><![CDATA[<managed-bean>" + 
"<managed-bean-name>resource</managed-bean-name>" + 
"<managed-bean-class>org.richfaces.demo.common.ResourceBean</managed-bean-class>" + 
"<managed-bean-scope>application</managed-bean-scope>" + 
"</managed-bean>]]></programlisting>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+20017-566191+%5BLatest%5D&amp;cf_build_id=20017-566191+05+Dec+2013+19%3A40+en-US+%5BLatest%5D&amp;comment=Title%3A+Expression+Language+Configuration%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"	</section>" + 
"	<section id=\"sect-Developing_Portlets_with_the_Bridge\">" + 
"		<title>Developing Portlets with the Bridge</title>" + 
"		<section id=\"Implementing_Portlet_Bridge\" remap=\"TID_20015\">" + 
"			<title>Implementing Portlet Bridge</title>" + 
"			<remark>" + 
"				This entire section incorporates the content located at https://docs.jboss.org/author/display/PBR/Installing+Portlet+Bridge" + 
"			</remark>" + 
"			<para>" + 
"				Portlet Bridge supports JSF2 and RichFaces 4 portlets. There are subtle differences in the way these portlets require Portlet Bridge to be implemented." + 
"			</para>" + 
"			<para>" + 
"				JSF2 and RichFaces 4 portlets must be JSF2 portlets for this version of the Portlet Bridge to function as expected. There are no other specific requirements." + 
"			</para>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+20015-566191+%5BLatest%5D&amp;cf_build_id=20015-566191+05+Dec+2013+19%3A40+en-US+%5BLatest%5D&amp;comment=Title%3A+Implementing+Portlet+Bridge%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"		<section id=\"Declaring_Artifact_Dependencies\" remap=\"TID_20016\">" + 
"			<title>Declaring Artifact Dependencies</title>" + 
"			<para>" + 
"				A JSF2 portlet can inherit the correct dependencies by configuring the Maven repository. This will include all dependencies for all Portlet Bridge JSF2 scenarios." + 
"			</para>" + 
"			<procedure>" + 
"				<title>Artifact Dependencies</title>" + 
"				<step>" + 
"					<para>" + 
"						Add the following <filename>pom.xml</filename> dependencies to inherit the correct JSF2 artifacts." + 
"					</para>" + 
"					<programlisting language=\"XML\">&lt;dependency&gt;" + 
"    &lt;groupId&gt;org.jboss.portletbridge&lt;/groupId&gt;" + 
"    &lt;artifactId&gt;portletbridge-api&lt;/artifactId&gt;" + 
"    &lt;version&gt;3.1.2.Final&lt;/version&gt;" + 
"&lt;/dependency&gt;" + 
"&lt;dependency&gt;" + 
"    &lt;groupId&gt;org.jboss.portletbridge&lt;/groupId&gt;" + 
"    &lt;artifactId&gt;portletbridge-impl&lt;/artifactId&gt;" + 
"    &lt;version&gt;3.1.2.Final&lt;/version&gt;" + 
"    &lt;scope&gt;runtime&lt;/scope&gt;" + 
"&lt;/dependency&gt;</programlisting>" + 
"				</step>" + 
"				<step>" + 
"					<para>" + 
"						For RichFaces 4 portlets, add the following additional dependency to inherit the additional RichFaces dependencies." + 
"					</para>" + 
"					<programlisting language=\"XML\">&lt;dependency&gt;" + 
"    &lt;groupId&gt;org.jboss.portletbridge&lt;/groupId&gt;" + 
"    &lt;artifactId&gt;portletbridge-extension-richfaces&lt;/artifactId&gt;" + 
"    &lt;version&gt;3.1.2.Final&lt;/version&gt;" + 
"    &lt;scope&gt;runtime&lt;/scope&gt;" + 
"&lt;/dependency&gt;</programlisting>" + 
"				</step>" + 
"			</procedure>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+20016-566191+%5BLatest%5D&amp;cf_build_id=20016-566191+05+Dec+2013+19%3A40+en-US+%5BLatest%5D&amp;comment=Title%3A+Declaring+Artifact+Dependencies%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"		<section id=\"Declaring_Depchain_Dependencies\" remap=\"TID_20028\">" + 
"			<title>Declaring Depchain Dependencies</title>" + 
"			<para>" + 
"				It is possible to reduce the <filename>pom.xml</filename> configuration to a single dependency, using the Portlet Bridge Depchain <filename>pom.xml</filename> configuration." + 
"			</para>" + 
"			<procedure>" + 
"				<title>JSF2 Depchain Dependencies</title>" + 
"				<step>" + 
"					<para>" + 
"						Add the following dependencies to inherit the correct artifacts using the <filename>pom.xml</filename> Depchain." + 
"					</para>" + 
"					<programlisting language=\"XML\">&lt;dependency&gt;" + 
"    &lt;groupId&gt;org.jboss.portletbridge&lt;/groupId&gt;" + 
"    &lt;artifactId&gt;jsf2-depchain&lt;/artifactId&gt;" + 
"    &lt;version&gt;3.1.2.Final&lt;/version&gt;" + 
"    &lt;type&gt;pom&lt;/type&gt;" + 
"&lt;/dependency&gt;</programlisting>" + 
"				</step>" + 
"				<step>" + 
"					<para>" + 
"						For RichFaces 4 portlets, add the following additional dependency to inherit the correct artifacts using the <filename>pom.xml</filename> Depchain." + 
"					</para>" + 
"					<programlisting language=\"XML\">&lt;dependency&gt;" + 
"    &lt;groupId&gt;org.jboss.portletbridge&lt;/groupId&gt;" + 
"    &lt;artifactId&gt;jsf2-depchain&lt;/artifactId&gt;" + 
"    &lt;version&gt;3.1.2.Final&lt;/version&gt;" + 
"    &lt;type&gt;pom&lt;/type&gt;" + 
"&lt;/dependency&gt;" + 
"&lt;dependency&gt;" + 
"    &lt;groupId&gt;org.jboss.portletbridge&lt;/groupId&gt;" + 
"    &lt;artifactId&gt;richfaces4-depchain&lt;/artifactId&gt;" + 
"    &lt;version&gt;3.1.2.Final&lt;/version&gt;" + 
"    &lt;type&gt;pom&lt;/type&gt;" + 
"&lt;/dependency&gt;</programlisting>" + 
"				</step>" + 
"			</procedure>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+20028-566194+%5BLatest%5D&amp;cf_build_id=20028-566194+05+Dec+2013+19%3A47+en-US+%5BLatest%5D&amp;comment=Title%3A+Declaring+Depchain+Dependencies%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"		<section id=\"Deploying_Portlet_Bridge_Portlets\" remap=\"TID_20026\">" + 
"			<title>Deploying Portlet Bridge Portlets</title>" + 
"			<para>" + 
"				Red Hat JBoss Portal injects Portlet Bridge functionality into all JSF2 portlets by default, therefore portlets developed for the portal do not need to include the Portlet Bridge as part of the application." + 
"			</para>" + 
"			<para>" + 
"				If the Portlet Bridge API is included in a JSF2 or RichFaces 4 portlet, the provided scope must be correctly declared." + 
"			</para>" + 
"			<procedure>" + 
"				<title>Setting the Provided Scope for JSF2 and RichFaces Portlets that use Portlet Bridge API</title>" + 
"				<step>" + 
"					<para>" + 
"						Add the following <filename>pom.xml</filename> dependencies to declare the JSF2 provided scope." + 
"					</para>" + 
"					<programlisting language=\"XML\">&lt;dependency&gt;" + 
"    &lt;groupId&gt;org.jboss.portletbridge&lt;/groupId&gt;" + 
"    &lt;artifactId&gt;portletbridge-api&lt;/artifactId&gt;" + 
"    &lt;version&gt;3.1.2.Final&lt;/version&gt;" + 
"    &lt;scope&gt;provided&lt;/scope&gt;" + 
"&lt;/dependency&gt;</programlisting>" + 
"				</step>" + 
"				<step>" + 
"					<para>" + 
"						For RichFaces 4 portlets, add the following additional dependency to declare the RichFaces 4 runtime scope." + 
"					</para>" + 
"					<note>" + 
"						<para>" + 
"							The RichFaces 4 extension is not included in the portal by default." + 
"						</para>" + 
"					</note>" + 
"					<programlisting language=\"XML\">&lt;dependency&gt;" + 
"    &lt;groupId&gt;org.jboss.portletbridge&lt;/groupId&gt;" + 
"    &lt;artifactId&gt;portletbridge-extension-richfaces&lt;/artifactId&gt;" + 
"    &lt;version&gt;portletbridge-extension-richfaces-[VERSION]&lt;/version&gt;" + 
"    &lt;scope&gt;runtime&lt;/scope&gt;" + 
"&lt;/dependency&gt;</programlisting>" + 
"					<para>" + 
"						Where <replaceable>[VERSION]</replaceable> is the <classname>portletbridge-extension-richfaces</classname> version in <filename>JPP_HOME/modules/org/jboss/portletbridge/api/main</filename>" + 
"					</para>" + 
"				</step>" + 
"			</procedure>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+20026-566194+%5BLatest%5D&amp;cf_build_id=20026-566194+05+Dec+2013+19%3A47+en-US+%5BLatest%5D&amp;comment=Title%3A+Deploying+Portlet+Bridge+Portlets%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"		<section id=\"Disable_Automatic_Portlet_Bridge_Injection\" remap=\"TID_20024\">" + 
"			<title>Disable Automatic Portlet Bridge Injection</title>" + 
"			<para>" + 
"				In some cases, it is appropriate to prevent the portal from injecting Portlet Bridge into the application. For example, if a different version of Portlet Bridge is required for the application." + 
"			</para>" + 
"			<procedure>" + 
"				<title>Disabling automatic Portlet Bridge injection</title>" + 
"				<step>" + 
"					<para>" + 
"						Add the following <filename>pom.xml</filename> dependency to prevent injecting the packaged Portlet Bridge implementation into a portlet application." + 
"					</para>" + 
"					<note>" + 
"						<para>" + 
"							If a portlet application specifies either WAR_BUNDLES_JSF or JSF_CONFIG_NAME context parameters in the <filename>pom.xml</filename>, Portlet Bridge will not be automatically injected." + 
"						</para>" + 
"					</note>" + 
"					<programlisting language=\"XML\">" + 
"&lt;context-param&gt;" + 
"    &lt;param-name&gt;org.gatein.portletbridge.WAR_BUNDLES_PORTLETBRIDGE&lt;/param-name&gt;" + 
"    &lt;param-value&gt;true&lt;/param-value&gt;" + 
"&lt;/context-param&gt;</programlisting>" + 
"				</step>" + 
"			</procedure>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+20024-566194+%5BLatest%5D&amp;cf_build_id=20024-566194+05+Dec+2013+19%3A47+en-US+%5BLatest%5D&amp;comment=Title%3A+Disable+Automatic+Portlet+Bridge+Injection%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"		<section id=\"Supported_Portlet_Tags\" remap=\"TID_20025\">" + 
"			<title>Supported Portlet Tags</title>" + 
"			<para>" + 
"				Portlet Bridge supports the following tags from section PLT.26 of the Portlet 2.0 Spec (JSR 286):" + 
"			</para>" + 
"			<itemizedlist>" + 
"				<listitem>" + 
"					<para>" + 
"						actionURL" + 
"					</para>" + 
"				</listitem>" + 
"				<listitem>" + 
"					<para>" + 
"						renderURL" + 
"					</para>" + 
"				</listitem>" + 
"				<listitem>" + 
"					<para>" + 
"						resourceURL" + 
"					</para>" + 
"				</listitem>" + 
"				<listitem>" + 
"					<para>" + 
"						namespace" + 
"					</para>" + 
"				</listitem>" + 
"				<listitem>" + 
"					<para>" + 
"						param" + 
"					</para>" + 
"				</listitem>" + 
"				<listitem>" + 
"					<para>" + 
"						property" + 
"					</para>" + 
"				</listitem>" + 
"			</itemizedlist>" + 
"			<para>" + 
"				When using the tag library, the following namespace must be added to the facelet page of the application." + 
"			</para>" + 
"			<programlisting>xmlns:pbr=\"http://jboss.org/portletbridge\"</programlisting>" + 
"			<example>" + 
"				<title>renderURL example</title>" + 
"				<para>" + 
"					Generate a Portlet Render URL that enables switching between Portlet modes." + 
"				</para>" + 
"				<programlisting language=\"XML\">&lt;pbr:renderURL var=\"renderUrl\" portletMode=\"edit\"&gt;" + 
"&lt;/pbr:renderURL&gt;" + 
"&lt;h:outputLink value=\"#{renderUrl}\"&gt;Edit Mode&lt;/h:outputLink&gt;</programlisting>" + 
"			</example>" + 
"			<example>" + 
"				<title>namespace example</title>" + 
"				<para>" + 
"					This portlet tag is particularly useful for prefixing JavaScript functions within a given portlet. This ensures that the JavaScript function name does not clash with a name from another portlet, or from the same portlet displayed on the same page multiple times." + 
"				</para>" + 
"				<para>" + 
"					An example for defining a JavaScript method is:" + 
"				</para>" + 
"				<programlisting language=\"XML\">&lt;script type='text/javascript'&gt;" + 
"  function &lt;pbr:namespace /&gt;DoSomething() {" + 
"  }" + 
"&lt;/script&gt;</programlisting>" + 
"			</example>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+20025-566194+%5BLatest%5D&amp;cf_build_id=20025-566194+05+Dec+2013+19%3A47+en-US+%5BLatest%5D&amp;comment=Title%3A+Supported+Portlet+Tags%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"		<section id=\"Excluding_Attributes_from_the_Bridge_Request_Scope\" remap=\"TID_20010\">" + 
"			<title>Excluding Attributes from the Bridge Request Scope</title>" + 
"			<para>" + 
"				When your application uses request attributes on a per request basis and you do not need that particular attribute to be managed in the extended bridge request scope, you must use the following configuration in your <filename>faces-config.xml</filename>." + 
"			</para>" + 
"			<para>" + 
"				In the code sample below, any attribute namespaced as <literal>foo.bar</literal>, or any attribute beginning with <literal>foo.baz.(wild-card)</literal> will be excluded from the bridge request scope and only be used for that application's request." + 
"			</para>" + 
"			<programlisting language=\"XML\" role=\"XML\"><![CDATA[[<application>" + 
"	<application-extension>" + 
"		<bridge:excluded-attributes>" + 
"			<bridge:excluded-attribute>foo.bar</bridge:excluded-attribute>" + 
"				<bridge:excluded-attribute>foo.baz.*</bridge:excluded-attribute>" + 
"			</bridge:excluded-attributes>" + 
"	</application-extension>" + 
"</application>]]></programlisting>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+20010-566191+%5BLatest%5D&amp;cf_build_id=20010-566191+05+Dec+2013+19%3A40+en-US+%5BLatest%5D&amp;comment=Title%3A+Excluding+Attributes+from+the+Bridge+Request+Scope%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"		<section id=\"Prevent_Resources_Being_Added_to_Portal_Page_Head\" remap=\"TID_20011\">" + 
"			<title>Prevent Resources Being Added to Portal Page Head</title>" + 
"			<remark>" + 
"				Taken from https://docs.jboss.org/author/display/PBR/Disable+Adding+Resources+to+Portal+Page+Head" + 
"			</remark>" + 
"			<para>" + 
"				Portlet Bridge will add any JSF Resources for the portlet into the &lt;head&gt; section of the portal page the portlet is on, providing the portlet container supports marking up the head of a page." + 
"			</para>" + 
"			<para>" + 
"				To prevent Portlet Bridge from adding resources into the &lt;head&gt; section of the portal page, override the default behavior by declaring the following directive in the portlet's <filename> web.xml</filename> file." + 
"			</para>" + 
"			<programlisting language=\"XML\">&lt;context-param&gt;" + 
"  &lt;param-name&gt;org.jboss.portletbridge.markupHead.enabled&lt;/param-name&gt;" + 
"  &lt;param-value&gt;false&lt;/param-value&gt;" + 
"&lt;/context-param&gt;</programlisting>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+20011-566191+%5BLatest%5D&amp;cf_build_id=20011-566191+05+Dec+2013+19%3A40+en-US+%5BLatest%5D&amp;comment=Title%3A+Prevent+Resources+Being+Added+to+Portal+Page+Head%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"		<section id=\"JSF_Facelet_View\" remap=\"TID_20009\">" + 
"			<title>JSF Facelet View</title>" + 
"			<para>" + 
"				When creating a JSF Facelet view document, it is common to see content wrapped with the following code." + 
"			</para>" + 
"			<programlisting language=\"HTML\">&lt;!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"&gt;" + 
"&lt;html xmlns=\"http://www.w3.org/1999/xhtml\" xmlns:h=\"http://java.sun.com/jsf/html\" xmlns:f=\"http://java.sun.com/jsf/core\"" + 
"    xmlns:ui=\"http://java.sun.com/jsf/facelets\" &gt;" + 
"&lt;!-- Unnecessary content removed for clarity --&gt;" + 
"&lt;/html&gt;</programlisting>" + 
"			<para>" + 
"				Because a single portlet only reflects a potentially small portion of the HTML markup for a page, a JSF portlet returning the above markup for each portlet can be distracting, and potentially problematic." + 
"			</para>" + 
"			<para>" + 
"				The recommended way to wrap the content of a JSF Facelet view document for a portlet is to use the &lt;f:view&gt; element. Using &lt;f:view&gt; results in the relevant portlet markup being returned to the page as required." + 
"			</para>" + 
"			<programlisting language=\"HTML\">&lt;f:view xmlns=\"http://www.w3.org/1999/xhtml\" xmlns:h=\"http://java.sun.com/jsf/html\" xmlns:f=\"http://java.sun.com/jsf/core\"" + 
"    xmlns:ui=\"http://java.sun.com/jsf/facelets\" &gt;" + 
"&lt;!-- Unnecessary content removed for clarity --&gt;" + 
"&lt;/f:view&gt;</programlisting>" + 
"			<note>" + 
"				<para>" + 
"					While not specifically relevant to portlet, it is important to include &lt;h:head&gt; and &lt;h:body&gt; elements to allow JSF to process the facelet correctly." + 
"				</para>" + 
"			</note>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+20009-566191+%5BLatest%5D&amp;cf_build_id=20009-566191+05+Dec+2013+19%3A40+en-US+%5BLatest%5D&amp;comment=Title%3A+JSF+Facelet+View%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"		<section id=\"Error_Handling1\" remap=\"TID_20008\">" + 
"			<title>Error Handling</title>" + 
"			<para>" + 
"				To display error pages for specific exceptions in a JSF portlet, the following code is required in the <filename>web.xml</filename> file." + 
"			</para>" + 
"			<programlisting language=\"XML\">&lt;error-page&gt;" + 
"  &lt;exception-type&gt;javax.servlet.ServletException&lt;/exception-type&gt;" + 
"  &lt;location&gt;/faces/error.xhtml&lt;/location&gt;" + 
"&lt;/error-page&gt;" + 
"&lt;error-page&gt;" + 
"  &lt;exception-type&gt;javax.faces.application.ViewExpiredException&lt;/exception-type&gt;" + 
"  &lt;location&gt;/faces/error.xhtml&lt;/location&gt;" + 
"&lt;/error-page&gt;</programlisting>" + 
"			<para>" + 
"				The above error page definitions are appropriate for a JSF portlet that has a FacesServlet mapping such as /faces/." + 
"			</para>" + 
"			<para>" + 
"				If the FacesServlet mapping was **.jsf, the location would be <filename>/error</filename>, <filename>/error.jsf</filename> or <filename>/error.xhtml</filename>." + 
"			</para>" + 
"			<para>" + 
"				There is no requirement when using FacesServlet suffix mapping to append an extension, the name of the view is all that is required for the page to be found" + 
"			</para>" + 
"			<note>" + 
"				<para>" + 
"					Remember to add a link from any error page to the normal flow of the JSF application, otherwise the same error page will be constantly displayed." + 
"				</para>" + 
"			</note>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+20008-566191+%5BLatest%5D&amp;cf_build_id=20008-566191+05+Dec+2013+19%3A40+en-US+%5BLatest%5D&amp;comment=Title%3A+Error+Handling%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"		<section id=\"Switching_Portlet_Modes\" remap=\"TID_20048\">" + 
"			<title>Switching Portlet Modes</title>" + 
"			<para>" + 
"				A <literal>PortletMode</literal> represents a distinct render path within an application. There are three standard modes: <emphasis>view</emphasis>, <emphasis>edit</emphasis>, and <emphasis>help</emphasis>." + 
"			</para>" + 
"			<para>" + 
"				The bridge's <literal>ExternalContext.encodeActionURL</literal> recognizes the query string parameter <literal>javax.portlet.faces.PortletMode</literal> and uses this parameter's value to set the portlet mode on the underlying portlet <literal>actionURL</literal> or response. Once processed it then removes this parameter from the query string." + 
"			</para>" + 
"			<example>" + 
"				<title>/edit.xhtml navigation rule</title>" + 
"				<para>" + 
"					This navigation rule causes one to render the <filename>/edit.xhtml</filename> viewId in the portlet edit mode." + 
"				</para>" + 
"				<programlisting language=\"XML\"><![CDATA[<navigation-rule>" + 
"  <from-view-id>/register.xhtml</from-view-id>" + 
"  <navigation-case>" + 
"    <from-outcome>edit</from-outcome>" + 
"    <to-view-id>/edit.xhtml?javax.portlet.faces.PortletMode=edit</to-view-id>" + 
"  </navigation-case>" + 
"</navigation-rule>]]></programlisting>" + 
"			</example>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+20048-566199+%5BLatest%5D&amp;cf_build_id=20048-566199+05+Dec+2013+19%3A54+en-US+%5BLatest%5D&amp;comment=Title%3A+Switching+Portlet+Modes%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"		<section id=\"Navigating_to_a_modes_last_viewId\" remap=\"TID_20023\">" + 
"			<title>Navigating to a mode's last viewId</title>" + 
"			<para>" + 
"				By default a mode change will start in the mode's default view without any (prior) existing state. One common portlet pattern when returning to a mode left after entering another mode (e.g.. view -&gt; edit -&gt; view) is to return to the last view (and state) of this original mode." + 
"			</para>" + 
"			<para>" + 
"				The bridge will explicitly encode the necessary information so that when returning to a prior mode it can target the appropriate view and restore the appropriate state." + 
"			</para>" + 
"			<para>" + 
"				The session attributes maintained by the bridge are intended to be used by developers to navigate back from a mode to the last location and state of a prior mode. As such, a developer must describe a dynamic navigation: \"From view <parameter>X</parameter> return to the last view of mode <parameter>Y</parameter>\"." + 
"			</para>" + 
"			<para>" + 
"				This is most easily expressed via an <literal>EL</literal> expression. For example:" + 
"			</para>" + 
"			<example>" + 
"				<title>/register.xhtml viewId navigation rule</title>" + 
"				<para>" + 
"					<remark>" + 
"						BZ#856417 - added from \"Portlet Mode's last viewId\" Confluence section" + 
"					</remark>This navigation rule causes one to render the <filename>/edit.xhtml</filename> viewId in the portlet edit mode." + 
"				</para>" + 
"				<programlisting language=\"XML\" role=\"XML\"><![CDATA[<navigation-rule>" + 
"  <from-view-id>/edit.xhtml*</from-view-id>" + 
"  <navigation-case>" + 
"    <from-outcome>view</from-outcome>" + 
"    <to-view-id>#{sessionScope['javax.portlet.faces.viewIdHistory.view']}</to-view-id>" + 
"  </navigation-case>" + 
"</navigation-rule>]]></programlisting>" + 
"			</example>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+20023-566194+%5BLatest%5D&amp;cf_build_id=20023-566194+05+Dec+2013+19%3A47+en-US+%5BLatest%5D&amp;comment=Title%3A+Navigating+to+a+mode%27s+last+viewId%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"		<section id=\"Using_Wildcards_to_Identify_the_Rule_Target\" remap=\"TID_20047\">" + 
"			<title>Using Wildcards to Identify the Rule Target</title>" + 
"			<para>" + 
"				When using values from session scoped attributes, or viewIds which may contain query string parameters, it may be necessary to use the wild-card syntax when identifying the rule target." + 
"			</para>" + 
"			<para>" + 
"				In <xref linkend=\"Navigating_to_a_modes_last_viewId\"/> the &lt;to-view-id&gt; expression returns a <parameter>viewId</parameter> of the form" + 
"			</para>" + 
"			<programlisting language=\"XML\">/viewId?javax.portlet.faces.PortletMode=view&amp;....</programlisting>" + 
"			<para>" + 
"				Without wild-carding, when a subsequent navigation occurs from this new view, the navigation rules would not resolve because there would not be an exact match." + 
"			</para>" + 
"			<para>" + 
"				Similarly, the <literal>edit.jspx</literal>&lt;from-view-id&gt; is wild-carded because there are navigation rules that target it that use a query string:" + 
"			</para>" + 
"			<programlisting language=\"XML\">&lt;to-view-id&gt; /edit.jspx?javax.portlet.faces.PortletMode=edit &lt;/to-view-id&gt;</programlisting>" + 
"			<para>" + 
"				Developers are encouraged to use this wild card method to ensure they execute properly in the broadest set of bridge implementations." + 
"			</para>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+20047-566199+%5BLatest%5D&amp;cf_build_id=20047-566199+05+Dec+2013+19%3A54+en-US+%5BLatest%5D&amp;comment=Title%3A+Using+Wildcards+to+Identify+the+Rule+Target%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"		<section id=\"Clearing_the_View_History_when_Changing_Portlet_Modes\" remap=\"TID_20046\">" + 
"			<title>Clearing the View History when Changing Portlet Modes</title>" + 
"			<para>" + 
"				By default the bridge remembers the view history when you switch to a different portlet mode (like \"Help\" or \"Edit\"). You can use the following parameter in your <filename>portlet.xml</filename> to use the default viewId each time you switch modes." + 
"			</para>" + 
"			<programlisting language=\"XML\"><![CDATA[<init-param>" + 
"	<name>javax.portlet.faces.extension.resetModeViewId</name>" + 
"	<value>true</value>" + 
"</init-param>]]></programlisting>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+20046-566199+%5BLatest%5D&amp;cf_build_id=20046-566199+05+Dec+2013+19%3A54+en-US+%5BLatest%5D&amp;comment=Title%3A+Clearing+the+View+History+when+Changing+Portlet+Modes%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"		<section id=\"Communication_Between_Portlets\" remap=\"TID_20045\">" + 
"			<title>Communication Between Portlets</title>" + 
"			<para>" + 
"				There are four different ways to send messages, events, and parameters between portlets which are contained in different <literal>ears/wars</literal> or contained in the same <literal>war</literal>." + 
"			</para>" + 
"			<para>" + 
"				Having two portlets in the same <literal>war</literal> or having them separated does not affect the Portlet Container because each portlet has a different <parameter>HttpSession</parameter>." + 
"			</para>" + 
"			<para>" + 
"				The recommended way to share a parameter or event payload between two or more portlets with the Portlet 2.0 specification are the <xref linkend=\"Public_Render_Parameters\"/> and <xref linkend=\"Sending_and_Receiving_Events\"/> mechanisms." + 
"			</para>" + 
"			<para>" + 
"				This allows you to decouple your application from surgically managing objects in the <parameter>PortletSession.APPLICATION_SCOPE.</parameter>" + 
"			</para>" + 
"			<para>" + 
"				However, if these do not meet your use case or you have a different strategy, you can use one of the following methods." + 
"			</para>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+20045-566199+%5BLatest%5D&amp;cf_build_id=20045-566199+05+Dec+2013+19%3A54+en-US+%5BLatest%5D&amp;comment=Title%3A+Communication+Between+Portlets%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"		<section id=\"Storing_Components_in_PortletSession.APPLICATION_SCOPE\" remap=\"TID_20044\">" + 
"			<title>Storing Components in PortletSession.APPLICATION_SCOPE</title>" + 
"			<para>" + 
"				Sometimes it is beneficial to store your <application>Seam</application> components in the portlet <parameter>APPLICATION_SCOPE</parameter>." + 
"			</para>" + 
"			<para>" + 
"				By default, these objects are stored in the <parameter>PORTLET_SCOPE</parameter> but with the annotation below, this class can be pulled out of the <literal>PortletSession</literal> and its values used in other portlets across different <application>Seam</application> applications." + 
"			</para>" + 
"			<programlisting language=\"Java\" role=\"JAVA\">@PortletScope(PortletScope.ScopeType.APPLICATION_SCOPE)" + 
"</programlisting>" + 
"			<para>" + 
"				Then you would pull the stateful object from the session:" + 
"			</para>" + 
"			<programlisting language=\"Java\"><![CDATA[YourSessionClass yourSessionClass = (YourSessionClass)getRenderRequest().getAttribute(\"javax.portlet.p./default/seamproject/seamprojectPortletWindow?textHolder\");]]></programlisting>" + 
"			<para>" + 
"				This method is demonstrated in this video: <ulink url=\"http://www.vimeo.com/4521877\">Lesson 2: Portlet 1.0 Advanced Seam and RichFaces</ulink>" + 
"			</para>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+20044-566199+%5BLatest%5D&amp;cf_build_id=20044-566199+05+Dec+2013+19%3A54+en-US+%5BLatest%5D&amp;comment=Title%3A+Storing+Components+in+PortletSession.APPLICATION_SCOPE%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"		<section id=\"Using_the_PortletSession\" remap=\"TID_20018\">" + 
"			<title>Using the PortletSession</title>" + 
"			<para>" + 
"				If you only need to access the <literal>PortletSession</literal> to share a parameter or value across multiple portlets, you can use the following:" + 
"			</para>" + 
"			<programlisting language=\"Java\"><![CDATA[Object objSession = FacesContext.getCurrentInstance().getExternalContext().getSession(false);" + 
"try" + 
"{" + 
"	if (objSession instanceof PortletSession)" + 
"	{" + 
"		PortletSession portalSession = (PortletSession)objSession;" + 
"		portalSession.setAttribute(\"your parameter name\",\"parameter value\",PortletSession.APPLICATION_SCOPE);" + 
"		...]]></programlisting>" + 
"			<para>" + 
"				Then, in your JSP or Facelets page, you can use:" + 
"			</para>" + 
"			<programlisting language=\"XML\">#{httpSessionScope['your parameter name']}</programlisting>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+20018-566191+%5BLatest%5D&amp;cf_build_id=20018-566191+05+Dec+2013+19%3A40+en-US+%5BLatest%5D&amp;comment=Title%3A+Using+the+PortletSession%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"		<section id=\"Linking_to_a_Facelets_page_within_the_Same_Portlet\" remap=\"TID_20019\">" + 
"			<title>Linking to a Facelets page within the Same Portlet</title>" + 
"			<para>" + 
"				To link any JSF/Facelets page within a portlet web application, use the following code." + 
"			</para>" + 
"			<programlisting language=\"XML\"><![CDATA[<h:outputLink value=\"#{facesContext.externalContext.requestContextPath}/home.xhtml\">" + 
"	<f:param name=\"javax.portlet.faces.ViewLink\" value=\"true\"/>" + 
"	navigate to the test page" + 
"</h:outputLink>]]></programlisting>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+20019-566191+%5BLatest%5D&amp;cf_build_id=20019-566191+05+Dec+2013+19%3A40+en-US+%5BLatest%5D&amp;comment=Title%3A+Linking+to+a+Facelets+page+within+the+Same+Portlet%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"		<section id=\"Redirecting_to_an_External_Page_or_Resource\" remap=\"TID_20021\">" + 
"			<title>Redirecting to an External Page or Resource</title>" + 
"			<para>" + 
"				To link to a non JSF view, <emphasis>jboss.org</emphasis> for example, you can use the following code." + 
"			</para>" + 
"			<programlisting language=\"XML\"><![CDATA[<h:commandLink actionListener=\"#{yourBean.yourListenr}\">" + 
"	<f:param name=\"javax.portlet.faces.DirectLink\" value=\"true\"/>" + 
"	navigate to the test page" + 
"</h:commandLink>]]></programlisting>" + 
"			<para>" + 
"				In the backing bean, a <parameter>redirect()</parameter> must be called." + 
"			</para>" + 
"			<programlisting language=\"Java\">public class YourBean {" + 
"  public void yourListener() {" + 
"    FacesContext.getCurrentInstance().getExternalContext().redirect(\"http://www.jboss.org\");" + 
"  }" + 
"}</programlisting>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+20021-566191+%5BLatest%5D&amp;cf_build_id=20021-566191+05+Dec+2013+19%3A40+en-US+%5BLatest%5D&amp;comment=Title%3A+Redirecting+to+an+External+Page+or+Resource%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"		<section id=\"Using_Provided_EL_Variables\" remap=\"TID_20020\">" + 
"			<title>Using Provided EL Variables</title>" + 
"			<para>" + 
"				All <literal>EL</literal> variables found in the JSR-329 (Portlet 2.0) specification are available in the JBoss Portlet Bridge." + 
"			</para>" + 
"			<table frame=\"all\" pgwide=\"1\">" + 
"				<title/>" + 
"				<tgroup cols=\"2\">" + 
"					<colspec colname=\"c1\"/>" + 
"					<colspec colname=\"c2\"/>" + 
"					<tbody>" + 
"						<row>" + 
"							<entry>" + 
"								portalConfig" + 
"							</entry>" + 
"							<entry>" + 
"								<para>" + 
"									Object of type javax.portlet.PortletConfig" + 
"								</para>" + 
"							</entry>" + 
"						</row>" + 
"						<row>" + 
"							<entry>" + 
"								actionRequest" + 
"							</entry>" + 
"							<entry>" + 
"								<para>" + 
"									Object of type" + 
"								</para>" + 
"								<para>" + 
"									javax.portlet.ActionRequest" + 
"								</para>" + 
"								<para>" + 
"									(only accessible when processing an ActionRequest)" + 
"								</para>" + 
"							</entry>" + 
"						</row>" + 
"						<row>" + 
"							<entry>" + 
"								actionResponse" + 
"							</entry>" + 
"							<entry>" + 
"								<para>" + 
"									Object of type" + 
"								</para>" + 
"								<para>" + 
"									javax.portlet.ActionResponse" + 
"								</para>" + 
"								<para>" + 
"									(only accessible when processing an ActionResponse)" + 
"								</para>" + 
"							</entry>" + 
"						</row>" + 
"						<row>" + 
"							<entry>" + 
"								eventRequest" + 
"							</entry>" + 
"							<entry>" + 
"								<para>" + 
"									Object of type" + 
"								</para>" + 
"								<para>" + 
"									javax.portlet.EventRequest" + 
"								</para>" + 
"								<para>" + 
"									(only accessible when processing an EventRequest)" + 
"								</para>" + 
"							</entry>" + 
"						</row>" + 
"						<row>" + 
"							<entry>" + 
"								eventResponse" + 
"							</entry>" + 
"							<entry>" + 
"								<para>" + 
"									Object of type" + 
"								</para>" + 
"								<para>" + 
"									javax.portlet.EventResponse" + 
"								</para>" + 
"								<para>" + 
"									(only accessible when processing an EventRequest)" + 
"								</para>" + 
"							</entry>" + 
"						</row>" + 
"						<row>" + 
"							<entry>" + 
"								renderRequest" + 
"							</entry>" + 
"							<entry>" + 
"								<para>" + 
"									Object of type" + 
"								</para>" + 
"								<para>" + 
"									javax.portlet.RenderRequest" + 
"								</para>" + 
"								<para>" + 
"									(only accessible when processing an RenderResponse)" + 
"								</para>" + 
"							</entry>" + 
"						</row>" + 
"						<row>" + 
"							<entry>" + 
"								renderResponse" + 
"							</entry>" + 
"							<entry>" + 
"								<para>" + 
"									Object of type" + 
"								</para>" + 
"								<para>" + 
"									javax.portlet.RenderResponse" + 
"								</para>" + 
"								<para>" + 
"									(only accessible when processing an RenderResponse)" + 
"								</para>" + 
"							</entry>" + 
"						</row>" + 
"						<row>" + 
"							<entry>" + 
"								resourceRequest" + 
"							</entry>" + 
"							<entry>" + 
"								<para>" + 
"									Object of type" + 
"								</para>" + 
"								<para>" + 
"									javax.portlet.ResourceRequest" + 
"								</para>" + 
"								<para>" + 
"									(only accessible when processing an ResourceRequest)" + 
"								</para>" + 
"							</entry>" + 
"						</row>" + 
"						<row>" + 
"							<entry>" + 
"								resourceResponse" + 
"							</entry>" + 
"							<entry>" + 
"								<para>" + 
"									Object of type" + 
"								</para>" + 
"								<para>" + 
"									javax.portlet.ResourceResponse" + 
"								</para>" + 
"								<para>" + 
"									(only accessible when processing an ResourceResponse)" + 
"								</para>" + 
"							</entry>" + 
"						</row>" + 
"						<row>" + 
"							<entry>" + 
"								portletSession" + 
"							</entry>" + 
"							<entry>" + 
"								<para>" + 
"									Current PortletSession object" + 
"								</para>" + 
"							</entry>" + 
"						</row>" + 
"						<row>" + 
"							<entry>" + 
"								portletSessionScope" + 
"							</entry>" + 
"							<entry>" + 
"								<para>" + 
"									Map of PortletSession attributes in PORTLET_SCOPE. JSP Expression returns immutable Map, but Faces Expression returns mutable Map." + 
"								</para>" + 
"							</entry>" + 
"						</row>" + 
"						<row>" + 
"							<entry>" + 
"								httpSessionScope" + 
"							</entry>" + 
"							<entry>" + 
"								<para>" + 
"									Mutable Map of PortletSession attributes in APPLICATION_SCOPE" + 
"								</para>" + 
"							</entry>" + 
"						</row>" + 
"						<row>" + 
"							<entry>" + 
"								portletPreferences" + 
"							</entry>" + 
"							<entry>" + 
"								<para>" + 
"									Current PortletPreferences object" + 
"								</para>" + 
"							</entry>" + 
"						</row>" + 
"						<row>" + 
"							<entry>" + 
"								portletPreferencesValues" + 
"							</entry>" + 
"							<entry>" + 
"								<para>" + 
"									Immutable Map containing entries equivalent to PortletPreferences.getMap()" + 
"								</para>" + 
"							</entry>" + 
"						</row>" + 
"						<row>" + 
"							<entry>" + 
"								mutablePortletPreferencesValues" + 
"							</entry>" + 
"							<entry>" + 
"								<para>" + 
"									Mutable Map of type Map&lt;String, javax.portlet.faces.preference.Preference&gt;. This EL variable provides read/write access to each portlet preference." + 
"								</para>" + 
"							</entry>" + 
"						</row>" + 
"					</tbody>" + 
"				</tgroup>" + 
"			</table>" + 
"			<example>" + 
"				<title/>" + 
"				<para>" + 
"					This code allows you to edit the portlet preferences on the UI" + 
"				</para>" + 
"				<programlisting language=\"XML\"><![CDATA[<h:form>" + 
"	<h:inputText id=\"pref\" required=\"true\" value=\"#{mutablePortletPreferencesValues['userName'].value}\" />" + 
"	<h:commandButton actionListener=\"#{myBean.savePref}\" value=\"Save Preferences\" />" + 
"</h:form>]]></programlisting>" + 
"				<para>" + 
"					In the backing bean, call the PortletPreferences.store() method." + 
"				</para>" + 
"				<programlisting language=\"Java\"><![CDATA[Object request = FacesContext.getCurrentInstance().getExternalContext().getRequest();" + 
"PortletRequest portletRequest = (PortletRequest)request;" + 
"if (request instanceof PortletRequest) {" + 
"	try {" + 
"		PortletPreferences portletPreferences = portletRequest.getPreferences();" + 
"		portletPreferences.store();]]></programlisting>" + 
"			</example>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+20020-566191+%5BLatest%5D&amp;cf_build_id=20020-566191+05+Dec+2013+19%3A40+en-US+%5BLatest%5D&amp;comment=Title%3A+Using+Provided+EL+Variables%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"	</section>" + 
"</chapter>" + 
"	<chapter id=\"chap-Navigation_Portlet_Using_the_Public_API\">" + 
"	<title>Navigation Portlet Using the Public API</title>" + 
"	<!--Source: https://docs.jboss.org/author/display/GTNPORTAL36/Navigation+Portlet+Using+the+Public+API -->" + 
"	<remark>" + 
"		Raw content imported from confluence up to V4" + 
"	</remark>" + 
"	<remark>" + 
"		QE NOTE - jmorgan - moved injects to See Also tags." + 
"	</remark>" + 
"	<para>" + 
"		Portal API can be used to implement a Navigation Portlet. <!-- Added these two injects as Refer-to in the content spec -->" + 
"		<!--Consider reading " + 
"		Inject: 18835 and " + 
"		Inject: 18839 before proceeding further.-->" + 
"	</para>" + 
"	<itemizedlist role=\"see-also-list\">" + 
"		<title>See Also:</title>" + 
"		<listitem>" + 
"			<para>" + 
"				<xref linkend=\"sect-Starting_a_Portlet_Project\" xrefstyle=\"see-also\"/>" + 
"			</para>" + 
"		</listitem>" + 
"		<listitem>" + 
"			<para>" + 
"				<xref linkend=\"sect-Standard_Portlet_Development_JSR-286\" xrefstyle=\"see-also\"/>" + 
"			</para>" + 
"		</listitem>" + 
"	</itemizedlist>" + 
"	<para role=\"RoleCreateBugPara\">" + 
"		<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18882-565956+%5BLatest%5D&amp;cf_build_id=18882-565956+05+Dec+2013+13%3A49+en-US+%5BLatest%5D&amp;comment=Title%3A+Navigation+Portlet+Using+the+Public+API%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"	</para>" + 
"	<section id=\"sect-Example_Code-2\">" + 
"		<title>Example Code</title>" + 
"		<remark>" + 
"			jmorgan - removed an xref that was causing the book to fail. Added a See also instead." + 
"		</remark>" + 
"		<para>" + 
"			The only difference in the <code>pom.xml</code> standard portlet project code is the <code>gatein-api</code> dependency." + 
"		</para>" + 
"		<example>" + 
"			<title>pom.xml</title>" + 
"			<programlisting language=\"XML\">&lt;dependency&gt;" + 
"  &lt;groupId&gt;org.gatein.api&lt;/groupId&gt;" + 
"  &lt;artifactId&gt;gatein-api&lt;/artifactId&gt;" + 
"&lt;/dependency&gt;</programlisting>" + 
"		</example>" + 
"		<para>" + 
"			This section cites code from <emphasis role=\"italics\">Navigation API Portlet</emphasis> from the Quickstarts Collection ( <ulink url=\"https://docs.jboss.org/author/pages/viewpage.action?pageId=62587128\"/>) ." + 
"		</para>" + 
"		<itemizedlist role=\"see-also-list\">" + 
"			<title>See Also:</title>" + 
"			<listitem>" + 
"				<para>" + 
"					<xref linkend=\"sect-Starting_a_Portlet_Project\" xrefstyle=\"see-also\"/>" + 
"				</para>" + 
"			</listitem>" + 
"		</itemizedlist>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18883-565956+%5BLatest%5D&amp;cf_build_id=18883-565956+05+Dec+2013+13%3A49+en-US+%5BLatest%5D&amp;comment=Title%3A+Example+Code%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"		<section id=\"Required_Java_Classes\" remap=\"TID_18884\">" + 
"			<title>Required Java Classes</title>" + 
"			<para>" + 
"				Two classes are required to implement the Navigation Portlet: <code>NavigationPortlet</code> and <code>NavigationNodeBean</code> ." + 
"			</para>" + 
"			<para>" + 
"				The <code>NavigationPortlet.doView(RenderRequest, RenderResponse)</code> method is responsible for rendering the main persistent menu." + 
"			</para>" + 
"			<example>" + 
"				<title>The doView method</title>" + 
"				<programlisting language=\"Java\">protected void doView(RenderRequest request, RenderResponse response) throws PortletException, IOException {" + 
"" + 
"PortalRequest portalRequest = PortalRequest.getInstance();" + 
"" + 
"Navigation navigation = PortalRequest.getInstance().getNavigation();" + 
"        " + 
"// Diving two levels so the information about children count of children nodes is available" + 
"Node rootNode = navigation.getRootNode(Nodes.visitNodes(2));" + 
"navigationRootNodeBean = new NavigationNodeBean(rootNode);" + 
"" + 
"List&lt;NavigationNodeBean&gt; rootNodeChildrenList = navigationRootNodeBean.getChildren();" + 
" " + 
"/* Setting the 1st node to be active when accesing the root node \"/\" */" + 
"if (!rootNodeChildrenList.isEmpty() &amp;&amp; portalRequest.getNodePath().equals(NodePath.root())) {" + 
"    navigationRootNodeBean.setFirstActive();" + 
"}" + 
" " + 
"request.setAttribute(\"navigationRootNode\", navigationRootNodeBean);" + 
" " + 
"PortletRequestDispatcher prd = getPortletContext().getRequestDispatcher(\"/jsp/navigation.jsp\");" + 
"prd.include(request, response);" + 
"     }" + 
"</programlisting>" + 
"			</example>" + 
"			<para>" + 
"				The <code>NavigationPortlet.serveResource(ResourceRequest, ResourceResponse)</code> method serves the AJAX requests to render sub-menus. For a given sub-menu URI, it returns a HTML fragment containing the sub-menu." + 
"			</para>" + 
"			<example>" + 
"				<title>The serveResource method</title>" + 
"				<programlisting language=\"Java\">public void serveResource(ResourceRequest request, ResourceResponse response) throws PortletException, IOException {" + 
" " + 
"Navigation navigation = PortalRequest.getInstance().getNavigation();" + 
"" + 
"String chosenNodeURI = request.getParameter(\"uri\");" + 
" " + 
"Node chosenNode = navigation.getNode(NodePath.fromString(chosenNodeURI), Nodes.visitNodes(2));" + 
"" + 
"request.setAttribute(\"parentNode\", new NavigationNodeBean(chosenNode));" + 
" " + 
"PortletRequestDispatcher prd = getPortletContext().getRequestDispatcher(\"/jsp/node.jsp\");" + 
"prd.include(request, response);" + 
"     }</programlisting>" + 
"			</example>" + 
"			<para>" + 
"				The <code>NavigationNodeBean</code> serves as a model and contains all the information being rendered on the page. In the <code>NavigationPortlet.doView()</code> method, the <code>navigationRootNodeBean</code> field is representing the root node of the navigation and contains main menu (top-menu) elements (Home and Sitemap by default) as children nodes." + 
"			</para>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18884-565956+%5BLatest%5D&amp;cf_build_id=18884-565956+05+Dec+2013+13%3A49+en-US+%5BLatest%5D&amp;comment=Title%3A+Required+Java+Classes%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"		<section id=\"Required_JSP\" remap=\"TID_18885\">" + 
"			<title>Required JSP</title>" + 
"			<remark>" + 
"				Docs Note - jmorgan - changed the language in these code samples to XML. The orginal value of JSP seemed to be causing issues in CCMS. May need to raise bug." + 
"			</remark>" + 
"			<para>" + 
"				JSP (JavaServer Pages) is used for rendering." + 
"			</para>" + 
"			<para>" + 
"				The <code>navigation.jsp</code> file is encapsulates the <code>node.jsp</code> output into an element with unique id identifier." + 
"			</para>" + 
"			<example>" + 
"				<title>Top Portlet JSP Source Code</title>" + 
"				<programlisting language=\"XML\"><![CDATA[<div id=\"id<portlet:namespace/>_gtnQuickstartNavigationPortlet\" class=\"gtnQuickstartNavigationPortlet \">    " + 
"    <%-- Render the main menu, if nodes are available --%>" + 
"    <c:if test=\"${fn:length(navigationRootNode.children) > 0}\">" + 
"        <c:set var=\"parentNode\" value=\"${navigationRootNode}\" scope=\"request\" />" + 
"        <c:set var=\"menuType\" value=\"topmenu\" scope=\"request\" />        " + 
"        <jsp:include page=\"node.jsp\" />" + 
"    </c:if>" + 
"</div>]]>" + 
"</programlisting>" + 
"			</example>" + 
"			<para>" + 
"				The <code>node.jsp</code> file is responsible for rendering the menus." + 
"			</para>" + 
"			<note>" + 
"				<para>" + 
"					The HTML comment tag does not disable the JSP code. It is used to remove the whitespace for more precise CSS styling." + 
"				</para>" + 
"			</note>" + 
"			<example>" + 
"				<title>Menu JSP Source Code</title>" + 
"				<programlisting language=\"XML\"><![CDATA[<ol class=\"${menuType} collapsibleContent\"><!--" + 
"     <c:forEach var=\"child\" items=\"${parentNode.children}\">" + 
"<c:if test=\"${!child.system}\">" + 
"     --><li class=\"menuitem <c:if test='${child.active}'>active</c:if> <c:if test='${(child.parent) &amp;&amp; (child.page)}'> multilevel</c:if>\">        " + 
"     <portlet:resourceURL var=\"ajaxResourceUrl\">" + 
"<portlet:param name=\"uri\" value=\"${child.path}\" />" + 
"     </portlet:resourceURL>" + 
"     <c:choose>" + 
"<%-- Node is a clickable page and contains children nodes --%>" + 
"<c:when test=\"${child.page &amp;&amp; child.parent}\">" + 
"    <a href=\"${child.URI}\"><span>${child.name}</span></a><!--" + 
"    --><a href=\"#${ajaxResourceUrl}\" class=\"caret menuhandler\"><i>${resourceBundle.getString(\"label.children\")}</i></a>" + 
"</c:when>" + 
"<%-- Node is a clickable page but doesn't contain any children nodes --%>" + 
"<c:when test=\"${child.page &amp;&amp; !child.parent}\">" + 
"    <a href=\"${child.URI}\"><span>${child.name}</span></a>" + 
"</c:when>" + 
"<%-- Node is not a clickable page but contains children nodes, it's a \"category\" node --%>" + 
"<c:when test=\"${!child.page &amp;&amp; child.parent}\">" + 
"    <a href=\"#${ajaxResourceUrl}\" class=\"menuhandler\"><span>${child.name}</span><i class=\"caret\">${resourceBundle.getString(\"label.children\")}</i></a>" + 
"</c:when>" + 
"<%-- Do nothing with non-clickable \"category\" nodes without children nodes --%>" + 
"<c:otherwise>" + 
"    <span>${child.name}</span>" + 
"</c:otherwise>" + 
"    </c:choose>" + 
"</li>" + 
"<!--" + 
"</c:if>" + 
"</c:forEach>" + 
"-->" + 
"</ol>]]>" + 
"</programlisting>" + 
"			</example>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18885-565956+%5BLatest%5D&amp;cf_build_id=18885-565956+05+Dec+2013+13%3A49+en-US+%5BLatest%5D&amp;comment=Title%3A+Required+JSP%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"		<section id=\"Required_JavaScript\" remap=\"TID_18886\">" + 
"			<title>Required JavaScript</title>" + 
"			<para>" + 
"				The JavaScript part was implemented as a JQuery plug-in. It has several roles:" + 
"			</para>" + 
"			<itemizedlist>" + 
"				<listitem>" + 
"					<para>" + 
"						AJAX support" + 
"					</para>" + 
"				</listitem>" + 
"				<listitem>" + 
"					<para>" + 
"						Basic on-click drop-down support" + 
"					</para>" + 
"				</listitem>" + 
"				<listitem>" + 
"					<para>" + 
"						Dynamically respond to window changes, position menus within the browser window" + 
"					</para>" + 
"				</listitem>" + 
"			</itemizedlist>" + 
"			<para>" + 
"				The asynchronous requests use the JQuery <code>ajax()</code> method:" + 
"			</para>" + 
"			<example>" + 
"				<title>The JQuery plugin for drop-down menu</title>" + 
"				<programlisting language=\"Java\">" + 
"$.ajax({" + 
"    type: \"POST\"," + 
"    url: $(this).attr('href').substring(1)," + 
"    cache: false," + 
"    dataType: \"text\"," + 
"    success: function(data)" + 
"    {" + 
"        menuItem.append(data);" + 
"        openSubmenu(menuItem);" + 
"    }," + 
"    error: function(XMLHttpRequest, textStatus, errorThrown)" + 
"    {" + 
"        console &amp;&amp; console.log(\"Ajax error\");" + 
"    }" + 
"});" + 
"</programlisting>" + 
"			</example>" + 
"			<para>" + 
"				For more details about the implementation, see the comments in the <code>dropdown.jquery.js</code> file." + 
"			</para>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18886-565956+%5BLatest%5D&amp;cf_build_id=18886-565956+05+Dec+2013+13%3A49+en-US+%5BLatest%5D&amp;comment=Title%3A+Required+JavaScript%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"		<section id=\"Further_Steps2\" remap=\"TID_18887\">" + 
"			<title>Further Steps</title>" + 
"			<remark>" + 
"				CCMS - QE NOTE - jmorgan -consider injecting links to the topics directly here to the User Guide." + 
"			</remark>" + 
"			<para>" + 
"				Read and complete the following sections to test the functionality:" + 
"			</para>" + 
"			<itemizedlist>" + 
"				<listitem>" + 
"					<para>" + 
"						<xref linkend=\"Building_and_Deploying_Portlets\"/>" + 
"					</para>" + 
"				</listitem>" + 
"				<listitem>" + 
"					<para>" + 
"						<citetitle>Import Portlets and Gadgets</citetitle> section in the <citetitle>User Guide</citetitle>." + 
"					</para>" + 
"				</listitem>" + 
"				<listitem>" + 
"					<para>" + 
"						<citetitle>Manage Pages</citetitle> section in the <citetitle>User Guide</citetitle>." + 
"					</para>" + 
"				</listitem>" + 
"			</itemizedlist>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18887-565956+%5BLatest%5D&amp;cf_build_id=18887-565956+05+Dec+2013+13%3A49+en-US+%5BLatest%5D&amp;comment=Title%3A+Further+Steps%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"	</section>" + 
"	<section id=\"See_also2\" remap=\"TID_18888\">" + 
"		<title>See also</title>" + 
"		<remark>" + 
"			Source: Link otherwise known as the Portlet Primer section in the community docs." + 
"		</remark>" + 
"		<itemizedlist>" + 
"			<listitem>" + 
"				<para>" + 
"					<xref linkend=\"sect-JSR-168_and_JSR-286_overview\"/>" + 
"				</para>" + 
"			</listitem>" + 
"		</itemizedlist>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18888-565956+%5BLatest%5D&amp;cf_build_id=18888-565956+05+Dec+2013+13%3A49+en-US+%5BLatest%5D&amp;comment=Title%3A+See+also%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"	</section>" + 
"</chapter>" + 
"	<chapter id=\"chap-Using_Data_from_Social_Networks_in_Portlets\">" + 
"	<title>Using Data from Social Networks in Portlets</title>" + 
"	<remark>" + 
"		Source: https://docs.jboss.org/author/display/GTNPORTAL36/Using+data+from+Social+Networks+in+Portlets" + 
"	</remark>" + 
"	<remark>" + 
"		Raw content imported from confluence upto V22" + 
"	</remark>" + 
"	<remark>" + 
"		QE NOTE - jmorgan -Edited and fixed IDREFs." + 
"	</remark>" + 
"	<para>" + 
"		This chapter describes how to consume data from social networks such as Google+, Facebook and Twitter in portlets. While the kind of data accessible through public APIs varies among the providers, it is generally possible to read data from social networks, and in some cases, write data (in the case of Facebook)." + 
"	</para>" + 
"	<para role=\"RoleCreateBugPara\">" + 
"		<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18889-565956+%5BLatest%5D&amp;cf_build_id=18889-565956+05+Dec+2013+13%3A49+en-US+%5BLatest%5D&amp;comment=Title%3A+Using+Data+from+Social+Networks+in+Portlets%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"	</para>" + 
"	<section id=\"sect-Social_Portlets_Example_Code\">" + 
"		<title>Social Portlets Example Code</title>" + 
"		<para>" + 
"			This section cites code from <emphasis role=\"italics\">Social Portlets</emphasis> example project from the <ulink url=\"https://docs.jboss.org/author/pages/viewpage.action?pageId=62587128\">Quickstarts Collection</ulink> . There is a portlet that displays the most recent Facebook wall posts, a portlet that displays a list of Google+ circles (and who is in the circles), and a portlet that shows user account details from Twitter." + 
"		</para>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18890-565960+%5BLatest%5D&amp;cf_build_id=18890-565960+05+Dec+2013+13%3A56+en-US+%5BLatest%5D&amp;comment=Title%3A+Social+Portlets+Example+Code%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"		<section id=\"Prerequisites10\" remap=\"TID_18891\">" + 
"			<title>Prerequisites</title>" + 
"			<para>" + 
"				Consider reading <xref linkend=\"sect-Starting_a_Portlet_Project\"/>, <xref linkend=\"sect-Standard_Portlet_Development_JSR-286\"/> and <xref linkend=\"chap-CDI_Portlet_Development\"/> before proceeding to familiarize yourself with the different standards and guidelines." + 
"			</para>" + 
"			<para>" + 
"				Configure the portal with a specific OAuth provider as described in <xref linkend=\"chap-OAuth_Provider_API\"/>." + 
"			</para>" + 
"			<para>" + 
"				Finally, the given portal user must have the OAuth access token saved as part of their User Profile in the portal. To retrieve the access token the user must either:" + 
"			</para>" + 
"			<itemizedlist>" + 
"				<listitem>" + 
"					<para>" + 
"						Authenticate or register on the portal with the specific OAuth provider (social network)," + 
"					</para>" + 
"				</listitem>" + 
"				<listitem>" + 
"					<para>" + 
"						Link their account with the OAuth Provider - this can be done through the dedicated tab of User Info screen in the portal UI or programmatically from portlets." + 
"					</para>" + 
"				</listitem>" + 
"			</itemizedlist>" + 
"			<para>" + 
"				Once the user has an OAuth access token saved in their profile, it can be used to call various operations in the particular social network." + 
"			</para>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18891-565960+%5BLatest%5D&amp;cf_build_id=18891-565960+05+Dec+2013+13%3A56+en-US+%5BLatest%5D&amp;comment=Title%3A+Prerequisites%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"	</section>" + 
"	<section id=\"Retrieving_the_Access_Token\" remap=\"TID_18892\">" + 
"		<title>Retrieving the Access Token</title>" + 
"		<remark>" + 
"			QE NOTE - jmorgan -Edited and corrected IDREFs" + 
"		</remark>" + 
"		<para>" + 
"			The OAuth Provider API is used to retrieve the current user's access token (see <xref linkend=\"chap-OAuth_Provider_API\"/> for more information). In the Social Portlets Quickstart, there is an <code>OAuthProviderFilter</code> portlet filter, which retrieves the social network access token of the current user and saves the token into the <code>RequestContext</code> bean. Alternative flows result in one of the following messages:" + 
"		</para>" + 
"		<itemizedlist>" + 
"			<listitem>" + 
"				<para>" + 
"					OAuth provider is not enabled in portal configuration." + 
"				</para>" + 
"			</listitem>" + 
"			<listitem>" + 
"				<para>" + 
"					User is not logged in." + 
"				</para>" + 
"			</listitem>" + 
"			<listitem>" + 
"				<para>" + 
"					User's access token does not exist." + 
"				</para>" + 
"			</listitem>" + 
"			<listitem>" + 
"				<para>" + 
"					User's access token is invalid or expired." + 
"				</para>" + 
"			</listitem>" + 
"		</itemizedlist>" + 
"		<para>" + 
"			These messages are presented by <code>error.jsp</code> or <code>token.jsp</code> . In case the access token is unavailable or invalid, the <code>token.jsp</code> will show a link, which the user can follow to link their GateIn Portal account with the given social network. Once linked, the user will obtain the access token." + 
"		</para>" + 
"		<para>" + 
"			<figure>" + 
"				<title id=\"missing_access_token\">Token Unavailable Message</title>" + 
"				<mediaobject>" + 
"					<imageobject role=\"html\">" + 
"						<imagedata align=\"center\" fileref=\"images/2909.png\" format=\"PNG\"/>" + 
"					</imageobject>" + 
"					<textobject>" + 
"						<phrase>Image showing the Facebook User Info Portlet warning, which features a link that allows the user to re-link their Facebook account with the Portal.</phrase>" + 
"					</textobject>" + 
"				</mediaobject>" + 
"			</figure>" + 
"		</para>" + 
"		<example>" + 
"			<title>Declaration of OAuthProviderFilter in portlet.xml</title>" + 
"			<programlisting language=\"XML\">" + 
"&lt;filter&gt;" + 
"  &lt;filter-name&gt;FacebookFilter&lt;/filter-name&gt;" + 
"  &lt;filter-class&gt;org.gatein.security.oauth.portlet.OAuthPortletFilter&lt;/filter-class&gt;" + 
"  &lt;lifecycle&gt;ACTION_PHASE&lt;/lifecycle&gt;" + 
"  &lt;lifecycle&gt;RENDER_PHASE&lt;/lifecycle&gt;" + 
"  &lt;init-param&gt;" + 
"    &lt;name&gt;accessTokenValidation&lt;/name&gt;" + 
"    &lt;value&gt;SKIP&lt;/value&gt;" + 
"  &lt;/init-param&gt;" + 
"  &lt;init-param&gt;" + 
"    &lt;name&gt;oauthProviderKey&lt;/name&gt;" + 
"    &lt;value&gt;FACEBOOK&lt;/value&gt;" + 
"  &lt;/init-param&gt;" + 
"&lt;/filter&gt;" + 
"</programlisting>" + 
"		</example>" + 
"		<example id=\"exam-Mapping_of_OAuthProviderFilter_in_portlet_xml\">" + 
"			<title>Mapping of OAuthProviderFilter in portlet.xml</title>" + 
"			<programlisting language=\"XML\">&lt;filter-mapping&gt;" + 
"  &lt;filter-name&gt;FacebookFilter&lt;/filter-name&gt;" + 
"  &lt;portlet-name&gt;Facebook*&lt;/portlet-name&gt;" + 
"&lt;/filter-mapping&gt;</programlisting>" + 
"		</example>" + 
"		<para>" + 
"			<xref linkend=\"exam-Mapping_of_OAuthProviderFilter_in_portlet_xml\"/> specifies that all portlets with the name starting with <code>\"Facebook\"</code> are handled by this filter. This same mapping configuration can be applied to Google+ and Twitter." + 
"		</para>" + 
"		<para>" + 
"			All portlets in the Social Portlets Quickstart extend the <code>AbstractSocialPortlet</code> . It is a subclass of the standard portlet API's <code>GenericPortlet</code> . It contains some basic functionality and helper methods useful for all social portlets, one of which is handling the action to redirect to the Social login." + 
"		</para>" + 
"		<example>" + 
"			<title>actionRedirectToOAuthFlow in AbstractSocialPortlet</title>" + 
"			<programlisting language=\"Java\">@ProcessAction(name = ACTION_OAUTH_REDIRECT)" + 
"public void actionRedirectToOAuthFlow(ActionRequest aReq, ActionResponse aResp) throws IOException {" + 
"  String customScope = aReq.getParameter(PARAM_CUSTOM_SCOPE);" + 
"  getOAuthProvider().startOAuthWorkflow(customScope);" + 
"}</programlisting>" + 
"			<para>" + 
"				If <code>customScope</code> is null, the portal will request scopes only configured in <code>configuration.properties</code> . Otherwise, the portal will request this scope in addition to scopes from <code>configuration.properties</code> . This allows portlets to ask for more scopes than scopes from <code>configuration.properties</code>." + 
"			</para>" + 
"		</example>" + 
"		<example>" + 
"			<title>Widening the Scope On-demand for OAuth Token Permissions</title>" + 
"			<para>" + 
"				Portlets can request wider scope <firstterm> on demand</firstterm> in cases when wider scope is required to complete a task." + 
"			</para>" + 
"			<para>" + 
"				In <code>configuration.properties</code> , Facebook is enabled only with the default scope <emphasis role=\"italics\">email</emphasis> as decribed in <xref linkend=\"Facebook\"/>." + 
"			</para>" + 
"			<para>" + 
"				In <code>FacebookStatusUpdatePortlet</code> , a user wants to publish messages on their Facebook Wall. For this purpose, an access token with scope <emphasis role=\"italics\">publish_message</emphasis> is required." + 
"			</para>" + 
"			<para>" + 
"				Before the user is able to publish a message on their Facebook wall, the portlet displays an error message that the present scope is insufficient, and offers the user an opportunity to correct the issue." + 
"			</para>" + 
"			<para>" + 
"				<figure>" + 
"					<title id=\"portlet_insufficient_scope\">Insufficient Privileges Error</title>" + 
"					<mediaobject>" + 
"						<imageobject role=\"html\">" + 
"							<imagedata fileref=\"images/2908.png\" format=\"PNG\"/>" + 
"						</imageobject>" + 
"						<textobject>" + 
"							<phrase>Screen shot displaying the \"insufficient privileges\" error a user encounters if they try to publish a status update on their wall without the publish_stream scope.</phrase>" + 
"						</textobject>" + 
"					</mediaobject>" + 
"				</figure>" + 
"			</para>" + 
"			<para>" + 
"				Clicking the link starts an OAuth2 flow. The user is redirected to Facebook and is asked to permit the <emphasis role=\"italics\">publish_message</emphasis> scope. After permitting the scope change, the user is able to publish messages." + 
"			</para>" + 
"			<para>" + 
"				In this scenario, CDI is used to store the access token. The <code>RequestContext</code> class is annotated as <code>@RequestScoped</code> . Each portlet contains only logic specific to its purpose, and does not need to specifically handle retrieving the access token." + 
"			</para>" + 
"		</example>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18892-565960+%5BLatest%5D&amp;cf_build_id=18892-565960+05+Dec+2013+13%3A56+en-US+%5BLatest%5D&amp;comment=Title%3A+Retrieving+the+Access+Token%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"	</section>" + 
"	<section id=\"Facebook\" remap=\"TID_18893\">" + 
"		<title>Facebook</title>" + 
"		<remark>" + 
"			QE NOTE - jmorgan -Edited and corrected IDREFs." + 
"		</remark>" + 
"		<para>" + 
"			There are three portlets that demonstrate a basic integration with Facebook." + 
"		</para>" + 
"		<variablelist>" + 
"			<title>title</title>" + 
"			<varlistentry>" + 
"				<term>FacebookUserInfoPortlet</term>" + 
"				<listitem>" + 
"					<para>" + 
"						A simple portlet showing some details of the current user's profile on Facebook, such as first name, last name, username, e-mail and profile picture." + 
"					</para>" + 
"				</listitem>" + 
"			</varlistentry>" + 
"			<varlistentry>" + 
"				<term>FacebookFriendsPortlet</term>" + 
"				<listitem>" + 
"					<para>" + 
"						An advanced portlet showing friends of the current user and their pictures. It also supports pagination (only 10 friends are on screen, but you can switch to different page size to see more friends). When clicking a friend, the portlet displays the last few status messages from the given friend's Facebook Wall." + 
"					</para>" + 
"				</listitem>" + 
"			</varlistentry>" + 
"			<varlistentry>" + 
"				<term>FacebookStatusUpdatePortlet</term>" + 
"				<listitem>" + 
"					<para>" + 
"						A portlet with the capability to publish messages to the Wall of the current user." + 
"					</para>" + 
"				</listitem>" + 
"			</varlistentry>" + 
"		</variablelist>" + 
"		<para>" + 
"			All three portlets leverage the third-party library Rest FB( <ulink url=\"http://restfb.com\"/>), which provides the capability to send requests to the Facebook Graph API and convert JSON responses to plain Java objects (POJOs)." + 
"		</para>" + 
"		<para>" + 
"			To decouple logic from the UI and handle error situations, the helper class <code>FacebookClientWrapper</code> offers multiple methods to retrieve objects from the Facebook Graph API and convert them to POJOs or beans relevant to the portal. These converted methods can be dispatched by <code>PortletRequestDispatcher</code> to JSP pages, which handle the HTML markup rendering." + 
"		</para>" + 
"		<para>" + 
"			The example portlets are using a small subset of the Facebook Graph API. It is possible use the whole spectrum of the Facebook Graph API operations in your own portlets. The complete documentation of Graph API is available on the Facebook Developers site, which is located at <ulink url=\"http://developers.facebook.com/docs/reference/api/\"/> ." + 
"		</para>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18893-565960+%5BLatest%5D&amp;cf_build_id=18893-565960+05+Dec+2013+13%3A56+en-US+%5BLatest%5D&amp;comment=Title%3A+Facebook%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"	</section>" + 
"	<section id=\"Google\" remap=\"TID_18894\">" + 
"		<title>Google+</title>" + 
"		<remark>" + 
"			QE NOTE - jmorgan -Edited and corrected IDREFs" + 
"		</remark>" + 
"		<para>" + 
"			There are three example portlets for showing integration with Google+. All portlets leverage Google SDK libraries." + 
"		</para>" + 
"		<itemizedlist>" + 
"			<listitem>" + 
"				<para>" + 
"					<code>GoogleUserInfoPortlet</code> - a simple portlet which shows some details about the current user from Google+, such as their first name, last name, e-mail, and profile picture. See <ulink url=\"https://developers.google.com/accounts/docs/OAuth2WebServer#callinganapi\"/> for more details." + 
"				</para>" + 
"			</listitem>" + 
"			<listitem>" + 
"				<para>" + 
"					<code>GoogleFriendsPortlet</code> - a simple portlet for displaying Google+ friends and their photos. It supports pagination (only 10 friends are displayed on screen each time). See <ulink url=\"https://developers.google.com/+/api/latest/people/list\"/> for details." + 
"				</para>" + 
"			</listitem>" + 
"			<listitem>" + 
"				<para>" + 
"					<code>GoogleActivitiesPortlet</code> - a simple portlet for displaying the latest activities from Google+ Stream of the current user. See <ulink url=\"https://developers.google.com/+/api/latest/activities/list\"/> for details." + 
"				</para>" + 
"			</listitem>" + 
"		</itemizedlist>" + 
"		<para>" + 
"			<code>GoogleUserInfoPortlet</code> leverages <ulink url=\"http://code.google.com/p/google-api-java-client/wiki/APIs#Google_OAuth2_API\">Google OAuth2 API library</ulink> and it uses an <code>Oauth2</code> object to call the operation." + 
"		</para>" + 
"		<para>" + 
"			<code>GoogleFriendsPortlet</code> and <code>GoogleActivitiesPortlet</code> leverage <ulink url=\"http://code.google.com/p/google-api-java-client/wiki/APIs#Google+_API\">Google+ API library</ulink> and they use <code>Plus</code> object to call the operations. Portlets have available access token and they obtain the required object through a call to <code>oauthProvider.getAuthorizedAPIObject</code> as described in <xref linkend=\"chap-OAuth_Provider_API\"/>." + 
"		</para>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18894-565960+%5BLatest%5D&amp;cf_build_id=18894-565960+05+Dec+2013+13%3A56+en-US+%5BLatest%5D&amp;comment=Title%3A+Google%2B%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"	</section>" + 
"	<section id=\"Twitter\" remap=\"TID_18895\">" + 
"		<title>Twitter</title>" + 
"		<para>" + 
"			There is one simple portlet for Twitter: <code>TwitterPortlet</code> . It shows details about the current user, such as their picture, last tweet, number of followers, and other user data commonly available on a twitter user's profile." + 
"		</para>" + 
"		<para>" + 
"			<code>TwitterPortlet</code> leverages <ulink url=\"http://twitter4j.org\">Twitter4J library</ulink> to interact with Twitter. Given that the access token is available, the portlet demonstrates how to obtain the <code>Twitter</code> client object from Twitter4J library through calling <code>oauthProvider.getAuthorizedAPIObject()</code> as described in <xref linkend=\"Retrieve_an_Instance_of_OAuthProvider\"/>." + 
"		</para>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18895-565960+%5BLatest%5D&amp;cf_build_id=18895-565960+05+Dec+2013+13%3A56+en-US+%5BLatest%5D&amp;comment=Title%3A+Twitter%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"	</section>" + 
"	<section id=\"Configuration_and_Deployment_Descriptors\" remap=\"TID_18896\">" + 
"		<title>Configuration and Deployment Descriptors</title>" + 
"		<remark>" + 
"			QE NOTE - jmorgan -Edited and corrected IDREFs (this section had heaps of subsections which are now varlist entries)" + 
"		</remark>" + 
"		<variablelist>" + 
"			<varlistentry>" + 
"				<term>pom.xml</term>" + 
"				<listitem>" + 
"					<para>" + 
"						In <code>pom.xml</code> file of our Social Portlets Quickstart, we need to declare dependencies on JSR 286 portlet API, GateIn Portal API and CDI API:" + 
"					</para>" + 
"					<example>" + 
"						<title>Declaration of basic dependencies in pom.xml</title>" + 
"						<programlisting language=\"XML\">" + 
"&lt;!--" + 
"    The versions of these dependencies are managed in gatein-*-bom." + 
"    Note that artifacts managed in gatein-*-bom are &lt;scope&gt;provided&lt;/scope&gt; in most cases." + 
"119.    Name only those artifacts you refer to in your code." + 
"    Look at gatein-*-bom POM file for the complete list of available artifacts." + 
"--&gt;" + 
"&lt;dependency&gt;" + 
"    &lt;groupId&gt;javax.portlet&lt;/groupId&gt;" + 
"    &lt;artifactId&gt;portlet-api&lt;/artifactId&gt;" + 
"&lt;/dependency&gt;" + 
"&lt;dependency&gt;" + 
"    &lt;groupId&gt;org.gatein.api&lt;/groupId&gt;" + 
"    &lt;artifactId&gt;gatein-api&lt;/artifactId&gt;" + 
"&lt;/dependency&gt;" + 
"&lt;dependency&gt;" + 
"    &lt;groupId&gt;javax.enterprise&lt;/groupId&gt;" + 
"    &lt;artifactId&gt;cdi-api&lt;/artifactId&gt;" + 
"    &lt;scope&gt;provided&lt;/scope&gt;" + 
"&lt;/dependency&gt;" + 
"</programlisting>" + 
"					</example>" + 
"					<para>" + 
"						We also need to declare dependencies on 3rd party libraries to be able to access the public APIs of Facebook, Twitter and Google+:" + 
"					</para>" + 
"					<example>" + 
"						<title>Declaration of 3rd party dependencies in pom.xml</title>" + 
"						<programlisting language=\"XML\">" + 
"&lt;!-- Google --&gt;" + 
"&lt;dependency&gt;" + 
"    &lt;groupId&gt;com.google.apis&lt;/groupId&gt;" + 
"    &lt;artifactId&gt;google-api-services-plus&lt;/artifactId&gt;" + 
"    &lt;scope&gt;provided&lt;/scope&gt;" + 
"&lt;/dependency&gt;" + 
"&lt;dependency&gt;" + 
"    &lt;groupId&gt;com.google.apis&lt;/groupId&gt;" + 
"    &lt;artifactId&gt;google-api-services-oauth2&lt;/artifactId&gt;" + 
"    &lt;scope&gt;provided&lt;/scope&gt;" + 
"&lt;/dependency&gt;" + 
"&lt;!-- Twitter --&gt;" + 
"&lt;dependency&gt;" + 
"    &lt;groupId&gt;org.twitter4j&lt;/groupId&gt;" + 
"    &lt;artifactId&gt;twitter4j-core&lt;/artifactId&gt;" + 
"    &lt;scope&gt;provided&lt;/scope&gt;" + 
"&lt;/dependency&gt;" + 
"&lt;!-- Facebook  (not provided for now as it's not needed in Portal and so it's bundled in this portlet WAR) --&gt;" + 
"&lt;dependency&gt;" + 
"    &lt;groupId&gt;com.restfb&lt;/groupId&gt;" + 
"    &lt;artifactId&gt;restfb&lt;/artifactId&gt;" + 
"&lt;/dependency&gt;" + 
"</programlisting>" + 
"					</example>" + 
"					<para>" + 
"						You may have noticed that <code>com.restfb</code> dependency is not declared as <code>provided</code> . This is because this library is not used by GateIn Portal itself, and therefore it is not bundled therein as well. We need to provide it in our WAR ourselves. Dependencies on Twitter4J and Google API libraries are <code>provided</code> by GateIn Portal and there is no need to package them inside our portlet WAR." + 
"					</para>" + 
"				</listitem>" + 
"			</varlistentry>" + 
"			<varlistentry>" + 
"				<term>jboss-deployment-structure.xml</term>" + 
"				<listitem>" + 
"					<para>" + 
"						This file is specific for JBoss AS7 and JBoss EAP. In this file, dependencies on JBoss AS7/EAP modules are declared which are required by our portlet application." + 
"					</para>" + 
"					<example>" + 
"						<title>Declaration of dependencies in jboss-deployment-structure.xml</title>" + 
"						<programlisting language=\"XML\">&lt;deployment&gt;" + 
"  &lt;dependencies&gt;" + 
"    &lt;module name=\"com.google.apis\" /&gt;" + 
"    &lt;module name=\"org.twitter4j\" /&gt;" + 
"  &lt;/dependencies&gt;" + 
"&lt;/deployment&gt;</programlisting>" + 
"					</example>" + 
"					<para>" + 
"						Modules <code>org.twitter4j</code> and <code>com.google.apis</code> are part of GateIn Portal JBoss AS7 packaging and they contain the 3rd party libraries from Google+ and Twitter." + 
"					</para>" + 
"				</listitem>" + 
"			</varlistentry>" + 
"			<varlistentry>" + 
"				<term>beans.xml</term>" + 
"				<listitem>" + 
"					<para>" + 
"						The presence of <code>beans.xml</code> file activates CDI for the application. There is nothing useful in it." + 
"					</para>" + 
"					<example>" + 
"						<title>beans.xml</title>" + 
"						<programlisting>&lt;beans xmlns=\"http://java.sun.com/xml/ns/javaee\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"" + 
"    xsi:schemaLocation=\"http://java.sun.com/xml/ns/javaee http://jboss.org/schema/cdi/beans_1_0.xsd\"&gt;" + 
"&lt;!--" + 
"</programlisting>" + 
"					</example>" + 
"				</listitem>" + 
"			</varlistentry>" + 
"			<varlistentry>" + 
"				<term>portlet.xml</term>" + 
"				<listitem>" + 
"					<para>" + 
"						It contains declaration of all social portlets. Very important is also declaration of <code>OAuthPortletFilter</code> and it's filter mapping." + 
"					</para>" + 
"				</listitem>" + 
"			</varlistentry>" + 
"			<varlistentry>" + 
"				<term>web.xml</term>" + 
"				<listitem>" + 
"					<para>" + 
"						It just contains a declaration of <code>ResourceRequestFilter</code> and its mapping. It is needed mainly for serving CSS files." + 
"					</para>" + 
"					<example>" + 
"						<title>web.xml</title>" + 
"						<programlisting language=\"XML\">&lt;filter&gt;" + 
"    &lt;filter-name&gt;ResourceRequestFilter&lt;/filter-name&gt;" + 
"    &lt;filter-class&gt;org.exoplatform.portal.application.ResourceRequestFilter&lt;/filter-class&gt;" + 
"&lt;/filter&gt;" + 
" " + 
"&lt;filter-mapping&gt;" + 
"    &lt;filter-name&gt;ResourceRequestFilter&lt;/filter-name&gt;" + 
"    &lt;url-pattern&gt;/*&lt;/url-pattern&gt;" + 
"&lt;/filter-mapping&gt;</programlisting>" + 
"					</example>" + 
"				</listitem>" + 
"			</varlistentry>" + 
"			<varlistentry>" + 
"				<term>gatein-resources.xml</term>" + 
"				<listitem>" + 
"					<para>" + 
"						Declaration of CSS files used by our portlets. For more information, see <xref linkend=\"Creating_New_Skins\"/> ." + 
"					</para>" + 
"				</listitem>" + 
"			</varlistentry>" + 
"		</variablelist>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18896-565960+%5BLatest%5D&amp;cf_build_id=18896-565960+05+Dec+2013+13%3A56+en-US+%5BLatest%5D&amp;comment=Title%3A+Configuration+and+Deployment+Descriptors%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"	</section>" + 
"	<section id=\"Further_Steps3\" remap=\"TID_18897\">" + 
"		<title>Further Steps</title>" + 
"		<para>" + 
"			See <xref linkend=\"Building_and_Deploying_Portlets\"/>, and <citetitle>Import Portlets and Gadgets</citetitle> and <citetitle>Manage Pages</citetitle> in the User Guide for further guidance about deploying and testing the portlets." + 
"		</para>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18897-565960+%5BLatest%5D&amp;cf_build_id=18897-565960+05+Dec+2013+13%3A56+en-US+%5BLatest%5D&amp;comment=Title%3A+Further+Steps%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"	</section>" + 
"</chapter>" + 
"	<chapter id=\"chap-Spring_Framework_Portlet_Development\">" + 
"	<title>Spring Framework Portlet Development</title>" + 
"	<!--" + 
"		Source: https://docs.jboss.org/author/display/GTNPORTAL36/Spring+Framework+Portlet+Development" + 
"	-->" + 
"	<para>" + 
"		Support for Spring Portlet Model-View-Controller (MVC) is limited in the Red Hat JBoss Portal. It is recommended that other fully supported options such as JSP, JSF or JSF with RichFaces are considered as replacements to Spring Portlet MVC." + 
"	</para>" + 
"	<important>" + 
"		<para>" + 
"			Using other Spring components must be carefully evaluated as their support in the Portal environment may be limited." + 
"		</para>" + 
"	</important>" + 
"	<para>" + 
"		See the Portlet MVC Framework section ( <ulink url=\"http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/portlet.html\"/>) of the Spring Framework Reference Documentation for detailed Spring-based portlet project configuration instructions." + 
"	</para>" + 
"	<important>" + 
"		<para>" + 
"			When generating an Action URL using the portlet tag library, ensure that <code>escapeXml=\"false\"</code> is included in the definition of <code>portlet:actionURL</code>, as described in <xref linkend=\"exam-Action_URL\"/>. A page not found issue due to the Action URL not being able to map the URL to a Spring controller is likely if this advice is not followed." + 
"		</para>" + 
"	</important>" + 
"	<example id=\"exam-Action_URL\">" + 
"		<title>Action URL</title>" + 
"		<programlisting><![CDATA[<portlet:actionURL var=\"myAction\" escapeXml=\"false\" />]]></programlisting>" + 
"	</example>" + 
"	<para>" + 
"		Deploying a Spring-based portlet, importing it, and adding it to a page uses the same process as any other portlet." + 
"	</para>" + 
"	<para>" + 
"		See <citetitle>Import Portlets and Gadgets</citetitle> and <citetitle>Manage Pages</citetitle> in the User Guide for further guidance about using the Web interface to import and manage portlets." + 
"	</para>" + 
"	<important>" + 
"		<title>Limitation for Spring portlet on version 2.5</title>" + 
"		<para>" + 
"			During development or migration of a Spring Portlet on version 2.5 for the platform, the configuration <code>&lt;context:component-scan base-package=\"org.<replaceable>classname.etc</replaceable>\"/&gt;</code> fails to locate the beans for scanning. Spring 2.5 cannot interpret the VFS file system used by Red Hat JBoss Enterprise Application Platform therefore it cannot scan the JAR files to find the beans. Spring 3.x versions do not have this limitation. To resolve the problem, replace the &lt;component-scan&gt; tag with the bean tags for each required bean." + 
"		</para>" + 
"		<para>" + 
"			Spring 2.5 only supports JSR 168 (Portlet Spec 1.0), it does not include support for ResourceRequest which was introduced by JSR 286 (Portlet Spec 2.0). Without the ability to use a ResourceRequest, the means by which Ajax calls are handled in a portlet, it is not possible to use Ajax calls with a Spring 2.5 portlet. If your portlet requires Ajax calls, it must be upgraded to Spring 3.x." + 
"		</para>" + 
"	</important>" + 
"	<itemizedlist role=\"see-also-list\">" + 
"		<title>See Also:</title>" + 
"		<listitem>" + 
"			<para>" + 
"				<xref linkend=\"Building_and_Deploying_Portlets1\" xrefstyle=\"see-also\"/>" + 
"			</para>" + 
"		</listitem>" + 
"	</itemizedlist>" + 
"	<para role=\"RoleCreateBugPara\">" + 
"		<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18898-565960+%5BLatest%5D&amp;cf_build_id=18898-565960+05+Dec+2013+13%3A56+en-US+%5BLatest%5D&amp;comment=Title%3A+Spring+Framework+Portlet+Development%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"	</para>" + 
"</chapter>" + 
"</part>" + 
"	<part id=\"part-JavaScript_Development\">" + 
"	<title>JavaScript Development</title>" + 
"	<chapter id=\"chap-JavaScript_Modularity\">" + 
"	<title>JavaScript Modularity</title>" + 
"	<remark>" + 
"		Source: https://docs.jboss.org/author/display/GTNPORTAL35/JavaScript+Development" + 
"	</remark>" + 
"	<para role=\"RoleCreateBugPara\">" + 
"		<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18899-565960+%5BLatest%5D&amp;cf_build_id=18899-565960+05+Dec+2013+13%3A56+en-US+%5BLatest%5D&amp;comment=Title%3A+JavaScript+Modularity%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"	</para>" + 
"	<section id=\"JavaScript_Modules\" remap=\"TID_18900\">" + 
"		<title>JavaScript Modules</title>" + 
"		<para>" + 
"			The Red Hat JBoss Portal JavaScript handling improvements are built upon the concept of the JavaScript <emphasis>module</emphasis>. JavaScript does not provide native support for namespacing and so the notion of modules was designed to solve this problem. These modules provide namespacing and more; the module pattern allows developers to create dependencies between modules and resolve them at runtime, enabling on demand and parallel loading of JavaScript resources." + 
"		</para>" + 
"		<para>" + 
"			For more information see the RequireJS documentation at <ulink url=\"http://requirejs.org/\"/>. An in-depth article about JavaScript module patterns is available at <ulink url=\"http://www.adequatelygood.com/2010/3/JavaScript-Module-Pattern-In-Depth\"/>." + 
"		</para>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18900-565960+%5BLatest%5D&amp;cf_build_id=18900-565960+05+Dec+2013+13%3A56+en-US+%5BLatest%5D&amp;comment=Title%3A+JavaScript+Modules%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"	</section>" + 
"	<section id=\"Introduction_to_Modules\" remap=\"TID_18901\">" + 
"		<title>Introduction to Modules</title>" + 
"		<para>" + 
"			A module can be thought of as:" + 
"		</para>" + 
"		<itemizedlist>" + 
"			<listitem>" + 
"				<para>" + 
"					An identifier or name;" + 
"				</para>" + 
"			</listitem>" + 
"			<listitem>" + 
"				<para>" + 
"					A list of the module's dependencies;" + 
"				</para>" + 
"			</listitem>" + 
"			<listitem>" + 
"				<para>" + 
"					Packaged code, usually expressed as a self-executing function." + 
"				</para>" + 
"			</listitem>" + 
"			<listitem>" + 
"				<para>" + 
"					The product, an object produced by the module that is usually consumed by other modules." + 
"				</para>" + 
"			</listitem>" + 
"		</itemizedlist>" + 
"		<para>" + 
"			At runtime the dependency system defines a graph of functions to execute, the product of each module being injected in the other modules. It can be seen as a simple dependency injection system able to load modules in an asynchronous and parallel fashion, providing parallel loading, namespacing, and dependency management." + 
"		</para>" + 
"		<para>" + 
"			The portal provides support for different module formats:" + 
"		</para>" + 
"		<variablelist>" + 
"			<varlistentry>" + 
"				<term>GateIn Module Definition (GMD)</term>" + 
"				<listitem>" + 
"					<!--" + 
"          Source: https://docs.jboss.org/author/display/GTNPORTAL36/JavaScript+Modularity?focusedCommentId=58820956#comment-58820956" + 
"-->" + 
"					<para>" + 
"						This format is the most appropriate way to define a JavaScript module in the portal. The module is expressed as a simple function, the list of dependencies being expressed in the <filename>gatein-resources.xml</filename> file. This format clearly decouples the module's code in a JavaScript file from the module's dependencies, expressed in a single XML file, and is the best compromise for integrating JavaScript in the portal." + 
"					</para>" + 
"				</listitem>" + 
"			</varlistentry>" + 
"			<varlistentry>" + 
"				<term>Asynchronous Module Definition (AMD)</term>" + 
"				<listitem>" + 
"					<para>" + 
"						This is the native module format supported by <literal>RequireJS</literal>." + 
"					</para>" + 
"				</listitem>" + 
"			</varlistentry>" + 
"			<varlistentry>" + 
"				<term>Adapted Module</term>" + 
"				<listitem>" + 
"					<para>" + 
"						This format is the most flexible as it adapts to other module formats such as CommonJS <ulink url=\"http://wiki.commonjs.org/wiki/Modules/1.1\">modules</ulink>." + 
"					</para>" + 
"				</listitem>" + 
"			</varlistentry>" + 
"		</variablelist>" + 
"		<para>" + 
"			To explore the benefits of modules (beyond namespacing) the following example uses a module consuming the jQuery library:" + 
"		</para>" + 
"		<!-- jmorgan - there is something funny going on with this programlisting. Strucurally it is valid, and I'm using CDATA correctly as far as I can tell. But CCMS is not liking it one bit. -->" + 
"		<programlisting language=\"Java\"><![CDATA[(function($) {" + 
"  $(\"body\").on(\"click\", \"mybutton\", function(event) {" + 
"  alert(\"Button clicked\");" + 
"  };" + 
"})($)" + 
"]]></programlisting>" + 
"		<para>" + 
"			The JavaScript component of our module is a function that takes the <emphasis>jQuery</emphasis> <code>$</code> object as an argument:" + 
"		</para>" + 
"		<itemizedlist>" + 
"			<listitem>" + 
"				<para>" + 
"					The jQuery object is provided as a module dependency expressed as a function argument <code>$</code>. The module code can use any name for jQuery; in our example we use the <code>$</code> name." + 
"				</para>" + 
"				<para>" + 
"					<code>$</code> jQuery can be used without needing to use the <code>$.ready</code> function because jQuery will be already loaded and initialized when the function is executed." + 
"				</para>" + 
"			</listitem>" + 
"			<listitem>" + 
"				<para>" + 
"					The module is scoped to the entire page and this code will react to any click on the <guilabel>.mybutton</guilabel> selector. Since a single event listener handles as many portlets as are on the page, this benefits performance and simplicity." + 
"				</para>" + 
"			</listitem>" + 
"		</itemizedlist>" + 
"		<para>" + 
"			To integrate this module, it is declared in the <filename>gatein-resources.xml</filename> file of the WAR archive:" + 
"		</para>" + 
"		<programlisting language=\"XML\">" + 
"&lt;gatein-resources" + 
"xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"" + 
"xsi:schemaLocation=\"http://www.gatein.org/xml/ns/gatein_resources_1_3 http://www.gatein.org/xml/ns/gatein_resources_1_3\"" + 
"xmlns=\"http://www.gatein.org/xml/ns/gatein_resources_1_3\"&gt;" + 
"  &lt;portlet&gt;" + 
"    &lt;name&gt;MyPortlet&lt;/name&gt;" + 
"    &lt;module&gt;" + 
"      &lt;script&gt;" + 
"        &lt;path&gt;/mymodule.js&lt;/path&gt;" + 
"      &lt;/script&gt;" + 
"      &lt;depends&gt;" + 
"        &lt;module&gt;jquery&lt;/module&gt;" + 
"        &lt;as&gt;$&lt;/as&gt;" + 
"      &lt;/depends&gt;" + 
"    &lt;/module&gt;" + 
"  &lt;/portlet&gt;" + 
"&lt;/&lt;gatein-resources&gt;" + 
"</programlisting>" + 
"		<para>" + 
"			The module tag declares the module and its dependencies. In this case it is declared that jQuery is the only dependency and that it is named <code>$</code> when the module is executed." + 
"		</para>" + 
"		<para>" + 
"			A dependency relationship between the module and the jQuery module has been created such that:" + 
"		</para>" + 
"		<itemizedlist>" + 
"			<listitem>" + 
"				<para>" + 
"					The module will be loaded only when the portlet is displayed;" + 
"				</para>" + 
"			</listitem>" + 
"			<listitem>" + 
"				<para>" + 
"					The portal loads the jQuery module before loading our module;" + 
"				</para>" + 
"			</listitem>" + 
"			<listitem>" + 
"				<para>" + 
"					Several different versions of jQuery can coexist in the browser without conflicting." + 
"				</para>" + 
"			</listitem>" + 
"		</itemizedlist>" + 
"		<para>" + 
"			This introductory example outlines the important features provided by modules: performance, isolation, dependency management and ease of use." + 
"		</para>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18901-565960+%5BLatest%5D&amp;cf_build_id=18901-565960+05+Dec+2013+13%3A56+en-US+%5BLatest%5D&amp;comment=Title%3A+Introduction+to+Modules%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"	</section>" + 
"	<section id=\"Script_Support\" remap=\"TID_18902\">" + 
"		<title>Script Support</title>" + 
"		<para>" + 
"			While modules are preferred whenever possible, they cannot be used in every instance. For example, when an existing portlet uses an inline script it will access the global namespace to find functions or objects. To accommodate these instances, the traditional method of using JavaScript with a simple script declaration in the head section of a web page continues to be supported." + 
"		</para>" + 
"		<para>" + 
"			Dependencies between scripts can be created to control the order of the scripts in the head section and resolve dependency problems as much as possible." + 
"		</para>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18902-565960+%5BLatest%5D&amp;cf_build_id=18902-565960+05+Dec+2013+13%3A56+en-US+%5BLatest%5D&amp;comment=Title%3A+Script+Support%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"	</section>" + 
"</chapter>" + 
"	<chapter id=\"chap-JavaScript_in_JBoss_Portal\">" + 
"	<title>JavaScript in JBoss Portal</title>" + 
"	<section id=\"Declaring_a_Module\" remap=\"TID_18904\">" + 
"		<title>Declaring a Module</title>" + 
"		<para>" + 
"			A JavaScript module is the declaration of a JavaScript self-executing function and its declaration in the <filename>gatein-resources.xml</filename> descriptor of the web application." + 
"		</para>" + 
"		<para>" + 
"			The descriptor defines the module and its dependencies. The portal builds a graph of resources and their dependencies at runtime. When a client requires a particular module, it invokes a JavaScript function that calls <emphasis>RequireJS</emphasis> to resolve dependencies." + 
"		</para>" + 
"		<example>" + 
"			<title>foo.js</title>" + 
"			<programlisting language=\"Java\">" + 
"(function ($) {" + 
"// Do something with jQuery" + 
"})(jQuery)" + 
"</programlisting>" + 
"		</example>" + 
"		<para>" + 
"			This module is declared as a <emphasis>self-executing function</emphasis> in the <filename>foo.js</filename> file." + 
"		</para>" + 
"		<para>" + 
"			The <filename>foo.js</filename> file is then declared in the <filename>gatein-resources.xml</filename> file:" + 
"		</para>" + 
"		<example>" + 
"			<title>gatein-resources.xml</title>" + 
"			<programlisting language=\"XML\">" + 
"..." + 
"&lt;module&gt;" + 
"  &lt;name&gt;foo&lt;/name&gt;" + 
"  &lt;script&gt;" + 
"    &lt;path&gt;/foo.js&lt;/path&gt;" + 
"  &lt;/script&gt;" + 
"  &lt;depends&gt;" + 
"    &lt;module&gt;jquery&lt;/module&gt;" + 
"    &lt;as&gt;jQuery&lt;/as&gt;" + 
"  &lt;/depends&gt;" + 
"&lt;/module&gt;" + 
"..." + 
"</programlisting>" + 
"		</example>" + 
"		<para>" + 
"			The self-executing function declares:" + 
"		</para>" + 
"		<itemizedlist>" + 
"			<listitem>" + 
"				<para>" + 
"					The parameter for the function: <code>$</code>." + 
"				</para>" + 
"			</listitem>" + 
"			<listitem>" + 
"				<para>" + 
"					The arguments of the function's invocation: <literal>jQuery</literal>." + 
"				</para>" + 
"			</listitem>" + 
"		</itemizedlist>" + 
"		<para>" + 
"			The self-executing function argument must match the dependencies." + 
"		</para>" + 
"		<itemizedlist>" + 
"			<listitem>" + 
"				<para>" + 
"					Functions do not need to match the XML dependencies order." + 
"				</para>" + 
"			</listitem>" + 
"			<listitem>" + 
"				<para>" + 
"					Functions can use a parameter subset; a dependency can be declared in the XML but not consumed as an argument." + 
"				</para>" + 
"			</listitem>" + 
"			<listitem>" + 
"				<para>" + 
"					Parameters must be aliased in dependencies with the &lt;as&gt; XML tag." + 
"				</para>" + 
"			</listitem>" + 
"		</itemizedlist>" + 
"		<note>" + 
"			<para>" + 
"				The self-executing function argument is a JavaScript construct. The purpose of this construct is to pass arguments to the function, let the function name the arguments and override the current scope of execution." + 
"			</para>" + 
"			<para>" + 
"				For example, <literal>jQuery</literal> uses the following:" + 
"			</para>" + 
"			<programlisting>" + 
"(function(window, undefined) { .... })(window);" + 
"</programlisting>" + 
"		</note>" + 
"		<para>" + 
"			Resources are related by dependency relationships, which specify how scripts are related to each other and how the modular system should be honored." + 
"		</para>" + 
"		<para>" + 
"			In our example, the <literal>foo</literal> module uses <literal>jQuery</literal>. They are in relationship: <literal>foo</literal> <emphasis>depends</emphasis> on <literal>jQuery</literal>. When the <literal>foo</literal> module is loaded, the <literal>jQuery</literal> module must be available to it." + 
"		</para>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18904-565960+%5BLatest%5D&amp;cf_build_id=18904-565960+05+Dec+2013+13%3A56+en-US+%5BLatest%5D&amp;comment=Title%3A+Declaring+a+Module%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"	</section>" + 
"	<section id=\"Translation_to_the_AMD_System\" remap=\"TID_18905\">" + 
"		<title>Translation to the AMD System</title>" + 
"		<para>" + 
"			The portal will translate logical identifiers into an AMD module:" + 
"		</para>" + 
"		<programlisting language=\"Java\">" + 
"define(\"SHARED/foo\", [\"SHARED/jquery\"], function(jQuery) {" + 
"  return (function($) {" + 
"  // Do something with jQuery" + 
"  })(jQuery);" + 
"});" + 
"</programlisting>" + 
"		<itemizedlist>" + 
"			<listitem>" + 
"				<para>" + 
"					Logical identifiers are translated to AMD identifiers:" + 
"				</para>" + 
"				<itemizedlist>" + 
"					<listitem>" + 
"						<para>" + 
"							The <emphasis>foo</emphasis> module is translated to the <code>SHARED/foo</code> AMD module identifier; the <emphasis>SHARED</emphasis> prefix is added by the portal for scoping the name." + 
"						</para>" + 
"						<para>" + 
"							Other existing scopes include <emphasis>PORTLET</emphasis> and <emphasis>PORTAL</emphasis>." + 
"						</para>" + 
"					</listitem>" + 
"					<listitem>" + 
"						<para>" + 
"							The dependency on the <literal>jquery</literal> module is translated to a <code>[\"SHARED/jquery\"]</code> AMD module dependency." + 
"						</para>" + 
"					</listitem>" + 
"				</itemizedlist>" + 
"			</listitem>" + 
"			<listitem>" + 
"				<para>" + 
"					The module function is wrapped twice:" + 
"				</para>" + 
"				<itemizedlist>" + 
"					<listitem>" + 
"						<para>" + 
"							Once by the portal module wrapper which delegates to the module's function. The goal of this function is to provide a " + 
"							<remark>" + 
"								lazy" + 
"							</remark>? evaluation of the module's self-executing function." + 
"						</para>" + 
"					</listitem>" + 
"					<listitem>" + 
"						<para>" + 
"							Then by the <code>define</code> AMD function that manages loading the module properly." + 
"						</para>" + 
"					</listitem>" + 
"				</itemizedlist>" + 
"			</listitem>" + 
"			<listitem>" + 
"				<para>" + 
"					The self-executing function module's arguments must match the module dependencies expressed in the XML declaration." + 
"				</para>" + 
"				<itemizedlist>" + 
"					<listitem>" + 
"						<para>" + 
"							The <literal>jquery</literal> dependency is aliased to the <code>jQuery</code> name in the XML <code>as</code> tag. As a consequence the portal function wrapper parameter is called <code>jQuery</code>." + 
"						</para>" + 
"					</listitem>" + 
"					<listitem>" + 
"						<para>" + 
"							The module's self-executing function argument is named <code>jQuery</code> to match the declared alias." + 
"						</para>" + 
"					</listitem>" + 
"					<listitem>" + 
"						<para>" + 
"							The module's self-executing function parameter is named <code>$</code> and thus redefines the <emphasis>jquery</emphasis> dependency to <code>$</code> locally." + 
"						</para>" + 
"					</listitem>" + 
"				</itemizedlist>" + 
"			</listitem>" + 
"		</itemizedlist>" + 
"		<para>" + 
"			At runtime, the process happens in the following order of events:" + 
"		</para>" + 
"		<itemizedlist>" + 
"			<listitem>" + 
"				<para>" + 
"					The defined function is invoked and declares its dependencies." + 
"				</para>" + 
"			</listitem>" + 
"			<listitem>" + 
"				<para>" + 
"					Once the dependencies are resolved, the module wrapper is invoked with the <code>jQuery</code> argument containing the <emphasis>jquery</emphasis> dependency." + 
"				</para>" + 
"			</listitem>" + 
"			<listitem>" + 
"				<para>" + 
"					The module wrapper evaluates the self-executing function that resolves the <code>jQuery</code> argument to the <emphasis>jquery</emphasis> dependency." + 
"				</para>" + 
"			</listitem>" + 
"			<listitem>" + 
"				<para>" + 
"					The self-executing function is invoked and the <emphasis>jquery</emphasis> dependency is available under the name <code>$</code>." + 
"				</para>" + 
"			</listitem>" + 
"		</itemizedlist>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18905-565960+%5BLatest%5D&amp;cf_build_id=18905-565960+05+Dec+2013+13%3A56+en-US+%5BLatest%5D&amp;comment=Title%3A+Translation+to+the+AMD+System%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"	</section>" + 
"	<section id=\"Producing_Dependencies\" remap=\"TID_18906\">" + 
"		<title>Producing Dependencies</title>" + 
"		<para>" + 
"			The previous example illustrated that a module is able to consume dependencies as arguments. This section explains how a module can <emphasis>produce</emphasis> a dependency." + 
"		</para>" + 
"		<para>" + 
"			When a module self-executing function is evaluated it can return an object. You can modify the previous example to return a value." + 
"		</para>" + 
"		<example>" + 
"			<title>foo.js</title>" + 
"			<programlisting language=\"Java\">" + 
"(function ($) {" + 
"  // Do something with jQuery" + 
"  return {hello:\"world\"}" + 
"})($)" + 
"</programlisting>" + 
"		</example>" + 
"		<para>" + 
"			In this second example, we return a simple JavaScript object. This object will be stored by the dependency system of AMD and provided as arguments of modules that consume the <emphasis>foo</emphasis> module." + 
"		</para>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18906-565960+%5BLatest%5D&amp;cf_build_id=18906-565960+05+Dec+2013+13%3A56+en-US+%5BLatest%5D&amp;comment=Title%3A+Producing+Dependencies%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"	</section>" + 
"</chapter>" + 
"	<chapter id=\"chap-Module_Scopes\">" + 
"	<title>Module Scopes</title>" + 
"	<para>" + 
"		The name of a logical portal module translates into an AMD name with a prefix of <code>SHARED</code>, <code>PORTLET</code> or <code>PORTAL</code>. This prefix fully identifies a module by its logical name and its scope. Scopes ensure that a module (and therefore the underlying web resource) is loaded at the right time when it is effectively required." + 
"	</para>" + 
"	<para role=\"RoleCreateBugPara\">" + 
"		<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18907-565960+%5BLatest%5D&amp;cf_build_id=18907-565960+05+Dec+2013+13%3A56+en-US+%5BLatest%5D&amp;comment=Title%3A+Module+Scopes%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"	</para>" + 
"	<section id=\"Shared_Scope\" remap=\"TID_18908\">" + 
"		<title>Shared Scope</title>" + 
"		<para>" + 
"			The shared scope does not related to a specific portal entity, instead a shared module should be consumed by other modules. It is declared in <filename>gatein-resources.xml</filename> with the top level <code>module</code> tag:" + 
"		</para>" + 
"		<programlisting language=\"XML\">" + 
"&lt;module&gt;" + 
"  &lt;name&gt;core&lt;/name&gt;" + 
"  &lt;script&gt;" + 
"    &lt;path&gt;/core.js&lt;/path&gt;" + 
"  &lt;/script&gt;" + 
"  &lt;depends&gt;" + 
"    &lt;module&gt;base&lt;/module&gt;" + 
"  &lt;/depends&gt;" + 
"&lt;/module&gt;" + 
"</programlisting>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18908-565960+%5BLatest%5D&amp;cf_build_id=18908-565960+05+Dec+2013+13%3A56+en-US+%5BLatest%5D&amp;comment=Title%3A+Shared+Scope%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"	</section>" + 
"	<section id=\"Portal_Scope\" remap=\"TID_18909\">" + 
"		<title>Portal Scope</title>" + 
"		<para>" + 
"			The module is related to a portal instance and is loaded when the related portal is accessed:" + 
"		</para>" + 
"		<programlisting language=\"XML\">" + 
"&lt;portal&gt;" + 
"  &lt;name&gt;classic&lt;/name&gt;" + 
"  &lt;module&gt;" + 
"    &lt;script&gt;" + 
"      &lt;path&gt;/classic.js&lt;/path&gt;" + 
"    &lt;/script&gt;" + 
"    &lt;depends&gt;" + 
"      &lt;module&gt;core&lt;/module&gt;" + 
"    &lt;/depends&gt;" + 
"  &lt;/module&gt;" + 
"&lt;/portal&gt;" + 
"</programlisting>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18909-565960+%5BLatest%5D&amp;cf_build_id=18909-565960+05+Dec+2013+13%3A56+en-US+%5BLatest%5D&amp;comment=Title%3A+Portal+Scope%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"	</section>" + 
"	<section id=\"Portlet_Scope\" remap=\"TID_18910\">" + 
"		<title>Portlet Scope</title>" + 
"		<para>" + 
"			The module is loaded when the corresponding portlet is accessed:" + 
"		</para>" + 
"		<programlisting language=\"XML\">" + 
"&lt;portlet&gt;" + 
"  &lt;name&gt;sitemap&lt;/name&gt;" + 
"  &lt;module&gt;" + 
"    &lt;script&gt;" + 
"      &lt;path&gt;/sitemap.js&lt;/path&gt;" + 
"    &lt;/script&gt;" + 
"    &lt;depends&gt;" + 
"      &lt;module&gt;core&lt;/module&gt;" + 
"    &lt;/depends&gt;" + 
"  &lt;/module&gt;" + 
"&lt;/portlet&gt;" + 
"</programlisting>" + 
"		<note>" + 
"			<para>" + 
"				A module can only depend on a shared module, therefore any <code>depends</code> tags implicitly reference a shared module." + 
"			</para>" + 
"		</note>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18910-565963+%5BLatest%5D&amp;cf_build_id=18910-565963+05+Dec+2013+14%3A02+en-US+%5BLatest%5D&amp;comment=Title%3A+Portlet+Scope%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"	</section>" + 
"</chapter>" + 
"	<chapter id=\"chap-Portlet_Dynamic_Module\">" + 
"	<title>Portlet Dynamic Module</title>" + 
"	<para>" + 
"		As explained previously, portlet dependencies (including JavaScript files) can be declared in the <filename>gatein-resources.xml</filename> file, which forces declaration of portlet dependencies at packaging time when the corresponding war file is created." + 
"	</para>" + 
"	<para>" + 
"		The JSR286 specification provides a mechanism for modifying portal headers, which can also be used to load dependency JavaScript files. Although this mechanism is portable, it has the following drawbacks:" + 
"	</para>" + 
"	<itemizedlist>" + 
"		<listitem>" + 
"			<para>" + 
"				A script can be loaded multiple times, specially if two portlets in two different war files load the same scripts since the only way to identify a script is by its URL." + 
"			</para>" + 
"		</listitem>" + 
"		<listitem>" + 
"			<para>" + 
"				Scripts have to be loaded by the head section of the portal, impacting front-end performance." + 
"			</para>" + 
"		</listitem>" + 
"	</itemizedlist>" + 
"	<para>" + 
"		The portal combines both approaches by allowing to create dynamic dependencies of a portlet at runtime, during the render phase of the portlet:" + 
"	</para>" + 
"	<programlisting language=\"Java\">" + 
"public void render(RenderRequest req, RenderResponse resp) throws PortletException, IOException {" + 
"  resp.setProperty(\"org.gatein.javascript.dependency\", \"base\");" + 
"  resp.addProperty(\"org.gatein.javascript.dependency\", \"common\");" + 
"}" + 
"</programlisting>" + 
"	<para>" + 
"		The code above is equivalent to the following declaration in the <filename>gatein-resources.xml</filename> file:" + 
"	</para>" + 
"	<programlisting language=\"XML\">" + 
"&lt;portlet&gt;" + 
"  &lt;name&gt;MyPortlet&lt;/name&gt;" + 
"  &lt;module&gt;" + 
"  &lt;depends&gt;" + 
"    &lt;module&gt;base&lt;/module&gt;" + 
"  &lt;/depends&gt;" + 
"  &lt;depends&gt;" + 
"    &lt;module&gt;common&lt;/module&gt;" + 
"  &lt;/depends&gt;" + 
"  &lt;/module&gt;" + 
"&lt;/portlet&gt;" + 
"</programlisting>" + 
"	<para role=\"RoleCreateBugPara\">" + 
"		<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18911-565963+%5BLatest%5D&amp;cf_build_id=18911-565963+05+Dec+2013+14%3A02+en-US+%5BLatest%5D&amp;comment=Title%3A+Portlet+Dynamic+Module%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"	</para>" + 
"</chapter>" + 
"	<chapter id=\"chap-Aliases\">" + 
"	<title>Aliases</title>" + 
"	<para>" + 
"		It is possible to define an alias for each module declared in the <filename>gatein-resources.xml</filename> file. The alias is added to the module declaration using the <code>&lt;as&gt;</code> element:" + 
"	</para>" + 
"	<programlisting language=\"XML\">" + 
"&lt;module&gt;" + 
"  &lt;name&gt;foo&lt;/name&gt;" + 
"  &lt;as&gt;Foo&lt;/as&gt;" + 
"  ..." + 
"&lt;/module&gt;" + 
"&lt;module&gt;" + 
"  &lt;name&gt;bar&lt;/name&gt;" + 
"  ..." + 
"  &lt;depends&gt;" + 
"    &lt;module&gt;foo&lt;/module&gt;" + 
"  &lt;/depends&gt;" + 
"&lt;/module&gt;" + 
"</programlisting>" + 
"	<para>" + 
"		The alias can then be used instead of the module's name in the argument of the respective self-executing JavaScript function:" + 
"	</para>" + 
"	<programlisting language=\"Java\">" + 
"(function(Foo) {" + 
"})(Foo)" + 
"</programlisting>" + 
"	<para>" + 
"		Similarly, the <code>&lt;as&gt;</code> element can also be used inside the <code>&lt;depends&gt;</code> element to define a local alias for the dependency:" + 
"	</para>" + 
"	<programlisting language=\"XML\">" + 
"&lt;module&gt;" + 
"  &lt;name&gt;foo&lt;/name&gt;" + 
"  ..." + 
"&lt;/module&gt;" + 
"&lt;module&gt;" + 
"  &lt;name&gt;bar&lt;/name&gt;  " + 
"  ..." + 
"  &lt;depends&gt;" + 
"    &lt;module&gt;foo&lt;/module&gt;" + 
"    &lt;as&gt;Foo&lt;/as&gt;" + 
"  &lt;/depends&gt;" + 
"&lt;/module&gt;" + 
"</programlisting>" + 
"	<para role=\"RoleCreateBugPara\">" + 
"		<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18912-565963+%5BLatest%5D&amp;cf_build_id=18912-565963+05+Dec+2013+14%3A02+en-US+%5BLatest%5D&amp;comment=Title%3A+Aliases%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"	</para>" + 
"</chapter>" + 
"	<chapter id=\"chap-Custom_Adapters\">" + 
"	<title>Custom Adapters</title>" + 
"	<para>" + 
"		Until ECMAScript 6, there had been no standardized format of a JavaScript module declaration. However, several proposals of such a format have emerged, all revolving around the same module pattern. The AMD (Asynchronous Module Definition) format was chosen because it is suitable for the Web, and its asynchronous nature." + 
"	</para>" + 
"	<para>" + 
"		As a consequence, you sometimes have to deal with included scripts that do not match the self-executing function declaration format. To adapt such scripts to the expected format without editing the actual code, it is possible to declare an adapter that will wrap the original scripts and make them reusable." + 
"	</para>" + 
"	<para>" + 
"		The jQuery library is a good example of how a custom adapter is useful. Thanks to the adapter, it is possible to reuse the jQuery library without any modifications, which facilitates the integration and maintenance of the library in the portal. jQuery uses the following construct to define itself:" + 
"	</para>" + 
"	<programlisting language=\"Java\">" + 
"(function(window, undefined) {" + 
"})(window)" + 
"</programlisting>" + 
"	<para>" + 
"		The issue with this construct is that it will bind jQuery to the window, and that it will not return any value as expected by the dependency system. Thanks to the custom adapter, we can integrate JQuery the following way:" + 
"	</para>" + 
"	<programlisting language=\"XML\">" + 
"&lt;module&gt;" + 
"  &lt;name&gt;jquery&lt;/name&gt;" + 
"  &lt;script&gt;" + 
"    &lt;adapter&gt;" + 
"      (function() {" + 
"        &lt;include&gt;/jquery.js&lt;/include&gt;" + 
"        return jQuery.noConflict(true);" + 
"      })();" + 
"    &lt;/adapter&gt;" + 
"  &lt;/script&gt;" + 
"&lt;/module&gt;" + 
"</programlisting>" + 
"	<para>" + 
"		The <code>&lt;adapter&gt;</code> element can encapsulate any code, and the <code>&lt;include&gt;</code> element will perform a simple string inclusion of the original jQuery script:" + 
"	</para>" + 
"	<programlisting language=\"Java\">" + 
"define(\"SHARED/jquery\", [], function() {" + 
"  return (function() {" + 
"    (function(window, undefined) {" + 
"    })(window);" + 
"    return jQuery.noConflict(true);" + 
"  })();" + 
"});</programlisting>" + 
"	<para role=\"RoleCreateBugPara\">" + 
"		<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18913-565963+%5BLatest%5D&amp;cf_build_id=18913-565963+05+Dec+2013+14%3A02+en-US+%5BLatest%5D&amp;comment=Title%3A+Custom+Adapters%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"	</para>" + 
"</chapter>" + 
"	<chapter id=\"chap-Module_Resources\">" + 
"	<title>Module Resources</title>" + 
"	<para>" + 
"		The AMD format allows to define dependencies on a resource loaded by a module based on the <ulink url=\"http://wiki.commonjs.org/wiki/Modules/LoaderPlugin\">loader plug-in</ulink>." + 
"	</para>" + 
"	<para>" + 
"		A module that uses a loader plug-in uses the exclamation mark character (<code>!</code>) to delineate between the loader plug-in module to use and the target resource to load. Loader plug-ins are useful because they can load resources by means of the AMD loading mechanism and benefit from its performance and parallel loading." + 
"	</para>" + 
"	<para>" + 
"		There are some useful loader plug-ins:" + 
"	</para>" + 
"	<itemizedlist>" + 
"		<listitem>" + 
"			<para>" + 
"				The <ulink url=\"https://github.com/requirejs/text\"/> plug-in for loading of text resources such as stylesheets or templates" + 
"			</para>" + 
"		</listitem>" + 
"		<listitem>" + 
"			<para>" + 
"				The <ulink url=\"http://requirejs.org/docs/api.html#i18n\"/> plug-in for internationalization bundle support" + 
"			</para>" + 
"		</listitem>" + 
"	</itemizedlist>" + 
"	<procedure>" + 
"		<title>Configuring a Module Resource</title>" + 
"		<para>" + 
"			To demonstrate the configuration of an AMD loader plug-in's target resource, we need some HTML code generated by JavaScript. The <filename>text</filename> AMD loader plug-in can be used for this purpose. The plug-in will load a template as its resource and pass it as a parameter into a module definition callback." + 
"		</para>" + 
"		<step>" + 
"			<para>" + 
"				Declare <systemitem>text</systemitem> as a module. It is written as a native module that depends on the predefined RequireJS module called <systemitem>module</systemitem>. The native support mechanism allows this configuration works transparently without modifying the third-party library." + 
"			</para>" + 
"			<programlisting language=\"XML\">" + 
"&lt;module&gt;" + 
"  &lt;name&gt;text&lt;/name&gt;" + 
"  &lt;script&gt;" + 
"    &lt;path&gt;/requirejs/js/plugins/text.js&lt;/path&gt;" + 
"  &lt;/script&gt;" + 
"  &lt;depends&gt;" + 
"    &lt;!-- module means RequireJS itself --&gt;" + 
"    &lt;module&gt;module&lt;/module&gt;" + 
"  &lt;/depends&gt;" + 
"&lt;/module&gt;" + 
"</programlisting>" + 
"		</step>" + 
"		<step>" + 
"			<para>" + 
"				Define the <systemitem>foo</systemitem> module that requires the <systemitem>text</systemitem> plug-in to load the template by means of the <code>&lt;resource&gt;</code> XML element." + 
"			</para>" + 
"			<programlisting language=\"XML\">" + 
"&lt;module&gt;" + 
"  &lt;name&gt;foo&lt;/name&gt;" + 
"  ..." + 
"  &lt;depends&gt;" + 
"    &lt;module&gt;text&lt;/module&gt;" + 
"    &lt;as&gt;myTemplate&lt;/as&gt;" + 
"    &lt;resource&gt;/path/to/template.tmpl&lt;/resource&gt;" + 
"  &lt;/depends&gt;" + 
"&lt;/module&gt;" + 
"</programlisting>" + 
"		</step>" + 
"		<step>" + 
"			<para>" + 
"				The <systemitem>foo</systemitem> module template is loaded by the <systemitem>text</systemitem> plug-in." + 
"			</para>" + 
"			<programlisting language=\"Java\">" + 
"(function(myTemplate) {" + 
"//parse the 'myTemplate' then append to DOM" + 
"})(myTemplate);" + 
"</programlisting>" + 
"		</step>" + 
"	</procedure>" + 
"	<para role=\"RoleCreateBugPara\">" + 
"		<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18914-565963+%5BLatest%5D&amp;cf_build_id=18914-565963+05+Dec+2013+14%3A02+en-US+%5BLatest%5D&amp;comment=Title%3A+Module+Resources%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"	</para>" + 
"</chapter>" + 
"	<chapter id=\"chap-Load_Groups\">" + 
"	<title>Load Groups</title>" + 
"	<para>" + 
"		When self-executing functions and XML descriptors are loaded by a browser, they are served as web resources by the portal. By default, a module is served as a single resource, which can cause performance issues in production systems. The load group feature solves these issues by decoupling the logical modules and the JavaScript resource serving." + 
"	</para>" + 
"	<para>" + 
"		The <code>&lt;load-group&gt;</code> element can be used to group modules into a single web resource. When a module contained in a load group is requested, the web resource containing all the grouped modules is loaded. For instance, the code below shows configuration of the <systemitem>foo</systemitem> and <systemitem>bar</systemitem> modules grouped into the <systemitem>foobar</systemitem> load group:" + 
"	</para>" + 
"	<example>" + 
"		<title>load-group Example</title>" + 
"		<programlisting language=\"XML\">" + 
"&lt;module&gt;" + 
"  &lt;name&gt;foo&lt;/name&gt;" + 
"  &lt;load-group&gt;foobar&lt;/load-group&gt;" + 
"  ..." + 
"&lt;/module&gt;" + 
"&lt;module&gt;" + 
"  &lt;name&gt;bar&lt;/name&gt;" + 
"  &lt;load-group&gt;foobar&lt;/load-group&gt;" + 
"  ..." + 
"&lt;/module&gt;" + 
"</programlisting>" + 
"	</example>" + 
"	<para>" + 
"		When the <systemitem>foo</systemitem> module is requested, the AMD loader will load the whole <systemitem>foobar</systemitem> group. This will cause that the <systemitem>bar</systemitem> module will be loaded as well. On any subsequent request for the <systemitem>bar</systemitem> module, no more load requests will be made as the module will already have been loaded." + 
"	</para>" + 
"	<para role=\"RoleCreateBugPara\">" + 
"		<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18915-565963+%5BLatest%5D&amp;cf_build_id=18915-565963+05+Dec+2013+14%3A02+en-US+%5BLatest%5D&amp;comment=Title%3A+Load+Groups%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"	</para>" + 
"</chapter>" + 
"	<chapter id=\"chap-Localization\">" + 
"	<title>Localization</title>" + 
"	<para>" + 
"		The portal can localize JavaScript modules on the server. The JavaScript code of each module can be rewritten and localization keys replaced by values from resource bundles for individual locales. Each localized script is available under a different URL, which ensures optimal resource caching." + 
"	</para>" + 
"	<para>" + 
"		Script localization is activated by the <code>&lt;resource-bundle&gt;</code> and <code>&lt;path&gt;</code> elements. Resource bundles are declared by the <code>&lt;supported-locale&gt;</code> element and must be available in the web application's classpath." + 
"	</para>" + 
"	<example>" + 
"		<title>supported-locale Example</title>" + 
"		<programlisting language=\"XML\">" + 
"&lt;module&gt;" + 
"  &lt;name&gt;greetings&lt;/name&gt;" + 
"  &lt;supported-locale&gt;de&lt;/supported-locale&gt;" + 
"  &lt;supported-locale&gt;en&lt;/supported-locale&gt;" + 
"  &lt;supported-locale&gt;fr&lt;/supported-locale&gt;" + 
"  &lt;supported-locale&gt;vi&lt;/supported-locale&gt;" + 
"  &lt;supported-locale&gt;ru&lt;/supported-locale&gt;" + 
"  &lt;script&gt;" + 
"    &lt;path&gt;/path/to/greetings.js&lt;/path&gt;" + 
"    &lt;resource-bundle&gt;greetings_bundle&lt;/resource-bundle&gt;" + 
"  &lt;/script&gt;" + 
"  ..." + 
"&lt;/module&gt;" + 
"</programlisting>" + 
"	</example>" + 
"	<para>" + 
"		The portal escapes all keys in the <code>${key}</code> format and looks up its value in the resource bundles. For instance, a JSON object containing localized values can be built by the following code:" + 
"	</para>" + 
"	<programlisting language=\"Java\">" + 
"(function() {" + 
"  return {" + 
"    \"hello\": \"${hello}\"," + 
"    \"goodbye\": \"${goodbye}\"" + 
"  };" + 
"})();" + 
"</programlisting>" + 
"	<para>" + 
"		At runtime, different versions of this script will be served by the portal, with the keys replaced by the respective values obtained from the localization bundles." + 
"	</para>" + 
"	<para role=\"RoleCreateBugPara\">" + 
"		<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18916-565963+%5BLatest%5D&amp;cf_build_id=18916-565963+05+Dec+2013+14%3A02+en-US+%5BLatest%5D&amp;comment=Title%3A+Localization%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"	</para>" + 
"</chapter>" + 
"	<chapter id=\"chap-Non-AMD_Scripts\">" + 
"	<title>Non-AMD Scripts</title>" + 
"	<para>" + 
"		Whenever possible, JavaScript code should be written as an AMD module. Alternatively, the custom adapter mechanism can be used to adapt scripts to the AMD format." + 
"	</para>" + 
"	<para>" + 
"		While this is the recommended practice, it may sometimes be necessary to load scripts as traditional non-AMD modules. This approach is possible, providing the following conditions are met:" + 
"	</para>" + 
"	<itemizedlist>" + 
"		<listitem>" + 
"			<para>" + 
"				Traditional scripts must be declared using the <code>&lt;scripts&gt;</code> element instead of <code>&lt;module&gt;</code>." + 
"			</para>" + 
"		</listitem>" + 
"		<listitem>" + 
"			<para>" + 
"				Dependencies can be declared using the <code>&lt;depends&gt;</code> element, but the scripts can only depend on other scripts, not on modules." + 
"			</para>" + 
"			<para>" + 
"				This is also true for modules: a module can only depend on another module, not on a script." + 
"			</para>" + 
"		</listitem>" + 
"		<listitem>" + 
"			<para>" + 
"				JavaScript code declared in the <code>&lt;scripts&gt;</code> element is pushed to the HTML head. This means the script will be loaded and executed before a DOM is created, and will likely have an impact on front-end performance." + 
"			</para>" + 
"		</listitem>" + 
"	</itemizedlist>" + 
"	<programlisting language=\"XML\">" + 
"&lt;scripts&gt;" + 
"  &lt;name&gt;foo&lt;/name&gt;" + 
"  &lt;script&gt;" + 
"    &lt;path&gt;/path/to/foo.js&lt;/path&gt;" + 
"  &lt;/script&gt;" + 
"  &lt;depends&gt;" + 
"    &lt;scripts&gt;bar&lt;/scripts&gt;" + 
"  &lt;depends&gt;" + 
"&lt;/scripts&gt;" + 
"</programlisting>" + 
"	<para>" + 
"		It is also possible to use a script that is available at a public URL. This can be achieved using the <code>&lt;url&gt;</code> element instead of <code>&lt;script&gt;</code>:" + 
"	</para>" + 
"	<programlisting language=\"XML\">" + 
"&lt;scripts&gt;" + 
"  &lt;name&gt;foo&lt;/name&gt;" + 
"  &lt;url&gt;http://path.to/foo.js&lt;/url&gt;" + 
"&lt;/scripts&gt;" + 
"</programlisting>" + 
"	<itemizedlist role=\"see-also-list\">" + 
"		<title>See Also:</title>" + 
"		<listitem>" + 
"			<para>" + 
"				<xref linkend=\"chap-Custom_Adapters\" xrefstyle=\"see-also\"/>" + 
"			</para>" + 
"		</listitem>" + 
"	</itemizedlist>" + 
"	<para role=\"RoleCreateBugPara\">" + 
"		<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18917-565963+%5BLatest%5D&amp;cf_build_id=18917-565963+05+Dec+2013+14%3A02+en-US+%5BLatest%5D&amp;comment=Title%3A+Non-AMD+Scripts%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"	</para>" + 
"</chapter>" + 
"</part>" + 
"	<part id=\"part-JavaScript_Code_Examples\">" + 
"	<title>JavaScript Code Examples</title>" + 
"	<chapter id=\"chap-Module_Code_Examples\">" + 
"	<title>Module Code Examples</title>" + 
"	<para role=\"RoleCreateBugPara\">" + 
"		<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18918-565963+%5BLatest%5D&amp;cf_build_id=18918-565963+05+Dec+2013+14%3A02+en-US+%5BLatest%5D&amp;comment=Title%3A+Module+Code+Examples%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"	</para>" + 
"	<section id=\"Declare_a_Module\" remap=\"TID_18919\">" + 
"		<title>Declare a Module</title>" + 
"		<para>" + 
"			Module declaration requires integrating the <ulink url=\"http://softwaremaniacs.org/soft/highlight/en/\">Highlight.js</ulink> library. This example is part of the examples found in <filename>amd-js.war</filename>." + 
"		</para>" + 
"		<para>" + 
"			<filename>Highlight.js</filename> is a jQuery plugin. jQuery plugins are the best examples as they are native portal modules. They follow the self-invoking pattern that accepts the <emphasis>jquery</emphasis> dependency as <code>$</code>." + 
"		</para>" + 
"		<programlisting language=\"Java\">" + 
"(function($) {" + 
"  ..." + 
"}(jQuery)" + 
"</programlisting>" + 
"		<note>" + 
"			<para>" + 
"				For an overview of the <citetitle>Highlight.js</citetitle> source code, see <ulink url=\"https://github.com/isagalaev/highlight.js/blob/master/src/highlight.js\"/>." + 
"			</para>" + 
"		</note>" + 
"		<para>" + 
"			The highlight module is integrated using the XML declaration:" + 
"		</para>" + 
"		<programlisting language=\"XML\">" + 
"&lt;module&gt;" + 
"  &lt;name&gt;highlight&lt;/name&gt;" + 
"  &lt;script&gt;" + 
"    &lt;path&gt;/highlight/highlight.js&lt;/path&gt;" + 
"  &lt;/script&gt;" + 
"  &lt;depends&gt;" + 
"    &lt;module&gt;jquery&lt;/module&gt;" + 
"    &lt;as&gt;jQuery&lt;/as&gt;" + 
"  &lt;/depends&gt;" + 
"&lt;/module&gt;" + 
"</programlisting>" + 
"		<itemizedlist>" + 
"			<listitem>" + 
"				<para>" + 
"					The module <code>highlight</code>uses the <filename>/highlight/highlight.js</filename> source code bundled in the war file." + 
"				</para>" + 
"			</listitem>" + 
"			<listitem>" + 
"				<para>" + 
"					The <code>depends</code> tag creates a dependency on the <emphasis>jquery</emphasis> module. The dependency is aliased as <code>$</code> using the <code>as</code> tag to match the <filename>Highlight.js</filename> self-executing function argument <code>$</code> ." + 
"				</para>" + 
"			</listitem>" + 
"		</itemizedlist>" + 
"		<note>" + 
"			<para>" + 
"				The <emphasis>jquery</emphasis> module provides jQuery 1.7.1 . The <emphasis>jquery</emphasis> plug-ins are not a part of the portal and do not need to be declared." + 
"			</para>" + 
"		</note>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18919-565963+%5BLatest%5D&amp;cf_build_id=18919-565963+05+Dec+2013+14%3A02+en-US+%5BLatest%5D&amp;comment=Title%3A+Declare+a+Module%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"	</section>" + 
"	<section id=\"Declare_an_AMD_Module\" remap=\"TID_18920\">" + 
"		<title>Declare an AMD Module</title>" + 
"		<para>" + 
"			Asynchronous module declaration is explained in the RequireJS documentation available at <ulink url=\"http://requirejs.org/docs/api.html#define\"/>." + 
"		</para>" + 
"		<para>" + 
"			The pattern for AMD modules is as follows:" + 
"		</para>" + 
"		<programlisting language=\"Java\">" + 
"define(\"module\", [\"dependency1\",...,\"dependencyN\"], function(dep1,...,depN) {" + 
"});" + 
"</programlisting>" + 
"		<para>" + 
"			The portal allows independent usage of modules such as AMD, where some parts are overridden by the XML declaration:" + 
"		</para>" + 
"		<itemizedlist>" + 
"			<listitem>" + 
"				<para>" + 
"					The <code>\"module\"</code> name is ignored and replaced by the declared module name." + 
"				</para>" + 
"			</listitem>" + 
"			<listitem>" + 
"				<para>" + 
"					The module dependencies ranging from <code>\"dependency1\"</code> to <code>\"dependencyN\"</code> are declared with the same name in XML (use the <code>as</code> tag to override the dependency name)." + 
"				</para>" + 
"			</listitem>" + 
"		</itemizedlist>" + 
"		<para>" + 
"			After declaring the dependencies from <code>dependency1</code> to <code>dependencyN</code> in XML, the module definition is declared as follows:" + 
"		</para>" + 
"		<programlisting language=\"XML\">" + 
"&lt;module&gt;" + 
"  &lt;name&gt;MyModule&lt;/name&gt;" + 
"  ..." + 
"  &lt;depends&gt;" + 
"    &lt;module&gt;dependency1&lt;/module&gt;" + 
"  &lt;/depends&gt;" + 
"  ..." + 
"  &lt;depends&gt;" + 
"    &lt;module&gt;dependencyN&lt;/module&gt;" + 
"  &lt;/depends&gt;" + 
"&lt;/module&gt;" + 
"</programlisting>" + 
"		<itemizedlist role=\"see-also-list\">" + 
"			<title>See Also:</title>" + 
"			<listitem>" + 
"				<para>" + 
"					<xref linkend=\"Declare_a_Module\" xrefstyle=\"see-also\"/>" + 
"				</para>" + 
"			</listitem>" + 
"		</itemizedlist>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18920-565963+%5BLatest%5D&amp;cf_build_id=18920-565963+05+Dec+2013+14%3A02+en-US+%5BLatest%5D&amp;comment=Title%3A+Declare+an+AMD+Module%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"	</section>" + 
"	<section id=\"Use_jQuery_Module\" remap=\"TID_18921\">" + 
"		<title>Use jQuery Module</title>" + 
"		<para>" + 
"			The portal provides the jQuery library as a <emphasis>jquery</emphasis> module. The module configuration is found in <filename>eXoResources.war</filename> file." + 
"		</para>" + 
"		<itemizedlist>" + 
"			<listitem>" + 
"				<para>" + 
"					To reuse the jQuery version you need to declare a dependency over it." + 
"				</para>" + 
"				<programlisting language=\"XML\">" + 
"&lt;portlet&gt;" + 
"  &lt;name&gt;RequireJSPortlet&lt;/name&gt;" + 
"  &lt;module&gt;" + 
"    &lt;depends&gt;" + 
"      &lt;module&gt;jquery&lt;/module&gt;" + 
"    &lt;/depends&gt;" + 
"&lt;/portlet&gt;" + 
"</programlisting>" + 
"			</listitem>" + 
"			<listitem>" + 
"				<para>" + 
"					The default <emphasis>jquery</emphasis> module alias is <code>$</code> so while using it, it should be named <code>$</code> in the self-executing function:" + 
"				</para>" + 
"				<programlisting language=\"Java\">" + 
"(function($) {" + 
"  ..." + 
"})($);" + 
"</programlisting>" + 
"			</listitem>" + 
"			<listitem>" + 
"				<para>" + 
"					The XML &lt;as&gt; tag is required if your library uses a different name such as <code>jQuery</code>:" + 
"				</para>" + 
"				<programlisting language=\"XML\">" + 
"&lt;portlet&gt;" + 
"  &lt;name&gt;RequireJSPortlet&lt;/name&gt;" + 
"  &lt;module&gt;" + 
"    &lt;depends&gt;" + 
"      &lt;module&gt;jquery&lt;/module&gt;" + 
"      &lt;as&gt;jQuery&lt;/as&gt;" + 
"    &lt;/depends&gt;" + 
"&lt;/portlet&gt;" + 
"</programlisting>" + 
"			</listitem>" + 
"			<listitem>" + 
"				<para>" + 
"					The self-executing function for jQuery is as follows:" + 
"				</para>" + 
"				<programlisting language=\"Java\">" + 
"(function($) {" + 
"  ..." + 
"}(jQuery);" + 
"</programlisting>" + 
"			</listitem>" + 
"		</itemizedlist>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18921-565963+%5BLatest%5D&amp;cf_build_id=18921-565963+05+Dec+2013+14%3A02+en-US+%5BLatest%5D&amp;comment=Title%3A+Use+jQuery+Module%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"	</section>" + 
"	<section id=\"Use_a_Custom_jQuery_Version\" remap=\"TID_18922\">" + 
"		<title>Use a Custom jQuery Version</title>" + 
"		<para>" + 
"			The portal allows integration of other version of jQuery. Products built to run on the Red Hat JBoss Portal may depend on third-party JavaScript frameworks, which in turn depend on other versions of jQuery libraries. For these reasons, deploying other jQuery libraries is sometimes unavoidable. Multiple jQuery instances within a web page conflict over global variables. But the module system allows to use such a library." + 
"		</para>" + 
"		<para>" + 
"			For example, a <emphasis>jQueryPortlet</emphasis> uses jQuery version 1.6.4 to configure two modules." + 
"		</para>" + 
"		<programlisting language=\"XML\">" + 
"&lt;module&gt;" + 
"  &lt;name&gt;jquery-1.6.4&lt;/name&gt;" + 
"  &lt;script&gt;" + 
"    &lt;adapter&gt;" + 
"(function() {" + 
"  &lt;include&gt;/javascript/jquery-1.6.4.js&lt;/include&gt;" + 
"  return jQuery.noConflict(true);" + 
"})();" + 
"    &lt;/adapter&gt;" + 
"  &lt;/script&gt;" + 
"&lt;/module&gt;" + 
"&lt;portlet&gt;" + 
"  &lt;name&gt;jQueryPortlet&lt;/name&gt;" + 
"  ..." + 
"  &lt;depends&gt;" + 
"    &lt;module&gt;jquery-1.6.4&lt;/module&gt;" + 
"  &lt;/depends&gt;" + 
"&lt;/portlet&gt;" + 
"</programlisting>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18922-565963+%5BLatest%5D&amp;cf_build_id=18922-565963+05+Dec+2013+14%3A02+en-US+%5BLatest%5D&amp;comment=Title%3A+Use+a+Custom+jQuery+Version%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"	</section>" + 
"	<section id=\"jQuery_Plug-ins\" remap=\"TID_18923\">" + 
"		<title>jQuery Plug-ins</title>" + 
"		<para>" + 
"			To configure a jQuery plugin and use it in jQueryPluginPortlet portlet." + 
"		</para>" + 
"		<para>" + 
"			For example, the plugin code is a minimal plugin:" + 
"		</para>" + 
"		<example>" + 
"			<title>\"jQuery plugin\"</title>" + 
"			<programlisting language=\"Java\">" + 
"(function($) {" + 
" $.fn.doesPluginWork = function() {" + 
"    alert('YES, it works!');" + 
" };" + 
"})(jQuery);" + 
"</programlisting>" + 
"		</example>" + 
"		<itemizedlist>" + 
"			<listitem>" + 
"				<para>" + 
"					The plugin is then declared as a module:" + 
"				</para>" + 
"				<programlisting language=\"XML\">" + 
"&lt;module&gt;" + 
"  &lt;name&gt;jquery-plugin&lt;/name&gt;" + 
"  &lt;as&gt;jqPlugin&lt;/as&gt;" + 
"  &lt;script&gt;" + 
"    &lt;path&gt;/jqueryPlugin/jquery-plugin.js&lt;/path&gt;" + 
"  &lt;/script&gt;" + 
"  &lt;depends&gt;" + 
"    &lt;module&gt;jquery&lt;/module&gt;" + 
"    &lt;as&gt;jQuery&lt;/as&gt;" + 
"  &lt;/depends&gt;" + 
"&lt;/module&gt;" + 
"</programlisting>" + 
"			</listitem>" + 
"			<listitem>" + 
"				<para>" + 
"					This plugin in ready for use in your portlet:" + 
"				</para>" + 
"				<programlisting language=\"XML\">" + 
"&lt;portlet&gt;" + 
"  &lt;name&gt;jQueryPluginPortlet&lt;/name&gt;" + 
"  &lt;module&gt;" + 
"    &lt;script&gt;" + 
"      &lt;path&gt;/jqueryPlugin/jqueryPluginPortlet.js&lt;/path&gt;" + 
"    &lt;/script&gt;" + 
"    &lt;depends&gt;" + 
"      &lt;module&gt;jquery&lt;/module&gt;" + 
"      &lt;as&gt;$&lt;/as&gt;" + 
"    &lt;/depends&gt;" + 
"    &lt;depends&gt;" + 
"      &lt;module&gt;jquery-plugin&lt;/module&gt;" + 
"    &lt;/depends&gt;" + 
"  &lt;/module&gt;" + 
"&lt;/portlet&gt;" + 
"</programlisting>" + 
"			</listitem>" + 
"		</itemizedlist>" + 
"		<para>" + 
"			Your portlet module should depend on the <emphasis>jquery</emphasis> and the <emphasis>jquery-plugin</emphasis> modules even if it does not use the plugin itself because:" + 
"		</para>" + 
"		<itemizedlist>" + 
"			<listitem>" + 
"				<para>" + 
"					Declaring the dependency on <emphasis>jquery</emphasis> allows you to use the jQuery object." + 
"				</para>" + 
"			</listitem>" + 
"			<listitem>" + 
"				<para>" + 
"					Delcaring the dependency on <emphasis>jquery-plugin</emphasis> ensures that the plugin is loaded in the <emphasis>jquery</emphasis> dependency before it is injected in the portlet module." + 
"				</para>" + 
"			</listitem>" + 
"		</itemizedlist>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18923-565963+%5BLatest%5D&amp;cf_build_id=18923-565963+05+Dec+2013+14%3A02+en-US+%5BLatest%5D&amp;comment=Title%3A+jQuery+Plug-ins%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"	</section>" + 
"	<section id=\"Override_Native_AMD_Module_Dependency\" remap=\"TID_18924\">" + 
"		<title>Override Native AMD Module Dependency</title>" + 
"		<para>" + 
"			In case of a mismatch between a module declared in the native module and the module system of the portal, the <code>as</code> tag is used to rename the dependencies." + 
"		</para>" + 
"		<para>" + 
"			For example, a <filename>foo.js</filename> file defines an AMD module named <code>foo</code> with two dependencies <code>\"dep1\", \"dep2\"</code>:" + 
"		</para>" + 
"		<programlisting language=\"Java\">" + 
"define(\"foo\", [\"dep1\", \"dep2\"], function(a1, a2) {" + 
"  // The module" + 
"});" + 
"</programlisting>" + 
"		<para>" + 
"			The dependencies are declared as <emphasis>module1</emphasis> and <emphasis>module2</emphasis> in the portal, with mismatch in names. To override this, use the <code>as</code> tag and rename the dependencies:" + 
"		</para>" + 
"		<programlisting language=\"XML\">" + 
"&lt;module&gt;" + 
"  &lt;name&gt;foo&lt;/name&gt;" + 
"  &lt;script&gt;" + 
"    &lt;path&gt;/path/to/foo.js&lt;/path&gt;" + 
"  &lt;/script&gt;" + 
"  &lt;depends&gt;" + 
"    &lt;module&gt;module1&lt;/module&gt;" + 
"    &lt;as&gt;dep1&lt;/as&gt;" + 
"  &lt;/depends&gt;" + 
" &lt;depends&gt;" + 
"   &lt;module&gt;module2&lt;/module&gt;" + 
"   &lt;as&gt;dep2&lt;/as&gt;" + 
" &lt;/depends&gt;" + 
"&lt;/module&gt;" + 
"</programlisting>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18924-565963+%5BLatest%5D&amp;cf_build_id=18924-565963+05+Dec+2013+14%3A02+en-US+%5BLatest%5D&amp;comment=Title%3A+Override+Native+AMD+Module+Dependency%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"	</section>" + 
"	<section id=\"CommonJS_modules\" remap=\"TID_18925\">" + 
"		<title>CommonJS modules</title>" + 
"		<para>" + 
"			CommonJS defines its own module format. See the CommonJS wiki for detailed information, which is available at <ulink url=\"http://wiki.commonjs.org/wiki/Modules/1.1\"/>. CommonJS module is not supported natively by the Red Hat JBoss Portal, therefore the <code>adapter</code> format is used to adapt CommonJS modules to work in the portal." + 
"		</para>" + 
"		<para>" + 
"			Two simple CommonJS modules are as follows:" + 
"		</para>" + 
"		<example>" + 
"			<title>math.js</title>" + 
"			<programlisting language=\"Java\">" + 
"exports.add = function() {" + 
"  var sum = 0, i = 0, args = arguments, l = args.length;" + 
"  while (i &lt; l) {" + 
"    sum += args[i++];" + 
"  }" + 
"  return sum;" + 
"};" + 
"</programlisting>" + 
"		</example>" + 
"		<example>" + 
"			<title>increment.js</title>" + 
"			<programlisting language=\"Java\">" + 
"var add = require('math').add;" + 
"exports.inc = function(val) {" + 
"  return add(val, 1);" + 
"};" + 
"</programlisting>" + 
"		</example>" + 
"		<para>" + 
"			CommonJS modules uses the <code>require</code> function which conflicts with the same function in RequireJS. To resolve the conflict in AMD enabled environment, these modules are wrapped and injected to <emphasis>predefined</emphasis> modules such as <emphasis>require</emphasis> , <emphasis>exports,</emphasis> and <emphasis>module</emphasis> provided by RequireJS." + 
"		</para>" + 
"		<para>" + 
"			The portal wraps the code using the &lt;adapter&gt; format as per the configuration:" + 
"		</para>" + 
"		<programlisting language=\"XML\">" + 
"&lt;module&gt;" + 
"  &lt;name&gt;math&lt;/name&gt;" + 
"  &lt;script&gt;" + 
"    &lt;adapter&gt;" + 
"      define([\"require\", \"exports\"], function(require, exports) {" + 
"      &lt;include&gt;/commonjs/math.js&lt;/include&gt;" + 
"      });" + 
"    &lt;/adapter&gt;" + 
"  &lt;/script&gt;" + 
"  &lt;depends&gt;" + 
"    &lt;module&gt;require&lt;/module&gt;" + 
"  &lt;/depends&gt;" + 
"  &lt;depends&gt;" + 
"    &lt;module&gt;exports&lt;/module&gt;" + 
"  &lt;/depends&gt;" + 
"&lt;/module&gt;" + 
"&lt;module&gt;" + 
"  &lt;name&gt;increment&lt;/name&gt;" + 
"  &lt;script&gt;" + 
"    &lt;adapter&gt;" + 
"      define([\"require\", \"exports\", \"math\"], function(require, exports) {" + 
"      &lt;include&gt;/commonjs/increment.js&lt;/include&gt;" + 
"      });" + 
"    &lt;/adapter&gt;" + 
"  &lt;/script&gt;" + 
"  &lt;depends&gt;" + 
"    &lt;module&gt;require&lt;/module&gt;" + 
"  &lt;/depends&gt;" + 
"  &lt;depends&gt;" + 
"    &lt;module&gt;exports&lt;/module&gt;" + 
"  &lt;/depends&gt;" + 
"  &lt;depends&gt;" + 
"    &lt;module&gt;math&lt;/module&gt;" + 
"  &lt;/depends&gt;" + 
"&lt;/module&gt;" + 
"</programlisting>" + 
"		<para>" + 
"			For more information related to modules, see the RequireJS.org documentation available at <ulink url=\"http://requirejs.org/docs/commonjs.html\"/>." + 
"		</para>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18925-565963+%5BLatest%5D&amp;cf_build_id=18925-565963+05+Dec+2013+14%3A02+en-US+%5BLatest%5D&amp;comment=Title%3A+CommonJS+modules%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"	</section>" + 
"	<section id=\"Mustache.js_module\" remap=\"TID_18926\">" + 
"		<title>Mustache.js module</title>" + 
"		<para>" + 
"			<ulink url=\"https://github.com/janl/mustache.js\">Mustache.js</ulink> is a popular JavaScript template engine. Mustache can be executed in different environments such as a global object, as a CommonJS module, or as a native AMD module." + 
"		</para>" + 
"		<para>" + 
"			If \"module\" and \"exports\" dependencies are available, Mustache registers it as a CommonJS module and it is adapted for the portal as per the adapter format as follows:" + 
"		</para>" + 
"		<programlisting language=\"XML\">" + 
"&lt;module&gt;" + 
"  &lt;name&gt;mustache&lt;/name&gt;" + 
"  &lt;script&gt;" + 
"    &lt;adapter&gt;" + 
"define([\"require\", \"exports\", \"module\"], function(require, exports, module) {" + 
"  &lt;include&gt;/requirejs/js/plugins/mustache.js&lt;/include&gt;" + 
"});" + 
"    &lt;/adapter&gt;" + 
"  &lt;/script&gt;" + 
"  &lt;depends&gt;" + 
"    &lt;module&gt;require&lt;/module&gt;" + 
"  &lt;/depends&gt;" + 
"  &lt;depends&gt;" + 
"    &lt;module&gt;exports&lt;/module&gt;" + 
"  &lt;/depends&gt;" + 
"  &lt;depends&gt;" + 
"    &lt;module&gt;module&lt;/module&gt;" + 
"  &lt;/depends&gt;" + 
"&lt;/module&gt;" + 
"</programlisting>" + 
"		<para>" + 
"			The<code>adapter</code> tag is used to declare <emphasis>require</emphasis> , <emphasis>exports</emphasis>, and <emphasis>module</emphasis> dependencies of the CommonJS module. Any module can have Mustache instance injected by declaring it in its dependencies list as follows:" + 
"		</para>" + 
"		<programlisting language=\"XML\">" + 
"&lt;module&gt;" + 
"  &lt;name&gt;foo&lt;/name&gt;" + 
"  ..." + 
"  &lt;depends&gt;" + 
"    &lt;module&gt;mustache&lt;/module&gt;" + 
"  &lt;/depends&gt;" + 
"&lt;/module&gt;" + 
"</programlisting>" + 
"		<programlisting language=\"Java\">" + 
"(function(mustache){" + 
"  //code that use Mustache" + 
"  mustache.render(template);" + 
"})(mustache);" + 
"</programlisting>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18926-565963+%5BLatest%5D&amp;cf_build_id=18926-565963+05+Dec+2013+14%3A02+en-US+%5BLatest%5D&amp;comment=Title%3A+Mustache.js+module%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"	</section>" + 
"	<section id=\"Resource_loading_with_Text.js\" remap=\"TID_18927\">" + 
"		<title>Resource loading with Text.js</title>" + 
"		<para>" + 
"			RequireJS supports loader plugin which allows a module to work as a plugin and use the AMD system for loading web resources efficiently." + 
"		</para>" + 
"		<para>" + 
"			Mustache.js is a javascript template engine. This engine need a template file to parse and generate html. In case of many templates or the template size is large, embedding a template in the page is not a good practice for front-end performance reason. In this case, use <filename>Text.js</filename> to load the separate template files and inject them as dependencies." + 
"		</para>" + 
"		<para>" + 
"			Text.js is a native AMD module, which depends on the <emphasis>module</emphasis> predefined dependency provided by the AMD loader. Due to the native AMD support in the portal, it is easy to declare and use Text.js:" + 
"		</para>" + 
"		<informalexample>" + 
"			<programlisting language=\"XML\">" + 
"&lt;module&gt;" + 
"  &lt;name&gt;text&lt;/name&gt;" + 
"  &lt;script&gt;" + 
"    &lt;path&gt;/requirejs/js/plugins/text.js&lt;/path&gt;" + 
"  &lt;/script&gt;" + 
"  &lt;depends&gt;" + 
"    &lt;module&gt;module&lt;/module&gt;" + 
"  &lt;/depends&gt;" + 
"&lt;/module&gt;" + 
"</programlisting>" + 
"		</informalexample>" + 
"		<para>" + 
"			Use <emphasis>mustache</emphasis> and <emphasis>text</emphasis> modules to load templates and render them in your own module:" + 
"		</para>" + 
"		<programlisting language=\"XML\">" + 
"&lt;portlet&gt;" + 
"  &lt;name&gt;foo&lt;/name&gt;" + 
"  &lt;module&gt;" + 
"    ..." + 
"    &lt;depends&gt;" + 
"      &lt;module&gt;mustache&lt;/module&gt;" + 
"    &lt;/depends&gt;" + 
"    &lt;depends&gt;" + 
"      &lt;module&gt;text&lt;/module&gt;" + 
"      &lt;as&gt;tmpl&lt;/as&gt;" + 
"      &lt;resource&gt;/path/to/template.html&lt;/resource&gt;" + 
"    &lt;/depends&gt;" + 
"  &lt;/module&gt;" + 
"&lt;/portlet&gt;" + 
"</programlisting>" + 
"		<para>" + 
"			The <emphasis>text</emphasis> module is in the dependency list with a &lt;resource&gt; tag. <filename>Text.js</filename> loads that resource template and inject it with the name <code>tmpl</code>. The javascript of the portlet is as follows:" + 
"		</para>" + 
"		<programlisting language=\"Java\">" + 
"function(mustache, tmpl) {" + 
"  var html = mustache.render(tmpl);" + 
"  //append rendered html to DOM" + 
"})(mustache, tmpl);" + 
"</programlisting>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18927-565963+%5BLatest%5D&amp;cf_build_id=18927-565963+05+Dec+2013+14%3A02+en-US+%5BLatest%5D&amp;comment=Title%3A+Resource+loading+with+Text.js%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"	</section>" + 
"</chapter>" + 
"	<chapter id=\"chap-Script_Code_Examples\">" + 
"	<title>Script Code Examples</title>" + 
"	<para role=\"RoleCreateBugPara\">" + 
"		<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18928-565963+%5BLatest%5D&amp;cf_build_id=18928-565963+05+Dec+2013+14%3A02+en-US+%5BLatest%5D&amp;comment=Title%3A+Script+Code+Examples%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"	</para>" + 
"	<section id=\"Accessing_a_module_from_a_script\" remap=\"TID_18929\">" + 
"		<title>Accessing a module from a script</title>" + 
"		<para>" + 
"			To access a module from a script, RequireJS uses the <code>require</code> function to execute a function in the managed context:" + 
"		</para>" + 
"		<programlisting language=\"Java\">" + 
"require([“SHARED/ModuleA”], function(a) {" + 
"// Codes of interacting with module A" + 
"a.doSomething();" + 
"});" + 
"</programlisting>" + 
"		<para>" + 
"			As shown above, use the AMD module name of the module that depend on, <code>PORTLET/ModuleA</code>. The prefix in upper case is the module scope which has a value <code>SHARED</code> , <code>PORTLET</code>, or <code>PORTAL</code> ." + 
"		</para>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18929-565963+%5BLatest%5D&amp;cf_build_id=18929-565963+05+Dec+2013+14%3A02+en-US+%5BLatest%5D&amp;comment=Title%3A+Accessing+a+module+from+a+script%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"	</section>" + 
"	<section id=\"Exposing_jQuery_Version_Globally\" remap=\"TID_18930\">" + 
"		<title>Exposing jQuery Version Globally</title>" + 
"		<para>" + 
"			The built-in jQuery is declared as an AMD module. By default jQuery is not available in the window object of the browser. This example shows how to make it available and allow to write code in a plain script." + 
"		</para>" + 
"		<para>" + 
"			The following script makes jQuery available by mounting the jQuery object in the window object:" + 
"		</para>" + 
"		<programlisting language=\"Java\">" + 
"require( [“SHARED/jquery”], function($) {" + 
"// the ‘$’ in window.$ is alias, you can make the other for yourself." + 
"window.$ = $;" + 
"});" + 
"</programlisting>" + 
"		<para>" + 
"			This script must be integrated as a shared script:" + 
"		</para>" + 
"		<programlisting language=\"XML\">" + 
"&lt;scripts&gt;" + 
"&lt;name&gt;imediatejs&lt;/name&gt;" + 
"&lt;script&gt;" + 
"&lt;path&gt;/myfolder/imediateJScript.js&lt;/path&gt;" + 
"&lt;/script&gt;" + 
"&lt;/scripts&gt;" + 
"</programlisting>" + 
"		<para>" + 
"			A portlet then provide its own script that depends on the script written above:" + 
"		</para>" + 
"		<programlisting language=\"XML\">" + 
"&lt;portlet&gt;" + 
"&lt;name&gt;foo&lt;/name&gt;" + 
"&lt;script&gt;" + 
"&lt;name&gt;portletjs&lt;/name&gt;" + 
"&lt;path&gt;/myfolder/portlet.js&lt;/path&gt;" + 
"&lt;/script&gt;" + 
"&lt;depends&gt;" + 
"&lt;scripts&gt;imediatejs&lt;/scripts&gt;" + 
"&lt;/depends&gt;" + 
"&lt;/scripts&gt;" + 
"</programlisting>" + 
"		<para>" + 
"			The JavaScript is as follows:" + 
"		</para>" + 
"		<programlisting language=\"Java\">" + 
"$(\"#foo\").html(\"&lt;h1&gt;hello global jQuery&lt;/h1&gt;\");" + 
"</programlisting>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18930-565966+%5BLatest%5D&amp;cf_build_id=18930-565966+05+Dec+2013+14%3A07+en-US+%5BLatest%5D&amp;comment=Title%3A+Exposing+jQuery+Version+Globally%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"	</section>" + 
"	<section id=\"Defining_a_custom_global_jQuery\" remap=\"TID_18931\">" + 
"		<title>Defining a custom global jQuery</title>" + 
"		<para>" + 
"			Define a globally-available custom jQuery by reusing existing code, and combine them by:" + 
"		</para>" + 
"		<itemizedlist>" + 
"			<listitem>" + 
"				<para>" + 
"					Using a custom jQuery version." + 
"				</para>" + 
"			</listitem>" + 
"			<listitem>" + 
"				<para>" + 
"					Exposing the portal version of jQuery globally." + 
"				</para>" + 
"			</listitem>" + 
"		</itemizedlist>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18931-565966+%5BLatest%5D&amp;cf_build_id=18931-565966+05+Dec+2013+14%3A07+en-US+%5BLatest%5D&amp;comment=Title%3A+Defining+a+custom+global+jQuery%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"	</section>" + 
"	<section id=\"Using_a_Global_jQuery_plugin\" remap=\"TID_18932\">" + 
"		<title>Using a Global jQuery plugin</title>" + 
"		<para>" + 
"			To implement this example the global jQuery is available should be available before the global jQuery plugin is loaded." + 
"		</para>" + 
"		<para>" + 
"			Now, you know scoping a module to a portlet and that the module is loaded when the portlet is on a page using the <code>PORTLET</code> scope." + 
"		</para>" + 
"		<para>" + 
"			In this example change the scope and use <code>PORTAL</code>. The main difference is that the loading of your plugin is triggered on a specific portal instead of a specific portlet." + 
"		</para>" + 
"		<procedure>" + 
"			<title>Using a global jQuery plugin</title>" + 
"			<step>" + 
"				<para>" + 
"					Create a jQuery plugin as a script named <filename>myPlugin.js</filename> and integrate your plugin." + 
"				</para>" + 
"				<programlisting language=\"Java\">" + 
"require([“SHARED/jquery”], function($) {" + 
"$.fn.myPluginFunction = function() {" + 
"// Your work here;" + 
"};" + 
"});" + 
"</programlisting>" + 
"			</step>" + 
"			<step>" + 
"				<para>" + 
"					Bind the script in the portal and reuse the <code>immediate.js</code> script seen before:" + 
"				</para>" + 
"				<programlisting language=\"XML\">" + 
"&lt;portal&gt;" + 
"&lt;name&gt;classic&lt;/name&gt;" + 
"&lt;scripts&gt;" + 
"&lt;script&gt;" + 
"  &lt;name&gt;myPlugin&lt;/name&gt;" + 
"  &lt;path&gt;/myfolder/myPlugin.js&lt;/path&gt;" + 
"&lt;/script&gt;" + 
"&lt;script&gt;" + 
"  &lt;name&gt;imediatejs&lt;/name&gt;" + 
"  &lt;path&gt;/myfolder/imediateJScript.js&lt;/path&gt;" + 
"&lt;/script&gt;" + 
"&lt;/scripts&gt;" + 
"&lt;/portal&gt;" + 
"</programlisting>" + 
"			</step>" + 
"			<step>" + 
"				<para>" + 
"					The plugin is globally available to use:" + 
"				</para>" + 
"				<programlisting language=\"Java\">" + 
"&lt;script type=”text/javascript”&gt;" + 
"$(‘#foo’).myPluginFunction();" + 
"&lt;/script&gt;" + 
"</programlisting>" + 
"			</step>" + 
"		</procedure>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18932-565966+%5BLatest%5D&amp;cf_build_id=18932-565966+05+Dec+2013+14%3A07+en-US+%5BLatest%5D&amp;comment=Title%3A+Using+a+Global+jQuery+plugin%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"	</section>" + 
"</chapter>" + 
"</part>" + 
"	<part id=\"part-Advanced_Development_Concepts\">" + 
"	<title>Advanced Development Concepts</title>" + 
"	<appendix id=\"appe-The_eXo_Kernel\">" + 
"	<title>The eXo Kernel</title>" + 
"	<section id=\"The_eXo_Kernel\" remap=\"TID_18933\">" + 
"		<title>The eXo Kernel</title>" + 
"		<para>" + 
"			The Red Hat JBoss Portal is built as a set of services on top of a dependency injection kernel. The kernel provides configuration, life-cycle handling, component scopes and some core services." + 
"		</para>" + 
"		<para>" + 
"			The portal kernel and the JCR used in the portal use the <emphasis>Inversion of Control</emphasis> (<emphasis role=\"bold\">IoC</emphasis>) system to control service instantiation. This method is also known as 'dependency injection'." + 
"		</para>" + 
"		<para>" + 
"			In this system, services are not responsible for the instantiation of the components on which they depend. It prevents objects creating the instances of any objects referenced. This task is delegated to the container. The below image illustrates this:" + 
"		</para>" + 
"		<figure>" + 
"			<title id=\"IOC.\">Inversion of Control</title>" + 
"			<mediaobject>" + 
"				<imageobject role=\"html\">" + 
"					<imagedata align=\"center\" fileref=\"images/2858.png\" format=\"PNG\" width=\"444\"/>" + 
"				</imageobject>" + 
"				<textobject>" + 
"					<phrase>Diagram explaining how Inversion of Control works, and how the Assembler plays a key role in controlling dependency injection.</phrase>" + 
"				</textobject>" + 
"			</mediaobject>" + 
"		</figure>" + 
"		<para>" + 
"			There are two ways to inject a dependency :" + 
"		</para>" + 
"		<para>" + 
"			Using a constructor:" + 
"		</para>" + 
"		<programlisting language=\"Java\" role=\"Java\">public ServiceA(ServiceB serviceB)</programlisting>" + 
"		<para>" + 
"			Using setter methods:" + 
"		</para>" + 
"		<programlisting language=\"Java\" role=\"Java\">public void setServiceB(ServiceB serviceB)</programlisting>" + 
"		<para>" + 
"			When a client service can not be stored in the container then the service locator pattern is used:" + 
"		</para>" + 
"		<programlisting language=\"Java\" role=\"Java\">public ServiceA(){" + 
"this.serviceB =Container.getSInstance().getService(ServiceB.class);" + 
"}</programlisting>" + 
"		<para>" + 
"			The container package is responsible of building a hierarchy of containers. Each service will then be registered in one container or the other according to the XML configuration file it is defined in. It is important to understand that there can be several PortalContainer instances that all are children of the RootContainer." + 
"		</para>" + 
"		<para>" + 
"			The behavior of the hierarchy is similar to a class loader one, hence when you will lookup a service that depends on another one, the container will look for it in the current container and if it cannot be found, then it will look in the parent container. That way you can load all the reusable business logic components in the same container (here the RootContainer) and differentiate the service implementation from one portal instance to the other by just loading different service implementations in two sibling PortalContainers." + 
"		</para>" + 
"		<para>" + 
"			Therefore, if you look at the Portal Container as a service repository for all the business logic in a portal instance, then you understand why several PortalContainers allows you to manage several portals (each one deployed as a single war) in the same server by just changing XML configuration files." + 
"		</para>" + 
"		<para>" + 
"			The default configuration XML files are packaged in the service jar. There are three configuration.xml files, one for each container type. In that XML file, we define the list of services and their init parameters that will be loaded in the corresponding container." + 
"		</para>" + 
"		<para>" + 
"			Service components exist in two scopes. The first scope is represented by the <literal>RootContainer</literal>. It contains services that exist independently of any portal, and can be accessed by all portals." + 
"		</para>" + 
"		<para>" + 
"			The second scope, the <literal>PortalContainer</literal>, is portal-specific. Each portal exists in an instance of the <literal>PortalContainer</literal>. This scope contains services that are common for a set of portals, and services which should not be shared by all portals." + 
"		</para>" + 
"		<itemizedlist>" + 
"			<listitem>" + 
"				<para>" + 
"					RootContainer: This is a base container. This container plays an important role during startup, but you should not use it directly." + 
"				</para>" + 
"			</listitem>" + 
"			<listitem>" + 
"				<para>" + 
"					PortalContainer: Created at the startup of the portal web application (in the init() method of the PortalController servlet)" + 
"				</para>" + 
"			</listitem>" + 
"		</itemizedlist>" + 
"		<para>" + 
"			<figure>" + 
"				<title id=\"Portalcontainers\">Portal Containers</title>" + 
"				<mediaobject>" + 
"					<imageobject role=\"html\">" + 
"						<imagedata align=\"center\" fileref=\"images/2905.png\" format=\"PNG\"/>" + 
"					</imageobject>" + 
"					<textobject>" + 
"						<phrase>Diagram with Application Server, Root Container, and two Portal Container layers. Portal Container one has Portal A, Portal B, and Portal C declared. Portal Container Two has Portal D declared.</phrase>" + 
"					</textobject>" + 
"				</mediaobject>" + 
"			</figure>" + 
"		</para>" + 
"		<para>" + 
"			As there can be several portal container instances per JVM. it is important to be able to configure the loaded services per instance. Therefore all the default configuration files located in the service impl jar can be overridden from the portal war." + 
"		</para>" + 
"		<para>" + 
"			Whenever a specific service is looked up through the <literal>PortalContainer</literal>, and the service is not available, the lookup is delegated further up to the <literal>RootContainer</literal>." + 
"		</para>" + 
"		<para>" + 
"			The portal can have default instances of a certain component in the <literal>RootContainer</literal>, and portal specific instances in some or all <literal>PortalContainers</literal>, that override the default instance." + 
"		</para>" + 
"		<para>" + 
"			Whenever your portal application has to be integrated more closely with eXo services, these services can be looked up through the <literal>PortalContainer</literal>." + 
"		</para>" + 
"		<important>" + 
"			<para>" + 
"				Only officially documented services should be accessed this way, and used according to their supporting documentation. Most of the services are an implementation detail of eXo, and subject to change without notice." + 
"			</para>" + 
"		</important>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18933-565966+%5BLatest%5D&amp;cf_build_id=18933-565966+05+Dec+2013+14%3A07+en-US+%5BLatest%5D&amp;comment=Title%3A+The+eXo+Kernel%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"	</section>" + 
"	<section id=\"Kernel_Configuration_Namespace\" remap=\"TID_18934\">" + 
"		<title>Kernel Configuration Namespace</title>" + 
"		<para>" + 
"			To be effective, the namespace URI <uri>http://www.exoplaform.org/xml/ns/kernel_1_2.xsd</uri> must be target namespace of the XML configuration file." + 
"		</para>" + 
"		<programlisting language=\"XML\" role=\"XML\">&lt;configuration xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" " + 
"           xsi:schemaLocation=\"http://www.exoplaform.org/xml/ns/kernel_1_2.xsd http://www.exoplaform.org/xml/ns/kernel_1_2.xsd\"" + 
"           xmlns=\"http://www.exoplaform.org/xml/ns/kernel_1_2.xsd\"&gt;" + 
"" + 
"" + 
"..." + 
"&lt;/configuration&gt;</programlisting>" + 
"		<note>" + 
"			<para>" + 
"				Any values in the configuration files can be created thanks to variables since the eXo kernel resolves them, for example the following configuration will be well interpreted:" + 
"			</para>" + 
"			<programlisting language=\"XML\" role=\"XML\">&lt;configuration" + 
"xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"" + 
"xsi:schemaLocation=\"http://www.exoplaform.org/xml/ns/kernel_1_2.xsd http://www.exoplaform.org/xml/ns/kernel_1_2.xsd\"" + 
"xmlns=\"http://www.exoplaform.org/xml/ns/kernel_1_2.xsd\"&gt;" + 
"" + 
"&lt;import&gt;${db.configuration.path}/db.xml&lt;/import&gt;" + 
"&lt;import&gt;${java.io.tmpdir}/bindfile.xml&lt;/import&gt;" + 
"&lt;import&gt;simple.xml&lt;/import&gt;" + 
"" + 
"&lt;/configuration&gt;</programlisting>" + 
"			<para>" + 
"				The variables that are supported, are System properties and variables that are specific to your portal container, see next sections for more details." + 
"			</para>" + 
"		</note>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18934-565966+%5BLatest%5D&amp;cf_build_id=18934-565966+05+Dec+2013+14%3A07+en-US+%5BLatest%5D&amp;comment=Title%3A+Kernel+Configuration+Namespace%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"	</section>" + 
"	<section id=\"Configuration_Retrieval\" remap=\"TID_18935\">" + 
"		<title>Configuration Retrieval</title>" + 
"		<para>" + 
"			The container performs the following steps for configuration retrieval, depending on the container type." + 
"		</para>" + 
"		<para>" + 
"			The container is initialized by looking into different locations. This container is used by portal applications. Configurations are overloaded in the following lookup sequence:" + 
"		</para>" + 
"		<procedure>" + 
"			<step>" + 
"				<para>" + 
"					Services default " + 
"					<envar>" + 
"						RootContainer" + 
"					</envar> configurations from JAR files <filename>/conf/configuration.xml</filename>." + 
"				</para>" + 
"			</step>" + 
"			<step>" + 
"				<para>" + 
"					Services default " + 
"					<envar>" + 
"						PortalContainer" + 
"					</envar> configurations from JAR files <filename>/conf/portal/configuration.xml</filename>." + 
"				</para>" + 
"			</step>" + 
"			<step>" + 
"				<para>" + 
"					Web applications configurations from WAR files <filename>/WEB-INF/conf/configuration.xml</filename>" + 
"				</para>" + 
"			</step>" + 
"		</procedure>" + 
"		<note>" + 
"			<para>" + 
"				The search looks for a configuration file in each JAR/WAR available from the classpath using the current thread context classloader. During the search these configurations are added to a set. If the service was configured previously and the current JAR contains a new configuration of that service the latest (from the current JAR/WAR) will replace the previous one. The last one will be applied to the service during the services start phase." + 
"			</para>" + 
"		</note>" + 
"		<remark>" + 
"			NEEDINFO - FILE PATHS - the file before was configuration.xml, but I'm pretty sure all this is defined in standalone.xml now, correct?" + 
"		</remark>" + 
"		<warning>" + 
"			<para>" + 
"				Take care to have no dependencies between configurations from JAR files (<filename>/conf/portal/configuration.xml</filename> and <filename>/conf/configuration.xml</filename>) since we have no way to know in advance the loading order of those configurations. In other words, if you want to overload some configuration located in the file <filename>/conf/portal/configuration.xml</filename> of a given JAR file, you must not do it from the file <filename>/conf/portal/configuration.xml</filename> of another JAR file but from another configuration file loaded after configurations from JAR files <filename>/conf/portal/configuration.xml.</filename>" + 
"			</para>" + 
"		</warning>" + 
"		<para>" + 
"			After the processing of all configurations available in system, the container will initialize it and start each service in order of the dependency injection (DI)." + 
"		</para>" + 
"		<para>" + 
"			The user/developer should be careful when configuring the same service in different configuration files. It's recommended to configure a service in its own JAR only. Or, in case of a portal configuration, strictly reconfigure the services in portal WAR files or in an external configuration." + 
"		</para>" + 
"		<para>" + 
"			There are services that can be (or should be) configured more than one time. This depends on business logic of the service. A service may initialize the same resource (shared with other services) or may add a particular object to a set of objects (shared with other services too). In the first case, it's critical who will be the last, i.e. whose configuration will be used. In the second case, it's no matter who is the first and who is the last (if the parameter objects are independent)." + 
"		</para>" + 
"		<para>" + 
"			In case of problems with service configuration, it's important to know from which JAR/WAR it comes. For that purpose, the JVM system property <literal>org.exoplatform.container.configuration.debug</literal> can be used." + 
"		</para>" + 
"		<programlisting>java -Dorg.exoplatform.container.configuration.debug ...</programlisting>" + 
"		<para>" + 
"			If the property is enabled, the container configuration manager will log the configuration adding process at <emphasis>INFO</emphasis> level." + 
"		</para>" + 
"		<programlisting>......" + 
"   Add configuration jar:file:/D:/Projects/eXo/dev/exo-working/exo-tomcat/lib/exo.kernel.container-trunk.jar!/conf/portal/configuration.xml" + 
"   Add configuration jar:file:/D:/Projects/eXo/dev/exo-working/exo-tomcat/lib/exo.kernel.component.cache-trunk.jar!/conf/portal/configuration.xml" + 
"   Add configuration jndi:/localhost/portal/WEB-INF/conf/configuration.xml" + 
"        import jndi:/localhost/portal/WEB-INF/conf/common/common-configuration.xml" + 
"        import jndi:/localhost/portal/WEB-INF/conf/database/database-configuration.xml" + 
"        import jndi:/localhost/portal/WEB-INF/conf/ecm/jcr-component-plugins-configuration.xml" + 
"        import jndi:/localhost/portal/WEB-INF/conf/jcr/jcr-configuration.xml " + 
"   ......</programlisting>" + 
"		<para>" + 
"			The effective configuration of the StandaloneContainer, RootContainer and/or PortalContainer can be known thanks to the method <emphasis>getConfigurationXML</emphasis>() that is exposed through JMX at the container's level. This method will give you the effective configuration in XML format that has been really interpreted by the kernel. This could be helpful to understand how a given component or plug-in has been initialized." + 
"		</para>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18935-565966+%5BLatest%5D&amp;cf_build_id=18935-565966+05+Dec+2013+14%3A07+en-US+%5BLatest%5D&amp;comment=Title%3A+Configuration+Retrieval%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"	</section>" + 
"	<section id=\"sect-PortalContainer_Advanced_Concepts\">" + 
"		<title>PortalContainer Advanced Concepts</title>" + 
"		<para>" + 
"			Since eXo JCR 1.12, a new set of features are available that extend portal applications." + 
"		</para>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18936-565966+%5BLatest%5D&amp;cf_build_id=18936-565966+05+Dec+2013+14%3A07+en-US+%5BLatest%5D&amp;comment=Title%3A+PortalContainer+Advanced+Concepts%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"		<section id=\"Add_new_configuration_files_from_a_WAR_file\" remap=\"TID_18937\">" + 
"			<title>Add new configuration files from a WAR file</title>" + 
"			<para>" + 
"				A " + 
"				<envar>" + 
"					ServletContextListener" + 
"				</envar> called " + 
"				<envar>" + 
"					org.exoplatform.container.web.PortalContainerConfigOwner" + 
"				</envar> has been added in order to notify the application that a given web application provides some configuration to the portal container, and this configuration file is the file <emphasis>WEB-INF/conf/configuration.xml</emphasis> available in the web application itself." + 
"			</para>" + 
"			<para>" + 
"				If your war file contains some configuration to add to the " + 
"				<envar>" + 
"					PortalContainer" + 
"				</envar> simply add the following lines in your <emphasis>web.xml</emphasis> file." + 
"			</para>" + 
"			<programlisting language=\"XML\" role=\"XML\">&lt;?xml version=\"1.0\" encoding=\"ISO-8859-1\" ?&gt;" + 
"&lt;!DOCTYPE web-app PUBLIC \"-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN\"" + 
"                 \"http://java.sun.com/dtd/web-app_2_3.dtd\"&gt;" + 
"&lt;web-app&gt;" + 
"..." + 
"  &lt;!-- ================================================================== --&gt;" + 
"  &lt;!--           LISTENER                                                 --&gt;" + 
"  &lt;!-- ================================================================== --&gt;" + 
"  &lt;listener&gt;" + 
"    &lt;listener-class&gt;org.exoplatform.container.web.PortalContainerConfigOwner&lt;/listener-class&gt;" + 
"  &lt;/listener&gt;" + 
"..." + 
"&lt;/web-app&gt;</programlisting>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18937-565966+%5BLatest%5D&amp;cf_build_id=18937-565966+05+Dec+2013+14%3A07+en-US+%5BLatest%5D&amp;comment=Title%3A+Add+new+configuration+files+from+a+WAR+file%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"		<section id=\"Creating_PortalContainers_from_a_WAR_File\" remap=\"TID_18938\">" + 
"			<title>Creating PortalContainers from a WAR File</title>" + 
"			<para>" + 
"				A ServletContextListener called org.exoplatform.container.web.PortalContainerCreator has been added in order to create the current portal containers that have been registered. We assume that all the web applications have already been loaded before calling PortalContainerCreator.contextInitialized." + 
"			</para>" + 
"			<note>" + 
"				<para>" + 
"					In Red Hat JBoss Portal, the PortalContainerCreator is already managed by the file <filename>starter.war/ear.</filename>" + 
"				</para>" + 
"			</note>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18938-565966+%5BLatest%5D&amp;cf_build_id=18938-565966+05+Dec+2013+14%3A07+en-US+%5BLatest%5D&amp;comment=Title%3A+Creating+PortalContainers+from+a+WAR+File%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"		<section id=\"Defining_a_PortalContainer_with_its_dependencies_and_its_settings\" remap=\"TID_18939\">" + 
"			<title>Defining a PortalContainer with its dependencies and its settings</title>" + 
"			<para>" + 
"				Now we can define precisely a portal container and its dependencies and settings thanks to the " + 
"				<envar>" + 
"					PortalContainerDefinition" + 
"				</envar> that currently contains the name of the portal container, the name of the rest context, the name of the realm, the web application dependencies ordered by loading priority (i.e. the first dependency must be loaded at first and so on..) and the settings." + 
"			</para>" + 
"			<para>" + 
"				To be able to define a " + 
"				<envar>" + 
"					PortalContainerDefinition" + 
"				</envar>, we need to ensure first of all that a " + 
"				<envar>" + 
"					PortalContainerConfig" + 
"				</envar> has been defined at the " + 
"				<envar>" + 
"					RootContainer" + 
"				</envar> level, see an example below:" + 
"			</para>" + 
"			<programlisting language=\"XML\" role=\"XML\">  &lt;component&gt;" + 
"    &lt;!-- The full qualified name of the PortalContainerConfig --&gt;" + 
"    &lt;type&gt;org.exoplatform.container.definition.PortalContainerConfig&lt;/type&gt;" + 
"    &lt;init-params&gt;" + 
"      &lt;!-- The name of the default portal container --&gt;" + 
"      &lt;value-param&gt;" + 
"        &lt;name&gt;default.portal.container&lt;/name&gt;" + 
"        &lt;value&gt;myPortal&lt;/value&gt;" + 
"      &lt;/value-param&gt;" + 
"      &lt;!-- The name of the default rest ServletContext --&gt;" + 
"      &lt;value-param&gt;" + 
"        &lt;name&gt;default.rest.context&lt;/name&gt;" + 
"        &lt;value&gt;myRest&lt;/value&gt;" + 
"      &lt;/value-param&gt;" + 
"      &lt;!-- The name of the default realm --&gt;" + 
"      &lt;value-param&gt;" + 
"        &lt;name&gt;default.realm.name&lt;/name&gt;" + 
"        &lt;value&gt;my-exo-domain&lt;/value&gt;" + 
"      &lt;/value-param&gt;" + 
"     &lt;!-- Indicates whether the unregistered webapps have to be ignored --&gt;" + 
"     &lt;value-param&gt;" + 
"        &lt;name&gt;ignore.unregistered.webapp&lt;/name&gt;" + 
"        &lt;value&gt;true&lt;/value&gt;" + 
"     &lt;/value-param&gt;" + 
"      &lt;!-- The default portal container definition --&gt;" + 
"      &lt;!-- It cans be used to avoid duplicating configuration --&gt;" + 
"      &lt;object-param&gt;" + 
"        &lt;name&gt;default.portal.definition&lt;/name&gt;" + 
"        &lt;object type=\"org.exoplatform.container.definition.PortalContainerDefinition\"&gt;" + 
"          &lt;!-- All the dependencies of the portal container ordered by loading priority --&gt;" + 
"          &lt;field name=\"dependencies\"&gt;" + 
"            &lt;collection type=\"java.util.ArrayList\"&gt;" + 
"              &lt;value&gt;" + 
"                &lt;string&gt;foo&lt;/string&gt;" + 
"              &lt;/value&gt;" + 
"              &lt;value&gt;" + 
"                &lt;string&gt;foo2&lt;/string&gt;" + 
"              &lt;/value&gt;" + 
"              &lt;value&gt;" + 
"                &lt;string&gt;foo3&lt;/string&gt;" + 
"              &lt;/value&gt;" + 
"            &lt;/collection&gt;" + 
"          &lt;/field&gt;        " + 
"          &lt;!-- A map of settings tied to the default portal container --&gt;" + 
"          &lt;field name=\"settings\"&gt;" + 
"            &lt;map type=\"java.util.HashMap\"&gt;" + 
"              &lt;entry&gt;" + 
"                &lt;key&gt;" + 
"                  &lt;string&gt;foo5&lt;/string&gt;" + 
"                &lt;/key&gt;" + 
"                &lt;value&gt;" + 
"                  &lt;string&gt;value&lt;/string&gt;" + 
"                &lt;/value&gt;" + 
"              &lt;/entry&gt;" + 
"              &lt;entry&gt;" + 
"                &lt;key&gt;" + 
"                  &lt;string&gt;string&lt;/string&gt;" + 
"                &lt;/key&gt;" + 
"                &lt;value&gt;" + 
"                  &lt;string&gt;value0&lt;/string&gt;" + 
"                &lt;/value&gt;" + 
"              &lt;/entry&gt;" + 
"              &lt;entry&gt;" + 
"                &lt;key&gt;" + 
"                  &lt;string&gt;int&lt;/string&gt;" + 
"                &lt;/key&gt;" + 
"                &lt;value&gt;" + 
"                  &lt;int&gt;100&lt;/int&gt;" + 
"                &lt;/value&gt;" + 
"              &lt;/entry&gt;" + 
"            &lt;/map&gt;" + 
"          &lt;/field&gt;" + 
"          &lt;!-- The path to the external properties file --&gt;" + 
"          &lt;field name=\"externalSettingsPath\"&gt;" + 
"            &lt;string&gt;classpath:/org/exoplatform/container/definition/default-settings.properties&lt;/string&gt;" + 
"          &lt;/field&gt;" + 
"        &lt;/object&gt;" + 
"      &lt;/object-param&gt;" + 
"    &lt;/init-params&gt;" + 
"  &lt;/component&gt;</programlisting>" + 
"			<remark>" + 
"				TODO - jmorgan- conver to a &lt;variablelist&gt;" + 
"			</remark>" + 
"			<table id=\"table-Descriptions_of_the_fields_of_PortalContainerConfig\">" + 
"				<title>Descriptions of the fields of PortalContainerConfig</title>" + 
"				<tgroup cols=\"2\">" + 
"					<thead>" + 
"						<row>" + 
"							<entry>" + 
"								Parameter Name" + 
"							</entry>" + 
"							<entry>" + 
"								Description" + 
"							</entry>" + 
"						</row>" + 
"					</thead>" + 
"					<tbody>" + 
"						<row>" + 
"							<entry>" + 
"								default.portal.container (*)" + 
"							</entry>" + 
"							<entry>" + 
"								The name of the default portal container. This field is optional." + 
"							</entry>" + 
"						</row>" + 
"						<row>" + 
"							<entry>" + 
"								default.rest.context (*)" + 
"							</entry>" + 
"							<entry>" + 
"								The name of the default rest " + 
"								<envar>" + 
"									ServletContext" + 
"								</envar>. This field is optional." + 
"							</entry>" + 
"						</row>" + 
"						<row>" + 
"							<entry>" + 
"								default.realm.name (*)" + 
"							</entry>" + 
"							<entry>" + 
"								The name of the default realm. This field is optional." + 
"							</entry>" + 
"						</row>" + 
"						<row>" + 
"							<entry>" + 
"								ignore.unregistered.webapp (*)" + 
"							</entry>" + 
"							<entry>" + 
"								Indicates whether the unregistered webapps have to be ignored. If a webapp has not been registered as a dependency of any portal container, the application will use the value of this parameter to know what to do: " + 
"								<itemizedlist>" + 
"									<listitem>" + 
"										<para>" + 
"											If it is set to <emphasis>false</emphasis>, this webapp will be considered by default as a dependency of all the portal containers." + 
"										</para>" + 
"									</listitem>" + 
"									<listitem>" + 
"										<para>" + 
"											If it is set to <emphasis>true</emphasis>, this webapp won't be considered by default as a dependency of any portal container, it will be simply ignored." + 
"										</para>" + 
"									</listitem>" + 
"								</itemizedlist> This field is optional and by default this parameter is set to <emphasis>false</emphasis>." + 
"							</entry>" + 
"						</row>" + 
"						<row>" + 
"							<entry>" + 
"								default.portal.definition" + 
"							</entry>" + 
"							<entry>" + 
"								The definition of the default portal container. This field is optional. The expected type is " + 
"								<envar>" + 
"									org.exoplatform.container. definition.PortalContainerDefinition" + 
"								</envar> that is described below. Allow the parameters defined in this default " + 
"								<envar>" + 
"									PortalContainerDefinition" + 
"								</envar> will be the default values." + 
"							</entry>" + 
"						</row>" + 
"					</tbody>" + 
"				</tgroup>" + 
"			</table>" + 
"			<note>" + 
"				<para>" + 
"					Parameter values marked with a (*) can be defined through System properties like any values in configuration files, and variables loaded by the <emphasis>PropertyConfigurator</emphasis>. For example, in the portal, it would be all the variables defined in the file <emphasis>configuration.properties</emphasis> by default." + 
"				</para>" + 
"			</note>" + 
"			<para>" + 
"				A new " + 
"				<envar>" + 
"					PortalContainerDefinition" + 
"				</envar> can be defined at the " + 
"				<envar>" + 
"					RootContainer" + 
"				</envar> level thanks to an external plug-in, see an example below:" + 
"			</para>" + 
"			<programlisting language=\"XML\" role=\"XML\">  &lt;external-component-plugins&gt;" + 
"    &lt;!-- The full qualified name of the PortalContainerConfig --&gt;" + 
"    &lt;target-component&gt;org.exoplatform.container.definition.PortalContainerConfig&lt;/target-component&gt;" + 
"    &lt;component-plugin&gt;" + 
"      &lt;!-- The name of the plugin --&gt;" + 
"      &lt;name&gt;Add PortalContainer Definitions&lt;/name&gt;" + 
"      &lt;!-- The name of the method to call on the PortalContainerConfig in order to register the PortalContainerDefinitions --&gt;" + 
"      &lt;set-method&gt;registerPlugin&lt;/set-method&gt;" + 
"      &lt;!-- The full qualified name of the PortalContainerDefinitionPlugin --&gt;" + 
"      &lt;type&gt;org.exoplatform.container.definition.PortalContainerDefinitionPlugin&lt;/type&gt;" + 
"      &lt;init-params&gt;" + 
"        &lt;object-param&gt;" + 
"          &lt;name&gt;portal&lt;/name&gt;" + 
"          &lt;object type=\"org.exoplatform.container.definition.PortalContainerDefinition\"&gt;" + 
"            &lt;!-- The name of the portal container --&gt;" + 
"            &lt;field name=\"name\"&gt;" + 
"              &lt;string&gt;myPortal&lt;/string&gt;" + 
"            &lt;/field&gt;" + 
"            &lt;!-- The name of the context name of the rest web application --&gt;" + 
"            &lt;field name=\"restContextName\"&gt;" + 
"              &lt;string&gt;myRest&lt;/string&gt;" + 
"            &lt;/field&gt;" + 
"            &lt;!-- The name of the realm --&gt;" + 
"            &lt;field name=\"realmName\"&gt;" + 
"              &lt;string&gt;my-domain&lt;/string&gt;" + 
"            &lt;/field&gt;" + 
"            &lt;!-- All the dependencies of the portal container ordered by loading priority --&gt;" + 
"            &lt;field name=\"dependencies\"&gt;" + 
"              &lt;collection type=\"java.util.ArrayList\"&gt;" + 
"                &lt;value&gt;" + 
"                  &lt;string&gt;foo&lt;/string&gt;" + 
"                &lt;/value&gt;" + 
"                &lt;value&gt;" + 
"                  &lt;string&gt;foo2&lt;/string&gt;" + 
"                &lt;/value&gt;" + 
"                &lt;value&gt;" + 
"                  &lt;string&gt;foo3&lt;/string&gt;" + 
"                &lt;/value&gt;" + 
"              &lt;/collection&gt;" + 
"            &lt;/field&gt;" + 
"            &lt;!-- A map of settings tied to the portal container --&gt;" + 
"            &lt;field name=\"settings\"&gt;" + 
"              &lt;map type=\"java.util.HashMap\"&gt;" + 
"                &lt;entry&gt;" + 
"                  &lt;key&gt;" + 
"                    &lt;string&gt;foo&lt;/string&gt;" + 
"                  &lt;/key&gt;" + 
"                  &lt;value&gt;" + 
"                    &lt;string&gt;value&lt;/string&gt;" + 
"                  &lt;/value&gt;" + 
"                &lt;/entry&gt;" + 
"                &lt;entry&gt;" + 
"                  &lt;key&gt;" + 
"                    &lt;string&gt;int&lt;/string&gt;" + 
"                  &lt;/key&gt;" + 
"                  &lt;value&gt;" + 
"                    &lt;int&gt;10&lt;/int&gt;" + 
"                  &lt;/value&gt;" + 
"                &lt;/entry&gt;" + 
"                &lt;entry&gt;" + 
"                  &lt;key&gt;" + 
"                    &lt;string&gt;long&lt;/string&gt;" + 
"                  &lt;/key&gt;" + 
"                  &lt;value&gt;" + 
"                    &lt;long&gt;10&lt;/long&gt;" + 
"                  &lt;/value&gt;" + 
"                &lt;/entry&gt;" + 
"                &lt;entry&gt;" + 
"                  &lt;key&gt;" + 
"                    &lt;string&gt;double&lt;/string&gt;" + 
"                  &lt;/key&gt;" + 
"                  &lt;value&gt;" + 
"                    &lt;double&gt;10&lt;/double&gt;" + 
"                  &lt;/value&gt;" + 
"                &lt;/entry&gt;" + 
"                &lt;entry&gt;" + 
"                  &lt;key&gt;" + 
"                    &lt;string&gt;boolean&lt;/string&gt;" + 
"                  &lt;/key&gt;" + 
"                  &lt;value&gt;" + 
"                    &lt;boolean&gt;true&lt;/boolean&gt;" + 
"                  &lt;/value&gt;" + 
"                &lt;/entry&gt;                                " + 
"              &lt;/map&gt;" + 
"            &lt;/field&gt;            " + 
"            &lt;!-- The path to the external properties file --&gt;" + 
"            &lt;field name=\"externalSettingsPath\"&gt;" + 
"              &lt;string&gt;classpath:/org/exoplatform/container/definition/settings.properties&lt;/string&gt;" + 
"            &lt;/field&gt;" + 
"          &lt;/object&gt;" + 
"        &lt;/object-param&gt;" + 
"      &lt;/init-params&gt;" + 
"    &lt;/component-plugin&gt;" + 
"  &lt;/external-component-plugins&gt;</programlisting>" + 
"			<remark>" + 
"				TODO - jmorgan- conver to a &lt;variablelist&gt;" + 
"			</remark>" + 
"			<table id=\"table-Descriptions_of_the_fields_of_a_PortalContainerDefinition_when_it_is_used_to_define_a_new_portal_container\">" + 
"				<title>Descriptions of the fields of a PortalContainerDefinition when it is used to define a new portal container</title>" + 
"				<tgroup cols=\"2\">" + 
"					<thead>" + 
"						<row>" + 
"							<entry>" + 
"								Parameter Name" + 
"							</entry>" + 
"							<entry>" + 
"								Description" + 
"							</entry>" + 
"						</row>" + 
"					</thead>" + 
"					<tbody>" + 
"						<row>" + 
"							<entry>" + 
"								name (*)" + 
"							</entry>" + 
"							<entry>" + 
"								The name of the portal container. This field is mandatory ." + 
"							</entry>" + 
"						</row>" + 
"						<row>" + 
"							<entry>" + 
"								restContextName (*)" + 
"							</entry>" + 
"							<entry>" + 
"								The name of the context name of the rest web application. This field is optional. The default value will be defined at the " + 
"								<envar>" + 
"									PortalContainerConfig" + 
"								</envar> level." + 
"							</entry>" + 
"						</row>" + 
"						<row>" + 
"							<entry>" + 
"								realmName (*)" + 
"							</entry>" + 
"							<entry>" + 
"								The name of the realm. This field is optional. The default value will be defined at the " + 
"								<envar>" + 
"									PortalContainerConfig" + 
"								</envar> level." + 
"							</entry>" + 
"						</row>" + 
"						<row>" + 
"							<entry>" + 
"								dependencies" + 
"							</entry>" + 
"							<entry>" + 
"								All the dependencies of the portal container ordered by loading priority. This field is optional. The default value will be defined at the " + 
"								<envar>" + 
"									PortalContainerConfig" + 
"								</envar> level. The dependencies are in fact the list of the context names of the web applications from which the portal container depends. This field is optional. The dependency order is really crucial since it will be interpreted the same way by several components of the platform. All those components, will consider the 1st element in the list less important than the second element and so on. It is currently used to: " + 
"								<itemizedlist>" + 
"									<listitem>" + 
"										<para>" + 
"											Know the loading order of all the dependencies." + 
"										</para>" + 
"									</listitem>" + 
"									<listitem>" + 
"										<para>" + 
"											If we have several " + 
"											<envar>" + 
"												PortalContainerConfigOwner" + 
"											</envar>" + 
"											<itemizedlist>" + 
"												<listitem>" + 
"													<para>" + 
"														The " + 
"														<envar>" + 
"															ServletContext" + 
"														</envar> of all the " + 
"														<envar>" + 
"															PortalContainerConfigOwner" + 
"														</envar> will be unified, if we use the unified " + 
"														<envar>" + 
"															ServletContext" + 
"														</envar> (<emphasis>PortalContainer.getPortalContext()</emphasis>) to get a resource, it will try to get the resource in the " + 
"														<envar>" + 
"															ServletContext" + 
"														</envar> of the most important " + 
"														<envar>" + 
"															PortalContainerConfigOwner" + 
"														</envar> (i.e. last in the dependency list) and if it cans find it, it will try with the second most important " + 
"														<envar>" + 
"															PortalContainerConfigOwner" + 
"														</envar> and so on." + 
"													</para>" + 
"												</listitem>" + 
"												<listitem>" + 
"													<para>" + 
"														The " + 
"														<envar>" + 
"															ClassLoader" + 
"														</envar> of all the " + 
"														<envar>" + 
"															PortalContainerConfigOwner" + 
"														</envar> will be unified, if we use the unified " + 
"														<envar>" + 
"															ClassLoader" + 
"														</envar> (<emphasis>PortalContainer.getPortalClassLoader()</emphasis>) to get a resource, it will try to get the resource in the " + 
"														<envar>" + 
"															ClassLoader" + 
"														</envar> of the most important " + 
"														<envar>" + 
"															PortalContainerConfigOwner" + 
"														</envar> (i.e. last in the dependency list) and if it can find it, it will try with the second most important " + 
"														<envar>" + 
"															PortalContainerConfigOwner" + 
"														</envar> and so on." + 
"													</para>" + 
"												</listitem>" + 
"											</itemizedlist>" + 
"										</para>" + 
"									</listitem>" + 
"								</itemizedlist>" + 
"							</entry>" + 
"						</row>" + 
"						<row>" + 
"							<entry>" + 
"								settings" + 
"							</entry>" + 
"							<entry>" + 
"								A " + 
"								<envar>" + 
"									java.util.Map" + 
"								</envar> of internal parameters that we would like to tie the portal container. Those parameters could have any type of value. This field is optional. If some internal settings are defined at the " + 
"								<envar>" + 
"									PortalContainerConfig" + 
"								</envar> level, the two maps of settings will be merged. If a setting with the same name is defined in both maps, it will keep the value defined at the " + 
"								<envar>" + 
"									PortalContainerDefinition" + 
"								</envar> level." + 
"							</entry>" + 
"						</row>" + 
"						<row>" + 
"							<entry>" + 
"								externalSettingsPath" + 
"							</entry>" + 
"							<entry>" + 
"								The path of the external properties file to load as default settings to the portal container. This field is optional. If some external settings are defined at the " + 
"								<envar>" + 
"									PortalContainerConfig" + 
"								</envar> level, the two maps of settings will be merged. If a setting with the same name is defined in both maps, it will keep the value defined at the " + 
"								<envar>" + 
"									PortalContainerDefinition" + 
"								</envar> level. The external properties files can be either of type \"properties\" or of type \"xml\". The path will be interpreted as follows: " + 
"								<orderedlist>" + 
"									<listitem>" + 
"										<para>" + 
"											The path doesn't contain any prefix of type \"classpath:\", \"jar:\" or \"file:\", we assume that the file could be externalized so we apply the following rules: " + 
"											<orderedlist>" + 
"												<listitem>" + 
"													<para>" + 
"														A file exists at <emphasis>${exo-conf-dir}/portal/${portalContainerName}/${externalSettingsPath}</emphasis>, we will load this file." + 
"													</para>" + 
"												</listitem>" + 
"												<listitem>" + 
"													<para>" + 
"														No file exists at the previous path, we then assume that the path can be interpreted by the " + 
"														<envar>" + 
"															ConfigurationManager" + 
"														</envar>." + 
"													</para>" + 
"												</listitem>" + 
"											</orderedlist>" + 
"										</para>" + 
"									</listitem>" + 
"									<listitem>" + 
"										<para>" + 
"											The path contains a prefix, we then assume that the path can be interpreted by the " + 
"											<envar>" + 
"												ConfigurationManager" + 
"											</envar>." + 
"										</para>" + 
"									</listitem>" + 
"								</orderedlist>" + 
"							</entry>" + 
"						</row>" + 
"					</tbody>" + 
"				</tgroup>" + 
"			</table>" + 
"			<remark>" + 
"				TODO - jmorgan- conver to a &lt;variablelist&gt; and see what overlap of the default and the new portal has. I think two varlists for similar content is overkill." + 
"			</remark>" + 
"			<table id=\"table-Descriptions_of_the_fields_of_a_PortalContainerDefinition_when_it_is_used_to_define_the_default_portal_container\">" + 
"				<title>Descriptions of the fields of a PortalContainerDefinition when it is used to define the default portal container</title>" + 
"				<tgroup cols=\"2\">" + 
"					<thead>" + 
"						<row>" + 
"							<entry>" + 
"								Parameter Name" + 
"							</entry>" + 
"							<entry>" + 
"								Description" + 
"							</entry>" + 
"						</row>" + 
"					</thead>" + 
"					<tbody>" + 
"						<row>" + 
"							<entry>" + 
"								name (*)" + 
"							</entry>" + 
"							<entry>" + 
"								The name of the portal container. This field is optional. The default portal name will be: " + 
"								<orderedlist>" + 
"									<listitem>" + 
"										<para>" + 
"											If this field is not empty, then the default value will be the value of this field." + 
"										</para>" + 
"									</listitem>" + 
"									<listitem>" + 
"										<para>" + 
"											If this field is empty and the value of the parameter <emphasis>default.portal.container</emphasis> is not empty, then the default value will be the value of the parameter." + 
"										</para>" + 
"									</listitem>" + 
"									<listitem>" + 
"										<para>" + 
"											If this field and the parameter <emphasis>default.portal.container</emphasis> are both empty, the default value will be <emphasis>\"portal\".</emphasis>" + 
"										</para>" + 
"									</listitem>" + 
"								</orderedlist>" + 
"							</entry>" + 
"						</row>" + 
"						<row>" + 
"							<entry>" + 
"								restContextName (*)" + 
"							</entry>" + 
"							<entry>" + 
"								The name of the context name of the rest web application. This field is optional. The default value will be: " + 
"								<orderedlist>" + 
"									<listitem>" + 
"										<para>" + 
"											If this field is not empty, then the default value will be the value of this field." + 
"										</para>" + 
"									</listitem>" + 
"									<listitem>" + 
"										<para>" + 
"											If this field is empty and the value of the parameter <emphasis>default.rest.context</emphasis> is not empty, then the default value will be the value of the parameter." + 
"										</para>" + 
"									</listitem>" + 
"									<listitem>" + 
"										<para>" + 
"											If this field and the parameter <emphasis>default.rest.context</emphasis> are both empty, the default value will be <emphasis>\"rest\".</emphasis>" + 
"										</para>" + 
"									</listitem>" + 
"								</orderedlist>" + 
"							</entry>" + 
"						</row>" + 
"						<row>" + 
"							<entry>" + 
"								realmName (*)" + 
"							</entry>" + 
"							<entry>" + 
"								The name of the realm. This field is optional. The default value will be: " + 
"								<orderedlist>" + 
"									<listitem>" + 
"										<para>" + 
"											If this field is not empty, then the default value will be the value of this field." + 
"										</para>" + 
"									</listitem>" + 
"									<listitem>" + 
"										<para>" + 
"											If this field is empty and the value of the parameter <emphasis>default.realm.name</emphasis> is not empty, then the default value will be the value of the parameter." + 
"										</para>" + 
"									</listitem>" + 
"									<listitem>" + 
"										<para>" + 
"											If this field and the parameter <emphasis>default.realm.name</emphasis> are both empty, the default value will be <emphasis>\"exo-domain\".</emphasis>" + 
"										</para>" + 
"									</listitem>" + 
"								</orderedlist>" + 
"							</entry>" + 
"						</row>" + 
"						<row>" + 
"							<entry>" + 
"								dependencies" + 
"							</entry>" + 
"							<entry>" + 
"								All the dependencies of the portal container ordered by loading priority. This field is optional. If this field has a non empty value, it will be the default list of dependencies." + 
"							</entry>" + 
"						</row>" + 
"						<row>" + 
"							<entry>" + 
"								settings" + 
"							</entry>" + 
"							<entry>" + 
"								A " + 
"								<envar>" + 
"									java.util.Map" + 
"								</envar> of internal parameters that we would like to tie the default portal container. Those parameters could have any type of value. This field is optional." + 
"							</entry>" + 
"						</row>" + 
"						<row>" + 
"							<entry>" + 
"								externalSettingsPath" + 
"							</entry>" + 
"							<entry>" + 
"								The path of the external properties file to load as default settings to the default portal container. This field is optional. The external properties files can be either of type \"properties\" or of type \"xml\". The path will be interpreted as follows: " + 
"								<orderedlist>" + 
"									<listitem>" + 
"										<para>" + 
"											The path doesn't contain any prefix of type \"classpath:\", \"jar:\" or \"file:\", we assume that the file could be externalized so we apply the following rules: " + 
"											<orderedlist>" + 
"												<listitem>" + 
"													<para>" + 
"														A file exists at <emphasis>${exo-conf-dir}/portal/${externalSettingsPath}</emphasis>, we will load this file." + 
"													</para>" + 
"												</listitem>" + 
"												<listitem>" + 
"													<para>" + 
"														No file exists at the previous path, we then assume that the path can be interpreted by the " + 
"														<envar>" + 
"															ConfigurationManager" + 
"														</envar>." + 
"													</para>" + 
"												</listitem>" + 
"											</orderedlist>" + 
"										</para>" + 
"									</listitem>" + 
"									<listitem>" + 
"										<para>" + 
"											The path contains a prefix, we then assume that the path can be interpreted by the " + 
"											<envar>" + 
"												ConfigurationManager" + 
"											</envar>." + 
"										</para>" + 
"									</listitem>" + 
"								</orderedlist>" + 
"							</entry>" + 
"						</row>" + 
"					</tbody>" + 
"				</tgroup>" + 
"			</table>" + 
"			<note>" + 
"				<para>" + 
"					Parameter values marked with an asterix (*) can be defined through System properties like any values in configuration files, and variables loaded by the <emphasis>PropertyConfigurator</emphasis>. For example, in the portal it would be all the variables defined in the file <emphasis>configuration.properties</emphasis> by default." + 
"				</para>" + 
"			</note>" + 
"			<para>" + 
"				Internal and external settings are both optional, but if we give a non empty value for both the application will merge the settings. If the same setting name exists in both settings, we apply the following rules:" + 
"			</para>" + 
"			<orderedlist>" + 
"				<listitem>" + 
"					<para>" + 
"						The value of the external setting is <emphasis>null</emphasis>, we ignore the value." + 
"					</para>" + 
"				</listitem>" + 
"				<listitem>" + 
"					<para>" + 
"						The value of the external setting is not <emphasis>null</emphasis> and the value of the internal setting is <emphasis>null</emphasis>, the final value will be the external setting value that is of type " + 
"						<envar>" + 
"							String" + 
"						</envar>." + 
"					</para>" + 
"				</listitem>" + 
"				<listitem>" + 
"					<para>" + 
"						Both values are not " + 
"						<envar>" + 
"							null" + 
"						</envar>, we will have to convert the external setting value into the target type which is the type of the internal setting value, thanks to the static method <emphasis>valueOf(String)</emphasis>, the following sub-rules are then applied:" + 
"					</para>" + 
"					<orderedlist>" + 
"						<listitem>" + 
"							<para>" + 
"								The method cannot be found, the final value will be the external setting value that is of type " + 
"								<envar>" + 
"									String" + 
"								</envar>." + 
"							</para>" + 
"						</listitem>" + 
"						<listitem>" + 
"							<para>" + 
"								The method can be found and the external setting value is an empty " + 
"								<envar>" + 
"									String" + 
"								</envar>, we ignore the external setting value." + 
"							</para>" + 
"						</listitem>" + 
"						<listitem>" + 
"							<para>" + 
"								The method can be found and the external setting value is not an empty " + 
"								<envar>" + 
"									String" + 
"								</envar> but the method call fails, we ignore the external setting value." + 
"							</para>" + 
"						</listitem>" + 
"						<listitem>" + 
"							<para>" + 
"								The method can be found and the external setting value is not an empty " + 
"								<envar>" + 
"									String" + 
"								</envar> and the method call succeeds, the final value will be the external setting value that is of type of the internal setting value." + 
"							</para>" + 
"						</listitem>" + 
"					</orderedlist>" + 
"				</listitem>" + 
"			</orderedlist>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18939-565966+%5BLatest%5D&amp;cf_build_id=18939-565966+05+Dec+2013+14%3A07+en-US+%5BLatest%5D&amp;comment=Title%3A+Defining+a+PortalContainer+with+its+dependencies+and+its+settings%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"		<section id=\"PortalContainer_Settings\" remap=\"TID_18940\">" + 
"			<title>PortalContainer Settings</title>" + 
"			<para>" + 
"				We can inject the value of the portal container settings into the portal container configuration files thanks to the variables which name start with \"<emphasis>portal.container.</emphasis>\", so to get the value of a setting called \"<emphasis>foo</emphasis>\", just use the following syntax <emphasis>${portal.container.foo}</emphasis>. You can also use internal variables, such as:" + 
"			</para>" + 
"			<variablelist>" + 
"				<title>PortalContainer Internal Variables</title>" + 
"				<varlistentry>" + 
"					<term> portal.container.name</term>" + 
"					<listitem>" + 
"						<para>" + 
"							Gives the name of the current portal container." + 
"						</para>" + 
"					</listitem>" + 
"				</varlistentry>" + 
"				<varlistentry>" + 
"					<term> portal.container.rest</term>" + 
"					<listitem>" + 
"						<para>" + 
"							Gives the context name of the rest web application of the current portal container." + 
"						</para>" + 
"					</listitem>" + 
"				</varlistentry>" + 
"				<varlistentry>" + 
"					<term> portal.container.realm</term>" + 
"					<listitem>" + 
"						<para>" + 
"							Gives the realm name of the current portal container." + 
"						</para>" + 
"					</listitem>" + 
"				</varlistentry>" + 
"			</variablelist>" + 
"			<para>" + 
"				You can find below an example of how to use the variables:" + 
"			</para>" + 
"			<programlisting language=\"XML\" role=\"XML\">&lt;configuration xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://www.exoplaform.org/xml/ns/kernel_1_2.xsd http://www.exoplaform.org/xml/ns/kernel_1_2.xsd\"" + 
"  xmlns=\"http://www.exoplaform.org/xml/ns/kernel_1_2.xsd\"&gt;" + 
"  &lt;component&gt;" + 
"    &lt;type&gt;org.exoplatform.container.TestPortalContainer$MyComponent&lt;/type&gt;" + 
"    &lt;init-params&gt;" + 
"      &lt;!-- The name of the portal container --&gt;" + 
"      &lt;value-param&gt;" + 
"        &lt;name&gt;portal&lt;/name&gt;" + 
"        &lt;value&gt;${portal.container.name}&lt;/value&gt;" + 
"      &lt;/value-param&gt;" + 
"      &lt;!-- The name of the rest ServletContext --&gt;" + 
"      &lt;value-param&gt;" + 
"        &lt;name&gt;rest&lt;/name&gt;" + 
"        &lt;value&gt;${portal.container.rest}&lt;/value&gt;" + 
"      &lt;/value-param&gt;" + 
"      &lt;!-- The name of the realm --&gt;" + 
"      &lt;value-param&gt;" + 
"        &lt;name&gt;realm&lt;/name&gt;" + 
"        &lt;value&gt;${portal.container.realm}&lt;/value&gt;" + 
"      &lt;/value-param&gt;" + 
"      &lt;value-param&gt;" + 
"        &lt;name&gt;foo&lt;/name&gt;" + 
"        &lt;value&gt;${portal.container.foo}&lt;/value&gt;" + 
"      &lt;/value-param&gt;" + 
"      &lt;value-param&gt;" + 
"        &lt;name&gt;before foo after&lt;/name&gt;" + 
"        &lt;value&gt;before ${portal.container.foo} after&lt;/value&gt;" + 
"      &lt;/value-param&gt;" + 
"    &lt;/init-params&gt;" + 
"  &lt;/component&gt;" + 
"&lt;/configuration&gt;</programlisting>" + 
"			<para>" + 
"				In the properties file corresponding to the external settings, you can reuse variables previously defined (in the external settings or in the internal settings) to create a new variable. In this case, the prefix \"<emphasis>portal.container.</emphasis>\" is not needed, see an example below: " + 
"				<programlisting>my-var1=value 1" + 
"my-var2=value 2" + 
"complex-value=${my-var1}-${my-var2}</programlisting>" + 
"			</para>" + 
"			<para>" + 
"				In the external and internal settings, you can also use create variables based on value of System parameters. The System parameters can either be defined at launch time or thanks to the " + 
"				<envar>" + 
"					PropertyConfigurator" + 
"				</envar> (see next section for more details). See an example below:" + 
"			</para>" + 
"			<programlisting>temp-dir=${java.io.tmpdir}${file.separator}my-temp</programlisting>" + 
"			<para>" + 
"				However, for the internal settings, you can use System parameters only to define settings of type " + 
"				<envar>" + 
"					java.lang.String" + 
"				</envar>." + 
"			</para>" + 
"			<para>" + 
"				It cans be also very useful to define a generic variable in the settings of the default portal container, the value of this variable will change according to the current portal container. See below an example: " + 
"				<programlisting>my-generic-var=value of the portal container \"${name}\"</programlisting>" + 
"			</para>" + 
"			<para>" + 
"				If this variable is defined at the default portal container level, the value of this variable for a portal container called <emphasis>\"foo\"</emphasis> will be <emphasis>value of the portal container \"foo\"</emphasis>." + 
"			</para>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18940-565966+%5BLatest%5D&amp;cf_build_id=18940-565966+05+Dec+2013+14%3A07+en-US+%5BLatest%5D&amp;comment=Title%3A+PortalContainer+Settings%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"		<section id=\"sect-Dynamically_Changing_a_PortalContainerDefinition\">" + 
"			<title>Dynamically Changing a PortalContainerDefinition</title>" + 
"			<para>" + 
"				It is possible to use " + 
"				<envar>" + 
"					component-plugin" + 
"				</envar> elements in order to dynamically change a PortalContainerDefinition. In This example, we add the dependency " + 
"				<envar>" + 
"					foo" + 
"				</envar> to the default portal container and to the portal containers called " + 
"				<envar>" + 
"					foo1" + 
"				</envar> and " + 
"				<envar>" + 
"					foo2" + 
"				</envar>:" + 
"			</para>" + 
"			<programlisting language=\"XML\" role=\"XML\">&lt;external-component-plugins&gt;" + 
"  &lt;!-- The full qualified name of the PortalContainerConfig --&gt;" + 
"  &lt;target-component&gt;org.exoplatform.container.definition.PortalContainerConfig&lt;/target-component&gt;" + 
"  &lt;component-plugin&gt;" + 
"    &lt;!-- The name of the plugin --&gt;" + 
"    &lt;name&gt;Change PortalContainer Definitions&lt;/name&gt;" + 
"    &lt;!-- The name of the method to call on the PortalContainerConfig in order to register the changes on the PortalContainerDefinitions --&gt;" + 
"    &lt;set-method&gt;registerChangePlugin&lt;/set-method&gt;" + 
"    &lt;!-- The full qualified name of the PortalContainerDefinitionChangePlugin --&gt;" + 
"    &lt;type&gt;org.exoplatform.container.definition.PortalContainerDefinitionChangePlugin&lt;/type&gt;" + 
"    &lt;init-params&gt;" + 
"      &lt;value-param&gt;" + 
"        &lt;name&gt;apply.default&lt;/name&gt;" + 
"        &lt;value&gt;true&lt;/value&gt;" + 
"      &lt;/value-param&gt;" + 
"      &lt;values-param&gt;" + 
"        &lt;name&gt;apply.specific&lt;/name&gt;" + 
"        &lt;value&gt;foo1&lt;/value&gt;" + 
"        &lt;value&gt;foo2&lt;/value&gt;" + 
"      &lt;/values-param&gt;  " + 
"      &lt;object-param&gt;" + 
"        &lt;name&gt;change&lt;/name&gt;" + 
"        &lt;object type=\"org.exoplatform.container.definition.PortalContainerDefinitionChange$AddDependencies\"&gt;" + 
"          &lt;!-- The list of name of the dependencies to add --&gt;" + 
"          &lt;field name=\"dependencies\"&gt;" + 
"            &lt;collection type=\"java.util.ArrayList\"&gt;" + 
"              &lt;value&gt;" + 
"                &lt;string&gt;foo&lt;/string&gt;" + 
"              &lt;/value&gt;" + 
"            &lt;/collection&gt;" + 
"          &lt;/field&gt;" + 
"        &lt;/object&gt;" + 
"      &lt;/object-param&gt;     " + 
"    &lt;/init-params&gt;" + 
"  &lt;/component-plugin&gt;" + 
"&lt;/external-component-plugins&gt;</programlisting>" + 
"			<variablelist>" + 
"				<title>PortalContainerDefinitionChangePlugin Parameters</title>" + 
"				<note>" + 
"					<para>" + 
"						Parameter values marked with a (*) can be defined through System properties like any values in configuration files, and variables loaded by the <emphasis>PropertyConfigurator</emphasis>. For example, in the portal it would be all the variables defined in the file <emphasis>configuration.properties</emphasis> by default." + 
"					</para>" + 
"				</note>" + 
"				<varlistentry>" + 
"					<term>apply.all (*)</term>" + 
"					<listitem>" + 
"						<para>" + 
"							Indicates whether the changes have to be applied to all the portal containers or not. The default value of this field is " + 
"							<envar>" + 
"								false" + 
"							</envar>. This field is a " + 
"							<envar>" + 
"								ValueParam" + 
"							</envar> and is not mandatory." + 
"						</para>" + 
"					</listitem>" + 
"				</varlistentry>" + 
"				<varlistentry>" + 
"					<term>apply.default (*)</term>" + 
"					<listitem>" + 
"						<para>" + 
"							Indicates whether the changes have to be applied to the default portal container or not. The default value of this field is " + 
"							<envar>" + 
"								false" + 
"							</envar>. This field is a " + 
"							<envar>" + 
"								ValueParam" + 
"							</envar> and is not mandatory." + 
"						</para>" + 
"					</listitem>" + 
"				</varlistentry>" + 
"				<varlistentry>" + 
"					<term>apply.specific (*)</term>" + 
"					<listitem>" + 
"						<para>" + 
"							A set of specific portal container names to which we want to apply the changes. This field is a " + 
"							<envar>" + 
"								ValuesParam" + 
"							</envar> and is not mandatory." + 
"						</para>" + 
"					</listitem>" + 
"				</varlistentry>" + 
"			</variablelist>" + 
"			<note>" + 
"				<title>Other Expected Parameters</title>" + 
"				<para>" + 
"					The rest of the expected parameters are " + 
"					<envar>" + 
"						ObjectParam" + 
"					</envar> of type " + 
"					<envar>" + 
"						PortalContainerDefinitionChange" + 
"					</envar>. Those parameters are in fact the list of changes that we want to apply to one or several portal containers. If the list of changes is empty, the component plug-in will be ignored. The supported implementations of PortalContainerDefinitionChange are described later in this section." + 
"				</para>" + 
"			</note>" + 
"			<para>" + 
"				To identify the portal containers to which the changes have to be applied, we use the following algorithm:" + 
"			</para>" + 
"			<orderedlist>" + 
"				<listitem>" + 
"					<para>" + 
"						The parameter " + 
"						<envar>" + 
"							apply.all" + 
"						</envar> has been set to " + 
"						<envar>" + 
"							true" + 
"						</envar>. The corresponding changes will be applied to all the portal containers. The other parameters will be ignored." + 
"					</para>" + 
"				</listitem>" + 
"				<listitem>" + 
"					<para>" + 
"						The parameter " + 
"						<envar>" + 
"							apply.default" + 
"						</envar> has been set to " + 
"						<envar>" + 
"							true" + 
"						</envar> and the parameter " + 
"						<envar>" + 
"							apply.specific" + 
"						</envar> is " + 
"						<envar>" + 
"							null" + 
"						</envar>. The corresponding changes will be applied to the default portal container only." + 
"					</para>" + 
"				</listitem>" + 
"				<listitem>" + 
"					<para>" + 
"						The parameter " + 
"						<envar>" + 
"							apply.default" + 
"						</envar> has been set to " + 
"						<envar>" + 
"							true" + 
"						</envar> and the parameter " + 
"						<envar>" + 
"							apply.specific" + 
"						</envar> is not " + 
"						<envar>" + 
"							null" + 
"						</envar>. The corresponding changes will be applied to the default portal container and the given list of specific portal containers." + 
"					</para>" + 
"				</listitem>" + 
"				<listitem>" + 
"					<para>" + 
"						The parameter " + 
"						<envar>" + 
"							apply.default" + 
"						</envar> has been set to " + 
"						<envar>" + 
"							false" + 
"						</envar> or has not been set and the parameter " + 
"						<envar>" + 
"							apply.specific" + 
"						</envar> is " + 
"						<envar>" + 
"							null" + 
"						</envar>. The corresponding changes will be applied to the default portal container only." + 
"					</para>" + 
"				</listitem>" + 
"				<listitem>" + 
"					<para>" + 
"						The parameter " + 
"						<envar>" + 
"							apply.default" + 
"						</envar> has been set to " + 
"						<envar>" + 
"							false" + 
"						</envar> or has not been set and the parameter " + 
"						<envar>" + 
"							apply.specific" + 
"						</envar> is not " + 
"						<envar>" + 
"							null" + 
"						</envar>. The corresponding changes will be applied to the given list of specific portal containers." + 
"					</para>" + 
"				</listitem>" + 
"			</orderedlist>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18941-565966+%5BLatest%5D&amp;cf_build_id=18941-565966+05+Dec+2013+14%3A07+en-US+%5BLatest%5D&amp;comment=Title%3A+Dynamically+Changing+a+PortalContainerDefinition%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"			<section id=\"sect-PortalContainerDefinitionChange_Implementations\">" + 
"				<title>PortalContainerDefinitionChange Implementations</title>" + 
"				<para>" + 
"					The modifications that can be applied to a " + 
"					<envar>" + 
"						PortalContainerDefinition" + 
"					</envar> must be a class of type " + 
"					<envar>" + 
"						PortalContainerDefinitionChange" + 
"					</envar>. The product ships implementations described in the following sections." + 
"				</para>" + 
"				<para role=\"RoleCreateBugPara\">" + 
"					<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18942-565966+%5BLatest%5D&amp;cf_build_id=18942-565966+05+Dec+2013+14%3A07+en-US+%5BLatest%5D&amp;comment=Title%3A+PortalContainerDefinitionChange+Implementations%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"				</para>" + 
"				<section id=\"AddDependencies\" remap=\"TID_18943\">" + 
"					<title>AddDependencies</title>" + 
"					<para>" + 
"						This modification adds a list of dependencies at the end of the list of dependencies defined into the " + 
"						<envar>" + 
"							PortalContainerDefinition" + 
"						</envar>. The full qualified name is <emphasis>org.exoplatform.container.definition.PortalContainerDefinitionChange$AddDependencies</emphasis>." + 
"					</para>" + 
"					<variablelist>" + 
"						<title>AddDependencies Parameters</title>" + 
"						<varlistentry>" + 
"							<term> dependencies</term>" + 
"							<listitem>" + 
"								<para>" + 
"									A list of <emphasis>String</emphasis> corresponding to the list of dependency names to add. If the field is unpopulated, the change is ignored." + 
"								</para>" + 
"							</listitem>" + 
"						</varlistentry>" + 
"					</variablelist>" + 
"					<example>" + 
"						<title>Appending a Dependency</title>" + 
"						<para>" + 
"							This example adds " + 
"							<envar>" + 
"								foo" + 
"							</envar> at the end of the dependency list of the default portal container." + 
"						</para>" + 
"						<programlisting language=\"XML\" role=\"XML\">&lt;external-component-plugins&gt;" + 
"  &lt;!-- The full qualified name of the PortalContainerConfig --&gt;" + 
"  &lt;target-component&gt;org.exoplatform.container.definition.PortalContainerConfig&lt;/target-component&gt;" + 
"  &lt;component-plugin&gt;" + 
"    &lt;!-- The name of the plugin --&gt;" + 
"    &lt;name&gt;Change PortalContainer Definitions&lt;/name&gt;" + 
"    &lt;!-- The name of the method to call on the PortalContainerConfig in order to register the changes on the PortalContainerDefinitions --&gt;" + 
"    &lt;set-method&gt;registerChangePlugin&lt;/set-method&gt;" + 
"    &lt;!-- The full qualified name of the PortalContainerDefinitionChangePlugin --&gt;" + 
"    &lt;type&gt;org.exoplatform.container.definition.PortalContainerDefinitionChangePlugin&lt;/type&gt;" + 
"    &lt;init-params&gt;" + 
"      &lt;value-param&gt;" + 
"        &lt;name&gt;apply.default&lt;/name&gt;" + 
"        &lt;value&gt;true&lt;/value&gt;" + 
"      &lt;/value-param&gt;" + 
"      &lt;object-param&gt;" + 
"        &lt;name&gt;change&lt;/name&gt;" + 
"        &lt;object type=\"org.exoplatform.container.definition.PortalContainerDefinitionChange$AddDependencies\"&gt;" + 
"          &lt;!-- The list of name of the dependencies to add --&gt;" + 
"          &lt;field name=\"dependencies\"&gt;" + 
"            &lt;collection type=\"java.util.ArrayList\"&gt;" + 
"              &lt;value&gt;" + 
"                &lt;string&gt;foo&lt;/string&gt;" + 
"              &lt;/value&gt;" + 
"            &lt;/collection&gt;" + 
"          &lt;/field&gt;" + 
"        &lt;/object&gt;" + 
"      &lt;/object-param&gt;     " + 
"    &lt;/init-params&gt;" + 
"  &lt;/component-plugin&gt;" + 
"&lt;/external-component-plugins&gt;</programlisting>" + 
"					</example>" + 
"					<para role=\"RoleCreateBugPara\">" + 
"						<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18943-565966+%5BLatest%5D&amp;cf_build_id=18943-565966+05+Dec+2013+14%3A07+en-US+%5BLatest%5D&amp;comment=Title%3A+AddDependencies%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"					</para>" + 
"				</section>" + 
"				<section id=\"AddDependenciesBefore\" remap=\"TID_18944\">" + 
"					<title>AddDependenciesBefore</title>" + 
"					<para>" + 
"						This modification adds a list of dependencies before a given target dependency defined into the list of dependencies of the " + 
"						<envar>" + 
"							PortalContainerDefinition" + 
"						</envar>. The full qualified name is <emphasis>org.exoplatform.container.definition.PortalContainerDefinitionChange$AddDependenciesBefore</emphasis>." + 
"					</para>" + 
"					<variablelist>" + 
"						<title>AddDependenciesBefore Parameters</title>" + 
"						<varlistentry>" + 
"							<term> dependencies</term>" + 
"							<listitem>" + 
"								<para>" + 
"									A list of <emphasis>String</emphasis> corresponding to the list of dependency names to add. If the field is unpopulated, the change is ignored." + 
"								</para>" + 
"							</listitem>" + 
"						</varlistentry>" + 
"						<varlistentry>" + 
"							<term> target</term>" + 
"							<listitem>" + 
"								<para>" + 
"									The name of the dependency before which the new dependencies should be added. If this field is " + 
"									<envar>" + 
"										null" + 
"									</envar> or the target dependency cannot be found in the list of dependencies defined into the " + 
"									<envar>" + 
"										PortalContainerDefinition" + 
"									</envar>, the new dependencies will be added in first position to the list." + 
"								</para>" + 
"							</listitem>" + 
"						</varlistentry>" + 
"					</variablelist>" + 
"					<example>" + 
"						<title>Adding Multiple Dependencies</title>" + 
"						<para>" + 
"							This example adds " + 
"							<envar>" + 
"								foo" + 
"							</envar> before " + 
"							<envar>" + 
"								foo2" + 
"							</envar> in the dependency list of the default portal container." + 
"						</para>" + 
"						<programlisting language=\"XML\" role=\"XML\">&lt;external-component-plugins&gt;" + 
"  &lt;!-- The full qualified name of the PortalContainerConfig --&gt;" + 
"  &lt;target-component&gt;org.exoplatform.container.definition.PortalContainerConfig&lt;/target-component&gt;" + 
"  &lt;component-plugin&gt;" + 
"    &lt;!-- The name of the plugin --&gt;" + 
"    &lt;name&gt;Change PortalContainer Definitions&lt;/name&gt;" + 
"    &lt;!-- The name of the method to call on the PortalContainerConfig in order to register the changes on the PortalContainerDefinitions --&gt;" + 
"    &lt;set-method&gt;registerChangePlugin&lt;/set-method&gt;" + 
"    &lt;!-- The full qualified name of the PortalContainerDefinitionChangePlugin --&gt;" + 
"    &lt;type&gt;org.exoplatform.container.definition.PortalContainerDefinitionChangePlugin&lt;/type&gt;" + 
"    &lt;init-params&gt;" + 
"      &lt;value-param&gt;" + 
"        &lt;name&gt;apply.default&lt;/name&gt;" + 
"        &lt;value&gt;true&lt;/value&gt;" + 
"      &lt;/value-param&gt;" + 
"      &lt;object-param&gt;" + 
"        &lt;name&gt;change&lt;/name&gt;" + 
"        &lt;object type=\"org.exoplatform.container.definition.PortalContainerDefinitionChange$AddDependenciesBefore\"&gt;" + 
"          &lt;!-- The list of name of the dependencies to add --&gt;" + 
"          &lt;field name=\"dependencies\"&gt;" + 
"            &lt;collection type=\"java.util.ArrayList\"&gt;" + 
"              &lt;value&gt;" + 
"                &lt;string&gt;foo&lt;/string&gt;" + 
"              &lt;/value&gt;" + 
"            &lt;/collection&gt;" + 
"          &lt;/field&gt;" + 
"          &lt;!-- The name of the target dependency --&gt;" + 
"          &lt;field name=\"target\"&gt;" + 
"            &lt;string&gt;foo2&lt;/string&gt;" + 
"          &lt;/field&gt;" + 
"        &lt;/object&gt;" + 
"      &lt;/object-param&gt;     " + 
"    &lt;/init-params&gt;" + 
"  &lt;/component-plugin&gt;" + 
"&lt;/external-component-plugins&gt;</programlisting>" + 
"					</example>" + 
"					<para role=\"RoleCreateBugPara\">" + 
"						<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18944-565966+%5BLatest%5D&amp;cf_build_id=18944-565966+05+Dec+2013+14%3A07+en-US+%5BLatest%5D&amp;comment=Title%3A+AddDependenciesBefore%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"					</para>" + 
"				</section>" + 
"				<section id=\"AddDependenciesAfter\" remap=\"TID_18945\">" + 
"					<title>AddDependenciesAfter</title>" + 
"					<para>" + 
"						This modification adds a list of dependencies before a given target dependency defined into the list of dependencies of the " + 
"						<envar>" + 
"							PortalContainerDefinition" + 
"						</envar>. The full qualified name is <emphasis>org.exoplatform.container.definition.PortalContainerDefinitionChange$AddDependenciesAfter</emphasis>." + 
"					</para>" + 
"					<variablelist>" + 
"						<title>AddDependenciesAfter Parameters</title>" + 
"						<varlistentry>" + 
"							<term> dependencies</term>" + 
"							<listitem>" + 
"								<para>" + 
"									A list of <emphasis>String</emphasis> corresponding to the list of dependency names to add. If the field is unpopulated, the change is ignored." + 
"								</para>" + 
"							</listitem>" + 
"						</varlistentry>" + 
"						<varlistentry>" + 
"							<term> target</term>" + 
"							<listitem>" + 
"								<para>" + 
"									The name of the dependency before which the new dependencies should be added. If this field is " + 
"									<envar>" + 
"										null" + 
"									</envar> or the target dependency cannot be found in the list of dependencies defined into the " + 
"									<envar>" + 
"										PortalContainerDefinition" + 
"									</envar>, the new dependencies will be added in first position to the list." + 
"								</para>" + 
"							</listitem>" + 
"						</varlistentry>" + 
"					</variablelist>" + 
"					<example>" + 
"						<title>Adding Dependencies After</title>" + 
"						<para>" + 
"							This example adds " + 
"							<envar>" + 
"								foo" + 
"							</envar> after " + 
"							<envar>" + 
"								foo2" + 
"							</envar> in the dependency list of the default portal container." + 
"						</para>" + 
"						<programlisting language=\"XML\" role=\"XML\">&lt;external-component-plugins&gt;" + 
"  &lt;!-- The full qualified name of the PortalContainerConfig --&gt;" + 
"  &lt;target-component&gt;org.exoplatform.container.definition.PortalContainerConfig&lt;/target-component&gt;" + 
"  &lt;component-plugin&gt;" + 
"    &lt;!-- The name of the plugin --&gt;" + 
"    &lt;name&gt;Change PortalContainer Definitions&lt;/name&gt;" + 
"    &lt;!-- The name of the method to call on the PortalContainerConfig in order to register the changes on the PortalContainerDefinitions --&gt;" + 
"    &lt;set-method&gt;registerChangePlugin&lt;/set-method&gt;" + 
"    &lt;!-- The full qualified name of the PortalContainerDefinitionChangePlugin --&gt;" + 
"    &lt;type&gt;org.exoplatform.container.definition.PortalContainerDefinitionChangePlugin&lt;/type&gt;" + 
"    &lt;init-params&gt;" + 
"      &lt;value-param&gt;" + 
"        &lt;name&gt;apply.default&lt;/name&gt;" + 
"        &lt;value&gt;true&lt;/value&gt;" + 
"      &lt;/value-param&gt;" + 
"      &lt;object-param&gt;" + 
"        &lt;name&gt;change&lt;/name&gt;" + 
"        &lt;object type=\"org.exoplatform.container.definition.PortalContainerDefinitionChange$AddDependenciesAfter\"&gt;" + 
"          &lt;!-- The list of name of the dependencies to add --&gt;" + 
"          &lt;field name=\"dependencies\"&gt;" + 
"            &lt;collection type=\"java.util.ArrayList\"&gt;" + 
"              &lt;value&gt;" + 
"                &lt;string&gt;foo&lt;/string&gt;" + 
"              &lt;/value&gt;" + 
"            &lt;/collection&gt;" + 
"          &lt;/field&gt;" + 
"          &lt;!-- The name of the target dependency --&gt;" + 
"          &lt;field name=\"target\"&gt;" + 
"            &lt;string&gt;foo2&lt;/string&gt;" + 
"          &lt;/field&gt;" + 
"        &lt;/object&gt;" + 
"      &lt;/object-param&gt;     " + 
"    &lt;/init-params&gt;" + 
"  &lt;/component-plugin&gt;" + 
"&lt;/external-component-plugins&gt;</programlisting>" + 
"					</example>" + 
"					<para role=\"RoleCreateBugPara\">" + 
"						<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18945-565966+%5BLatest%5D&amp;cf_build_id=18945-565966+05+Dec+2013+14%3A07+en-US+%5BLatest%5D&amp;comment=Title%3A+AddDependenciesAfter%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"					</para>" + 
"				</section>" + 
"				<section id=\"AddSettings\" remap=\"TID_18946\">" + 
"					<title>AddSettings</title>" + 
"					<para>" + 
"						This modification adds new settings to a " + 
"						<envar>" + 
"							PortalContainerDefinition" + 
"						</envar>. The full qualified name is <emphasis>org.exoplatform.container.definition.PortalContainerDefinitionChange$AddSettings</emphasis>." + 
"					</para>" + 
"					<variablelist>" + 
"						<title>AddSettings Parameters</title>" + 
"						<varlistentry>" + 
"							<term> settings</term>" + 
"							<listitem>" + 
"								<para>" + 
"									A map of <emphasis>&lt;String, Object&gt;</emphasis> corresponding to the settings to add. The change is ignored if the value of this field is empty." + 
"								</para>" + 
"							</listitem>" + 
"						</varlistentry>" + 
"					</variablelist>" + 
"					<example>" + 
"						<title>Add Settings</title>" + 
"						<para>" + 
"							This example adds the settings " + 
"							<envar>" + 
"								string" + 
"							</envar> and " + 
"							<envar>" + 
"								stringX" + 
"							</envar> to the settings of the default portal container." + 
"						</para>" + 
"						<programlisting language=\"XML\" role=\"XML\">&lt;external-component-plugins&gt;" + 
"  &lt;!-- The full qualified name of the PortalContainerConfig --&gt;" + 
"  &lt;target-component&gt;org.exoplatform.container.definition.PortalContainerConfig&lt;/target-component&gt;" + 
"  &lt;component-plugin&gt;" + 
"    &lt;!-- The name of the plugin --&gt;" + 
"    &lt;name&gt;Change PortalContainer Definitions&lt;/name&gt;" + 
"    &lt;!-- The name of the method to call on the PortalContainerConfig in order to register the changes on the PortalContainerDefinitions --&gt;" + 
"    &lt;set-method&gt;registerChangePlugin&lt;/set-method&gt;" + 
"    &lt;!-- The full qualified name of the PortalContainerDefinitionChangePlugin --&gt;" + 
"    &lt;type&gt;org.exoplatform.container.definition.PortalContainerDefinitionChangePlugin&lt;/type&gt;" + 
"    &lt;init-params&gt;" + 
"      &lt;value-param&gt;" + 
"        &lt;name&gt;apply.default&lt;/name&gt;" + 
"        &lt;value&gt;true&lt;/value&gt;" + 
"      &lt;/value-param&gt;" + 
"      &lt;object-param&gt;" + 
"        &lt;name&gt;change&lt;/name&gt;" + 
"        &lt;object type=\"org.exoplatform.container.definition.PortalContainerDefinitionChange$AddSettings\"&gt;" + 
"          &lt;!-- The settings to add to the to the portal containers --&gt;" + 
"          &lt;field name=\"settings\"&gt;" + 
"            &lt;map type=\"java.util.HashMap\"&gt;" + 
"              &lt;entry&gt;" + 
"                &lt;key&gt;" + 
"                  &lt;string&gt;string&lt;/string&gt;" + 
"                &lt;/key&gt;" + 
"                &lt;value&gt;" + 
"                  &lt;string&gt;value1&lt;/string&gt;" + 
"                &lt;/value&gt;" + 
"              &lt;/entry&gt;" + 
"              &lt;entry&gt;" + 
"                &lt;key&gt;" + 
"                  &lt;string&gt;stringX&lt;/string&gt;" + 
"                &lt;/key&gt;" + 
"                &lt;value&gt;" + 
"                  &lt;string&gt;value1&lt;/string&gt;" + 
"                &lt;/value&gt;" + 
"              &lt;/entry&gt;" + 
"            &lt;/map&gt;" + 
"          &lt;/field&gt;" + 
"        &lt;/object&gt;" + 
"      &lt;/object-param&gt;     " + 
"    &lt;/init-params&gt;" + 
"  &lt;/component-plugin&gt;" + 
"&lt;/external-component-plugins&gt;</programlisting>" + 
"					</example>" + 
"					<para role=\"RoleCreateBugPara\">" + 
"						<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18946-565966+%5BLatest%5D&amp;cf_build_id=18946-565966+05+Dec+2013+14%3A07+en-US+%5BLatest%5D&amp;comment=Title%3A+AddSettings%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"					</para>" + 
"				</section>" + 
"			</section>" + 
"		</section>" + 
"		<section id=\"Dynamically_Disable_a_Portal_Container\" remap=\"TID_18947\">" + 
"			<title>Dynamically Disable a Portal Container</title>" + 
"			<para>" + 
"				It is possible to use " + 
"				<envar>" + 
"					component-plugin" + 
"				</envar> elements to dynamically disable one or more portal containers." + 
"			</para>" + 
"			<example>" + 
"				<title>Disabling a Portal Container</title>" + 
"				<para>" + 
"					The example shows how to disable the portal container named " + 
"					<envar>" + 
"						foo" + 
"					</envar>." + 
"				</para>" + 
"				<programlisting language=\"XML\" role=\"XML\">&lt;external-component-plugins&gt;" + 
"  &lt;!-- The full qualified name of the PortalContainerConfig --&gt;" + 
"  &lt;target-component&gt;org.exoplatform.container.definition.PortalContainerConfig&lt;/target-component&gt;" + 
"  &lt;component-plugin&gt;" + 
"    &lt;!-- The name of the plugin --&gt;" + 
"    &lt;name&gt;Disable a PortalContainer&lt;/name&gt;" + 
"    &lt;!-- The name of the method to call on the PortalContainerConfig in order to register the changes on the PortalContainerDefinitions --&gt;" + 
"    &lt;set-method&gt;registerDisablePlugin&lt;/set-method&gt;" + 
"    &lt;!-- The full qualified name of the PortalContainerDefinitionDisablePlugin --&gt;" + 
"    &lt;type&gt;org.exoplatform.container.definition.PortalContainerDefinitionDisablePlugin&lt;/type&gt;" + 
"    &lt;init-params&gt;" + 
"      &lt;!-- The list of the name of the portal containers to disable --&gt;" + 
"      &lt;values-param&gt;" + 
"        &lt;name&gt;names&lt;/name&gt;" + 
"        &lt;value&gt;foo&lt;/value&gt;" + 
"      &lt;/values-param&gt;" + 
"    &lt;/init-params&gt;" + 
"  &lt;/component-plugin&gt;" + 
"&lt;/external-component-plugins&gt;</programlisting>" + 
"			</example>" + 
"			<variablelist>" + 
"				<title>PortalContainerDefinitionDisablePlugin Parameters</title>" + 
"				<varlistentry>" + 
"					<term>names (*)</term>" + 
"					<listitem>" + 
"						<para>" + 
"							Specifies a list of portal container names to disable." + 
"						</para>" + 
"					</listitem>" + 
"				</varlistentry>" + 
"			</variablelist>" + 
"			<note>" + 
"				<para>" + 
"					Values of parameters marked with a (*) can be defined through System properties like any values in configuration files, and variables loaded by the <emphasis>PropertyConfigurator</emphasis>. For example, in the portal it would be all the variables defined in the file <emphasis>configuration.properties</emphasis> by default." + 
"				</para>" + 
"			</note>" + 
"			<para>" + 
"				To prevent access to a disabled web application corresponding to " + 
"				<envar>" + 
"					PortalContainer" + 
"				</envar>, ensure the following HTTP Filter (or a sub class of it) has been added to the web.xml file, at the beginning of the file." + 
"			</para>" + 
"			<programlisting language=\"XML\" role=\"XML\">&lt;filter&gt;" + 
"  &lt;filter-name&gt;PortalContainerFilter&lt;/filter-name&gt;" + 
"  &lt;filter-class&gt;org.exoplatform.container.web.PortalContainerFilter&lt;/filter-class&gt;" + 
"&lt;/filter&gt;  " + 
"" + 
"&lt;filter-mapping&gt;" + 
"  &lt;filter-name&gt;PortalContainerFilter&lt;/filter-name&gt;" + 
"  &lt;url-pattern&gt;/*&lt;/url-pattern&gt;" + 
"&lt;/filter-mapping&gt;</programlisting>" + 
"			<note>" + 
"				<para>" + 
"					It is only possible to disable a portal container when at least one PortalContainerDefinition has been registered." + 
"				</para>" + 
"			</note>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18947-565966+%5BLatest%5D&amp;cf_build_id=18947-565966+05+Dec+2013+14%3A07+en-US+%5BLatest%5D&amp;comment=Title%3A+Dynamically+Disable+a+Portal+Container%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"	</section>" + 
"	<section id=\"Runtime_Configuration_Profiles\" remap=\"TID_18948\">" + 
"		<title>Runtime Configuration Profiles</title>" + 
"		<para>" + 
"			The kernel configuration is able to handle configuration profiles at runtime (as opposed to packaging time)." + 
"		</para>" + 
"		<para>" + 
"			An active profile list is obtained during the boot of the root container and is composed of the system property <emphasis>exo.profiles</emphasis> sliced according the \",\" delimiter and also a server specific profile value (tomcat for tomcat, jboss for jboss, etc...)." + 
"		</para>" + 
"		<programlisting>" + 
"# runs the portal with the profiles jboss, foo and bar" + 
"sh run.sh -Dexo.profiles=foo,bar</programlisting>" + 
"		<para>" + 
"			Profile activation occurs in XML to configure object unmarshalling time. It is based on a \"profile\" attribute that is present on some of the XML elements of the configuration files. The configuration is based on the following rules:" + 
"		</para>" + 
"		<orderedlist>" + 
"			<listitem>" + 
"				<para>" + 
"					Any kernel element with the no <emphasis>profiles</emphasis> attribute will create a configuration object" + 
"				</para>" + 
"			</listitem>" + 
"			<listitem>" + 
"				<para>" + 
"					Any kernel element having a <emphasis>profiles</emphasis> attribute containing at least one of the active profiles will create a configuration object" + 
"				</para>" + 
"			</listitem>" + 
"			<listitem>" + 
"				<para>" + 
"					Any kernel element having a <emphasis>profiles</emphasis> attribute matching none of the active profile will not create a configuration object" + 
"				</para>" + 
"			</listitem>" + 
"			<listitem>" + 
"				<para>" + 
"					Resolution of duplicates (such as two components with same type) is left up to the kernel" + 
"				</para>" + 
"			</listitem>" + 
"		</orderedlist>" + 
"		<para>" + 
"			A &lt;configuration&gt; element is profiles-capable when it carries a &lt;profiles&gt; element." + 
"		</para>" + 
"		<variablelist>" + 
"			<title>Profiles-capable Configuration Directives</title>" + 
"			<varlistentry>" + 
"				<term>&lt;component&gt;</term>" + 
"				<listitem>" + 
"					<para>" + 
"						The &lt;component&gt; element declares a component when activated. It will shadow any element with the same key declared before in the same configuration file:" + 
"					</para>" + 
"					<programlisting language=\"XML\" role=\"XML\">&lt;component&gt;" + 
"  &lt;key&gt;Component&lt;/key&gt;" + 
"  &lt;type&gt;Component&lt;/type&gt;" + 
"&lt;/component&gt;" + 
"" + 
"&lt;component profiles=\"foo\"&gt;" + 
"  &lt;key&gt;Component&lt;/key&gt;" + 
"  &lt;type&gt;FooComponent&lt;/type&gt;" + 
"&lt;/component&gt;</programlisting>" + 
"				</listitem>" + 
"			</varlistentry>" + 
"			<varlistentry>" + 
"				<term>&lt;component-plugin&gt;</term>" + 
"				<listitem>" + 
"					<para>" + 
"						The &lt;component-plugin&gt; element is used to dynamically extend the configuration of a given component. Thanks to the profiles the &lt;component-plugin&gt; elements can be enabled or disabled:" + 
"					</para>" + 
"					<programlisting language=\"XML\" role=\"XML\">&lt;external-component-plugins&gt;" + 
"  &lt;target-component&gt;Component&lt;/target-component&gt;" + 
"  &lt;component-plugin profiles=\"foo\"&gt;" + 
"    &lt;name&gt;foo&lt;/name&gt;" + 
"    &lt;set-method&gt;addPlugin&lt;/set-method&gt;" + 
"    &lt;type&gt;type&lt;/type&gt;" + 
"    &lt;init-params&gt;" + 
"      &lt;value-param&gt;" + 
"        &lt;name&gt;param&lt;/name&gt;" + 
"        &lt;value&gt;empty&lt;/value&gt;" + 
"      &lt;/value-param&gt;" + 
"    &lt;/init-params&gt;" + 
"  &lt;/component-plugin&gt;" + 
"&lt;/external-component-plugins&gt;</programlisting>" + 
"				</listitem>" + 
"			</varlistentry>" + 
"			<varlistentry>" + 
"				<term>&lt;import&gt;</term>" + 
"				<listitem>" + 
"					<para>" + 
"						The &lt;import&gt; element imports a referenced configuration file when activated:" + 
"					</para>" + 
"					<programlisting language=\"XML\" role=\"XML\">&lt;import&gt;empty&lt;/import&gt;" + 
"&lt;import profiles=\"foo\"&gt;foo&lt;/import&gt;" + 
"&lt;import profiles=\"bar\"&gt;bar&lt;/import&gt;</programlisting>" + 
"				</listitem>" + 
"			</varlistentry>" + 
"			<varlistentry>" + 
"				<term>&lt;init-params&gt;</term>" + 
"				<listitem>" + 
"					<para>" + 
"						The &lt;init-params&gt; element configures the parameter argument of the construction of a component service:" + 
"					</para>" + 
"					<programlisting language=\"XML\" role=\"XML\">&lt;component&gt;" + 
"  &lt;key&gt;Component&lt;/key&gt;" + 
"  &lt;type&gt;ComponentImpl&lt;/type&gt;" + 
"  &lt;init-params&gt;" + 
"    &lt;value-param&gt;" + 
"      &lt;name&gt;param&lt;/name&gt;" + 
"      &lt;value&gt;empty&lt;/value&gt;" + 
"    &lt;/value-param&gt;" + 
"    &lt;value-param profiles=\"foo\"&gt;" + 
"      &lt;name&gt;param&lt;/name&gt;" + 
"      &lt;value&gt;foo&lt;/value&gt;" + 
"    &lt;/value-param&gt;" + 
"    &lt;value-param profiles=\"bar\"&gt;" + 
"      &lt;name&gt;param&lt;/name&gt;" + 
"      &lt;value&gt;bar&lt;/value&gt;" + 
"    &lt;/value-param&gt;" + 
"  &lt;/init-params&gt;" + 
"&lt;/component&gt;</programlisting>" + 
"				</listitem>" + 
"			</varlistentry>" + 
"			<varlistentry>" + 
"				<term>&lt;value-collection&gt;</term>" + 
"				<listitem>" + 
"					<para>" + 
"						The &lt;value-collection&gt; element configures one of the value of collection data:" + 
"					</para>" + 
"					<programlisting language=\"XML\" role=\"XML\">&lt;object type=\"org.exoplatform.container.configuration.ConfigParam\"&gt;" + 
"  &lt;field name=\"role\"&gt;" + 
"    &lt;collection type=\"java.util.ArrayList\"&gt;" + 
"      &lt;value&gt;&lt;string&gt;manager&lt;/string&gt;&lt;/value&gt;" + 
"      &lt;value profiles=\"foo\"&gt;&lt;string&gt;foo_manager&lt;/string&gt;&lt;/value&gt;" + 
"      &lt;value profiles=\"foo,bar\"&gt;&lt;string&gt;foo_bar_manager&lt;/string&gt;&lt;/value&gt;" + 
"    &lt;/collection&gt;" + 
"  &lt;/field&gt;" + 
"&lt;/object&gt;</programlisting>" + 
"				</listitem>" + 
"			</varlistentry>" + 
"			<varlistentry>" + 
"				<term>&lt;field-configuration&gt;</term>" + 
"				<listitem>" + 
"					<para>" + 
"						The &lt;field-configuration&gt; element configures the field of an object:" + 
"					</para>" + 
"					<programlisting language=\"XML\" role=\"XML\">&lt;object-param&gt;" + 
"  &lt;name&gt;test.configuration&lt;/name&gt;" + 
"  &lt;object type=\"org.exoplatform.container.configuration.ConfigParam\"&gt;" + 
"    &lt;field name=\"role\"&gt;" + 
"      &lt;collection type=\"java.util.ArrayList\"&gt;" + 
"        &lt;value&gt;&lt;string&gt;manager&lt;/string&gt;&lt;/value&gt;" + 
"      &lt;/collection&gt;" + 
"    &lt;/field&gt;" + 
"    &lt;field name=\"role\" profiles=\"foo,bar\"&gt;" + 
"      &lt;collection type=\"java.util.ArrayList\"&gt;" + 
"        &lt;value&gt;&lt;string&gt;foo_bar_manager&lt;/string&gt;&lt;/value&gt;" + 
"      &lt;/collection&gt;" + 
"    &lt;/field&gt;" + 
"    &lt;field name=\"role\" profiles=\"foo\"&gt;" + 
"      &lt;collection type=\"java.util.ArrayList\"&gt;" + 
"        &lt;value&gt;&lt;string&gt;foo_manager&lt;/string&gt;&lt;/value&gt;" + 
"      &lt;/collection&gt;" + 
"    &lt;/field&gt;" + 
"  &lt;/object&gt;" + 
"&lt;/object-param&gt;</programlisting>" + 
"				</listitem>" + 
"			</varlistentry>" + 
"		</variablelist>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18948-565966+%5BLatest%5D&amp;cf_build_id=18948-565966+05+Dec+2013+14%3A07+en-US+%5BLatest%5D&amp;comment=Title%3A+Runtime+Configuration+Profiles%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"	</section>" + 
"	<section id=\"sect-Component_request_life_cycle\">" + 
"		<title>Component request life cycle</title>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18949-565966+%5BLatest%5D&amp;cf_build_id=18949-565966+05+Dec+2013+14%3A07+en-US+%5BLatest%5D&amp;comment=Title%3A+Component+request+life+cycle%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"		<section id=\"Component_request_life_cycle_contract\" remap=\"TID_18950\">" + 
"			<title>Component request life cycle contract</title>" + 
"			<para>" + 
"				The component request life cycle is an interface that defines a contract for a component for being involved into a request:" + 
"			</para>" + 
"			<programlisting language=\"Java\" role=\"Java\">public interface ComponentRequestLifecycle" + 
"{" + 
"   /**" + 
"    * Start a request." + 
"    * @param container the related container" + 
"    */" + 
"   void startRequest(ExoContainer container);" + 
" " + 
"   /**" + 
"    * Ends a request." + 
"    * @param container the related container" + 
"    */" + 
"   void endRequest(ExoContainer container);" + 
"}</programlisting>" + 
"			<para>" + 
"				The container passed is the container to which the component is related. This contract is often used to setup a thread local based context that will be demarcated by a request." + 
"			</para>" + 
"			<para>" + 
"				For instance in the portal context, a component request life cycle is triggered for user requests. Another example is the initial data import in GateIn that demarcates using callbacks made to that interface." + 
"			</para>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18950-565970+%5BLatest%5D&amp;cf_build_id=18950-565970+05+Dec+2013+14%3A14+en-US+%5BLatest%5D&amp;comment=Title%3A+Component+request+life+cycle+contract%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"		<section id=\"sect-Request_life_cycle\">" + 
"			<title>Request life cycle</title>" + 
"			<para>" + 
"				The " + 
"				<envar>" + 
"					RequestLifeCycle" + 
"				</envar> class has several statics methods that are used to schedule the component request life cycle of components. Its main responsibility is to perform scheduling while respecting the constraint to execute the request life cycle of a component only once even if it can be scheduled several times." + 
"			</para>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18951-565970+%5BLatest%5D&amp;cf_build_id=18951-565970+05+Dec+2013+14%3A14+en-US+%5BLatest%5D&amp;comment=Title%3A+Request+life+cycle%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"			<section id=\"Scheduling_a_component_request_life_cycle\" remap=\"TID_18952\">" + 
"				<title>Scheduling a component request life cycle</title>" + 
"				<programlisting language=\"Java\" role=\"Java\">RequestLifeCycle.begin(component);" + 
"try" + 
"{" + 
"   // Do something" + 
"}" + 
"finally" + 
"{" + 
"   RequestLifeCycle.end();" + 
"}</programlisting>" + 
"				<para role=\"RoleCreateBugPara\">" + 
"					<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18952-565970+%5BLatest%5D&amp;cf_build_id=18952-565970+05+Dec+2013+14%3A14+en-US+%5BLatest%5D&amp;comment=Title%3A+Scheduling+a+component+request+life+cycle%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"				</para>" + 
"			</section>" + 
"			<section id=\"Scheduling_a_container_request_life_cycle\" remap=\"TID_18953\">" + 
"				<title>Scheduling a container request life cycle</title>" + 
"				<para>" + 
"					Scheduling a container triggers the component request life cycle of all the components that implement the interface " + 
"					<envar>" + 
"						ComponentRequestLifeCycle" + 
"					</envar>. If one of the component has already been scheduled before and then that component will not be scheduled again. When the local value is true, then the looked components will be those of the container, when it is false then the scheduler will also look at the components in the ancestor containers." + 
"				</para>" + 
"				<programlisting language=\"Java\" role=\"Java\">RequestLifeCycle.begin(container, local);" + 
"try" + 
"{" + 
"   // Do something" + 
"}" + 
"finally" + 
"{" + 
"   RequestLifeCycle.end();" + 
"}</programlisting>" + 
"				<para role=\"RoleCreateBugPara\">" + 
"					<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18953-565970+%5BLatest%5D&amp;cf_build_id=18953-565970+05+Dec+2013+14%3A14+en-US+%5BLatest%5D&amp;comment=Title%3A+Scheduling+a+container+request+life+cycle%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"				</para>" + 
"			</section>" + 
"			<section id=\"sect-When_request_life_cycle_is_triggered\">" + 
"				<title>When request life cycle is triggered</title>" + 
"				<para role=\"RoleCreateBugPara\">" + 
"					<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18954-565970+%5BLatest%5D&amp;cf_build_id=18954-565970+05+Dec+2013+14%3A14+en-US+%5BLatest%5D&amp;comment=Title%3A+When+request+life+cycle+is+triggered%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"				</para>" + 
"				<section id=\"Portal_request_life_cycle\" remap=\"TID_18955\">" + 
"					<title>Portal request life cycle</title>" + 
"					<para>" + 
"						Each portal request triggers the life cycle of the associated portal container." + 
"					</para>" + 
"					<para role=\"RoleCreateBugPara\">" + 
"						<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18955-565970+%5BLatest%5D&amp;cf_build_id=18955-565970+05+Dec+2013+14%3A14+en-US+%5BLatest%5D&amp;comment=Title%3A+Portal+request+life+cycle%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"					</para>" + 
"				</section>" + 
"				<section id=\"JMX_request_Life_Cycle\" remap=\"TID_18956\">" + 
"					<title>JMX request Life Cycle</title>" + 
"					<para>" + 
"						When a JMX bean is invoked, the request life cycle of the container to which it belongs it scheduled. Indeed JMX is an entry point of the system that may need component to have a request life cycle triggered." + 
"					</para>" + 
"					<para role=\"RoleCreateBugPara\">" + 
"						<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18956-565970+%5BLatest%5D&amp;cf_build_id=18956-565970+05+Dec+2013+14%3A14+en-US+%5BLatest%5D&amp;comment=Title%3A+JMX+request+Life+Cycle%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"					</para>" + 
"				</section>" + 
"			</section>" + 
"		</section>" + 
"	</section>" + 
"	<section id=\"sect-Configuring_Services\">" + 
"		<title>Configuring Services</title>" + 
"		<para>" + 
"			The eXo Kernel uses dependency injection to create services based on <filename>configuration.xml</filename> configuration files. The location of the configuration files determines if services are placed into the <literal>RootContainer</literal> scope, or into the <literal>PortalContainer</literal> scope." + 
"		</para>" + 
"		<para>" + 
"			When creating a service, you also should declare its existence to the <emphasis role=\"bold\">Container</emphasis>. This can be done by creating a simple configuration file." + 
"		</para>" + 
"		<para>" + 
"			Copy the following code to a <filename>configuration.xml</filename> file and save this file in a <filename>/conf</filename> subdirectory of your service base folder. The container looks for a <filename>/conf/configuration.xml</filename> file in each jar-file." + 
"		</para>" + 
"		<para>" + 
"			All <filename>configuration.xml</filename> files located at <filename>conf/configuration.xml</filename> in the classpath (any directory, or any jar in the classpath) will have their services configured in the <literal>RootContainer</literal> scope." + 
"		</para>" + 
"		<para>" + 
"			All <filename>configuration.xml</filename> files located at <filename>conf/portal/configuration.xml</filename> in the classpath will have their services configured at the <literal>PortalContainer</literal> scope." + 
"		</para>" + 
"		<para>" + 
"			Additionally, <emphasis role=\"bold\">portal extensions</emphasis> can use configuration information stored in <filename><replaceable>JPP_DIST</replaceable>/gatein/gatein.ear/portal.war/WEB-INF/conf/configuration.xml</filename>, and will also have their services configured in the <literal>PortalContainer</literal> scope." + 
"		</para>" + 
"		<para>" + 
"			When eXo kernel reads a configuration, it loads the file from the kernel jar using the classloader and does not use an internet connection to resolve the file." + 
"		</para>" + 
"		<note>" + 
"			<para>" + 
"				<emphasis role=\"bold\">Portal extensions</emphasis> are described later in this document." + 
"			</para>" + 
"		</note>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18957-565970+%5BLatest%5D&amp;cf_build_id=18957-565970+05+Dec+2013+14%3A14+en-US+%5BLatest%5D&amp;comment=Title%3A+Configuring+Services%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"		<section id=\"sect-Configuration_syntax\">" + 
"			<title>Configuration syntax</title>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18958-565970+%5BLatest%5D&amp;cf_build_id=18958-565970+05+Dec+2013+14%3A14+en-US+%5BLatest%5D&amp;comment=Title%3A+Configuration+syntax%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"			<section id=\"sect-Components\">" + 
"				<title>Components</title>" + 
"				<para>" + 
"					A service component is defined in <filename>configuration.xml</filename> by using a &lt;component&gt; element." + 
"				</para>" + 
"				<para>" + 
"					Only one piece of information is required when defining a service; the service implementation class. This is specified using &lt;type&gt;" + 
"				</para>" + 
"				<para>" + 
"					Every component has a &lt;key&gt; that identifies it. If not explicitly set, a key defaults to the value of &lt;type&gt;. If a key can be loaded as a class, a class object is used as a key, otherwise a string is used." + 
"				</para>" + 
"				<para>" + 
"					The usual approach is to specify an interface as a key." + 
"				</para>" + 
"				<programlisting language=\"XML\" role=\"XML\">&lt;?xml version=\"1.0\" encoding=\"ISO-8859-1\"?&gt;" + 
"&lt;configuration" + 
"      xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"" + 
"      xsi:schemaLocation=\"http://www.exoplaform.org/xml/ns/kernel_1_2.xsd" + 
"                          http://www.exoplaform.org/xml/ns/kernel_1_2.xsd\"" + 
"      xmlns=\"http://www.exoplaform.org/xml/ns/kernel_1_2.xsd\"&gt;" + 
"   &lt;component&gt;" + 
"      &lt;key&gt;org.exoplatform.services.database.HibernateService&lt;/key&gt;" + 
"      &lt;type&gt;org.exoplatform.services.database.impl.HibernateServiceImpl&lt;/type&gt;" + 
"" + 
"      ..." + 
"" + 
"   &lt;/component&gt;" + 
"&lt;/configuration&gt;" + 
"</programlisting>" + 
"				<para>" + 
"					The configuration found inside the jar file is considered as the default configuration. If you want to override this default configuration you can do it in different places outside the jar. When the container finds several configurations for the same service, the configuration which is found later replaces completely the one found previously. Let's call this the <emphasis>configuration override mechanism</emphasis>." + 
"				</para>" + 
"				<para>" + 
"					All custom configuration is made in the <filename>webapps/portal/WEB-INF/conf/configuration.xml</filename> file. Use &lt;component&gt; elements to contain the configuration information. The &lt;key&gt; element defines the interface, and the &lt;type&gt; tag defines the implementation. While the &lt;key&gt; tag is not mandatory, it can lead to a small performance improvement." + 
"				</para>" + 
"				<programlisting language=\"XML\" role=\"XML\">&lt;!-- Portlet container hooks --&gt;" + 
"  &lt;component&gt;" + 
"    &lt;key&gt;org.exoplatform.services.portletcontainer.persistence.PortletPreferencesPersister&lt;/key&gt;" + 
"    &lt;type&gt;org.exoplatform.services.portal.impl.PortletPreferencesPersisterImpl&lt;/type&gt;" + 
"  &lt;/component&gt;</programlisting>" + 
"				<para>" + 
"					Register plug-ins that can act as listeners or external plug-in to bundle some plug-in classes in other jar modules. The usual example is the hibernate service to which we can add hbm mapping files even if those are deployed in an other maven artifact." + 
"				</para>" + 
"				<programlisting language=\"XML\" role=\"XML\">&lt;external-component-plugins&gt;" + 
"  &lt;target-component&gt;org.exoplatform.services.database.HibernateService&lt;/target-component&gt;" + 
"  &lt;component-plugin&gt; " + 
"    &lt;name&gt;add.hibernate.mapping&lt;/name&gt;" + 
"    &lt;set-method&gt;addPlugin&lt;/set-method&gt;" + 
"    &lt;type&gt;org.exoplatform.services.database.impl.AddHibernateMappingPlugin&lt;/type&gt;" + 
"    &lt;init-params&gt;" + 
"      &lt;values-param&gt;" + 
"        &lt;name&gt;hibernate.mapping&lt;/name&gt;" + 
"        &lt;value&gt;org/exoplatform/services/portal/impl/PortalConfigData.hbm.xml&lt;/value&gt;" + 
"        &lt;value&gt;org/exoplatform/services/portal/impl/PageData.hbm.xml&lt;/value&gt;" + 
"        &lt;value&gt;org/exoplatform/services/portal/impl/NodeNavigationData.hbm.xml&lt;/value&gt;" + 
"      &lt;/values-param&gt;        " + 
"    &lt;/init-params&gt;" + 
"  &lt;/component-plugin&gt;" + 
"&lt;/external-component-plugins&gt;</programlisting>" + 
"				<para>" + 
"					In that sample we target the HibernateService and we will call its addPlugin() method with an argument of the type AddHibernateMappingPlugin. That object will first have been filled with the init parameters." + 
"				</para>" + 
"				<para>" + 
"					Therefore, it is possible to define services that will be able to receive plug-ins without implementing any framework interface." + 
"				</para>" + 
"				<para>" + 
"					Another example of use is the case of listeners as in the following code where a listener is added to the OrganisationService and will be called each time a new user is created:" + 
"				</para>" + 
"				<programlisting language=\"XML\" role=\"XML\">&lt;external-component-plugins&gt;" + 
"  &lt;target-component&gt;org.exoplatform.services.organization.OrganizationService&lt;/target-component&gt;" + 
"  &lt;component-plugin&gt;" + 
"    &lt;name&gt;portal.new.user.event.listener&lt;/name&gt;" + 
"    &lt;set-method&gt;addListenerPlugin&lt;/set-method&gt;" + 
"    &lt;type&gt;org.exoplatform.services.portal.impl.PortalUserEventListenerImpl&lt;/type&gt;" + 
"    &lt;description&gt;this listener create the portal configuration for the new user&lt;/description&gt;" + 
"    &lt;init-params&gt;" + 
"      &lt;object-param&gt;" + 
"        &lt;name&gt;configuration&lt;/name&gt;" + 
"        &lt;description&gt;description&lt;/description&gt;" + 
"        &lt;object type=\"org.exoplatform.services.portal.impl.NewPortalConfig\"&gt;" + 
"          &lt;field  name=\"predefinedUser\"&gt;" + 
"            &lt;collection type=\"java.util.HashSet\"&gt;" + 
"              &lt;value&gt;&lt;string&gt;admin&lt;/string&gt;&lt;/value&gt;" + 
"              &lt;value&gt;&lt;string&gt;exo&lt;/string&gt;&lt;/value&gt;" + 
"              &lt;value&gt;&lt;string&gt;company&lt;/string&gt;&lt;/value&gt;" + 
"              &lt;value&gt;&lt;string&gt;community&lt;/string&gt;&lt;/value&gt;" + 
"              &lt;value&gt;&lt;string&gt;portal&lt;/string&gt;&lt;/value&gt;" + 
"              &lt;value&gt;&lt;string&gt;exotest&lt;/string&gt;&lt;/value&gt;" + 
"            &lt;/collection&gt;" + 
"          &lt;/field&gt;" + 
"          &lt;field  name=\"templateUser\"&gt;&lt;string&gt;template&lt;/string&gt;&lt;/field&gt;" + 
"          &lt;field  name=\"templateLocation\"&gt;&lt;string&gt;war:/conf/users&lt;/string&gt;&lt;/field&gt;" + 
"        &lt;/object&gt;" + 
"      &lt;/object-param&gt;" + 
"    &lt;/init-params&gt;" + 
"  &lt;/component-plugin&gt;" + 
"...</programlisting>" + 
"				<para>" + 
"					In the previous XML configuration, we refer the organization service and we will call its method addListenerPlugin with an object of type PortalUserEventListenerImpl. Each time a new user will be created (apart the predefined ones in the list above) methods of the PortalUserEventListenerImpl will be called by the service." + 
"				</para>" + 
"				<para>" + 
"					As you can see, there are several types of init parameters, from a simple value param which binds a key with a value to a more complex object mapping that fills a JavaBean with the info defined in the XML." + 
"				</para>" + 
"				<para>" + 
"					Many other examples exist such as for the Scheduler Service where you can add a job with a simple XML configuration or the JCR Service where you can add a NodeType from your own configuration.xml file." + 
"				</para>" + 
"				<para role=\"RoleCreateBugPara\">" + 
"					<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18959-565970+%5BLatest%5D&amp;cf_build_id=18959-565970+05+Dec+2013+14%3A14+en-US+%5BLatest%5D&amp;comment=Title%3A+Components%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"				</para>" + 
"				<section id=\"RootContainer\" remap=\"TID_18960\">" + 
"					<title>RootContainer</title>" + 
"					<para>" + 
"						As PortalContainer depends on the RootContainer, we will start by looking into this one." + 
"					</para>" + 
"					<para>" + 
"						The retrieval sequence in short:" + 
"					</para>" + 
"					<orderedlist>" + 
"						<listitem>" + 
"							<para>" + 
"								Services default <classname>RootContainer</classname> configurations from JAR files <emphasis>/conf/configuration.xml</emphasis>" + 
"							</para>" + 
"						</listitem>" + 
"						<listitem>" + 
"							<para>" + 
"								External <classname>RootContainer</classname> configuration, to be found at <emphasis>exo-tomcat/exo-conf/configuration.xml</emphasis>" + 
"							</para>" + 
"						</listitem>" + 
"					</orderedlist>" + 
"					<note>" + 
"						<para>" + 
"							Naturally you always have to replace <parameter>exo-tomcat</parameter> by your own folder name." + 
"						</para>" + 
"					</note>" + 
"					<para>" + 
"						The <classname>RootContainer</classname> creates a java <classname>HashTable</classname> which contains key-value pairs for the services. The qualified interface name of each service is used as key for the hashtable. Hopefully you still remember that the <parameter>&lt;key&gt;</parameter> tag of the configuration file contains the interface name? The value of each hashtable pair is an object that contains the service configuration (yes, this means the whole structure between the <parameter>&lt;component&gt;</parameter> tags of your <filename>configuration.xml</filename> file)." + 
"					</para>" + 
"					<para>" + 
"						The <classname>RootContainer</classname> runs over all jar files you find in <emphasis>exo-tomcat/lib</emphasis> and looks if there is a configuration file at <emphasis>/conf/configuration.xml</emphasis>, the services configured in this file are added to the hashtable. That way - at the end of this process - the default configurations for all services are stored in the hashtable." + 
"					</para>" + 
"					<note>" + 
"						<para>" + 
"							What happens if the same service - recognized by the same qualified interface name - is configured in different jars? As the service only can exist one time the configuration of the jar found later overrides the previous configuration. You know that the loading <emphasis role=\"bold\">order of the jars is unpredictable</emphasis> you <emphasis role=\"bold\">must not depend on this</emphasis>." + 
"						</para>" + 
"					</note>" + 
"					<para>" + 
"						If you wish to provide your own configurations for one or several services, you can do it in a general configuration file that has to be placed at <emphasis>exo-tomcat/exo-conf/configuration.xml</emphasis>. Do not search for such a file on your computer - you won't find one, because this option is not used in the default installation. Here again the same rule applies: <emphasis>The posterior configuration replaces the previous one</emphasis>." + 
"					</para>" + 
"					<para>" + 
"						The further configuration retrieval depends on the container type." + 
"					</para>" + 
"					<para role=\"RoleCreateBugPara\">" + 
"						<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18960-565970+%5BLatest%5D&amp;cf_build_id=18960-565970+05+Dec+2013+14%3A14+en-US+%5BLatest%5D&amp;comment=Title%3A+RootContainer%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"					</para>" + 
"				</section>" + 
"				<section id=\"PortalContainer\" remap=\"TID_18961\">" + 
"					<title>PortalContainer</title>" + 
"					<para>" + 
"						The PortalContainer takes the hashtable filled by the RootContainer and continues to look in some more places. Here you get the opportunity to replace RootContainer configurations by those which are specific to your portal. Again, the configurations are overridden whenever necessary." + 
"					</para>" + 
"					<para>" + 
"						In short PortalContainer configurations are retrieved in the following lookup sequence :" + 
"					</para>" + 
"					<orderedlist>" + 
"						<listitem>" + 
"							<para>" + 
"								Take over the configurations of the RootContainer" + 
"							</para>" + 
"						</listitem>" + 
"						<listitem>" + 
"							<para>" + 
"								Default PortalContainer configurations from all JAR files (folder <emphasis>/conf/portal/configuration.xml</emphasis>)" + 
"							</para>" + 
"						</listitem>" + 
"						<listitem>" + 
"							<para>" + 
"								Web application configurations from the portal.war file - or the <emphasis>portal</emphasis> web app (folder <emphasis>/WEB-INF/conf/configuration.xml</emphasis>)" + 
"							</para>" + 
"						</listitem>" + 
"						<listitem>" + 
"							<para>" + 
"								External configuration for services of a named portal, it will be found at <emphasis>exo-tomcat/exo-conf/portal/$portal_name/configuration.xml</emphasis> (as of Portal 2.5)" + 
"							</para>" + 
"						</listitem>" + 
"					</orderedlist>" + 
"					<para>" + 
"						You see, here the <emphasis>/conf/portal/configuration.xml</emphasis> file of each jar enters the game, they are searched at first. Next, there is nearly always a configuration.xml in the portal.war file (or in the portal webapp folder), you find this file at <emphasis>/WEB-INF/conf/configuration.xml</emphasis>. If you open it, you will find a lot of import statements that point to other configuration files in the same portal.war (or portal webapp)." + 
"					</para>" + 
"					<para>" + 
"						<emphasis role=\"bold\">Multiple Portals</emphasis> Be aware that you might set up several different portals (\"admin\", \"mexico\", etc.), and each of these portals will use a different PortalContainer. And each of these PortalContainers can be configured separately. As of Red Hat JBoss Portal 6.1 you also will be able to provide configurations from outside the jars and wars or webapps. Put a configuration file in <emphasis>exo-tomcat/exo-conf/portal/$portal_name/configuration.xml</emphasis> where <parameter>$portal_name</parameter> is the name of the portal you want to configure for . But normally you only have one portal which is called \"portal\" so you use <emphasis>exo-tomcat/exo-conf/portal/portal/configuration.xml</emphasis>." + 
"					</para>" + 
"					<note>" + 
"						<para>" + 
"							As of Red Hat JBoss Portal 6.1 you can override the external configuration location with the system property <emphasis>exo.conf.dir</emphasis>. If the property exists its value will be used as path to the eXo configuration directory, that means this is an alternative to <emphasis>exo-tomcat/exo-conf</emphasis>. Just put this property in the command line: <emphasis>java -Dexo.conf.dir=/path/to/exo/conf</emphasis> or use eXo.bat or eXo.sh. In this particular use case, you have no need to use any prefixes in your configuration file to import other files. For example, if your configuration file is <emphasis>exo-tomcat/exo-conf/portal/PORTAL_NAME/configuration.xml</emphasis> and you want to import the configuration file <emphasis>exo-tomcat/exo-conf/portal/PORTAL_NAME/mySubConfDir/myConfig.xml</emphasis>, you can do it by adding <emphasis>&lt;import&gt;mySubConfDir/myConfig.xml&lt;/import&gt;</emphasis> to your configuration file." + 
"						</para>" + 
"					</note>" + 
"					<note>" + 
"						<para>" + 
"							Under <emphasis role=\"bold\">JBoss</emphasis> application server <emphasis>exo-conf</emphasis> will be looked up in directory described by JBoss System property <emphasis>jboss.server.config.url</emphasis>. If the property is not found or empty <emphasis>exo-jboss/exo-conf</emphasis> will be asked (since kernel 2.0.4)." + 
"						</para>" + 
"					</note>" + 
"					<para role=\"RoleCreateBugPara\">" + 
"						<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18961-565970+%5BLatest%5D&amp;cf_build_id=18961-565970+05+Dec+2013+14%3A14+en-US+%5BLatest%5D&amp;comment=Title%3A+PortalContainer%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"					</para>" + 
"				</section>" + 
"				<section id=\"External_Plug-ins\" remap=\"TID_18962\">" + 
"					<title>External Plug-ins</title>" + 
"					<para>" + 
"						The eXo Kernel supports non-component objects that can be configured, instantiated, and injected into registered components using method calls. This '<emphasis>plugin</emphasis>' method allows portal extensions to add additional configurations to core services." + 
"					</para>" + 
"					<para>" + 
"						An external plug-in is defined by using the <literal>&lt;external-component-plugin&gt;</literal> wrapper element which contains one or more <literal>&lt;component-plugin&gt;</literal> definitions." + 
"					</para>" + 
"					<para>" + 
"						The <literal>&lt;external-component-plugin&gt;</literal> element uses <literal>&lt;target-component&gt;</literal> to specify a target service component that will receive injected objects." + 
"					</para>" + 
"					<para>" + 
"						Every <literal>&lt;component-plugin&gt;</literal> defines an implementation type, and a method on the target component to use for injection (<literal>&lt;set-method&gt;</literal>)." + 
"					</para>" + 
"					<para>" + 
"						A plug-in implementation class has to implement the <emphasis role=\"bold\">org.exoplatform.container.component. ComponentPlugin</emphasis> interface." + 
"					</para>" + 
"					<para>" + 
"						In the following example the <literal>PortalContainerDefinitionPlugin</literal> implements the <literal>ComponentPlugin</literal>:" + 
"					</para>" + 
"					<programlisting language=\"XML\" role=\"XML\">&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;" + 
"&lt;configuration" + 
"      xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"" + 
"      xsi:schemaLocation=\"http://www.exoplaform.org/xml/ns/kernel_1_2.xsd" + 
"                          http://www.exoplaform.org/xml/ns/kernel_1_2.xsd\"" + 
"      xmlns=\"http://www.exoplaform.org/xml/ns/kernel_1_2.xsd\"&gt;" + 
"" + 
"   &lt;external-component-plugins&gt;" + 
"      &lt;target-component&gt;org.exoplatform.container.definition.PortalContainerConfig&lt;/target-component&gt;" + 
"      &lt;component-plugin&gt;" + 
"         &lt;!-- The name of the plugin --&gt;" + 
"         &lt;name&gt;Add PortalContainer Definitions&lt;/name&gt;" + 
"" + 
"         &lt;!-- The name of the method to call on the PortalContainerConfig" + 
"              in order to register the PortalContainerDefinitions --&gt;" + 
"         &lt;set-method&gt;registerPlugin&lt;/set-method&gt;" + 
"" + 
"         &lt;!-- The fully qualified name of the PortalContainerDefinitionPlugin --&gt;" + 
"         &lt;type&gt;org.exoplatform.container.definition.PortalContainerDefinitionPlugin&lt;/type&gt;" + 
"" + 
"         ..." + 
"" + 
"      &lt;/component-plugin&gt;" + 
"   &lt;/external-component-plugins&gt;" + 
"&lt;/configuration&gt;" + 
"</programlisting>" + 
"					<para>" + 
"						The <emphasis role=\"bold\">&lt;target-component&gt;</emphasis> defines the service for which the plug-in is defined. The configuration is injected by the container using a method that is defined in <emphasis role=\"bold\">&lt;set-method&gt;</emphasis>. The method has exactly one argument of the type org.exoplatform.services.cms.categories.impl.TaxonomyPlugin:" + 
"					</para>" + 
"					<itemizedlist>" + 
"						<listitem>" + 
"							<para>" + 
"								addTaxonomyPlugin(org.exoplatform.services.cms.categories.impl.TaxonomyPlugin plugin)" + 
"							</para>" + 
"						</listitem>" + 
"					</itemizedlist>" + 
"					<para>" + 
"						The content of <emphasis role=\"bold\">&lt;init-params&gt;</emphasis> corresponds to the structure of the TaxonomyPlugin object." + 
"					</para>" + 
"					<note>" + 
"						<para>" + 
"							You can configure the component CategoriesService using the addTaxonomyPlugin as often as you wish, you can also call addTaxonomyPlugin in different configuration files. The method addTaxonomyPlugin is then called several times, everything else depends on the implementation of the method." + 
"						</para>" + 
"					</note>" + 
"					<para role=\"RoleCreateBugPara\">" + 
"						<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18962-565970+%5BLatest%5D&amp;cf_build_id=18962-565970+05+Dec+2013+14%3A14+en-US+%5BLatest%5D&amp;comment=Title%3A+External+Plug-ins%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"					</para>" + 
"				</section>" + 
"				<section id=\"Service_instantiation\" remap=\"TID_18963\">" + 
"					<title>Service instantiation</title>" + 
"					<para>" + 
"						As you have already learned the services are all singletons, so that the container creates only one single instance of each container. The services are created by calling the constructors (called <emphasis>constructor injection</emphasis>). If there are only zero-arguments constructors (<code>Foo public Foo(){}</code>) there are no problems to be expected. That's easy." + 
"					</para>" + 
"					<para>" + 
"						But now look at <ulink url=\"https://anonsvn.jboss.org/repos/exo-jcr/core/trunk/exo.core.component.organization.jdbc/src/main/java/org/exoplatform/services/organization/jdbc/OrganizationServiceImpl.java\">OrganizationServiceImpl.java</ulink>" + 
"					</para>" + 
"					<para>" + 
"						This JDBC implementation of BaseOrganizationService interface has only one constructor:" + 
"					</para>" + 
"					<programlisting language=\"Java\" role=\"Java\">public OrganizationServiceImpl(ListenerService listenerService, DatabaseService dbService);</programlisting>" + 
"					<para>" + 
"						You see this service depends on two other services. In order to be able to call this constructor the container first needs a <classname>ListenerService</classname> and a <classname>DatabaseService</classname>. Therefore these services must be instantiated before <classname>BaseOrganizationService</classname>, because <classname>BaseOrganizationService</classname> depends on them." + 
"					</para>" + 
"					<para>" + 
"						For this purpose the container first looks at the constructors of all services and creates a matrix of service dependencies in order to call the services in a proper order. If for any reason there are interdependencies or circular dependencies you will get a java <classname>Exception</classname>. <emphasis>In this way the dependencies are injected by the container</emphasis>." + 
"					</para>" + 
"					<note>" + 
"						<para>" + 
"							What happens if one service has more than one constructor? The container always tries first to use the constructor with a maximum of arguments, if this is not possible the container continues step by step with constructors that have less arguments until arriving at the zero-argument constructor (if there is one)." + 
"						</para>" + 
"					</note>" + 
"					<para role=\"RoleCreateBugPara\">" + 
"						<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18963-565970+%5BLatest%5D&amp;cf_build_id=18963-565970+05+Dec+2013+14%3A14+en-US+%5BLatest%5D&amp;comment=Title%3A+Service+instantiation%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"					</para>" + 
"				</section>" + 
"				<section id=\"Service_Access\" remap=\"TID_18964\">" + 
"					<title>Service Access</title>" + 
"					<para>" + 
"						As you want to follow the principle of <emphasis role=\"bold\">Inversion of Control,</emphasis> you <emphasis role=\"bold\">must not</emphasis> access the service directly. You need a <emphasis role=\"bold\">Container</emphasis> to access the service." + 
"					</para>" + 
"					<para>" + 
"						With this command you get your current container:" + 
"					</para>" + 
"					<itemizedlist>" + 
"						<listitem>" + 
"							<para>" + 
"								<emphasis role=\"bold\">ExoContainer myContainer = ExoContainerContext.getCurrentContainer();</emphasis>" + 
"							</para>" + 
"						</listitem>" + 
"					</itemizedlist>" + 
"					<para>" + 
"						Whenever you need one of the services that you have configured use the method:" + 
"					</para>" + 
"					<itemizedlist>" + 
"						<listitem>" + 
"							<para>" + 
"								<emphasis role=\"bold\">myContainer.getComponentInstance(class)</emphasis>" + 
"							</para>" + 
"						</listitem>" + 
"					</itemizedlist>" + 
"					<para>" + 
"						In our case:" + 
"					</para>" + 
"					<itemizedlist>" + 
"						<listitem>" + 
"							<para>" + 
"								<emphasis role=\"bold\">ArticleStatsService statsService = (ArticleStatsService) myContainer.getComponentInstance(ArticleStatsService.class);</emphasis>" + 
"							</para>" + 
"						</listitem>" + 
"					</itemizedlist>" + 
"					<para>" + 
"						Recapitulation:" + 
"					</para>" + 
"					<programlisting language=\"Java\" role=\"Java\">package com.laverdad.common;" + 
"" + 
"import org.exoplatform.container.ExoContainer;" + 
"import org.exoplatform.container.ExoContainerContext;" + 
"import com.laverdad.services.*;" + 
"" + 
"public class Statistics {" + 
"" + 
"  public int makeStatistics(String articleText) {" + 
"    ExoContainer myContainer = ExoContainerContext.getCurrentContainer();" + 
"    ArticleStatsService statsService = (ArticleStatsService)" + 
"        myContainer.getComponentInstance(ArticleStatsService.class);    " + 
"    int numberOfSentences = statsService.calcSentences(articleText);" + 
"    return numberOfSentences;" + 
"  }" + 
"  " + 
"  public static void main( String args[]) {" + 
"   Statistics stats = new Statistics();" + 
"   String newText = \"This is a normal text. The method only counts the number of periods. \"" + 
"   + \"You can implement your own implementation with a more exact counting. \"" + 
"   + \"Let`s make a last sentence.\";" + 
"  System.out.println(\"Number of sentences: \" + stats.makeStatistics(newText));" + 
"  }" + 
"}</programlisting>" + 
"					<para role=\"RoleCreateBugPara\">" + 
"						<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18964-565970+%5BLatest%5D&amp;cf_build_id=18964-565970+05+Dec+2013+14%3A14+en-US+%5BLatest%5D&amp;comment=Title%3A+Service+Access%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"					</para>" + 
"				</section>" + 
"				<section id=\"Includes_and_special_URLs\" remap=\"TID_18965\">" + 
"					<title>Includes, and special URLs</title>" + 
"					<para>" + 
"						It is possible to divide the <filename>configuration.xml</filename> file into many smaller files, which are then included into the main configuration file." + 
"					</para>" + 
"					<para>" + 
"						The included files must be valid xml files; they cannot be fragments of text." + 
"					</para>" + 
"					<para>" + 
"						Below is an example <filename>configuration.xml</filename> that 'outsources' its content into several files:" + 
"					</para>" + 
"					<programlisting language=\"XML\" role=\"XML\">&lt;configuration xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"" + 
"      xsi:schemaLocation=\"http://www.exoplaform.org/xml/ns/kernel_1_2.xsd" + 
"                          http://www.exoplaform.org/xml/ns/kernel_1_2.xsd\"" + 
"      xmlns=\"http://www.exoplaform.org/xml/ns/kernel_1_2.xsd\"&gt;" + 
"   &lt;!-- Comment #1 --&gt;" + 
"   &lt;import&gt;war:/conf/sample-ext/jcr/jcr-configuration.xml&lt;/import&gt;" + 
"   &lt;import&gt;war:/conf/sample-ext/portal/portal-configuration.xml&lt;/import&gt;" + 
"" + 
"&lt;/configuration&gt;" + 
"</programlisting>" + 
"					<para>" + 
"						Comment #1: This line is being used to reference another configuration file. The <code>war:</code> URL schema indicates that the following path is to be resolved relative to the current <literal>PortalContainer</literal>'s servlet context resource path, starting with <emphasis role=\"bold\">WEB-INF</emphasis> as a root." + 
"					</para>" + 
"					<note>" + 
"						<para>" + 
"							The current <literal>PortalContainer</literal> is really a newly created <literal>PortalContainer</literal>, as <code>war:</code> URLs only make sense for <literal>PortalContainer</literal> scoped configuration." + 
"						</para>" + 
"					</note>" + 
"					<para>" + 
"						Through the extension mechanism the servlet context used for resource loading is a <emphasis role=\"bold\">unified servlet context</emphasis> (this is explained in a later section)." + 
"					</para>" + 
"					<para>" + 
"						To have an 'include' path resolved relative to current classpath (context classloader), use a <code>'jar:'</code> URL schema." + 
"					</para>" + 
"					<para role=\"RoleCreateBugPara\">" + 
"						<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18965-565970+%5BLatest%5D&amp;cf_build_id=18965-565970+05+Dec+2013+14%3A14+en-US+%5BLatest%5D&amp;comment=Title%3A+Includes%2C+and+special+URLs%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"					</para>" + 
"				</section>" + 
"				<section id=\"Special_variables\" remap=\"TID_18966\">" + 
"					<title>Special variables</title>" + 
"					<para>" + 
"						Configuration files may contain a <emphasis role=\"bold\">special variable</emphasis> reference <emphasis>${container.name.suffix}</emphasis>. This variable resolves to the name of the current portal container, prefixed by underscore (_)." + 
"					</para>" + 
"					<para>" + 
"						This facilitates reuse of configuration files in situations where portal-specific unique names need to be assigned to some resources; JNDI names, Database/DataSource names and JCR repository names, for example." + 
"					</para>" + 
"					<para>" + 
"						This variable is only defined when there is a current <literal>PortalContainer</literal> available and is only available for <literal>PortalContainer</literal> scoped services." + 
"					</para>" + 
"					<para>" + 
"						A good example of this is the <emphasis role=\"bold\">HibernateService</emphasis>:" + 
"					</para>" + 
"					<programlisting language=\"XML\" role=\"XML\">&lt;?xml version=\"1.0\" encoding=\"ISO-8859-1\"?&gt;" + 
"..." + 
"&lt;configuration xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"" + 
"               xsi:schemaLocation=\"http://www.exoplaform.org/xml/ns/kernel_1_2.xsd http://www.exoplaform.org/xml/ns/kernel_1_2.xsd\"" + 
"               xmlns=\"http://www.exoplaform.org/xml/ns/kernel_1_2.xsd\"&gt;" + 
"..." + 
"  &lt;component&gt;" + 
"    &lt;key&gt;org.exoplatform.services.database.HibernateService&lt;/key&gt;" + 
"    &lt;jmx-name&gt;database:type=HibernateService&lt;/jmx-name&gt;" + 
"    &lt;type&gt;org.exoplatform.services.database.impl.HibernateServiceImpl&lt;/type&gt;" + 
"    &lt;init-params&gt;" + 
"      &lt;properties-param&gt;" + 
"        &lt;name&gt;hibernate.properties&lt;/name&gt;" + 
"        &lt;description&gt;Default Hibernate Service&lt;/description&gt;" + 
"        &lt;property name=\"hibernate.cache.region.jbc2.query.localonly\" value=\"true\" /&gt;" + 
"        &lt;property name=\"hibernate.cache.region.factory_class\" value=\"org.hibernate.cache.jbc2.MultiplexedJBossCacheRegionFactory\" /&gt;" + 
"        &lt;property name=\"hibernate.transaction.manager_lookup_class\" value=\"org.hibernate.transaction.JBossTransactionManagerLookup\" /&gt;" + 
"        &lt;property name=\"hibernate.show_sql\" value=\"false\"/&gt;" + 
"        &lt;property name=\"hibernate.current_session_context_class\" value=\"thread\"/&gt;" + 
"        &lt;property name=\"hibernate.cache.use_second_level_cache\" value=\"true\"/&gt;" + 
"        &lt;property name=\"hibernate.cache.use_query_cache\" value=\"true\"/&gt;" + 
"        &lt;property name=\"hibernate.connection.datasource\" value=\"${gatein.idm.datasource.name}${container.name.suffix}\"/&gt;" + 
"        &lt;property name=\"hibernate.connection.autocommit\" value=\"true\"/&gt;" + 
"        &lt;!--" + 
"        	Should be automatically detected. Force otherwise " + 
"        &lt;property name=\"hibernate.dialect\" value=\"org.hibernate.dialect.XXXDialect\"/&gt;" + 
"         --&gt;" + 
"      &lt;/properties-param&gt;" + 
"    &lt;/init-params&gt;" + 
"  &lt;/component&gt;" + 
"..." + 
"&lt;/configuration&gt;" + 
"" + 
"  </programlisting>" + 
"					<para role=\"RoleCreateBugPara\">" + 
"						<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18966-565970+%5BLatest%5D&amp;cf_build_id=18966-565970+05+Dec+2013+14%3A14+en-US+%5BLatest%5D&amp;comment=Title%3A+Special+variables%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"					</para>" + 
"				</section>" + 
"			</section>" + 
"			<section id=\"sect-ltinit-paramsgt_configuration_element\">" + 
"				<title>&lt;init-params&gt; configuration element</title>" + 
"				<para>" + 
"					&lt;init-params&gt; is a configuration element that is essentially a map of key-value pairs, where <emphasis role=\"bold\">key</emphasis> is always a <literal>String</literal>, and <emphasis role=\"bold\">value</emphasis> can be any type that can be described using the kernel XML configuration." + 
"				</para>" + 
"				<para>" + 
"					Service components that form the Red Hat JBoss Portal infrastructure use &lt;init-params&gt; elements to configure themselves. A component can have one instance of &lt;init-params&gt; injected at most." + 
"				</para>" + 
"				<para>" + 
"					If the service component's constructor takes &lt;init-params&gt; as any of the parameters it will automatically be injected at component instantiation time." + 
"				</para>" + 
"				<para>" + 
"					The XML configuration for a service component that expects an &lt;init-params&gt; element must have an &lt;init-params&gt; element present, however this element can be left empty." + 
"				</para>" + 
"				<para>" + 
"					Below is an example of how the kernel XML configuration syntax looks when creating &lt;init-params&gt; instances:" + 
"				</para>" + 
"				<programlisting language=\"XML\" role=\"XML\">&lt;component&gt;" + 
" &lt;key&gt;org.exoplatform.services.naming.InitialContextInitializer&lt;/key&gt;" + 
" &lt;type&gt;org.exoplatform.commons.InitialContextInitializer2&lt;/type&gt;" + 
" &lt;init-params&gt;" + 
"   &lt;properties-param&gt;" + 
"     &lt;name&gt;default-properties&lt;/name&gt;" + 
"     &lt;description&gt;Default initial context properties&lt;/description&gt;" + 
"   &lt;/properties-param&gt;" + 
" &lt;/init-params&gt;" + 
"&lt;/component&gt;" + 
"</programlisting>" + 
"				<para>" + 
"					An &lt;init-params&gt; element description begins with an &lt;init-params&gt; element." + 
"				</para>" + 
"				<para>" + 
"					It can have zero or more children elements, each of which is one of the following:" + 
"				</para>" + 
"				<itemizedlist>" + 
"					<listitem>" + 
"						<para>" + 
"							&lt;value-param&gt;" + 
"						</para>" + 
"					</listitem>" + 
"					<listitem>" + 
"						<para>" + 
"							&lt;values-param&gt;" + 
"						</para>" + 
"					</listitem>" + 
"					<listitem>" + 
"						<para>" + 
"							&lt;properties-param&gt;" + 
"						</para>" + 
"					</listitem>" + 
"					<listitem>" + 
"						<para>" + 
"							&lt;object-param&gt;" + 
"						</para>" + 
"					</listitem>" + 
"				</itemizedlist>" + 
"				<para>" + 
"					Each of these child elements takes a &lt;name&gt; that serves as a map entry key, and an optional &lt;description&gt;. It also takes a type-specific <emphasis role=\"bold\">value</emphasis> specification." + 
"				</para>" + 
"				<para>" + 
"					The value specification for the &lt;properties-param&gt; defines one or more &lt;property&gt; elements, each of which specifies two strings; a property name and a property value. This is evident in the two previous examples." + 
"				</para>" + 
"				<para>" + 
"					Each &lt;properties-params&gt; defines one <literal>java.util.Properties</literal> instance." + 
"				</para>" + 
"				<example>" + 
"					<title>&lt;properties-param&gt; Hibernate Example</title>" + 
"					<programlisting language=\"XML\" role=\"XML\">  &lt;component&gt;" + 
"    &lt;key&gt;org.exoplatform.services.database.HibernateService&lt;/key&gt;" + 
"    &lt;type&gt;org.exoplatform.services.database.impl.HibernateServiceImpl&lt;/type&gt;" + 
"    &lt;init-params&gt;" + 
"      &lt;properties-param&gt;" + 
"        &lt;name&gt;hibernate.properties&lt;/name&gt;" + 
"        &lt;description&gt;Default Hibernate Service&lt;/description&gt;" + 
"        &lt;property name=\"hibernate.show_sql\" value=\"false\"/&gt;" + 
"        &lt;property name=\"hibernate.cglib.use_reflection_optimizer\" value=\"true\"/&gt;" + 
"        &lt;property name=\"hibernate.connection.url\" value=\"jdbc:hsqldb:file:../temp/data/exodb\"/&gt;" + 
"        &lt;property name=\"hibernate.connection.driver_class\" value=\"org.hsqldb.jdbcDriver\"/&gt;" + 
"..." + 
"      &lt;/properties-param&gt;" + 
"    &lt;/init-params&gt;" + 
"  &lt;/component&gt;</programlisting>" + 
"					<para>" + 
"						In the org.exoplatform.services.database.impl.HibernateServiceImpl you will find that the name \"hibernate.properties\" of the properties-param is used to access the properties." + 
"					</para>" + 
"					<programlisting language=\"Java\" role=\"Java\">package org.exoplatform.services.database.impl;" + 
"" + 
"public class HibernateServiceImpl implements HibernateService, ComponentRequestLifecycle {" + 
"  public HibernateServiceImpl(InitParams initParams, CacheService cacheService) {" + 
"    PropertiesParam param = initParams.getPropertiesParam(\"hibernate.properties\");" + 
"..." + 
"}</programlisting>" + 
"				</example>" + 
"				<para>" + 
"					The value specification for &lt;value-param&gt; elements is a &lt;value&gt; element which defines a <literal>String</literal> instance." + 
"				</para>" + 
"				<programlisting language=\"XML\" role=\"XML\">&lt;component&gt;" + 
"  &lt;key&gt;org.exoplatform.services.resources.ResourceBundleService&lt;/key&gt;" + 
"  &lt;type&gt;org.exoplatform.services.resources.impl.SimpleResourceBundleService&lt;/type&gt;" + 
"    &lt;init-params&gt;" + 
"      &lt;values-param&gt;" + 
"        &lt;name&gt;classpath.resources&lt;/name&gt;" + 
"        &lt;description&gt;The resources  that start with the following package name should be load from file system&lt;/description&gt;" + 
"        &lt;value&gt;locale.portlet&lt;/value&gt;" + 
"      &lt;/values-param&gt;" + 
"" + 
"      &lt;values-param&gt;" + 
"        &lt;name&gt;init.resources&lt;/name&gt;" + 
"        &lt;description&gt;Store the following resources into the db for  the first launch &lt;/description&gt;" + 
"        &lt;value&gt;locale.test.resources.test&lt;/value&gt;" + 
"      &lt;/values-param&gt;" + 
"" + 
"      &lt;values-param&gt;" + 
"        &lt;name&gt;portal.resource.names&lt;/name&gt;" + 
"        &lt;description&gt;The properties files of  the portal ,  those file will be merged" + 
"          into one ResourceBundle properties &lt;/description&gt;" + 
"        &lt;value&gt;local.portal.portal&lt;/value&gt;" + 
"        &lt;value&gt;local.portal.custom&lt;/value&gt;" + 
"      &lt;/values-param&gt;" + 
"    &lt;/init-params&gt;" + 
"&lt;/component&gt;" + 
"</programlisting>" + 
"				<para>" + 
"					The value specification for &lt;values-param&gt; requires one or more &lt;value&gt; elements. Each &lt;value&gt; represents one <literal>String</literal> instance. All <literal>String</literal> values are then collected into a <literal>java.util.List</literal> instance." + 
"				</para>" + 
"				<programlisting language=\"XML\" role=\"XML\">&lt;component&gt;" + 
"   &lt;key&gt;org.exoplatform.services.cache.CacheService&lt;/key&gt;" + 
"   &lt;jmx-name&gt;cache:type=CacheService&lt;/jmx-name&gt;" + 
"   &lt;type&gt;org.exoplatform.services.cache.impl.CacheServiceImpl&lt;/type&gt;" + 
"   &lt;init-params&gt;" + 
"      &lt;object-param&gt;" + 
"         &lt;name&gt;cache.config.default&lt;/name&gt;" + 
"         &lt;description&gt;The default cache configuration&lt;/description&gt;" + 
"         &lt;object type=\"org.exoplatform.services.cache.ExoCacheConfig\"&gt;" + 
"            &lt;field name=\"name\"&gt;" + 
"               &lt;string&gt;default&lt;/string&gt;" + 
"            &lt;/field&gt;" + 
"            &lt;field name=\"maxSize\"&gt;" + 
"               &lt;int&gt;300&lt;/int&gt;" + 
"            &lt;/field&gt;" + 
"            &lt;field name=\"liveTime\"&gt;" + 
"               &lt;long&gt;300&lt;/long&gt;" + 
"            &lt;/field&gt;" + 
"            &lt;field name=\"distributed\"&gt;" + 
"               &lt;boolean&gt;false&lt;/boolean&gt;" + 
"            &lt;/field&gt;" + 
"            &lt;field name=\"implementation\"&gt;" + 
"               &lt;string&gt;org.exoplatform.services.cache.concurrent.ConcurrentFIFOExoCache&lt;/string&gt;" + 
"            &lt;/field&gt;" + 
"         &lt;/object&gt;" + 
"      &lt;/object-param&gt;" + 
"   &lt;/init-params&gt;" + 
"&lt;/component&gt;" + 
"</programlisting>" + 
"				<example>" + 
"					<title>&lt;value-param&gt; Example</title>" + 
"					<programlisting language=\"XML\" role=\"XML\">  &lt;component&gt;" + 
"    &lt;key&gt;org.exoplatform.portal.config.UserACL&lt;/key&gt;" + 
"    &lt;type&gt;org.exoplatform.portal.config.UserACL&lt;/type&gt;   " + 
"    &lt;init-params&gt;      " + 
"..." + 
"      &lt;value-param&gt;" + 
"        &lt;name&gt;access.control.workspace&lt;/name&gt;" + 
"        &lt;description&gt;groups with memberships that have the right to access the User Control Workspace&lt;/description&gt;" + 
"        &lt;value&gt;*:/platform/administrators,*:/organization/management/executive-board&lt;/value&gt; " + 
"      &lt;/value-param&gt; " + 
"..." + 
"  &lt;/component&gt;</programlisting>" + 
"					<para>" + 
"						The UserACL class accesses to the &lt;value-param&gt; in its constructor." + 
"					</para>" + 
"					<programlisting language=\"Java\" role=\"Java\">package org.exoplatform.portal.config;" + 
"public class UserACL {" + 
"" + 
"  public UserACL(InitParams params) {" + 
"    UserACLMetaData md = new UserACLMetaData();" + 
"    ValueParam accessControlWorkspaceParam = params.getValueParam(\"access.control.workspace\");" + 
"    if(accessControlWorkspaceParam != null) md.setAccessControlWorkspace(accessControlWorkspaceParam.getValue());" + 
"...</programlisting>" + 
"				</example>" + 
"				<para>" + 
"					For &lt;object-param&gt; entries, the value specification consists of an &lt;object&gt; element which is used for plain Java style object specification (specifying an implementation <emphasis>class - &lt;type&gt;</emphasis>, and <emphasis>property values - &lt;field&gt;</emphasis>)." + 
"				</para>" + 
"				<example>" + 
"					<title>&lt;object-param&gt; and LDAP Example</title>" + 
"					<para>" + 
"						Let's have a look at the configuration of the LDAPService. It is not important to understand LDAP, we only discuss the parameters as they relate to &lt;object-param&gt;." + 
"					</para>" + 
"					<programlisting language=\"XML\" role=\"XML\">&lt;component&gt;" + 
"    &lt;key&gt;org.exoplatform.services.LDAP.LDAPService&lt;/key&gt;" + 
"    &lt;type&gt;org.exoplatform.services.LDAP.impl.LDAPServiceImpl&lt;/type&gt;" + 
"    &lt;init-params&gt;" + 
"      &lt;object-param&gt;" + 
"        &lt;name&gt;LDAP.config&lt;/name&gt;" + 
"        &lt;description&gt;Default LDAP config&lt;/description&gt;" + 
"        &lt;object type=\"org.exoplatform.services.LDAP.impl.LDAPConnectionConfig\"&gt;         " + 
"   &lt;field  name=\"providerURL\"&gt;&lt;string&gt;LDAPs://10.0.0.3:636&lt;/string&gt;&lt;/field&gt;" + 
"   &lt;field  name=\"rootdn\"&gt;&lt;string&gt;CN=Administrator,CN=Users,DC=exoplatform,DC=org&lt;/string&gt;&lt;/field&gt;" + 
"   &lt;field  name=\"password\"&gt;&lt;string&gt;exo&lt;/string&gt;&lt;/field&gt;" + 
"   &lt;field  name=\"version\"&gt;&lt;string&gt;3&lt;/string&gt;&lt;/field&gt;" + 
"     &lt;field  name=\"minConnection\"&gt;&lt;int&gt;5&lt;/int&gt;&lt;/field&gt;" + 
"       &lt;field  name=\"maxConnection\"&gt;&lt;int&gt;10&lt;/int&gt;&lt;/field&gt;    " + 
"       &lt;field  name=\"referralMode\"&gt;&lt;string&gt;ignore&lt;/string&gt;&lt;/field&gt;" + 
"       &lt;field  name=\"serverName\"&gt;&lt;string&gt;active.directory&lt;/string&gt;&lt;/field&gt;" + 
"       &lt;/object&gt;" + 
"      &lt;/object-param&gt;" + 
"    &lt;/init-params&gt;" + 
"&lt;/component&gt;</programlisting>" + 
"					<para>" + 
"						You see here an &lt;object-param&gt; element is being used to pass the parameters inside an object (actually a java bean). It consists of a <emphasis role=\"bold\">name</emphasis>, a <emphasis role=\"bold\">description</emphasis> and exactly one <emphasis role=\"bold\">object</emphasis>. The object defines the <emphasis role=\"bold\">type</emphasis> and a number of <emphasis role=\"bold\">fields</emphasis>." + 
"					</para>" + 
"					<para>" + 
"						Here you see how the service accesses the object:" + 
"					</para>" + 
"					<programlisting language=\"Java\" role=\"Java\">package org.exoplatform.services.LDAP.impl;" + 
"" + 
"public class LDAPServiceImpl implements LDAPService {" + 
"..." + 
"  public LDAPServiceImpl(InitParams params) {" + 
"    LDAPConnectionConfig config = (LDAPConnectionConfig) params.getObjectParam(\"LDAP.config\")" + 
"                                                               .getObject();" + 
"...</programlisting>" + 
"					<para>" + 
"						The passed object is LDAPConnectionConfig which is a classic <emphasis role=\"bold\">java bean</emphasis>. It contains all fields and also the appropriate getters and setters (not listed here). You also can provide default values. The container creates a new instance of your bean and calls all setters whose values are configured in the configuration file." + 
"					</para>" + 
"					<programlisting language=\"Java\" role=\"Java\">package org.exoplatform.services.LDAP.impl;" + 
"" + 
"public class LDAPConnectionConfig {" + 
"  private String providerURL        = \"LDAP://127.0.0.1:389\";" + 
"  private String rootdn;" + 
"  private String password;                                  " + 
"  private String version;                                   " + 
"  private String authenticationType = \"simple\";" + 
"  private String serverName         = \"default\";" + 
"  private int    minConnection;" + 
"  private int    maxConnection;" + 
"  private String referralMode       = \"follow\";" + 
"...</programlisting>" + 
"					<para>" + 
"						You see that the types (String, int) of the fields in the configuration correspond with the bean. A short glance in the kernel_1_2.xsd file let us discover more simple types:" + 
"					</para>" + 
"					<itemizedlist>" + 
"						<listitem>" + 
"							<para>" + 
"								<emphasis role=\"bold\">string, int, long, boolean, date, double</emphasis>" + 
"							</para>" + 
"						</listitem>" + 
"					</itemizedlist>" + 
"					<para>" + 
"						Have a look on this type test xml file: <ulink url=\"https://anonsvn.jboss.org/repos/exo-jcr/kernel/trunk/exo.kernel.container/src/test/resources/object.xml\">https://anonsvn.jboss.org/repos/exo-jcr/kernel/trunk/exo.kernel.container/src/test/resources/object.xml</ulink>." + 
"					</para>" + 
"				</example>" + 
"				<para>" + 
"					The following section has an example of specifying a field of with a <literal>Collection</literal> type." + 
"				</para>" + 
"				<para>" + 
"					The &lt;init-params&gt; structure (the names and types of entries) is specific for each service, as it is the code inside a service components' class that defines which entry names to look up and what types it expects to find." + 
"				</para>" + 
"				<para role=\"RoleCreateBugPara\">" + 
"					<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18967-565970+%5BLatest%5D&amp;cf_build_id=18967-565970+05+Dec+2013+14%3A14+en-US+%5BLatest%5D&amp;comment=Title%3A+%26lt%3Binit-params%26gt%3B+configuration+element%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"				</para>" + 
"				<section id=\"Collection\" remap=\"TID_18968\">" + 
"					<title>Collection</title>" + 
"					<para>" + 
"						You also can use java collections to configure your service. In order to see an example, let's open the database-organization-configuration.xml file. This file defines a default user organization (users, groups, memberships/roles) of your portal. They use component-plugins which are explained later. You will see that object-param is used again." + 
"					</para>" + 
"					<para>" + 
"						There are two collections: The first collection is an <emphasis role=\"bold\">ArrayList</emphasis>. This ArrayList contains only one value, but there could be more. The only value is an object which defines the field of the NewUserConfig$JoinGroup bean." + 
"					</para>" + 
"					<para>" + 
"						The second collection is a <emphasis role=\"bold\">HashSet</emphasis> that is a set of strings." + 
"					</para>" + 
"					<programlisting language=\"XML\" role=\"XML\">    &lt;component-plugin&gt;" + 
"      &lt;name&gt;new.user.event.listener&lt;/name&gt;" + 
"      &lt;set-method&gt;addListenerPlugin&lt;/set-method&gt;" + 
"      &lt;type&gt;org.exoplatform.services.organization.impl.NewUserEventListener&lt;/type&gt;" + 
"      &lt;description&gt;this listener assign group and membership to a new created user&lt;/description&gt;" + 
"      &lt;init-params&gt;" + 
"        &lt;object-param&gt;" + 
"          &lt;name&gt;configuration&lt;/name&gt;" + 
"          &lt;description&gt;description&lt;/description&gt;" + 
"          &lt;object type=\"org.exoplatform.services.organization.impl.NewUserConfig\"&gt;" + 
"            &lt;field  name=\"group\"&gt;" + 
"              &lt;collection type=\"java.util.ArrayList\"&gt;" + 
"                &lt;value&gt;" + 
"                  &lt;object type=\"org.exoplatform.services.organization.impl.NewUserConfig$JoinGroup\"&gt;" + 
"                    &lt;field  name=\"groupId\"&gt;&lt;string&gt;/platform/users&lt;/string&gt;&lt;/field&gt;" + 
"                    &lt;field  name=\"membership\"&gt;&lt;string&gt;member&lt;/string&gt;&lt;/field&gt;" + 
"                  &lt;/object&gt;" + 
"                &lt;/value&gt;               " + 
"              &lt;/collection&gt;" + 
"            &lt;/field&gt;" + 
"            &lt;field  name=\"ignoredUser\"&gt;" + 
"              &lt;collection type=\"java.util.HashSet\"&gt;" + 
"                &lt;value&gt;&lt;string&gt;root&lt;/string&gt;&lt;/value&gt;" + 
"                &lt;value&gt;&lt;string&gt;john&lt;/string&gt;&lt;/value&gt;" + 
"                &lt;value&gt;&lt;string&gt;marry&lt;/string&gt;&lt;/value&gt;" + 
"                &lt;value&gt;&lt;string&gt;demo&lt;/string&gt;&lt;/value&gt;" + 
"                &lt;value&gt;&lt;string&gt;james&lt;/string&gt;&lt;/value&gt;" + 
"              &lt;/collection&gt;" + 
"            &lt;/field&gt;" + 
"          &lt;/object&gt;" + 
"        &lt;/object-param&gt;" + 
"      &lt;/init-params&gt;" + 
"    &lt;/component-plugin&gt;</programlisting>" + 
"					<para>" + 
"						Let's look at the org.exoplatform.services.organization.impl.NewUserConfig bean:" + 
"					</para>" + 
"					<programlisting language=\"Java\" role=\"Java\">public class NewUserConfig {" + 
"  private List    role;" + 
"  private List    group;" + 
"  private HashSet ignoredUser;" + 
"" + 
"  ..." + 
"" + 
"  public void setIgnoredUser(String user) {" + 
"    ignoredUser.add(user);" + 
"" + 
"  ..." + 
"" + 
"  static public class JoinGroup {" + 
"    public String  groupId;" + 
"    public String  membership;" + 
"  ..." + 
"}</programlisting>" + 
"					<para>" + 
"						You see the values of the HashSet are set one by one by the container, and it's the responsibility of the bean to add these values to its HashSet." + 
"					</para>" + 
"					<para>" + 
"						The JoinGroup object is just an inner class and implements a bean of its own. It can be accessed like any other inner class using NewUserConfig.JoinGroup." + 
"					</para>" + 
"					<para role=\"RoleCreateBugPara\">" + 
"						<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18968-565970+%5BLatest%5D&amp;cf_build_id=18968-565970+05+Dec+2013+14%3A14+en-US+%5BLatest%5D&amp;comment=Title%3A+Collection%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"					</para>" + 
"				</section>" + 
"			</section>" + 
"			<section id=\"Component_Plug-in_Priority\" remap=\"TID_18969\">" + 
"				<title>Component Plug-in Priority</title>" + 
"				<para>" + 
"					Since kernel version 2.0.6 it is possible to setup order of loading for ComponentPlugin. Use the ' <emphasis role=\"bold\">priority</emphasis>' tag to define plug-in's load priority. By <emphasis role=\"bold\">default</emphasis> all plug-ins get <emphasis role=\"bold\">priority '0'</emphasis>; they will be loaded in the container's natural way. If you want one plug-in to be loaded later than the others then just set priority for it <emphasis role=\"bold\">higher than zero</emphasis>." + 
"				</para>" + 
"				<para>" + 
"					Simple example of fragment of a <emphasis role=\"bold\">configuration.xml</emphasis>." + 
"				</para>" + 
"				<programlisting language=\"XML\" role=\"XML\">..." + 
"&lt;component&gt;" + 
"  &lt;type&gt;org.exoplatform.services.Component1&lt;/type&gt;" + 
"&lt;/component&gt;" + 
"" + 
"&lt;external-component-plugins&gt;" + 
"  &lt;target-component&gt;org.exoplatform.services.Component1&lt;/target-component&gt;" + 
"" + 
"  &lt;component-plugin&gt;" + 
"    &lt;name&gt;Plugin1&lt;/name&gt;" + 
"    &lt;set-method&gt;addPlugin&lt;/set-method&gt;" + 
"    &lt;type&gt;org.exoplatform.services.plugins.Plugin1&lt;/type&gt;" + 
"    &lt;description&gt;description&lt;/description&gt;" + 
"    &lt;priority&gt;1&lt;/priority&gt;" + 
"  &lt;/component-plugin&gt;" + 
"" + 
"  &lt;component-plugin&gt;" + 
"    &lt;name&gt;Plugin2&lt;/name&gt;" + 
"    &lt;set-method&gt;addPlugin&lt;/set-method&gt;" + 
"    &lt;type&gt;org.exoplatform.services.plugins.Plugin2&lt;/type&gt;" + 
"    &lt;description&gt;description&lt;/description&gt;" + 
"    &lt;priority&gt;2&lt;/priority&gt;" + 
"  &lt;/component-plugin&gt;" + 
"" + 
"&lt;/external-component-plugins&gt;" + 
"" + 
"&lt;external-component-plugins&gt;" + 
"  &lt;target-component&gt;org.exoplatform.services.Component1&lt;/target-component&gt;" + 
"  &lt;component-plugin&gt;" + 
"    &lt;name&gt;Plugin3&lt;/name&gt;" + 
"    &lt;set-method&gt;addPlugin&lt;/set-method&gt;" + 
"    &lt;type&gt;org.exoplatform.services.plugins.Plugin3&lt;/type&gt;" + 
"    &lt;description&gt;description&lt;/description&gt;" + 
"  &lt;/component-plugin&gt;" + 
"&lt;/external-component-plugins&gt;" + 
"...</programlisting>" + 
"				<para>" + 
"					In the above example plug-in 'Plugin3' will be loaded first because it has the default priority '0'. Then, plug-in 'Plugin1' will be loaded and last one is plug-in 'Plugin2'." + 
"				</para>" + 
"				<para role=\"RoleCreateBugPara\">" + 
"					<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18969-565970+%5BLatest%5D&amp;cf_build_id=18969-565970+05+Dec+2013+14%3A14+en-US+%5BLatest%5D&amp;comment=Title%3A+Component+Plug-in+Priority%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"				</para>" + 
"			</section>" + 
"			<section id=\"Configuration_Logging\" remap=\"TID_18970\">" + 
"				<title>Configuration Logging</title>" + 
"				<para>" + 
"					In case you need to solve problems with your service configuration, you have to know from which JAR/WAR causes your troubles. Add the JVM system property <parameter>org.exoplatform.container.configuration.debug</parameter> to your eXo.bat or eXo.sh file (exo-tomcat/bin/)." + 
"				</para>" + 
"				<programlisting>set EXO_CONFIG_OPTS=\"-Dorg.exoplatform.container.configuration.debug\"</programlisting>" + 
"				<para>" + 
"					If this property is set the container configuration manager reports during startup the configuration retrieval process to the standard output (System.out)." + 
"				</para>" + 
"				<programlisting>......" + 
"Add configuration jar:file:/D:/Projects/eXo/dev/exo-working/exo-tomcat/lib/exo.kernel.container-trunk.jar!/conf/portal/configuration.xml" + 
"Add configuration jar:file:/D:/Projects/eXo/dev/exo-working/exo-tomcat/lib/exo.kernel.component.cache-trunk.jar!/conf/portal/configuration.xml" + 
"Add configuration jndi:/localhost/portal/WEB-INF/conf/configuration.xml import jndi:/localhost/portal/WEB-INF/conf/common/common-configuration.xml" + 
"import jndi:/localhost/portal/WEB-INF/conf/database/database-configuration.xml import jndi:/localhost/portal/WEB-INF/conf/ecm/jcr-component-plugins-configuration.xml" + 
"import jndi:/localhost/portal/WEB-INF/conf/jcr/jcr-configuration.xml" + 
"......</programlisting>" + 
"				<para role=\"RoleCreateBugPara\">" + 
"					<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18970-565978+%5BLatest%5D&amp;cf_build_id=18970-565978+05+Dec+2013+14%3A20+en-US+%5BLatest%5D&amp;comment=Title%3A+Configuration+Logging%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"				</para>" + 
"			</section>" + 
"			<section id=\"Import1\" remap=\"TID_18971\">" + 
"				<title>Import</title>" + 
"				<para>" + 
"					The import tag allows to link to other configuration files. These imported files can be placed anywhere. If you write a default configuration which is part of your jar file you should not import files from outside your jar." + 
"				</para>" + 
"				<itemizedlist>" + 
"					<listitem>" + 
"						<para>" + 
"							<emphasis role=\"bold\">war</emphasis>: Imports from <emphasis role=\"bold\">portal.war/WEB-INF</emphasis>" + 
"						</para>" + 
"					</listitem>" + 
"					<listitem>" + 
"						<para>" + 
"							<emphasis role=\"bold\">jar</emphasis> or <emphasis role=\"bold\">classpath</emphasis>: Uses the <emphasis role=\"bold\">classloader</emphasis>, you can use this prefix in the default configuration for importing an other configuration file which is accessible by the classloader." + 
"						</para>" + 
"					</listitem>" + 
"					<listitem>" + 
"						<para>" + 
"							<emphasis role=\"bold\">file</emphasis>: Uses an <emphasis role=\"bold\">absolute path</emphasis>, you also can put a <emphasis role=\"bold\">URL</emphasis>." + 
"						</para>" + 
"					</listitem>" + 
"					<listitem>" + 
"						<para>" + 
"							<emphasis role=\"bold\">without any prefix</emphasis>:" + 
"						</para>" + 
"					</listitem>" + 
"				</itemizedlist>" + 
"				<para>" + 
"					If you open the <filename>portal/trunk/web/portal/src/main/webapp/WEB-INF/conf/configuration.xml</filename> you will see that it consists only of imports:" + 
"				</para>" + 
"				<programlisting language=\"XML\" role=\"XML\">&lt;import&gt;war:/conf/common/common-configuration.xml&lt;/import&gt;" + 
"&lt;import&gt;war:/conf/common/logs-configuration.xml&lt;/import&gt;" + 
"&lt;import&gt;war:/conf/database/database-configuration.xml&lt;/import&gt;" + 
"&lt;import&gt;war:/conf/jcr/jcr-configuration.xml&lt;/import&gt;" + 
"&lt;import&gt;war:/conf/common/portlet-container-configuration.xml&lt;/import&gt;" + 
"...</programlisting>" + 
"				<para role=\"RoleCreateBugPara\">" + 
"					<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18971-565978+%5BLatest%5D&amp;cf_build_id=18971-565978+05+Dec+2013+14%3A20+en-US+%5BLatest%5D&amp;comment=Title%3A+Import%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"				</para>" + 
"			</section>" + 
"			<section id=\"System_properties2\" remap=\"TID_18972\">" + 
"				<title>System properties</title>" + 
"				<para>" + 
"					Since kernel 2.0.7 and 2.1, it is possible to use system properties in literal values of component configuration meta data. This makes it possible to resolve properties at runtime instead of providing a value at packaging time." + 
"				</para>" + 
"				<para>" + 
"					In portal/trunk/web/portal/src/main/webapp/WEB-INF/conf/database/database-configuration.tmpl.xml you find an example for system properties:" + 
"				</para>" + 
"				<programlisting language=\"XML\" role=\"XML\">  &lt;component&gt;" + 
"    &lt;key&gt;org.exoplatform.services.database.HibernateService&lt;/key&gt;" + 
"    &lt;jmx-name&gt;database:type=HibernateService&lt;/jmx-name&gt;" + 
"    &lt;type&gt;org.exoplatform.services.database.impl.HibernateServiceImpl&lt;/type&gt;" + 
"    &lt;init-params&gt;" + 
"      &lt;properties-param&gt;" + 
"        &lt;name&gt;hibernate.properties&lt;/name&gt;" + 
"        &lt;description&gt;Default Hibernate Service&lt;/description&gt;" + 
"..." + 
"        &lt;property name=\"hibernate.connection.url\" value=\"${connectionUrl}\"/&gt;" + 
"        &lt;property name=\"hibernate.connection.driver_class\" value=\"${driverClass}\"/&gt;" + 
"        &lt;property name=\"hibernate.connection.username\" value=\"${username}\"/&gt;" + 
"        &lt;property name=\"hibernate.connection.password\" value=\"${password}\"/&gt;" + 
"        &lt;property name=\"hibernate.dialect\" value=\"${dialect}\"/&gt;" + 
"..." + 
"      &lt;/properties-param&gt;" + 
"    &lt;/init-params&gt;" + 
"  &lt;/component&gt;</programlisting>" + 
"				<para>" + 
"					As these are system properties you use the -D command: <emphasis role=\"bold\">java -DconnectionUrl=jdbc:hsqldb:file:../temp/data/exodb -DdriverClass=org.hsqldb.jdbcDriver</emphasis> Or better use the parameters of eXo.bat / eXo.sh when you start the portal: <emphasis role=\"bold\">set EXO_OPTS=\"-DconnectionUrl=jdbc:hsqldb:file:../temp/data/exodb -DdriverClass=org.hsqldb.jdbcDriver\"</emphasis>" + 
"				</para>" + 
"				<para role=\"RoleCreateBugPara\">" + 
"					<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18972-565978+%5BLatest%5D&amp;cf_build_id=18972-565978+05+Dec+2013+14%3A20+en-US+%5BLatest%5D&amp;comment=Title%3A+System+properties%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"				</para>" + 
"			</section>" + 
"		</section>" + 
"	</section>" + 
"	<section id=\"sect-Specific_Services\">" + 
"		<title>Specific Services</title>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18973-565978+%5BLatest%5D&amp;cf_build_id=18973-565978+05+Dec+2013+14%3A20+en-US+%5BLatest%5D&amp;comment=Title%3A+Specific+Services%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"		<section id=\"sect-ListenerService\">" + 
"			<title>ListenerService</title>" + 
"			<section id=\"ListenerService\" remap=\"TID_18974\">" + 
"				<title>ListenerService</title>" + 
"				<para role=\"RoleCreateBugPara\">" + 
"					<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18974-565978+%5BLatest%5D&amp;cf_build_id=18974-565978+05+Dec+2013+14%3A20+en-US+%5BLatest%5D&amp;comment=Title%3A+ListenerService%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"				</para>" + 
"			</section>" + 
"			<section id=\"Asynchronous_Event_Broadcast\" remap=\"TID_18975\">" + 
"				<title>Asynchronous Event Broadcast</title>" + 
"				<para>" + 
"					Basically, ListenerService used to store Listeners and broadcast events to them." + 
"				</para>" + 
"				<para>" + 
"					ListenerService event broadcasting works in next way - it takes a destination listeners and executes event on those listeners." + 
"				</para>" + 
"				<para>" + 
"					But, some events may take a lot of time, so idea to make event processing asynchronous is useful." + 
"				</para>" + 
"				<blockquote>" + 
"					<para>" + 
"						What do I need to make my listener asynchronous?" + 
"					</para>" + 
"				</blockquote>" + 
"				<para>" + 
"					- It's very simple, just mark your Listener implementation as <classname>@Asynchronous</classname>." + 
"				</para>" + 
"				<programlisting language=\"Java\" role=\"Java\">@Asynchronous" + 
"class AsynchListenerWithException&lt;S,D&gt; extends Listener&lt;S,D&gt;" + 
"{" + 
"   @Override" + 
"   public void onEvent(Event&lt;S,D&gt; event) throws Exception" + 
"   {" + 
"      // some expensive operation" + 
"   }" + 
"}</programlisting>" + 
"				<para>" + 
"					Now, our AsynchListener will be executed in separate thread by <classname>ExecutorService</classname>." + 
"				</para>" + 
"				<para>" + 
"					By default, <classname>ExecutoreService</classname> configured with thread pool size 1, you can change it in configuration:" + 
"				</para>" + 
"				<programlisting language=\"XML\" role=\"XML\">   &lt;component&gt;" + 
"      &lt;key&gt;org.exoplatform.services.listener.ListenerService&lt;/key&gt;" + 
"      &lt;type&gt;org.exoplatform.services.listener.ListenerService&lt;/type&gt;" + 
"      " + 
"      &lt;init-params&gt;" + 
"         &lt;value-param&gt;" + 
"            &lt;name&gt;asynchPoolSize&lt;/name&gt;" + 
"            &lt;value&gt;5&lt;/value&gt;" + 
"         &lt;/value-param&gt;" + 
"      &lt;/init-params&gt;" + 
"" + 
"   &lt;/component&gt;</programlisting>" + 
"				<para role=\"RoleCreateBugPara\">" + 
"					<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18975-565978+%5BLatest%5D&amp;cf_build_id=18975-565978+05+Dec+2013+14%3A20+en-US+%5BLatest%5D&amp;comment=Title%3A+Asynchronous+Event+Broadcast%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"				</para>" + 
"			</section>" + 
"		</section>" + 
"		<section id=\"sect-Understanding_the_ListenerService\">" + 
"			<title>Understanding the ListenerService</title>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18976-565978+%5BLatest%5D&amp;cf_build_id=18976-565978+05+Dec+2013+14%3A20+en-US+%5BLatest%5D&amp;comment=Title%3A+Understanding+the+ListenerService%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"			<section id=\"Objectives\" remap=\"TID_18977\">" + 
"				<title>Objectives</title>" + 
"				<para>" + 
"					This article will first describe how the ListenerService works and then it will show you how to configure the ListenerService." + 
"				</para>" + 
"				<para role=\"RoleCreateBugPara\">" + 
"					<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18977-565978+%5BLatest%5D&amp;cf_build_id=18977-565978+05+Dec+2013+14%3A20+en-US+%5BLatest%5D&amp;comment=Title%3A+Objectives%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"				</para>" + 
"			</section>" + 
"			<section id=\"What_is_the_ListenerService_\" remap=\"TID_18978\">" + 
"				<title>What is the ListenerService ?</title>" + 
"				<para>" + 
"					Inside eXo, an event mechanism allows to trigger and listen to events under specific conditions. This mechanism is used in several places in eXo such as login/logout time." + 
"				</para>" + 
"				<para role=\"RoleCreateBugPara\">" + 
"					<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18978-565978+%5BLatest%5D&amp;cf_build_id=18978-565978+05+Dec+2013+14%3A20+en-US+%5BLatest%5D&amp;comment=Title%3A+What+is+the+ListenerService+%3F%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"				</para>" + 
"			</section>" + 
"			<section id=\"sect-How_does_it_work\">" + 
"				<title>How does it work?</title>" + 
"				<para>" + 
"					Listeners must be subclasses of org.exoplatform.services.listener.Listener registered by the ListenerService." + 
"				</para>" + 
"				<para role=\"RoleCreateBugPara\">" + 
"					<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18979-565978+%5BLatest%5D&amp;cf_build_id=18979-565978+05+Dec+2013+14%3A20+en-US+%5BLatest%5D&amp;comment=Title%3A+How+does+it+work%3F%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"				</para>" + 
"				<section id=\"Registering_a_listener\" remap=\"TID_18980\">" + 
"					<title>Registering a listener</title>" + 
"					<para>" + 
"						To register a listener, you need to call the addListener() method." + 
"					</para>" + 
"					<programlisting language=\"Java\" role=\"Java\">/**" + 
" * This method is used to register a listener with the service. The method" + 
" * should: 1. Check to see if there is a list of listener with the listener" + 
" * name, create one if the listener list doesn't exit 2. Add the new listener" + 
" * to the listener list" + 
" * " + 
" * @param listener" + 
"*/" + 
"public void addListener(Listener listener) {" + 
"   ..." + 
"}</programlisting>" + 
"					<para>" + 
"						By convention, we use the listener name as the name of the event to listen to." + 
"					</para>" + 
"					<para role=\"RoleCreateBugPara\">" + 
"						<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18980-565978+%5BLatest%5D&amp;cf_build_id=18980-565978+05+Dec+2013+14%3A20+en-US+%5BLatest%5D&amp;comment=Title%3A+Registering+a+listener%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"					</para>" + 
"				</section>" + 
"				<section id=\"Triggering_an_event\" remap=\"TID_18981\">" + 
"					<title>Triggering an event</title>" + 
"					<para>" + 
"						To trigger an event, an application can call one of the broadcast() methods of ListenerService." + 
"					</para>" + 
"					<programlisting language=\"Java\" role=\"Java\">/**" + 
" * This method is used to broadcast an event. This method should: 1. Check if" + 
" * there is a list of listener that listen to the event name. 2. If there is a" + 
" * list of listener, create the event object with the given name , source and" + 
" * data 3. For each listener in the listener list, invoke the method" + 
" * onEvent(Event)" + 
" * " + 
" * @param &lt;S&gt; The type of the source that broadcast the event" + 
" * @param &lt;D&gt; The type of the data that the source object is working on" + 
" * @param name The name of the event" + 
" * @param source The source object instance" + 
" * @param data The data object instance" + 
" * @throws Exception " + 
" */" + 
"public &lt;S, D&gt; void broadcast(String name, S source, D data) throws Exception {" + 
"   ..." + 
"}" + 
"" + 
"/**" + 
" * This method is used when a developer want to implement his own event object" + 
" * and broadcast the event. The method should: 1. Check if there is a list of" + 
" * listener that listen to the event name. 2. If there is a list of the" + 
" * listener, For each listener in the listener list, invoke the method" + 
" * onEvent(Event)" + 
" * " + 
" * @param &lt;T&gt; The type of the event object, the type of the event object has" + 
" *          to be extended from the Event type" + 
" * @param event The event instance" + 
" * @throws Exception" + 
" */" + 
"public &lt;T extends Event&gt; void broadcast(T event) throws Exception {" + 
"   ..." + 
"}</programlisting>" + 
"					<para>" + 
"						The broadcast() methods retrieve the name of the event and find the registered listeners with the same name and call the method onEvent() on each listener found." + 
"					</para>" + 
"					<para>" + 
"						Each listener is a class that extends org.exoplatform.services.listener.Listener, as you can see below:" + 
"					</para>" + 
"					<programlisting language=\"Java\" role=\"Java\">public abstract class Listener&lt;S, D&gt; extends BaseComponentPlugin {" + 
"" + 
"   /**" + 
"    * This method should be invoked when an event with the same name is" + 
"    * broadcasted" + 
"    */" + 
"   public abstract void onEvent(Event&lt;S, D&gt; event) throws Exception;" + 
"}</programlisting>" + 
"					<warning>" + 
"						<para>" + 
"							As you can see we use generics to limit the source of the event to the type 'S' and the data of the event to the type 'D', so we expect that listeners implement the method onEvent() with the corresponding types" + 
"						</para>" + 
"					</warning>" + 
"					<para>" + 
"						Each listener is also a ComponentPlugin with a name and a description, in other words, the name of the listener will be the name given in the configuration file, for more details see the next section." + 
"					</para>" + 
"					<programlisting language=\"Java\" role=\"Java\">public interface ComponentPlugin {" + 
"   public String getName();" + 
"" + 
"   public void setName(String name);" + 
"" + 
"   public String getDescription();" + 
"" + 
"   public void setDescription(String description);" + 
"}</programlisting>" + 
"					<para role=\"RoleCreateBugPara\">" + 
"						<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18981-565978+%5BLatest%5D&amp;cf_build_id=18981-565978+05+Dec+2013+14%3A20+en-US+%5BLatest%5D&amp;comment=Title%3A+Triggering+an+event%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"					</para>" + 
"				</section>" + 
"			</section>" + 
"			<section id=\"How_to_configure_a_listener\" remap=\"TID_18982\">" + 
"				<title>How to configure a listener?</title>" + 
"				<para>" + 
"					All listeners are in fact a ComponentPlugin so it must be configured as below:" + 
"				</para>" + 
"				<programlisting language=\"XML\" role=\"XML\">&lt;?xml version=\"1.0\" encoding=\"ISO-8859-1\"?&gt;" + 
"&lt;configuration&gt;" + 
"..." + 
"  &lt;external-component-plugins&gt;" + 
"    &lt;!-- The full qualified name of the ListenerService --&gt; " + 
"    &lt;target-component&gt;org.exoplatform.services.listener.ListenerService&lt;/target-component&gt;" + 
"" + 
"    &lt;component-plugin&gt;" + 
"    &lt;!-- The name of the listener that is also the name of the target event --&gt;" + 
"      &lt;name&gt;${name-of-the-target-event}&lt;/name&gt;" + 
"      &lt;!-- The name of the method to call on the ListenerService in order to register the Listener --&gt;" + 
"      &lt;set-method&gt;addListener&lt;/set-method&gt;" + 
"      &lt;!-- The full qualified name of the Listener --&gt;" + 
"      &lt;type&gt;${the-FQN-of-the-listener}&lt;/type&gt;" + 
"    &lt;/component-plugin&gt;" + 
"" + 
"  &lt;/external-component-plugins&gt;" + 
"&lt;/configuration&gt;</programlisting>" + 
"				<para role=\"RoleCreateBugPara\">" + 
"					<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18982-565978+%5BLatest%5D&amp;cf_build_id=18982-565978+05+Dec+2013+14%3A20+en-US+%5BLatest%5D&amp;comment=Title%3A+How+to+configure+a+listener%3F%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"				</para>" + 
"			</section>" + 
"			<section id=\"Concrete_Example\" remap=\"TID_18983\">" + 
"				<title>Concrete Example</title>" + 
"				<para>" + 
"					The org.exoplatform.services.security.ConversationRegistry uses the ListenerService to notify that a user has just signed in or just left the application. For example, when a new user signs in, the following code is called:" + 
"				</para>" + 
"				<programlisting language=\"Java\" role=\"Java\">listenerService.broadcast(\"exo.core.security.ConversationRegistry.register\", this, state);</programlisting>" + 
"				<para>" + 
"					This code will in fact create a new Event which name is \"exo.core.security.ConversationRegistry.register\", which source is the current instance of ConversationRegistry and which data is the given state. The ListenerService will call the method onEvent(Event&lt;ConversationRegistry, ConversationState&gt; event) on all the listeners which name is \"exo.core.security.ConversationRegistry.register\"." + 
"				</para>" + 
"				<para>" + 
"					In This example, we define a Listener that will listen the event \"exo.core.security.ConversationRegistry.register\"." + 
"				</para>" + 
"				<programlisting language=\"XML\" role=\"XML\">&lt;?xml version=\"1.0\" encoding=\"ISO-8859-1\"?&gt;" + 
"&lt;configuration&gt;" + 
"..." + 
"  &lt;external-component-plugins&gt;" + 
"    &lt;!-- The full qualified name of the ListenerService --&gt; " + 
"    &lt;target-component&gt;org.exoplatform.services.listener.ListenerService&lt;/target-component&gt;" + 
"" + 
"    &lt;component-plugin&gt;" + 
"      &lt;!-- The name of the listener that is also the name of the target event --&gt;" + 
"      &lt;name&gt;exo.core.security.ConversationRegistry.register&lt;/name&gt;" + 
"      &lt;!-- The name of the method to call on the ListenerService in order to register the Listener --&gt;" + 
"      &lt;set-method&gt;addListener&lt;/set-method&gt;" + 
"      &lt;!-- The full qualified name of the Listener --&gt;" + 
"      &lt;type&gt;org.exoplatform.forum.service.AuthenticationLoginListener&lt;/type&gt;" + 
"    &lt;/component-plugin&gt;" + 
"" + 
"  &lt;/external-component-plugins&gt;" + 
"&lt;/configuration&gt;" + 
"...</programlisting>" + 
"				<para role=\"RoleCreateBugPara\">" + 
"					<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18983-565978+%5BLatest%5D&amp;cf_build_id=18983-565978+05+Dec+2013+14%3A20+en-US+%5BLatest%5D&amp;comment=Title%3A+Concrete+Example%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"				</para>" + 
"			</section>" + 
"		</section>" + 
"		<section id=\"sect-Job_Schedule\">" + 
"			<title>Job Schedule</title>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18984-565978+%5BLatest%5D&amp;cf_build_id=18984-565978+05+Dec+2013+14%3A20+en-US+%5BLatest%5D&amp;comment=Title%3A+Job+Schedule%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"			<section id=\"What_is_Job_Scheduler\" remap=\"TID_18985\">" + 
"				<title>What is Job Scheduler?</title>" + 
"				<para>" + 
"					<emphasis role=\"bold\">Job scheduler</emphasis> defines a job to execute a given number of times during a given period. It is a service that is in charge of unattended background executions, commonly known for historical reasons as batch processing. It is used to create and run jobs automatically and continuously, to schedule event-driven jobs and reports." + 
"				</para>" + 
"				<para role=\"RoleCreateBugPara\">" + 
"					<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18985-565978+%5BLatest%5D&amp;cf_build_id=18985-565978+05+Dec+2013+14%3A20+en-US+%5BLatest%5D&amp;comment=Title%3A+What+is+Job+Scheduler%3F%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"				</para>" + 
"			</section>" + 
"			<section id=\"sect-How_does_Job_Scheduler_work\">" + 
"				<title>How does Job Scheduler work?</title>" + 
"				<para>" + 
"					Jobs are scheduled to run when a given Trigger occurs. Triggers can be created with nearly any combination of the following directives:" + 
"				</para>" + 
"				<itemizedlist>" + 
"					<listitem>" + 
"						<para>" + 
"							at a certain time of day (to the millisecond)" + 
"						</para>" + 
"					</listitem>" + 
"					<listitem>" + 
"						<para>" + 
"							on certain days of the week" + 
"						</para>" + 
"					</listitem>" + 
"					<listitem>" + 
"						<para>" + 
"							on certain days of the month" + 
"						</para>" + 
"					</listitem>" + 
"					<listitem>" + 
"						<para>" + 
"							on certain days of the year" + 
"						</para>" + 
"					</listitem>" + 
"					<listitem>" + 
"						<para>" + 
"							not on certain days listed within a registered Calendar (such as business holidays)" + 
"						</para>" + 
"					</listitem>" + 
"					<listitem>" + 
"						<para>" + 
"							repeated a specific number of times" + 
"						</para>" + 
"					</listitem>" + 
"					<listitem>" + 
"						<para>" + 
"							repeated until a specific time/date" + 
"						</para>" + 
"					</listitem>" + 
"					<listitem>" + 
"						<para>" + 
"							repeated indefinitely" + 
"						</para>" + 
"					</listitem>" + 
"					<listitem>" + 
"						<para>" + 
"							repeated with a delay interval" + 
"						</para>" + 
"					</listitem>" + 
"				</itemizedlist>" + 
"				<para>" + 
"					Jobs are given names by their creator and can also be organized into named groups. Triggers may also be given names and placed into groups, in order to easily organize them within the scheduler. Jobs can be added to the scheduler once, but registered with multiple Triggers. Within a J2EE environment, Jobs can perform their work as part of a distributed (XA) transaction." + 
"				</para>" + 
"				<para>" + 
"					(Source: quartz-scheduler.org)" + 
"				</para>" + 
"				<para role=\"RoleCreateBugPara\">" + 
"					<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18986-565978+%5BLatest%5D&amp;cf_build_id=18986-565978+05+Dec+2013+14%3A20+en-US+%5BLatest%5D&amp;comment=Title%3A+How+does+Job+Scheduler+work%3F%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"				</para>" + 
"				<section id=\"How_can_Job_Scheduler_Service_be_used_in_Kernel\" remap=\"TID_18987\">" + 
"					<title>How can Job Scheduler Service be used in Kernel?</title>" + 
"					<para>" + 
"						Kernel leverages <ulink url=\"http://www.quartz-scheduler.org\">Quartz</ulink> for its scheduler service and wraps <classname>org.quartz.Scheduler</classname> in <classname>org.exoplatform.services.scheduler.impl.QuartzSheduler</classname> for easier service wiring and configuration like any other services. To work with Quartz in Kernel, you will mostly work with <classname>org.exoplatform.services.scheduler.JobSchedulerService</classname> (implemented by <classname>org.exoplatform.services.scheduler.impl.JobSchedulerServiceImpl</classname>." + 
"					</para>" + 
"					<para>" + 
"						To use <classname>JobSchedulerService</classname>, you can configure it as a component in the configuration.xml. Because <classname>JobSchedulerService</classname> requires <classname>QuartzSheduler</classname> and <classname>QueueTasks</classname>, you also have to configure these two components." + 
"					</para>" + 
"					<programlisting language=\"XML\" role=\"XML\">&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;" + 
"&lt;configuration" + 
"  xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"" + 
"  xsi:schemaLocation=\"http://www.exoplaform.org/xml/ns/kernel_1_2.xsd http://www.exoplaform.org/xml/ns/kernel_1_2.xsd\"" + 
"  xmlns=\"http://www.exoplaform.org/xml/ns/kernel_1_2.xsd\"&gt;" + 
"" + 
"  &lt;component&gt;" + 
"    &lt;type&gt;org.exoplatform.services.scheduler.impl.QuartzSheduler&lt;/type&gt;" + 
"  &lt;/component&gt;" + 
"" + 
"  &lt;component&gt;" + 
"    &lt;type&gt;org.exoplatform.services.scheduler.QueueTasks&lt;/type&gt;" + 
"  &lt;/component&gt;" + 
"" + 
"  &lt;component&gt;" + 
"    &lt;key&gt;org.exoplatform.services.scheduler.JobSchedulerService&lt;/key&gt;" + 
"    &lt;type&gt;org.exoplatform.services.scheduler.impl.JobSchedulerServiceImpl&lt;/type&gt;" + 
"  &lt;/component&gt;" + 
"" + 
"&lt;/configuration&gt;</programlisting>" + 
"					<para role=\"RoleCreateBugPara\">" + 
"						<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18987-565978+%5BLatest%5D&amp;cf_build_id=18987-565978+05+Dec+2013+14%3A20+en-US+%5BLatest%5D&amp;comment=Title%3A+How+can+Job+Scheduler+Service+be+used+in+Kernel%3F%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"					</para>" + 
"				</section>" + 
"				<section id=\"sect-Samples\">" + 
"					<title>Samples</title>" + 
"					<note>" + 
"						<para>" + 
"							You can download the project code from <ulink url=\"https://github.com/hoatle/job-scheduler-service-tutorial\">here</ulink>" + 
"						</para>" + 
"					</note>" + 
"					<para>" + 
"						Work with <classname>JobSchedulerService</classname> by creating a sample project and use the portal for testing." + 
"					</para>" + 
"					<para>" + 
"						Firstly, create a project by using maven archetype plug-in:" + 
"					</para>" + 
"					<programlisting>mvn archetype:generate" + 
"</programlisting>" + 
"					<itemizedlist>" + 
"						<listitem>" + 
"							<para>" + 
"								For project type: select <emphasis role=\"bold\">maven-archetype-quickstart</emphasis>" + 
"							</para>" + 
"						</listitem>" + 
"						<listitem>" + 
"							<para>" + 
"								For groupId: select <emphasis role=\"bold\">org.exoplatform.samples</emphasis>" + 
"							</para>" + 
"						</listitem>" + 
"						<listitem>" + 
"							<para>" + 
"								For artifactId: select <emphasis role=\"bold\">exo.samples.scheduler</emphasis>" + 
"							</para>" + 
"						</listitem>" + 
"						<listitem>" + 
"							<para>" + 
"								For version: select<emphasis role=\"bold\">1.0.0-SNAPSHOT</emphasis>" + 
"							</para>" + 
"						</listitem>" + 
"						<listitem>" + 
"							<para>" + 
"								For package: select <emphasis role=\"bold\">org.exoplatform.samples.scheduler</emphasis>" + 
"							</para>" + 
"						</listitem>" + 
"					</itemizedlist>" + 
"					<para>" + 
"						Edit the pom.xml as follows:" + 
"					</para>" + 
"					<programlisting language=\"XML\" role=\"XML\">&lt;project" + 
"  xmlns=\"http://maven.apache.org/POM/4.0.0\"" + 
"  xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"" + 
"  xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd\"&gt;" + 
"" + 
"  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;" + 
"" + 
"  &lt;parent&gt;" + 
"    &lt;artifactId&gt;exo.portal.parent&lt;/artifactId&gt;" + 
"    &lt;groupId&gt;org.exoplatform.portal&lt;/groupId&gt;" + 
"    &lt;version&gt;3.1.0-GA&lt;/version&gt;" + 
"  &lt;/parent&gt;" + 
"" + 
"  &lt;groupId&gt;org.exoplatform.samples&lt;/groupId&gt;" + 
"  &lt;artifactId&gt;exo.samples.scheduler&lt;/artifactId&gt;" + 
"  &lt;version&gt;1.0.0-SNAPSHOT&lt;/version&gt;" + 
"  &lt;name&gt;eXo Samples For Scheduler&lt;/name&gt;" + 
"  &lt;description&gt;eXo Samples Code For Scheduler&lt;/description&gt;" + 
"&lt;/project&gt;</programlisting>" + 
"					<para>" + 
"						Generate an eclipse project by using maven eclipse plug-in and then import into eclipse:" + 
"					</para>" + 
"					<programlisting>mvn eclipse:eclipse</programlisting>" + 
"					<para>" + 
"						eXo Kernel makes it easier to work with job scheduler service. All you need is just to define your \"job\" class to be performed by implementing <emphasis role=\"italic\">org.quartz.Job</emphasis> interface and add configuration for it." + 
"					</para>" + 
"					<para role=\"RoleCreateBugPara\">" + 
"						<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18988-565978+%5BLatest%5D&amp;cf_build_id=18988-565978+05+Dec+2013+14%3A20+en-US+%5BLatest%5D&amp;comment=Title%3A+Samples%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"					</para>" + 
"					<section id=\"Define_a_job\" remap=\"TID_18989\">" + 
"						<title>Define a job</title>" + 
"						<para>" + 
"							To define a job, do as follows:" + 
"						</para>" + 
"						<para>" + 
"							Define your job to be performed. For example, the job <emphasis role=\"italic\">DumbJob</emphasis> is defined as follows:" + 
"						</para>" + 
"						<programlisting language=\"Java\" role=\"Java\">package org.exoplatform.samples.scheduler.jobs;" + 
"" + 
"import org.exoplatform.services.log.ExoLogger;" + 
"import org.exoplatform.services.log.Log;" + 
"import org.quartz.Job;" + 
"import org.quartz.JobExecutionContext;" + 
"import org.quartz.JobExecutionException;" + 
"" + 
"/**" + 
" * DumbJob for executing a defined dumb job." + 
" */" + 
"public class DumbJob implements Job {" + 
"" + 
"  /**" + 
"   * The logger" + 
"   */" + 
"  private static final Log LOG = ExoLogger.getLogger(DumbJob.class);" + 
"" + 
"  /**" + 
"   * The job of the DumbJob will be done by executing this method." + 
"   *" + 
"   * @param context" + 
"   * @throws JobExecutionException" + 
"   */" + 
"  public void execute(JobExecutionContext context) throws JobExecutionException {" + 
"    LOG.info(\"DumbJob is executing...\");" + 
"  }" + 
"}</programlisting>" + 
"						<para>" + 
"							All jobs are required to implement the method <emphasis role=\"italic\">execute</emphasis> from <emphasis role=\"italic\">org.quartz.Job</emphasis> interface. This method will be called whenever a job is performed. With <emphasis role=\"italic\">DumbJob</emphasis>, you just use logging to see that it will work. By looking at the terminal, you will see the log message: \"DumbJob is executing...\"" + 
"						</para>" + 
"						<para role=\"RoleCreateBugPara\">" + 
"							<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18989-565978+%5BLatest%5D&amp;cf_build_id=18989-565978+05+Dec+2013+14%3A20+en-US+%5BLatest%5D&amp;comment=Title%3A+Define+a+job%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"						</para>" + 
"					</section>" + 
"					<section id=\"Job_configuration\" remap=\"TID_18990\">" + 
"						<title>Job configuration</title>" + 
"						<para>" + 
"							After defining the \"job\", it must be configured using the <emphasis role=\"italic\">external-component-plugin</emphasis> configuration for <emphasis role=\"italic\">org.exoplatform.services.scheduler.JobSchedulerService</emphasis>. Use the following methods for setting the component plug-in:" + 
"						</para>" + 
"						<programlisting language=\"Java\">public void addPeriodJob(ComponentPlugin plug-in) throws Exception;</programlisting>" + 
"						<para>" + 
"							The component plug-in for this method must be <emphasis role=\"italic\">org.exoplatform.services.scheduler.PeriodJob</emphasis>. This type of job is used to perform actions that are executed in a period of time. You have to define when this job is performed, when it ends, when it performs the first action, how many times it is executed and the period of time to perform the action. See the configuration sample below to understand more clearly:" + 
"						</para>" + 
"						<example>" + 
"							<title>PeriodJob component-plugin</title>" + 
"							<programlisting language=\"XML\">&lt;external-component-plugins&gt;" + 
"   &lt;target-component&gt;org.exoplatform.services.scheduler.JobSchedulerService&lt;/target-component&gt;" + 
"    &lt;component-plugin&gt;" + 
"      &lt;name&gt;PeriodJob Plugin&lt;/name&gt;" + 
"      &lt;set-method&gt;addPeriodJob&lt;/set-method&gt;" + 
"      &lt;type&gt;org.exoplatform.services.scheduler.PeriodJob&lt;/type&gt;" + 
"      &lt;description&gt;period job configuration&lt;/description&gt;" + 
"      &lt;init-params&gt;" + 
"        &lt;properties-param&gt;" + 
"          &lt;name&gt;job.info&lt;/name&gt;" + 
"          &lt;description&gt;dumb job executed  periodically&lt;/description&gt;" + 
"          &lt;property name=\"jobName\" value=\"DumbJob\"/&gt;" + 
"          &lt;property name=\"groupName\" value=\"DumbJobGroup\"/&gt;" + 
"          &lt;property name=\"job\" value=\"org.exoplatform.samples.scheduler.jobs.DumbJob\"/&gt;" + 
"          &lt;property name=\"repeatCount\" value=\"0\"/&gt;" + 
"          &lt;property name=\"period\" value=\"60000\"/&gt;" + 
"          &lt;property name=\"startTime\" value=\"+45\"/&gt;" + 
"          &lt;property name=\"endTime\" value=\"\"/&gt;" + 
"        &lt;/properties-param&gt;" + 
"      &lt;/init-params&gt;" + 
"    &lt;/component-plugin&gt;" + 
" &lt;/external-component-plugins&gt;</programlisting>" + 
"						</example>" + 
"						<example>" + 
"							<title>addCronJob</title>" + 
"							<para>" + 
"								The component plug-in for this method must be <emphasis role=\"italic\">org.exoplatform.services.scheduler.CronJob</emphasis>. This type of job is used to perform actions at specified time with Unix 'cron-like' definitions. The plug-in uses the \"expression\" field for specifying the 'cron-like' definitions to execute the job. This is considered as the most powerful and flexible job to define when it will execute. For example, at 12pm every day =&gt; \"0 0 12 * * ?\"; or at 10:15am every Monday, Tuesday, Wednesday, Thursday and Friday =&gt; \"0 15 10 ? * MON-FRI\". " + 
"								<note>" + 
"									<para>" + 
"										For more information about CRON expressions, see the article at <ulink url=\"http://en.wikipedia.org/wiki/CRON_expression\"/>." + 
"									</para>" + 
"								</note>" + 
"							</para>" + 
"							<programlisting language=\"Java\">public void addCronJob(ComponentPlugin plugin) throws Exception;</programlisting>" + 
"							<programlisting language=\"XML\">&lt;external-component-plugins&gt;" + 
"    &lt;target-component&gt;org.exoplatform.services.scheduler.JobSchedulerService&lt;/target-component&gt;" + 
"    &lt;component-plugin&gt;" + 
"      &lt;name&gt;CronJob Plugin&lt;/name&gt;" + 
"      &lt;set-method&gt;addCronJob&lt;/set-method&gt;" + 
"      &lt;type&gt;org.exoplatform.services.scheduler.CronJob&lt;/type&gt;" + 
"      &lt;description&gt;cron job configuration&lt;/description&gt;" + 
"      &lt;init-params&gt;" + 
"        &lt;properties-param&gt;" + 
"          &lt;name&gt;job.info&lt;/name&gt;" + 
"          &lt;description&gt;dumb job executed by cron expression&lt;/description&gt;" + 
"          &lt;property name=\"jobName\" value=\"DumbJob\"/&gt;" + 
"          &lt;property name=\"groupName\" value=\"DumbJobGroup\"/&gt;" + 
"          &lt;property name=\"job\" value=\"org.exoplatform.samples.scheduler.jobs.DumbJob\"/&gt;" + 
"          &lt;!-- The job will be performed at 10:15am every day --&gt;" + 
"          &lt;property name=\"expression\" value=\"0 15 10 * * ?\"/&gt; " + 
"        &lt;/properties-param&gt;" + 
"      &lt;/init-params&gt;" + 
"    &lt;/component-plugin&gt;" + 
"  &lt;/external-component-plugins&gt;</programlisting>" + 
"						</example>" + 
"						<example>" + 
"							<title>addGlobalJobListener and addJobListener</title>" + 
"							<para>" + 
"								The component plug-in for these methods must be <code>org.quartz.JobListener</code>. This job listener is informed when <code>org.quartz.JobDetail</code> executes." + 
"							</para>" + 
"							<programlisting language=\"Java\">public void addGlobalJobListener(ComponentPlugin plugin) throws Exception;</programlisting>" + 
"							<programlisting language=\"Java\">public void addJobListener(ComponentPlugin plugin) throws Exception;</programlisting>" + 
"						</example>" + 
"						<example>" + 
"							<title>addGlobalTriggerListener and addTriggerListener</title>" + 
"							<para>" + 
"								The component plug-in for these methods must be <code>org.quartz.TriggerListener</code>. This trigger listener is informed when a <emphasis role=\"italic\">org.quartz.Trigger</emphasis> executes." + 
"							</para>" + 
"							<programlisting language=\"Java\" role=\"Java\">public void addGlobalTriggerListener(ComponentPlugin plugin) throws Exception;</programlisting>" + 
"							<programlisting language=\"Java\" role=\"Java\">public void addTriggerListener(ComponentPlugin plugin) throws Exception;</programlisting>" + 
"						</example>" + 
"						<para role=\"RoleCreateBugPara\">" + 
"							<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18990-565980+%5BLatest%5D&amp;cf_build_id=18990-565980+05+Dec+2013+14%3A26+en-US+%5BLatest%5D&amp;comment=Title%3A+Job+configuration%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"						</para>" + 
"					</section>" + 
"					<section id=\"Run_the_project\" remap=\"TID_18991\">" + 
"						<title>Run the project</title>" + 
"						<para>" + 
"							Create <emphasis role=\"italic\">conf.portal</emphasis> package in your sample project. Add the configuration.xml file with the content as follows:" + 
"						</para>" + 
"						<programlisting language=\"XML\" role=\"XML\">&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;" + 
"&lt;configuration" + 
"  xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"" + 
"  xsi:schemaLocation=\"http://www.exoplaform.org/xml/ns/kernel_1_2.xsd http://www.exoplaform.org/xml/ns/kernel_1_2.xsd\"" + 
"  xmlns=\"http://www.exoplaform.org/xml/ns/kernel_1_2.xsd\"&gt;" + 
"" + 
"  &lt;component&gt;" + 
"    &lt;type&gt;org.exoplatform.services.scheduler.impl.QuartzSheduler&lt;/type&gt;" + 
"  &lt;/component&gt;" + 
"  &lt;component&gt;" + 
"    &lt;type&gt;org.exoplatform.services.scheduler.QueueTasks&lt;/type&gt;" + 
"  &lt;/component&gt;" + 
"  &lt;component&gt;" + 
"    &lt;key&gt;org.exoplatform.services.scheduler.JobSchedulerService&lt;/key&gt;" + 
"    &lt;type&gt;org.exoplatform.services.scheduler.impl.JobSchedulerServiceImpl&lt;/type&gt;" + 
"  &lt;/component&gt;" + 
"" + 
"  &lt;external-component-plugins&gt;" + 
"    &lt;target-component&gt;org.exoplatform.services.scheduler.JobSchedulerService&lt;/target-component&gt;" + 
"    &lt;component-plugin&gt;" + 
"      &lt;name&gt;PeriodJob Plugin&lt;/name&gt;" + 
"      &lt;set-method&gt;addPeriodJob&lt;/set-method&gt;" + 
"      &lt;type&gt;org.exoplatform.services.scheduler.PeriodJob&lt;/type&gt;" + 
"      &lt;description&gt;period job configuration&lt;/description&gt;" + 
"      &lt;init-params&gt;" + 
"        &lt;properties-param&gt;" + 
"          &lt;name&gt;job.info&lt;/name&gt;" + 
"          &lt;description&gt;dumb job executed periodically&lt;/description&gt;" + 
"          &lt;property name=\"jobName\" value=\"DumbJob\"/&gt;" + 
"          &lt;property name=\"groupName\" value=\"DumbJobGroup\"/&gt;" + 
"          &lt;property name=\"job\" value=\"org.exoplatform.samples.scheduler.jobs.DumbJob\"/&gt;" + 
"          &lt;property name=\"repeatCount\" value=\"0\"/&gt;" + 
"          &lt;property name=\"period\" value=\"60000\"/&gt;" + 
"          &lt;property name=\"startTime\" value=\"+45\"/&gt;" + 
"          &lt;property name=\"endTime\" value=\"\"/&gt;" + 
"        &lt;/properties-param&gt;" + 
"      &lt;/init-params&gt;" + 
"    &lt;/component-plugin&gt;" + 
"  &lt;/external-component-plugins&gt;" + 
"&lt;/configuration&gt;</programlisting>" + 
"						<para>" + 
"							<emphasis role=\"italic\">mvn clean install</emphasis>the project. Copy .jar file to <emphasis role=\"italic\">lib</emphasis> in the portal directory. Run <emphasis role=\"italic\">bin/run.sh</emphasis> to see the <emphasis role=\"italic\">DumbJob</emphasis> to be executed on the terminal when portal containers are initialized. Review the terminal to see the log message of <emphasis role=\"italic\">DumbJob</emphasis>." + 
"						</para>" + 
"						<para>" + 
"							From now on, you can easily create any job to be executed in the portal by defining your job and configuring it." + 
"						</para>" + 
"						<para role=\"RoleCreateBugPara\">" + 
"							<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18991-565980+%5BLatest%5D&amp;cf_build_id=18991-565980+05+Dec+2013+14%3A26+en-US+%5BLatest%5D&amp;comment=Title%3A+Run+the+project%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"						</para>" + 
"					</section>" + 
"				</section>" + 
"			</section>" + 
"			<section id=\"Reference6\" remap=\"TID_18992\">" + 
"				<title>Reference</title>" + 
"				<para>" + 
"					To further understand about Job Scheduler, you can refer the following links:" + 
"				</para>" + 
"				<itemizedlist>" + 
"					<listitem>" + 
"						<para>" + 
"							<ulink url=\"http://www.quartz-scheduler.org/\">http://www.quartz-scheduler.org/</ulink>" + 
"						</para>" + 
"					</listitem>" + 
"					<listitem>" + 
"						<para>" + 
"							<ulink url=\"http://en.wikipedia.org/wiki/Job_scheduler\">http://en.wikipedia.org/wiki/Job_scheduler</ulink>" + 
"						</para>" + 
"					</listitem>" + 
"					<listitem>" + 
"						<para>" + 
"							<ulink url=\"http://www.theserverside.com/news/1364726/Job-Scheduling-in-J2EE-Applications\">http://www.theserverside.com/news/1364726/Job-Scheduling-in-J2EE-Applications</ulink>" + 
"						</para>" + 
"					</listitem>" + 
"					<listitem>" + 
"						<para>" + 
"							<ulink url=\"http://technet.microsoft.com/en-us/library/cc720070%28WS.10%29.aspx\">http://technet.microsoft.com/en-us/library/cc720070%28WS.10%29.aspx</ulink>" + 
"						</para>" + 
"					</listitem>" + 
"				</itemizedlist>" + 
"				<para role=\"RoleCreateBugPara\">" + 
"					<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18992-565980+%5BLatest%5D&amp;cf_build_id=18992-565980+05+Dec+2013+14%3A26+en-US+%5BLatest%5D&amp;comment=Title%3A+Reference%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"				</para>" + 
"			</section>" + 
"		</section>" + 
"		<section id=\"sect-The_data_source_provider\">" + 
"			<title>The data source provider</title>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18993-565980+%5BLatest%5D&amp;cf_build_id=18993-565980+05+Dec+2013+14%3A26+en-US+%5BLatest%5D&amp;comment=Title%3A+The+data+source+provider%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"			<section id=\"Description1\" remap=\"TID_18994\">" + 
"				<title>Description</title>" + 
"				<para>" + 
"					The <emphasis>DataSourceProvider</emphasis> is a service used to give access to a data source in an uniform manner in order to be able to support data sources that are managed by the application server." + 
"				</para>" + 
"				<para>" + 
"					<table id=\"tabl-Reference_Guide-Description-List_methods\">" + 
"						<title>List methods</title>" + 
"						<tgroup cols=\"2\">" + 
"							<tbody>" + 
"								<row>" + 
"									<entry>" + 
"										getDataSource(String dataSourceName)" + 
"									</entry>" + 
"									<entry>" + 
"										Tries to get the data source from a JNDI lookup. If it can be found and the data source is defined as managed, the service will wrap the original <emphasis>DataSource</emphasis> instance in a new <emphasis>DataSource</emphasis> instance that is aware of its <emphasis>managed</emphasis> state otherwise it will return the original <emphasis>DataSource</emphasis> instance." + 
"									</entry>" + 
"								</row>" + 
"								<row>" + 
"									<entry>" + 
"										isManaged(String dataSourceName)" + 
"									</entry>" + 
"									<entry>" + 
"										Indicates whether or not the given data source is managed." + 
"									</entry>" + 
"								</row>" + 
"							</tbody>" + 
"						</tgroup>" + 
"					</table>" + 
"				</para>" + 
"				<para role=\"RoleCreateBugPara\">" + 
"					<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18994-565980+%5BLatest%5D&amp;cf_build_id=18994-565980+05+Dec+2013+14%3A26+en-US+%5BLatest%5D&amp;comment=Title%3A+Description%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"				</para>" + 
"			</section>" + 
"			<section id=\"Configuration12\" remap=\"TID_18995\">" + 
"				<title>Configuration</title>" + 
"				<para>" + 
"					The configuration of the <emphasis>DataSourceProvider</emphasis> should be defined only if you use managed data sources since by default all the data sources are considered as not managed. See below the default configuration" + 
"				</para>" + 
"				<programlisting>&lt;configuration&gt;" + 
"....  " + 
"   &lt;component&gt;" + 
"      &lt;key&gt;org.exoplatform.services.jdbc.DataSourceProvider&lt;/key&gt;" + 
"      &lt;type&gt;org.exoplatform.services.jdbc.impl.DataSourceProviderImpl&lt;/type&gt;" + 
"      &lt;init-params&gt;" + 
"         &lt;!--  Indicates that the data source needs to check if a tx is active" + 
"              to decide if the provided connection needs to be managed or not." + 
"              If it is set to false, the data source will provide only" + 
"              managed connections if the data source itself is managed.  --&gt;" + 
"         &lt;!--value-param&gt;" + 
"            &lt;name&gt;check-tx-active&lt;/name&gt;" + 
"            &lt;value&gt;true&lt;/value&gt;" + 
"         &lt;/value-param--&gt;" + 
"         &lt;!-- Indicates that all the data sources are managed " + 
"              If set to true the parameter never-managed and " + 
"              managed-data-sources will be ignored --&gt;" + 
"         &lt;!--value-param&gt;" + 
"            &lt;name&gt;always-managed&lt;/name&gt;" + 
"            &lt;value&gt;true&lt;/value&gt;" + 
"         &lt;/value-param--&gt;" + 
"         &lt;!-- Indicates the list of all the data sources that are " + 
"              managed, each value tag can contain a list of" + 
"              data source names separated by a comma, in the" + 
"              example below we will register ds-foo1, ds-foo2 " + 
"              and ds-foo3 as managed data source. If always-managed" + 
"              and/or never-managed is set true this parameter is ignored --&gt;" + 
"         &lt;!--values-param&gt;" + 
"            &lt;name&gt;managed-data-sources&lt;/name&gt;" + 
"            &lt;value&gt;ds-foo1, ds-foo2&lt;/value&gt;" + 
"            &lt;value&gt;ds-foo3&lt;/value&gt;" + 
"         &lt;/values-param--&gt;" + 
"      &lt;/init-params&gt;" + 
"   &lt;/component&gt;  " + 
"..." + 
"&lt;/configuration&gt;</programlisting>" + 
"				<table id=\"tabl-Reference_Guide-Configuration-Fields_description\">" + 
"					<title>Fields description</title>" + 
"					<tgroup cols=\"2\">" + 
"						<tbody>" + 
"							<row>" + 
"								<entry>" + 
"									<emphasis>check-tx-active</emphasis>" + 
"								</entry>" + 
"								<entry>" + 
"									This parameter indicates that the data source needs to check if a transaction is active to decide if the provided connection needs to be managed or not. If it is set to <emphasis>false</emphasis>, the data source will provide only managed connections if the data source itself is managed. By default, this parameter is set to <emphasis>true</emphasis>. If this parameter is set to <emphasis>true</emphasis>, it will need the <emphasis>TransactionService</emphasis> to work properly, so please ensure that the <emphasis>TransactionService</emphasis> is defined in your configuration." + 
"								</entry>" + 
"							</row>" + 
"							<row>" + 
"								<entry>" + 
"									<emphasis>always-managed</emphasis>" + 
"								</entry>" + 
"								<entry>" + 
"									This parameter indicates that all the data sources are managed. If set to <emphasis>true</emphasis> the parameter <emphasis>never-managed</emphasis> and <emphasis>managed-data-sources</emphasis> will be ignored, so it will consider all the data sources as managed. By default, this parameter is set to <emphasis>false</emphasis>." + 
"								</entry>" + 
"							</row>" + 
"							<row>" + 
"								<entry>" + 
"									<emphasis>managed-data-sources</emphasis>" + 
"								</entry>" + 
"								<entry>" + 
"									This parameter indicates the list of all the data sources that are managed, each value tag can contain a list of data source names separated by a comma. If <emphasis>always-managed</emphasis> and/or <emphasis>never-managed</emphasis> is set <emphasis>true</emphasis> this parameter is ignored." + 
"								</entry>" + 
"							</row>" + 
"						</tbody>" + 
"					</tgroup>" + 
"				</table>" + 
"				<para role=\"RoleCreateBugPara\">" + 
"					<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18995-565980+%5BLatest%5D&amp;cf_build_id=18995-565980+05+Dec+2013+14%3A26+en-US+%5BLatest%5D&amp;comment=Title%3A+Configuration%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"				</para>" + 
"			</section>" + 
"		</section>" + 
"	</section>" + 
"	<section id=\"Configuring_a_portal_container\" remap=\"TID_18996\">" + 
"		<title>Configuring a portal container</title>" + 
"		<para>" + 
"			A <literal>portal container</literal> is defined by several attributes:" + 
"		</para>" + 
"		<variablelist>" + 
"			<varlistentry>" + 
"				<term>Portal Container Name</term>" + 
"				<listitem>" + 
"					<para>" + 
"						This attribute is always equal to the URL context to which the current portal is bound." + 
"					</para>" + 
"				</listitem>" + 
"			</varlistentry>" + 
"			<varlistentry>" + 
"				<term>REST Context Name</term>" + 
"				<listitem>" + 
"					<para>" + 
"						This attribute is used for REST access to portal application; every portal has one unique REST context name." + 
"					</para>" + 
"				</listitem>" + 
"			</varlistentry>" + 
"			<varlistentry>" + 
"				<term>Realm Name</term>" + 
"				<listitem>" + 
"					<para>" + 
"						This is the name of the security realm used for authentication when users log into the portal." + 
"					</para>" + 
"				</listitem>" + 
"			</varlistentry>" + 
"			<varlistentry>" + 
"				<term>Dependencies</term>" + 
"				<listitem>" + 
"					<para>" + 
"						This is a list of other web applications whose resources are visible to the current portal (via the extension mechanism described later), and are searched for in the specified order." + 
"					</para>" + 
"				</listitem>" + 
"			</varlistentry>" + 
"		</variablelist>" + 
"		<programlisting language=\"XML\" role=\"XML\">&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;" + 
"&lt;configuration" + 
"   xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"" + 
"   xsi:schemaLocation=\"http://www.exoplaform.org/xml/ns/kernel_1_2.xsd" + 
"                       http://www.exoplaform.org/xml/ns/kernel_1_2.xsd\"" + 
"   xmlns=\"http://www.exoplaform.org/xml/ns/kernel_1_2.xsd\"&gt;" + 
"" + 
"   &lt;external-component-plugins&gt;" + 
"      &lt;!-- The full qualified name of the PortalContainerConfig --&gt;" + 
"      &lt;target-component&gt;org.exoplatform.container.definition.PortalContainerConfig&lt;/target-component&gt;" + 
"" + 
"      &lt;component-plugin&gt;" + 
"         &lt;!-- The name of the plugin --&gt;" + 
"         &lt;name&gt;Add PortalContainer Definitions&lt;/name&gt;" + 
"" + 
"         &lt;!-- The name of the method to call on the PortalContainerConfig" + 
"              in order to register the PortalContainerDefinitions --&gt;" + 
"         &lt;set-method&gt;registerPlugin&lt;/set-method&gt;" + 
"" + 
"         &lt;!-- The full qualified name of the PortalContainerDefinitionPlugin --&gt;" + 
"         &lt;type&gt;org.exoplatform.container.definition.PortalContainerDefinitionPlugin&lt;/type&gt;" + 
"" + 
"         &lt;init-params&gt;" + 
"            &lt;object-param&gt;" + 
"               &lt;name&gt;portal&lt;/name&gt;" + 
"               &lt;object type=\"org.exoplatform.container.definition.PortalContainerDefinition\"&gt;" + 
"                  &lt;!-- The name of the portal container --&gt;" + 
"                  &lt;field name=\"name\"&gt;&lt;string&gt;portal&lt;/string&gt;&lt;/field&gt;" + 
"" + 
"                  &lt;!-- The name of the context name of the rest web application --&gt;" + 
"                  &lt;field name=\"restContextName\"&gt;&lt;string&gt;rest&lt;/string&gt;&lt;/field&gt;" + 
"" + 
"                  &lt;!-- The name of the realm --&gt;" + 
"                  &lt;field name=\"realmName\"&gt;&lt;string&gt;exo-domain&lt;/string&gt;&lt;/field&gt;" + 
"" + 
"                  &lt;!-- All the dependencies of the portal container ordered by loading priority --&gt;" + 
"                  &lt;field name=\"dependencies\"&gt;" + 
"                     &lt;collection type=\"java.util.ArrayList\"&gt;" + 
"                        &lt;value&gt;" + 
"                           &lt;string&gt;eXoResources&lt;/string&gt;" + 
"                        &lt;/value&gt;" + 
"                        &lt;value&gt;" + 
"                           &lt;string&gt;portal&lt;/string&gt;" + 
"                        &lt;/value&gt;" + 
"                        &lt;value&gt;" + 
"                           &lt;string&gt;dashboard&lt;/string&gt;" + 
"                        &lt;/value&gt;" + 
"                        &lt;value&gt;" + 
"                           &lt;string&gt;exoadmin&lt;/string&gt;" + 
"                        &lt;/value&gt;" + 
"                        &lt;value&gt;" + 
"                           &lt;string&gt;eXoGadgets&lt;/string&gt;" + 
"                        &lt;/value&gt;" + 
"                        &lt;value&gt;" + 
"                           &lt;string&gt;eXoGadgetServer&lt;/string&gt;" + 
"                        &lt;/value&gt;" + 
"                        &lt;value&gt;" + 
"                           &lt;string&gt;rest&lt;/string&gt;" + 
"                        &lt;/value&gt;" + 
"                        &lt;value&gt;" + 
"                           &lt;string&gt;web&lt;/string&gt;" + 
"                        &lt;/value&gt;" + 
"                        &lt;value&gt;" + 
"                           &lt;string&gt;wsrp-producer&lt;/string&gt;" + 
"                        &lt;/value&gt;" + 
"                        &lt;!-- The sample-ext has been added at the end of the dependency list" + 
"                             in order to have the highest priority --&gt;" + 
"                        &lt;value&gt;" + 
"                           &lt;string&gt;sample-ext&lt;/string&gt;" + 
"                        &lt;/value&gt;" + 
"                     &lt;/collection&gt;" + 
"                  &lt;/field&gt;" + 
"               &lt;/object&gt;" + 
"            &lt;/object-param&gt;" + 
"         &lt;/init-params&gt;" + 
"      &lt;/component-plugin&gt;" + 
"   &lt;/external-component-plugins&gt;" + 
"&lt;/configuration&gt;" + 
"</programlisting>" + 
"		<para>" + 
"			Dependencies are part of the <emphasis role=\"bold\">extension mechanism</emphasis> which is discussed later in this document." + 
"		</para>" + 
"		<para>" + 
"			Every <literal>PortalContainer</literal> is represented by a <literal>PortalContainer instance</literal>, which contains:" + 
"		</para>" + 
"		<variablelist>" + 
"			<varlistentry>" + 
"				<term>eXoContainerContext</term>" + 
"				<listitem>" + 
"					<para>" + 
"						This contains information about the portal." + 
"					</para>" + 
"				</listitem>" + 
"			</varlistentry>" + 
"			<varlistentry>" + 
"				<term>Unified Servlet Context</term>" + 
"				<listitem>" + 
"					<para>" + 
"						This deals with web-archive-relative resource loading." + 
"					</para>" + 
"				</listitem>" + 
"			</varlistentry>" + 
"			<varlistentry>" + 
"				<term>Unified Classloader</term>" + 
"				<listitem>" + 
"					<para>" + 
"						For classpath based resource loading." + 
"					</para>" + 
"				</listitem>" + 
"			</varlistentry>" + 
"			<varlistentry>" + 
"				<term>Various methods for retrieving services</term>" + 
"				<listitem>" + 
"					<para>" + 
"					</para>" + 
"				</listitem>" + 
"			</varlistentry>" + 
"		</variablelist>" + 
"		<para>" + 
"			The <emphasis role=\"bold\">Unified servlet context</emphasis> and <emphasis role=\"bold\">unified classloader</emphasis> are part of the <emphasis role=\"bold\">extension mechanism</emphasis> (which is detailed in the next section)." + 
"		</para>" + 
"		<para>" + 
"			They provide the standard API (<literal>ServletContext</literal>, <literal>ClassLoader</literal>) with specific resource loading behavior, such as visibility into associated web application archives, configured with the dependencies property of <literal>PortalContainerDefinition</literal>." + 
"		</para>" + 
"		<para>" + 
"			Resources from other web applications are queried in the order specified by the dependencies. The later entries in the list override the previous ones." + 
"		</para>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18996-565980+%5BLatest%5D&amp;cf_build_id=18996-565980+05+Dec+2013+14%3A26+en-US+%5BLatest%5D&amp;comment=Title%3A+Configuring+a+portal+container%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"	</section>" + 
"	<section id=\"sect-System_property_configuration\">" + 
"		<title>System property configuration</title>" + 
"		<para>" + 
"			A new property configuration service has been developed for taking care of configuring system properties from the inline kernel configuration or from specified property files." + 
"		</para>" + 
"		<para>" + 
"			The service is scoped at the root container level because it is used by all the services in the different portal containers in the application runtime." + 
"		</para>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18997-565980+%5BLatest%5D&amp;cf_build_id=18997-565980+05+Dec+2013+14%3A26+en-US+%5BLatest%5D&amp;comment=Title%3A+System+property+configuration%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"		<section id=\"Properties_\" remap=\"TID_18998\">" + 
"			<title>Properties &lt;init-param&gt;</title>" + 
"			<para>" + 
"				The properties init param takes a property declared to configure various properties." + 
"			</para>" + 
"			<programlisting language=\"XML\" role=\"XML\">&lt;component&gt;" + 
"  &lt;key&gt;PropertyManagerConfigurator&lt;/key&gt;" + 
"  &lt;type&gt;org.exoplatform.container.PropertyConfigurator&lt;/type&gt;" + 
"  &lt;init-params&gt;" + 
"    &lt;properties-param&gt;" + 
"      &lt;name&gt;properties&lt;/name&gt;" + 
"      &lt;property name=\"foo\" value=\"bar\"/&gt;" + 
"    &lt;/properties-param&gt;" + 
"  &lt;/init-params&gt;" + 
"&lt;/component&gt;</programlisting>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18998-565980+%5BLatest%5D&amp;cf_build_id=18998-565980+05+Dec+2013+14%3A26+en-US+%5BLatest%5D&amp;comment=Title%3A+Properties+%26lt%3Binit-param%26gt%3B%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"		<section id=\"Properties_URL_\" remap=\"TID_18999\">" + 
"			<title>Properties URL &lt;init-param&gt;</title>" + 
"			<para>" + 
"				The properties URL init param allow to load an external file by specifying its URL. Both property and XML format are supported, see the javadoc of the <emphasis><envar>java.util.Properties</envar></emphasis> class for more information. When a property file is loaded the various property declarations are loaded in the order in which the properties are declared sequentially in the file." + 
"			</para>" + 
"			<programlisting language=\"XML\" role=\"XML\">&lt;component&gt;" + 
"  &lt;key&gt;PropertyManagerConfigurator&lt;/key&gt;" + 
"  &lt;type&gt;org.exoplatform.container.PropertyConfigurator&lt;/type&gt;" + 
"  &lt;init-params&gt;" + 
"    &lt;value-param&gt;" + 
"      &lt;name&gt;properties.url&lt;/name&gt;" + 
"      &lt;value&gt;classpath:configuration.properties&lt;/value&gt;" + 
"    &lt;/value-param&gt;" + 
"  &lt;/init-params&gt;" + 
"&lt;/component&gt;</programlisting>" + 
"			<para>" + 
"				In the properties file corresponding to the external properties, you can reuse variables before defining to create a new variable. In this case, the prefix \"<emphasis>portal.container.</emphasis>\" is not needed, see an example below: " + 
"				<programlisting>my-var1=value 1" + 
"my-var2=value 2" + 
"complex-value=${my-var1}-${my-var2}</programlisting>" + 
"			</para>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+18999-565980+%5BLatest%5D&amp;cf_build_id=18999-565980+05+Dec+2013+14%3A26+en-US+%5BLatest%5D&amp;comment=Title%3A+Properties+URL+%26lt%3Binit-param%26gt%3B%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"		<section id=\"System_Property_configuration_of_the_properties_URL\" remap=\"TID_19000\">" + 
"			<title>System Property configuration of the properties URL</title>" + 
"			<para>" + 
"				It is possible to replace the properties URL init param by a system property that overwrites it. The name of that property is <emphasis>exo.properties.url</emphasis>." + 
"			</para>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+19000-565980+%5BLatest%5D&amp;cf_build_id=19000-565980+05+Dec+2013+14%3A26+en-US+%5BLatest%5D&amp;comment=Title%3A+System+Property+configuration+of+the+properties+URL%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"		<section id=\"Variable_Syntaxes\" remap=\"TID_19001\">" + 
"			<title>Variable Syntaxes</title>" + 
"			<para>" + 
"				All the variables that we described in the previous sections can be defined through 2 possible syntaxes which are <emphasis>${variable-name}</emphasis> or <emphasis>${variable-name:default-value}</emphasis>. The first syntax doesn't define any default value so if the variable has not be set the value will be <emphasis>${variable-name}</emphasis> to indicate that it could not be resolved. The second syntax allows you to define the default value after the semi colon so if the variable has not be set the value will be the given default value." + 
"			</para>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+19001-565980+%5BLatest%5D&amp;cf_build_id=19001-565980+05+Dec+2013+14%3A26+en-US+%5BLatest%5D&amp;comment=Title%3A+Variable+Syntaxes%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"	</section>" + 
"	<section id=\"sect-The_Extension_Mechanism_and_Portal_Extensions\">" + 
"		<title>The Extension Mechanism and Portal Extensions</title>" + 
"		<para>" + 
"			The <emphasis role=\"bold\">Extension mechanism</emphasis> makes it possible to override portal resources in a way similar to hardware plug-and-play functionalities." + 
"		</para>" + 
"		<para>" + 
"			Customizations can be implemented without unpacking and repacking the original portal <code>.war</code> archives by adding a <code>.war</code> archive to the resources and configuring its position in the portal's classpath. Custom <code>.war</code> archives can be created with new resources that override the resources in the original archive." + 
"		</para>" + 
"		<para>" + 
"			These archives, packaged for use through the extension mechanism, are called <emphasis role=\"bold\">portal extensions</emphasis>." + 
"		</para>" + 
"		<procedure id=\"proc-Reference_Guide-The_Extension_Mechanism_and_Portal_Extensions-Creating_a_portal_extension\">" + 
"			<title>Creating a portal extension</title>" + 
"			<step>" + 
"				<para>" + 
"					Declare the <emphasis role=\"bold\">PortalConfigOwner</emphasis> servlet context listener in the <filename>web.xml</filename> of your web application." + 
"				</para>" + 
"				<para>" + 
"					This example shows a portal extension called <emphasis role=\"bold\">sample-ext</emphasis>." + 
"				</para>" + 
"				<programlisting language=\"XML\" role=\"XML\">&lt;?xml version=\"1.0\" encoding=\"ISO-8859-1\" ?&gt;" + 
"&lt;!DOCTYPE web-app PUBLIC -//Sun Microsystems, Inc.//DTD Web Application 2.3//EN" + 
"     http://java.sun.com/dtd/web-app_2_3.dtd&gt;" + 
"&lt;web-app&gt;" + 
"" + 
"   &lt;display-name&gt;sample-ext&lt;/display-name&gt;" + 
"" + 
"   &lt;listener&gt;" + 
"      &lt;listener-class&gt;org.exoplatform.container.web.PortalContainerConfigOwner&lt;/listener-class&gt;" + 
"   &lt;/listener&gt;" + 
"" + 
"   ..." + 
"" + 
"&lt;/web-app&gt;" + 
"</programlisting>" + 
"			</step>" + 
"			<step>" + 
"				<para>" + 
"					Add the application's servlet context name to the <literal>PortalContainerDefinition</literal>'s list of dependencies. This must be done for each portal container that you want to have access to the new application." + 
"				</para>" + 
"				<para>" + 
"					The application's position in these lists will dictate its priority when the portal loads resources. The later your application appears in the list, the higher its resource priority will be." + 
"				</para>" + 
"			</step>" + 
"			<step>" + 
"				<para>" + 
"					At this point your new web archive will be on both the portal's unified classpath and unified servlet context resource path." + 
"				</para>" + 
"			</step>" + 
"		</procedure>" + 
"		<note>" + 
"			<para>" + 
"				See <xref linkend=\"Configuring_a_portal_container\"/> for an example of a <literal>PortalContainerDefinition</literal> that has <emphasis role=\"bold\">sample-ext</emphasis> in its list of dependencies." + 
"			</para>" + 
"		</note>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+19002-565980+%5BLatest%5D&amp;cf_build_id=19002-565980+05+Dec+2013+14%3A26+en-US+%5BLatest%5D&amp;comment=Title%3A+The+Extension+Mechanism+and+Portal+Extensions%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"		<section id=\"Running_Multiple_Portals\" remap=\"TID_19003\">" + 
"			<title>Running Multiple Portals</title>" + 
"			<!--Docs Note - jmorgan - This section requires more work to structure the information effectively. Consider sub-sections            -->" + 
"			<para>" + 
"				It is possible to run several independent portal containers, each bound to a different URL context, within the same JVM instance." + 
"			</para>" + 
"			<para>" + 
"				This method of deployment allows for efficient administration and resource consumption by allowing coexisting portals to <emphasis>reuse</emphasis> configuration arrangements through the extension mechanism." + 
"			</para>" + 
"			<para>" + 
"				Portals can <emphasis>inherit</emphasis> resources and configuration from existing web archives and add extra resources as needed, <emphasis>overriding</emphasis> those that need to be changed by including modified copies." + 
"			</para>" + 
"			<para>" + 
"				In order for a portal application to function correctly when deployed within a multiple portal deployment, it may have to dynamically query the information about the current portal container. The application should not make any assumptions about the name, and other information of the current portal, as there are now multiple different portals in play." + 
"			</para>" + 
"			<para>" + 
"				At any point during request processing, or life-cycle event processing, an application can retrieve this information through <literal>org.exoplatform.container.eXoContainerContext</literal>." + 
"			</para>" + 
"			<para>" + 
"				Sometimes an application must ensure that the proper <literal>PortalContainer</literal> is associated with the current <literal>eXoContainerContext</literal> call." + 
"			</para>" + 
"			<para>" + 
"				If the portal application contains servlets or servlet filters that need to access portal specific resources during their request processing, the servlet or filter must be associated with the current container." + 
"			</para>" + 
"			<para>" + 
"				A servlet in this instance should extend the <literal>org.exoplatform.container.web.AbstractHttpServlet</literal> class so as to properly initialize the current <literal>PortalContainer</literal>." + 
"			</para>" + 
"			<para>" + 
"				This will also set the current thread's context Classloader to one that looks for resources in associated web applications in the order specified by the <emphasis role=\"bold\">dependencies</emphasis> configuration (see <xref linkend=\"sect-The_Extension_Mechanism_and_Portal_Extensions\"/>)." + 
"			</para>" + 
"			<para>" + 
"				Filter classes need to extend the <literal>org.exoplatform.container.web.AbstractFilter</literal>." + 
"			</para>" + 
"			<para>" + 
"				Both <literal>AbstractHttpServlet</literal>, and <literal>AbstractFilter</literal> have a <literal>getContainer()</literal> method, which returns the current <literal>PortalContainer</literal>." + 
"			</para>" + 
"			<para>" + 
"				If your servlet handles the requests by implementing a <literal>service()</literal> method, that method must be renamed to match the following signature:" + 
"			</para>" + 
"			<programlisting language=\"Java\" role=\"Java\">/**" + 
" * Use this method instead of Servlet.service()" + 
" */" + 
"protected void onService(ExoContainer container, HttpServletRequest req," + 
"      HttpServletResponse res) throws ServletException, IOException;" + 
"</programlisting>" + 
"			<note>" + 
"				<para>" + 
"					This ensures that <literal>AbstractHttpServlet</literal>'s <literal>service()</literal> interception is not overwritten." + 
"				</para>" + 
"			</note>" + 
"			<para>" + 
"				An application may also need access to portal information within the <emphasis role=\"bold\">HttpSessionListener</emphasis>. Ensure the abstract class <emphasis role=\"bold\">org.exoplatform.container.web.AbstractHttpSessionListener</emphasis> is extended." + 
"			</para>" + 
"			<para>" + 
"				In this instance, modify the method signatures as follows:" + 
"			</para>" + 
"			<programlisting language=\"Java\" role=\"Java\">/**" + 
" * Use this method instead of HttpSessionListener.sessionCreated()" + 
" */" + 
"protected void onSessionCreated(ExoContainer container, HttpSessionEvent event);" + 
"" + 
"/**" + 
" * Use this method instead of HttpSessionListener.sessionDestroyed()" + 
" */" + 
"protected void onSessionDestroyed(ExoContainer container, HttpSessionEvent event);" + 
"</programlisting>" + 
"			<para>" + 
"				Another method must also be implemented in this case:" + 
"			</para>" + 
"			<programlisting language=\"Java\" role=\"Java\">/**" + 
" * Method should return true if unified servlet context," + 
" * and unified classloader should be made available" + 
" */" + 
"protected boolean requirePortalEnvironment();" + 
"</programlisting>" + 
"			<para>" + 
"				If this method returns <emphasis>true</emphasis> the current thread's context Classloader is set up according to the <emphasis role=\"bold\">dependencies</emphasis> configuration and availability of the associated web applications." + 
"			</para>" + 
"			<para>" + 
"				If it returns <emphasis>false</emphasis> the standard application separation rules are used for resource loading (effectively turning off the extension mechanism)." + 
"			</para>" + 
"			<para>" + 
"				This method exists on both <literal>AbstractHttpServlet</literal> and <literal>AbstractFilter</literal>. This is a default implementation that automatically returns <emphasis>true</emphasis> when it detects there is a current <literal>PortalContainer</literal> present and <emphasis>false</emphasis> otherwise." + 
"			</para>" + 
"			<formalpara id=\"form-Reference_Guide-Running_Multiple_Portals-ServletContextListener_based_initialization_access_to_PortalContainer\">" + 
"				<title>ServletContextListener-based initialization access to PortalContainer</title>" + 
"				<para>" + 
"					The portal has no direct control over the deployment of application archives (<code>.war</code> and <code>.ear</code> files); it is the application server that performs the deployment." + 
"				</para>" + 
"			</formalpara>" + 
"			<para>" + 
"				However, applications in the <emphasis role=\"bold\">dependencies</emphasis> configuration must be deployed <emphasis>before</emphasis> the portal that depends on them is initialized in order for the <emphasis role=\"bold\">extension mechanism</emphasis> to work properly." + 
"			</para>" + 
"			<para>" + 
"				Conversely, some applications may require an already initialized <literal>PortalContainer</literal> to properly initialize themselves. This gives rise to a recursive dependency problem." + 
"			</para>" + 
"			<para>" + 
"				A mechanism of <emphasis role=\"bold\">initialization tasks</emphasis> and <emphasis role=\"bold\">task queues</emphasis> has been implemented in the portal to resolve this dependency issue." + 
"			</para>" + 
"			<para>" + 
"				Web applications that depend on a current <literal>PortalContainer</literal> to initialize must avoid performing their initialization directly on a <literal>ServletContextListener</literal> executed during their deployment (before any <literal>PortalContainer</literal> was initialized)." + 
"			</para>" + 
"			<para>" + 
"				To ensure this, a web application must package its initialization logic into an <code>init</code> task of an appropriate type and only use <literal>ServletContextListener</literal> to insert the <code>init</code> task instance into the proper <code>init</code> tasks queue." + 
"			</para>" + 
"			<para>" + 
"				An example of this is the Gadgets application which registers Google gadgets with the current <literal>PortalContainer</literal>. This example uses <emphasis role=\"bold\">PortalContainerPostInitTask</emphasis> which is executed after the portal container has been initialized." + 
"			</para>" + 
"			<programlisting language=\"Java\" role=\"Java\">public class GadgetRegister implements ServletContextListener" + 
"{" + 
"   public void contextInitialized(ServletContextEvent event)" + 
"   {" + 
"      // Create a new post-init task" + 
"      final PortalContainerPostInitTask task = new PortalContainerPostInitTask() {" + 
"" + 
"         public void execute(ServletContext context, PortalContainer portalContainer)" + 
"         {" + 
"            try" + 
"            {" + 
"               SourceStorage sourceStorage =" + 
"               (SourceStorage) portalContainer.getComponentInstanceOfType(SourceStorage.class);" + 
"               ..." + 
"            }" + 
"            catch (RuntimeException e)" + 
"            {" + 
"               throw e;" + 
"            }" + 
"            catch (Exception e)" + 
"            {" + 
"               throw new RuntimeException(\"Initialization failed: \", e);" + 
"            }" + 
"         }" + 
"      };" + 
"" + 
"      // Add post-init task for execution on all the portal containers" + 
"      // that depend on the given ServletContext according to " + 
"      // PortalContainerDefinitions (via Dependencies configuration)" + 
"      PortalContainer.addInitTask(event.getServletContext(), task);" + 
"   }" + 
"}" + 
"</programlisting>" + 
"			<para>" + 
"				In some situations initialization may be required <emphasis>after</emphasis> the portal container is instantiated but <emphasis>before</emphasis> it has initialized. <literal>PortalContainerPreInitTask</literal> can be used in that case." + 
"			</para>" + 
"			<para>" + 
"				Use <emphasis role=\"bold\">PortalContainerPostCreateTask</emphasis> if initialization is required <emphasis>after</emphasis> all the <code>post-init</code> tasks have been executed." + 
"			</para>" + 
"			<formalpara id=\"form-Reference_Guide-Running_Multiple_Portals-LoginModules\">" + 
"				<title>LoginModules</title>" + 
"				<para>" + 
"					If some custom <literal>LoginModules</literal> require the current <literal>eXoContainer</literal> for initialization ensure they extend <emphasis role=\"bold\">org.exoplatform.services.security.jaas.AbstractLoginModule</emphasis>." + 
"				</para>" + 
"			</formalpara>" + 
"			<para>" + 
"				<literal>AbstractLoginModule</literal> enforces some basic configuration. It recognizes two initialization options; <emphasis role=\"bold\">portalContainerName</emphasis> and <emphasis role=\"bold\">realmName</emphasis>." + 
"			</para>" + 
"			<para>" + 
"				The values for these options can be accessed through protected fields of the same name." + 
"			</para>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+19003-565980+%5BLatest%5D&amp;cf_build_id=19003-565980+05+Dec+2013+14%3A26+en-US+%5BLatest%5D&amp;comment=Title%3A+Running+Multiple+Portals%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"	</section>" + 
"	<section id=\"sect-Manageability\">" + 
"		<title>Manageability</title>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+19004-565980+%5BLatest%5D&amp;cf_build_id=19004-565980+05+Dec+2013+14%3A26+en-US+%5BLatest%5D&amp;comment=Title%3A+Manageability%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"		<section id=\"Introduction13\" remap=\"TID_19005\">" + 
"			<title>Introduction</title>" + 
"			<para>" + 
"				The kernel has a framework for exposing a management view of the various sub systems of the platform. The management view is a lose term for defining how we can access relevant information about the system and how we can apply management operations. JMX is the de facto standard for exposing a management view in the Java Platform but we take in consideration other kind of views such as REST web services. Therefore, the framework is not tied to JMX, yet it provides a JMX part to define more precisely details related to the JMX management view. The legacy framework is still in use but is deprecated in favor of the new framework as it is less tested and less efficient. It will be removed by sanitization in the future." + 
"			</para>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+19005-565980+%5BLatest%5D&amp;cf_build_id=19005-565980+05+Dec+2013+14%3A26+en-US+%5BLatest%5D&amp;comment=Title%3A+Introduction%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"		<section id=\"sect-Managed_framework_API\">" + 
"			<title>Managed framework API</title>" + 
"			<para>" + 
"				The managed frameworks define an API for exposing a management view of objects. The API is targeted for internal use and is not a public API. The framework leverages Java 5 annotations to describe the management view from an object." + 
"			</para>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+19006-565980+%5BLatest%5D&amp;cf_build_id=19006-565980+05+Dec+2013+14%3A26+en-US+%5BLatest%5D&amp;comment=Title%3A+Managed+framework+API%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"			<section id=\"sect-Annotations\">" + 
"				<title>Annotations</title>" + 
"				<para role=\"RoleCreateBugPara\">" + 
"					<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+19007-565980+%5BLatest%5D&amp;cf_build_id=19007-565980+05+Dec+2013+14%3A26+en-US+%5BLatest%5D&amp;comment=Title%3A+Annotations%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"				</para>" + 
"				<section id=\"org.exoplatform.management.annotations.Managed_annotation\" remap=\"TID_19008\">" + 
"					<title>@org.exoplatform.management.annotations.Managed annotation</title>" + 
"					<para>" + 
"						The @Managed annotates elements that wants to expose a management view to a management layer." + 
"					</para>" + 
"					<para>" + 
"						<emphasis role=\"bold\">@Managed for objects</emphasis>" + 
"					</para>" + 
"					<para>" + 
"						The framework will export a management view for the objects annotated." + 
"					</para>" + 
"					<para>" + 
"						<emphasis role=\"bold\">@Managed for getter/setter</emphasis>" + 
"					</para>" + 
"					<para>" + 
"						Defines a managed property. An annotated getter defines a read property, an annotated setter defines a write property and if matching getter/setter are annotated it defines a read/write property." + 
"					</para>" + 
"					<para>" + 
"						<emphasis role=\"bold\">@Managed on method</emphasis>" + 
"					</para>" + 
"					<para>" + 
"						Defines a managed operation." + 
"					</para>" + 
"					<para role=\"RoleCreateBugPara\">" + 
"						<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+19008-565980+%5BLatest%5D&amp;cf_build_id=19008-565980+05+Dec+2013+14%3A26+en-US+%5BLatest%5D&amp;comment=Title%3A+%40org.exoplatform.management.annotations.Managed+annotation%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"					</para>" + 
"				</section>" + 
"				<section id=\"org.exoplatform.management.annotations.ManagedDescription\" remap=\"TID_19009\">" + 
"					<title>@org.exoplatform.management.annotations.ManagedDescription</title>" + 
"					<para>" + 
"						The @ManagedDescription annotation provides a description of a managed element. It is valid to annotated object or methods. It takes as sole argument a string that is the description value." + 
"					</para>" + 
"					<para role=\"RoleCreateBugPara\">" + 
"						<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+19009-565980+%5BLatest%5D&amp;cf_build_id=19009-565980+05+Dec+2013+14%3A26+en-US+%5BLatest%5D&amp;comment=Title%3A+%40org.exoplatform.management.annotations.ManagedDescription%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"					</para>" + 
"				</section>" + 
"				<section id=\"org.exoplatform.management.annotations.ManagedName\" remap=\"TID_19010\">" + 
"					<title>@org.exoplatform.management.annotations.ManagedName</title>" + 
"					<para>" + 
"						The @ManagedName annotation provides an alternative name for managed properties. It is used to accomodate legacy methods of an object that can be renamed for compatibility reasons. It takes as sole argument a string that is the name value." + 
"					</para>" + 
"					<para role=\"RoleCreateBugPara\">" + 
"						<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+19010-565983+%5BLatest%5D&amp;cf_build_id=19010-565983+05+Dec+2013+14%3A33+en-US+%5BLatest%5D&amp;comment=Title%3A+%40org.exoplatform.management.annotations.ManagedName%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"					</para>" + 
"				</section>" + 
"				<section id=\"org.exoplatform.management.annotations.ManagedBy\" remap=\"TID_19011\">" + 
"					<title>@org.exoplatform.management.annotations.ManagedBy</title>" + 
"					<para>" + 
"						The @ManagedBy annotation defines a delegate class for exposing a management view. The sole argument of the annotation are class literals. The delegate class must provide a constructor with the managed object as argument." + 
"					</para>" + 
"					<para role=\"RoleCreateBugPara\">" + 
"						<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+19011-565983+%5BLatest%5D&amp;cf_build_id=19011-565983+05+Dec+2013+14%3A33+en-US+%5BLatest%5D&amp;comment=Title%3A+%40org.exoplatform.management.annotations.ManagedBy%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"					</para>" + 
"				</section>" + 
"			</section>" + 
"		</section>" + 
"		<section id=\"sect-JMX_Management_View\">" + 
"			<title>JMX Management View</title>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+19012-565983+%5BLatest%5D&amp;cf_build_id=19012-565983+05+Dec+2013+14%3A33+en-US+%5BLatest%5D&amp;comment=Title%3A+JMX+Management+View%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"			<section id=\"sect-JMX_Annotations\">" + 
"				<title>JMX Annotations</title>" + 
"				<para role=\"RoleCreateBugPara\">" + 
"					<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+19013-565983+%5BLatest%5D&amp;cf_build_id=19013-565983+05+Dec+2013+14%3A33+en-US+%5BLatest%5D&amp;comment=Title%3A+JMX+Annotations%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"				</para>" + 
"				<section id=\"org.exoplatform.management.jmx.annotations.Property_annotation\" remap=\"TID_19014\">" + 
"					<title>@org.exoplatform.management.jmx.annotations.Property annotation</title>" + 
"					<para>" + 
"						The @Property annotation is used to within other annotations such as @NameTemplate or @NamingContext. It should be seen as a structural way for a list of properties. A property is made of a key and a value. The value can either be a string literal or it can be surrounded by curly brace to be a dynamic property. A dynamic property is resolved against the instance of the object at runtime." + 
"					</para>" + 
"					<para role=\"RoleCreateBugPara\">" + 
"						<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+19014-565983+%5BLatest%5D&amp;cf_build_id=19014-565983+05+Dec+2013+14%3A33+en-US+%5BLatest%5D&amp;comment=Title%3A+%40org.exoplatform.management.jmx.annotations.Property+annotation%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"					</para>" + 
"				</section>" + 
"				<section id=\"org.exoplatform.management.jmx.annotations.NameTemplate_annotation\" remap=\"TID_19015\">" + 
"					<title>@org.exoplatform.management.jmx.annotations.NameTemplate annotation</title>" + 
"					<para>" + 
"						The @NameTemplate defines a template that is used at registration time of a managed object to create the JMX object name. The template is formed of properties." + 
"					</para>" + 
"					<programlisting language=\"Java\" role=\"Java\">@NameTemplate({" + 
"  @Property(key=\"container\", value=\"workspace\")," + 
"  @Property(key=\"name\", value=\"{Name}\")})</programlisting>" + 
"					<para role=\"RoleCreateBugPara\">" + 
"						<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+19015-565983+%5BLatest%5D&amp;cf_build_id=19015-565983+05+Dec+2013+14%3A33+en-US+%5BLatest%5D&amp;comment=Title%3A+%40org.exoplatform.management.jmx.annotations.NameTemplate+annotation%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"					</para>" + 
"				</section>" + 
"				<section id=\"org.exoplatform.management.jmx.annotations.NamingContext_annotation\" remap=\"TID_19016\">" + 
"					<title>@org.exoplatform.management.jmx.annotations.NamingContext annotation</title>" + 
"					<para>" + 
"						The @NamingContext annotation defines a set of properties which are used within a management context. It allows to propagate properties down to managed objects which are defined by an object implementing the ManagementAware interface. The goal is to scope different instances of the same class that would have the same object name otherwise." + 
"					</para>" + 
"					<programlisting language=\"Java\" role=\"Java\">@NamingContext(@Property(key=\"workspace\", value=\"{Name}\"))</programlisting>" + 
"					<para role=\"RoleCreateBugPara\">" + 
"						<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+19016-565983+%5BLatest%5D&amp;cf_build_id=19016-565983+05+Dec+2013+14%3A33+en-US+%5BLatest%5D&amp;comment=Title%3A+%40org.exoplatform.management.jmx.annotations.NamingContext+annotation%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"					</para>" + 
"				</section>" + 
"			</section>" + 
"		</section>" + 
"		<section id=\"sect-Example\">" + 
"			<title>Example</title>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+19017-565983+%5BLatest%5D&amp;cf_build_id=19017-565983+05+Dec+2013+14%3A33+en-US+%5BLatest%5D&amp;comment=Title%3A+Example%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"			<section id=\"CacheService_example\" remap=\"TID_19018\">" + 
"				<title>CacheService example</title>" + 
"				<para>" + 
"					The cache service delegates most of the work to the CacheServiceManaged class by using the @ManagedBy annotation. At runtime when a new cache is created, it calls the CacheServiceManaged class in order to let the CacheServiceManaged object register the cache." + 
"				</para>" + 
"				<programlisting language=\"Java\" role=\"Java\">@ManagedBy(CacheServiceManaged.class)" + 
"public class CacheServiceImpl implements CacheService {" + 
"" + 
"  CacheServiceManaged managed;" + 
"  ..." + 
"  synchronized private ExoCache createCacheInstance(String region) throws Exception {" + 
"    ..." + 
"    if (managed != null) {" + 
"      managed.registerCache(simple);" + 
"    }" + 
"    ..." + 
"  }" + 
"}</programlisting>" + 
"				<para>" + 
"					The ExoCache interface is annotated to define its management view. The @NameTemplate is used to produce object name values when ExoCache instance are registered." + 
"				</para>" + 
"				<programlisting language=\"Java\" role=\"Java\">@Managed" + 
"@NameTemplate({@Property(key=\"service\", value=\"cache\"), @Property(key=\"name\", value=\"{Name}\")})" + 
"@ManagedDescription(\"Exo Cache\")" + 
"public interface ExoCache {" + 
"" + 
"  @Managed" + 
"  @ManagedName(\"Name\")" + 
"  @ManagedDescription(\"The cache name\")" + 
"  public String getName();" + 
"" + 
"  @Managed" + 
"  @ManagedName(\"Capacity\")" + 
"  @ManagedDescription(\"The maximum capacity\")" + 
"  public int getMaxSize();" + 
"" + 
"  @Managed" + 
"  @ManagedDescription(\"Evict all entries of the cache\")" + 
"  public void clearCache() throws Exception;" + 
"" + 
"  ..." + 
"}</programlisting>" + 
"				<para>" + 
"					The CacheServiceManaged is the glue code between the CacheService and the management view. The main reason is that only exo services are registered automatically against the management view. Any other managed bean must be registered manually for now. Therefore, it needs to know about the management layer via the management context. The management context allows an object implementing the ManagementAware interface to receive a context to perform further registration of managed objects." + 
"				</para>" + 
"				<programlisting language=\"Java\" role=\"Java\">@Managed" + 
"public class CacheServiceManaged implements ManagementAware {" + 
"" + 
"  /** . */" + 
"  private ManagementContext context;" + 
"" + 
"  /** . */" + 
"  private CacheServiceImpl cacheService;" + 
"" + 
"  public CacheServiceManaged(CacheServiceImpl cacheService) {" + 
"    this.cacheService = cacheService;" + 
"" + 
"    //" + 
"    cacheService.managed = this;" + 
"  }" + 
"" + 
"  public void setContext(ManagementContext context) {" + 
"    this.context = context;" + 
"  }" + 
"" + 
"  void registerCache(ExoCache cache) {" + 
"    if (context != null) {" + 
"      context.register(cache);" + 
"    }" + 
"  }" + 
"}</programlisting>" + 
"				<para role=\"RoleCreateBugPara\">" + 
"					<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+19018-565983+%5BLatest%5D&amp;cf_build_id=19018-565983+05+Dec+2013+14%3A33+en-US+%5BLatest%5D&amp;comment=Title%3A+CacheService+example%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"				</para>" + 
"			</section>" + 
"		</section>" + 
"	</section>" + 
"</appendix>" + 
"	<appendix id=\"appe-eXo_JCR\">" + 
"	<title>eXo JCR</title>" + 
"	<!--        tuning guide " + 
"        DOC NOTE: Could possibly be moved to a specific Tuning Guide later        -->" + 
"	<para role=\"RoleCreateBugPara\">" + 
"		<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+19019-565983+%5BLatest%5D&amp;cf_build_id=19019-565983+05+Dec+2013+14%3A33+en-US+%5BLatest%5D&amp;comment=Title%3A+eXo+JCR%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"	</para>" + 
"	<section id=\"Introduction_and_Support_Scope\" remap=\"TID_19020\">" + 
"		<title>Introduction and Support Scope</title>" + 
"		<warning>" + 
"			<title>eXo JCR usage</title>" + 
"			<remark>" + 
"				Docs: Edited the topic for RHJP 6.1.1 release" + 
"			</remark>" + 
"			<para>" + 
"				The portal is using a JCR API to store its information for internal usage. Red Hat does not support the JCR as an application information store." + 
"			</para>" + 
"			<para>" + 
"				The information contained in this appendix is provided to assist users to understand particular low level details on how the portal works, and how it can be fine-tuned." + 
"			</para>" + 
"		</warning>" + 
"		<para>" + 
"			The term JCR refers to the Java Content Repository. The JCR is the data store of the portal. All content is stored and managed using the JCR." + 
"		</para>" + 
"		<para>" + 
"			The eXo JCR included with the portal is a JSR-170 compliant implementation of the JCR 1.0 specification. The JCR provides the following features:" + 
"		</para>" + 
"		<itemizedlist>" + 
"			<listitem>" + 
"				<para>" + 
"					Revision control" + 
"				</para>" + 
"			</listitem>" + 
"			<listitem>" + 
"				<para>" + 
"					Textual search" + 
"				</para>" + 
"			</listitem>" + 
"			<listitem>" + 
"				<para>" + 
"					Access control" + 
"				</para>" + 
"			</listitem>" + 
"			<listitem>" + 
"				<para>" + 
"					Content event monitoring" + 
"				</para>" + 
"			</listitem>" + 
"			<listitem>" + 
"				<para>" + 
"					Text and binary data for internal portal usage" + 
"				</para>" + 
"			</listitem>" + 
"		</itemizedlist>" + 
"		<para>" + 
"			The back-end storage for the JCR can be provisioned as a file system or a database." + 
"		</para>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+19020-571130+%5BLatest%5D&amp;cf_build_id=19020-571130+18+Dec+2013+22%3A26+en-US+%5BLatest%5D&amp;comment=Title%3A+Introduction+and+Support+Scope%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"	</section>" + 
"	<section id=\"sect-Concepts\">" + 
"		<title>Concepts</title>" + 
"		<para/>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+19021-571965+%5BLatest%5D&amp;cf_build_id=19021-571965+20+Dec+2013+17%3A02+en-US+%5BLatest%5D&amp;comment=Title%3A+Concepts%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"		<section id=\"Repository_and_Workspace\" remap=\"TID_26724\">" + 
"			<title>Repository and Workspace</title>" + 
"			<variablelist>" + 
"				<varlistentry>" + 
"					<term>Repository</term>" + 
"					<listitem>" + 
"						<para>" + 
"							A repository is a form of data storage device. A repository differs from a database in the nature of the information contained. While a database holds hard data in rigid tables, a repository may access the data on a database by using less rigid meta-data. So, a repository operates as an interpreter between the database(s) and the user." + 
"						</para>" + 
"						<note>" + 
"							<para>" + 
"								The data model for the interface (the repository) is rarely the same as the data model used by the repository's underlying storage subsystems (such as a database) but the repository is able to make persistent data changes in the storage subsystem." + 
"							</para>" + 
"						</note>" + 
"					</listitem>" + 
"				</varlistentry>" + 
"				<varlistentry>" + 
"					<term>Workspace</term>" + 
"					<listitem>" + 
"						<para>" + 
"							The eXo JCR uses workspaces as the main data abstraction in its data model. The content is stored in a workspace as a hierarchy of items and each workspace has its own hierarchy of items." + 
"						</para>" + 
"						<para>" + 
"							Repositories access one or more workspaces. Persistent JCR workspaces consist of a directed acyclic graph of items where the edges represent the parent-child relation." + 
"						</para>" + 
"					</listitem>" + 
"				</varlistentry>" + 
"			</variablelist>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+26724-572798+%5BLatest%5D&amp;cf_build_id=26724-572798+22+Dec+2013+15%3A17+en-US+%5BLatest%5D&amp;comment=Title%3A+Repository+and+Workspace%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"		<section id=\"Items\" remap=\"TID_26725\">" + 
"			<title>Items</title>" + 
"			<para>" + 
"				An item is either a node or a property. Properties contain the data. Data can be simple values or binary data. The nodes give structure to a workspace and the properties hold the data." + 
"			</para>" + 
"			<variablelist>" + 
"				<varlistentry>" + 
"					<term>Nodes</term>" + 
"					<listitem>" + 
"						<para>" + 
"							Nodes are identified using accepted namespacing conventions. Changed nodes are versioned through an associated version graph. This type of versioning helps to preserve data integrity." + 
"						</para>" + 
"						<para>" + 
"							Nodes can have various properties or child nodes associated to them." + 
"						</para>" + 
"					</listitem>" + 
"				</varlistentry>" + 
"				<varlistentry>" + 
"					<term>Properties</term>" + 
"					<listitem>" + 
"						<para>" + 
"							Properties hold data as values of predefined types, such as, String, Binary, Long, Boolean, Double, Date, Reference and Path." + 
"						</para>" + 
"					</listitem>" + 
"				</varlistentry>" + 
"			</variablelist>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+26725-572798+%5BLatest%5D&amp;cf_build_id=26725-572798+22+Dec+2013+15%3A17+en-US+%5BLatest%5D&amp;comment=Title%3A+Items%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"		<section id=\"The_Data_Model\" remap=\"TID_26726\">" + 
"			<title>The Data Model</title>" + 
"			<para>" + 
"				The core of any Content Repository is the data model. The data model defines the data elements such as fields, columns, attributes, and the relationships between these elements. These data elements are stored in the Content Repository." + 
"			</para>" + 
"			<para>" + 
"				Data elements can be singular pieces of information, for example the value 3.14, or compound values pi= 3.14. A data model uses concepts like nodes, arrays and links to define relationships between data elements." + 
"			</para>" + 
"			<para>" + 
"				The use and structure of these elements forms the content repository's data model." + 
"			</para>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+26726-572798+%5BLatest%5D&amp;cf_build_id=26726-572798+22+Dec+2013+15%3A17+en-US+%5BLatest%5D&amp;comment=Title%3A+The+Data+Model%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"		<section id=\"Data_Abstraction\" remap=\"TID_26727\">" + 
"			<title>Data Abstraction</title>" + 
"			<para>" + 
"				Data abstraction describes the separation between abstract and concrete properties of data, stored in a repository. " + 
"				<remark>" + 
"					Docs: This statement is not very clear. \"The concrete properties of the data reference its implementation details.\"" + 
"				</remark>" + 
"			</para>" + 
"			<para>" + 
"				The concrete properties of the data implementation may be changed without affecting the abstract properties of the data, which are read by the data client." + 
"			</para>" + 
"			<para>" + 
"				Consider the presentation of data in a list, graph or table. While the information implementation may change, the data itself is unaffected, and readers to whom the data is presented can perform a mental abstraction to interpret it correctly, regardless of the implementation." + 
"			</para>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+26727-572798+%5BLatest%5D&amp;cf_build_id=26727-572798+22+Dec+2013+15%3A17+en-US+%5BLatest%5D&amp;comment=Title%3A+Data+Abstraction%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"	</section>" + 
"	<section id=\"sect-eXo_JCR_Repository_Service_Components\">" + 
"		<title>eXo JCR Repository Service Components</title>" + 
"		<para>" + 
"			eXo JCR Implelentation consist of an eXoContainer. The eXoContainer consist of Repository Service, Repository and the Workspace." + 
"		</para>" + 
"		<figure>" + 
"			<title id=\"exojcr\">eXo JCR Repository Service Components</title>" + 
"			<mediaobject>" + 
"				<imageobject>" + 
"					<imagedata fileref=\"images/2850.gif\"/>" + 
"				</imageobject>" + 
"				<textobject>" + 
"					<phrase>Diagram explaining the relationships between the eXo Repository service components, which are described below.</phrase>" + 
"				</textobject>" + 
"			</mediaobject>" + 
"		</figure>" + 
"		<variablelist>" + 
"			<title>Repository Service Component Definitions</title>" + 
"			<varlistentry>" + 
"				<term>ExoContainer:</term>" + 
"				<listitem>" + 
"					<para>" + 
"						A subclass of <parameter>org.exoplatform.container.ExoContainer</parameter> (<parameter>org.exoplatform.container.PortalContainer</parameter>) holds a reference to the Repository Service." + 
"					</para>" + 
"				</listitem>" + 
"			</varlistentry>" + 
"			<varlistentry>" + 
"				<term>Repository Service</term>" + 
"				<listitem>" + 
"					<para>" + 
"						This contains information about repositories. eXo JCR is able to manage many Repositories." + 
"					</para>" + 
"				</listitem>" + 
"			</varlistentry>" + 
"			<varlistentry>" + 
"				<term>Repository</term>" + 
"				<listitem>" + 
"					<para>" + 
"						An implementation of <literal>javax.jcr.Repository</literal>. It holds references to one or more Workspace(s)." + 
"					</para>" + 
"				</listitem>" + 
"			</varlistentry>" + 
"			<varlistentry>" + 
"				<term>Workspace</term>" + 
"				<listitem>" + 
"					<para>" + 
"						Container of a single rooted tree of Items." + 
"					</para>" + 
"					<note>" + 
"						<para>" + 
"							An ExoContainer Workspace is not the same as a <literal>javax.jcr.Workspace</literal>: it is not a per-session object." + 
"						</para>" + 
"					</note>" + 
"				</listitem>" + 
"			</varlistentry>" + 
"		</variablelist>" + 
"		<para>" + 
"			The usual JCR application use-case includes two initial steps:" + 
"		</para>" + 
"		<procedure>" + 
"			<step>" + 
"				<para>" + 
"					Obtain a repository object by getting Repository Service through a JNDI lookup if an eXo repository is bound to the naming context." + 
"				</para>" + 
"			</step>" + 
"			<step>" + 
"				<para>" + 
"					Create a <parameter>javax.jcr.Session object</parameter> that calls <parameter>Repository.login(..)</parameter>." + 
"				</para>" + 
"			</step>" + 
"		</procedure>" + 
"		<itemizedlist role=\"see-also-list\">" + 
"			<title>See Also:</title>" + 
"			<listitem>" + 
"				<para>" + 
"					<xref linkend=\"sect-Template_for_JCR_configuration_file\" xrefstyle=\"see-also\"/>" + 
"				</para>" + 
"			</listitem>" + 
"		</itemizedlist>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+19022-572800+%5BLatest%5D&amp;cf_build_id=19022-572800+22+Dec+2013+16%3A02+en-US+%5BLatest%5D&amp;comment=Title%3A+eXo+JCR+Repository+Service+Components%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"		<section id=\"Workspace_Data_Model\" remap=\"TID_19023\">" + 
"			<title>Workspace Data Model</title>" + 
"			<para>" + 
"				The Workspace working model shown here explains the components of eXo JCR implementation, that are used in the data flow to perform operations specified in the JCR API." + 
"			</para>" + 
"			<figure>" + 
"				<title id=\"wsdatamodel\">Workspace Data Model</title>" + 
"				<mediaobject>" + 
"					<imageobject>" + 
"						<imagedata fileref=\"images/2931.gif\" width=\"444\"/>" + 
"					</imageobject>" + 
"					<textobject>" + 
"						<phrase>Diagram explaining which components of an eXo JCR implementation are used in a data flow to perform operations specified in the JCR API.</phrase>" + 
"					</textobject>" + 
"				</mediaobject>" + 
"			</figure>" + 
"			<para>" + 
"				The Workspace Data Model has four levels. These levels are created based on data isolation and value from the JCR model perspective." + 
"			</para>" + 
"			<variablelist>" + 
"				<title/>" + 
"				<varlistentry>" + 
"					<term> JCR API </term>" + 
"					<listitem>" + 
"						<para>" + 
"							The eXo JCR core implements JCR API interfaces. The JCR API interface includes Item, Node, Property and JCR logical view on stored data." + 
"						</para>" + 
"					</listitem>" + 
"				</varlistentry>" + 
"				<varlistentry>" + 
"					<term>Session Level </term>" + 
"					<listitem>" + 
"						<para>" + 
"							Session Level isolates transient data viewable inside one JCR Session and interacts with API level using eXo JCR internal API." + 
"						</para>" + 
"					</listitem>" + 
"				</varlistentry>" + 
"				<varlistentry>" + 
"					<term>Session Data Manager</term>" + 
"					<listitem>" + 
"						<para>" + 
"							Session Data Manager maintains transient session data. With data access/ modification/ validation logic, it contains Modified Items Storage to hold the data changed between subsequent <code>save()</code> calling and Session Items Cache." + 
"						</para>" + 
"					</listitem>" + 
"				</varlistentry>" + 
"				<varlistentry>" + 
"					<term>Transaction Data Manager</term>" + 
"					<listitem>" + 
"						<para>" + 
"							Transaction Data Manager maintains session data between <code>save()</code> and transaction commit/ rollback if the current session is part of a transaction." + 
"						</para>" + 
"					</listitem>" + 
"				</varlistentry>" + 
"				<varlistentry>" + 
"					<term>Workspace Level</term>" + 
"					<listitem>" + 
"						<para>" + 
"							Workspace Level operates for particular workspace shared data. It contains per-Workspace objects" + 
"						</para>" + 
"					</listitem>" + 
"				</varlistentry>" + 
"				<varlistentry>" + 
"					<term>Workspace Storage Data Manager</term>" + 
"					<listitem>" + 
"						<para>" + 
"							Workspace Storage Data Manager maintains workspace data, including final validation, events firing and caching." + 
"						</para>" + 
"					</listitem>" + 
"				</varlistentry>" + 
"				<varlistentry>" + 
"					<term>Workspace Data Container</term>" + 
"					<listitem>" + 
"						<para>" + 
"							Workspace Data Container implements physical data storage. It allows different types of backend, such as RDB, FS files, and so on to be used as storage for JCR data. Along with the main Data Container, other storages for persisted Property Values can be configured and used." + 
"						</para>" + 
"					</listitem>" + 
"				</varlistentry>" + 
"				<varlistentry>" + 
"					<term>Indexer</term>" + 
"					<listitem>" + 
"						<para>" + 
"							Indexer maintains workspace data indexing for further queries." + 
"						</para>" + 
"					</listitem>" + 
"				</varlistentry>" + 
"				<varlistentry>" + 
"					<term>Storage Level</term>" + 
"					<listitem>" + 
"						<para>" + 
"							Storage Level provides persistent storages for:" + 
"						</para>" + 
"						<itemizedlist>" + 
"							<listitem>" + 
"								<para>" + 
"									JCR Data" + 
"								</para>" + 
"							</listitem>" + 
"							<listitem>" + 
"								<para>" + 
"									Indexes (Apache Lucene)" + 
"								</para>" + 
"							</listitem>" + 
"							<listitem>" + 
"								<para>" + 
"									Values for BLOBs if they are different from the main Data Container" + 
"								</para>" + 
"							</listitem>" + 
"						</itemizedlist>" + 
"					</listitem>" + 
"				</varlistentry>" + 
"			</variablelist>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+19023-572801+%5BLatest%5D&amp;cf_build_id=19023-572801+22+Dec+2013+17%3A20+en-US+%5BLatest%5D&amp;comment=Title%3A+Workspace+Data+Model%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"	</section>" + 
"	<section id=\"sect-Template_for_JCR_configuration_file\">" + 
"		<title>Template for JCR configuration file</title>" + 
"		<para>" + 
"			The JCR configuration is defined in an XML file which is constructed as per the DTD show here:" + 
"		</para>" + 
"		<programlisting language=\"XML\" role=\"XML\">!ELEMENT repository-service (repositories)" + 
"!ATTLIST repository-service default-repository NMTOKEN #REQUIRED" + 
"!ELEMENT repositories (repository)" + 
"!ELEMENT repository (security-domain,access-control,session-max-age,authentication-policy,workspaces)" + 
"!ATTLIST repository" + 
"  default-workspace NMTOKEN #REQUIRED" + 
"  name NMTOKEN #REQUIRED" + 
"  system-workspace NMTOKEN #REQUIRED" + 
"!ELEMENT security-domain (#PCDATA)" + 
"!ELEMENT access-control (#PCDATA)" + 
"!ELEMENT session-max-age (#PCDATA)" + 
"!ELEMENT authentication-policy (#PCDATA)" + 
"!ELEMENT workspaces (workspace+)" + 
"!ELEMENT workspace (container,initializer,cache,query-handler)" + 
"!ATTLIST workspace name NMTOKEN #REQUIRED" + 
"!ELEMENT container (properties,value-storages)" + 
"!ATTLIST container class NMTOKEN #REQUIRED" + 
"!ELEMENT value-storages (value-storage+)" + 
"!ELEMENT value-storage (properties,filters)" + 
"!ATTLIST value-storage class NMTOKEN #REQUIRED" + 
"!ELEMENT filters (filter+)" + 
"!ELEMENT filter EMPTY" + 
"!ATTLIST filter property-type NMTOKEN #REQUIRED" + 
"!ELEMENT initializer (properties)" + 
"!ATTLIST initializer class NMTOKEN #REQUIRED" + 
"!ELEMENT cache (properties)" + 
"!ATTLIST cache " + 
"  enabled NMTOKEN #REQUIRED" + 
"  class NMTOKEN #REQUIRED" + 
"" + 
"!ELEMENT query-handler (properties)" + 
"!ATTLIST query-handler class NMTOKEN #REQUIRED" + 
"!ELEMENT access-manager (properties)" + 
"!ATTLIST access-manager class NMTOKEN #REQUIRED" + 
"!ELEMENT lock-manager (time-out,persister)" + 
"!ELEMENT time-out (#PCDATA)" + 
"!ELEMENT persister (properties)" + 
"!ELEMENT properties (property+)" + 
"!ELEMENT property EMPTY</programlisting>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+19024-572803+%5BLatest%5D&amp;cf_build_id=19024-572803+22+Dec+2013+17%3A45+en-US+%5BLatest%5D&amp;comment=Title%3A+Template+for+JCR+configuration+file%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"		<section id=\"sect-Portal_Configuration_for_JCR\">" + 
"			<title>Portal Configuration for JCR</title>" + 
"			<para>" + 
"				JCR services are registered in the Portal container." + 
"			</para>" + 
"			<remark>" + 
"				NEEDINFO - FILE PATHS - The path needs to be updated with the equivalent path for JBoss Portal Platform instead of gatein, please see below para. New info required?" + 
"			</remark>" + 
"			<para>" + 
"				The DTD show here is an example configuration from the file <filename>jcr-configuration.xml</filename>. The configuration file is located at <filename><replaceable>JPP_DIST</replaceable>/gatein/gatein.ear/portal.war/WEB-INF/conf/jcr/</filename>." + 
"			</para>" + 
"			<programlisting language=\"XML\">&lt;component&gt;" + 
"  &lt;key&gt;org.exoplatform.services.jcr.RepositoryService&lt;/key&gt;" + 
"  &lt;type&gt;org.exoplatform.services.jcr.impl.RepositoryServiceImpl&lt;/type&gt;" + 
"  &lt;component-plugins&gt;" + 
"    &lt;component-plugin&gt;" + 
"      &lt;name&gt;add.namespaces&lt;/name&gt;" + 
"      &lt;set-method&gt;addPlugin&lt;/set-method&gt;" + 
"      &lt;type&gt;org.exoplatform.services.jcr.impl.AddNamespacesPlugin&lt;/type&gt;" + 
"      &lt;init-params&gt;" + 
"	&lt;properties-param&gt;" + 
"	  &lt;name&gt;namespaces&lt;/name&gt;" + 
"	  &lt;property name=\"test\" value=\"http://www.apache.org/jackrabbit/test\"/&gt;" + 
"	  &lt;property name=\"exojcrtest\" value=\"http://www.exoplatform.org/jcr/test/1.0\"/&gt;" + 
"	  &lt;property name=\"rma\" value=\"http://www.rma.com/jcr/\"/&gt;" + 
"	  &lt;property name=\"metadata\" value=\"http://www.exoplatform.com/jcr/metadata/1.1/\"/&gt;" + 
"	  &lt;property name=\"dc\" value=\"http://purl.org/dc/elements/1.1/\"/&gt;" + 
"	  &lt;property name=\"publication\" value=\"http://www.exoplatform.com/jcr/publication/1.1/\"/&gt;" + 
"	&lt;/properties-param&gt;" + 
"      &lt;/init-params&gt;" + 
"    &lt;/component-plugin&gt;" + 
"    &lt;component-plugin&gt;" + 
"      &lt;name&gt;add.nodeType&lt;/name&gt;" + 
"      &lt;set-method&gt;addPlugin&lt;/set-method&gt;" + 
"      &lt;type&gt;org.exoplatform.services.jcr.impl.AddNodeTypePlugin&lt;/type&gt;" + 
"      &lt;init-params&gt;" + 
"	&lt;values-param&gt;" + 
"	  &lt;name&gt;autoCreatedInNewRepository&lt;/name&gt;" + 
"	  &lt;description&gt;Node types configuration file&lt;/description&gt;" + 
"	  &lt;value&gt;jar:/conf/test/nodetypes-tck.xml&lt;/value&gt;" + 
"	  &lt;value&gt;jar:/conf/test/nodetypes-impl.xml&lt;/value&gt;" + 
"	  &lt;value&gt;jar:/conf/test/nodetypes-usecase.xml&lt;/value&gt;" + 
"	  &lt;value&gt;jar:/conf/test/nodetypes-config.xml&lt;/value&gt;" + 
"	  &lt;value&gt;jar:/conf/test/nodetypes-config-extended.xml&lt;/value&gt;  " + 
"	  &lt;value&gt;jar:/conf/test/wcm-nodetypes.xml&lt;/value&gt;" + 
"	  &lt;value&gt;jar:/conf/test/nodetypes-publication-config.xml&lt;/value&gt;" + 
"	  &lt;value&gt;jar:/conf/test/publication-plugins-nodetypes-config.xml&lt;/value&gt;          " + 
"	&lt;/values-param&gt;" + 
"	" + 
"	&lt;values-param&gt;" + 
"	  &lt;name&gt;testInitNodeTypesRepository&lt;/name&gt;" + 
"	  &lt;description&gt;" + 
"	    Node types configuration file for repository with name testInitNodeTypesRepository" + 
"	  &lt;/description&gt;" + 
"	  &lt;value&gt;jar:/conf/test/nodetypes-test.xml&lt;/value&gt;" + 
"	&lt;/values-param&gt;" + 
"	" + 
"	&lt;values-param&gt;" + 
"	  &lt;name&gt;testInitNodeTypesRepositoryTest2&lt;/name&gt;" + 
"	  &lt;description&gt;" + 
"	    Node types configuration file for repository with name testInitNodeTypesRepositoryTest2" + 
"	  &lt;/description&gt;" + 
"	  &lt;value&gt;jar:/conf/test/nodetypes-test2.xml&lt;/value&gt;" + 
"	&lt;/values-param&gt;" + 
"	" + 
"	&lt;!--values-param&gt;" + 
"	&lt;name&gt;testInitNodeTypesRepositoryTest3&lt;/name&gt;" + 
"	&lt;description&gt;Node types from ext. Needed bacause core starup earlie than ext&lt;/description&gt;" + 
"	&lt;value&gt;jar:/conf/test/nodetypes-test3_ext.xml&lt;/value&gt;" + 
"	&lt;/values-param--&gt;" + 
"	" + 
"      &lt;/init-params&gt;" + 
"    &lt;/component-plugin&gt;" + 
"  &lt;/component-plugins&gt;" + 
"&lt;/component&gt;" + 
"" + 
"&lt;component&gt;" + 
"  &lt;key&gt;org.exoplatform.services.jcr.config.RepositoryServiceConfiguration&lt;/key&gt;" + 
"  &lt;type&gt;org.exoplatform.services.jcr.impl.config.RepositoryServiceConfigurationImpl&lt;/type&gt;" + 
"  &lt;init-params&gt;" + 
"    &lt;value-param&gt;" + 
"      &lt;name&gt;conf-path&lt;/name&gt;" + 
"      &lt;description&gt;JCR configuration file&lt;/description&gt;" + 
"      &lt;value&gt;jar:/conf/standalone/test-jcr-config-jbc.xml&lt;/value&gt;" + 
"    &lt;/value-param&gt;" + 
"    &lt;properties-param&gt;" + 
"      &lt;name&gt;working-conf&lt;/name&gt;" + 
"      &lt;description&gt;working-conf&lt;/description&gt;" + 
"      &lt;property name=\"dialect\" value=\"auto\" /&gt;" + 
"      &lt;property name=\"source-name\" value=\"jdbcjcr\"/&gt;" + 
"      &lt;property name=\"persister-class-name\" value=\"org.exoplatform.services.jcr.impl.config.JDBCConfigurationPersister\"/&gt;" + 
"    &lt;/properties-param&gt;" + 
"  &lt;/init-params&gt;" + 
"&lt;/component&gt;" + 
"</programlisting>" + 
"			<!--         <section id=\"sect-Reference_Guide-Portal_configuration-Help_application_to_prohibit_the_use_of_closed_sessions\">" + 
"            <title>Help application to prohibit the use of closed sessions</title>" + 
"             <para>" + 
"                Products that use eXo JCR, sometimes misuse it since they continue to use a session that has been closed through a method call on a node, a property or even the session itself. To prevent bad practices we propose three modes which are the following:" + 
"            </para>" + 
"             <orderedlist>" + 
"                <listitem>" + 
"                    <para>" + 
"                        If the system property <emphasis>exo.jcr.prohibit.closed.session.usage</emphasis> has been set to <emphasis>true</emphasis>, then a RepositoryException will be thrown any time an application will try to access to a closed session. In the stack trace, you will be able to know the call stack that closes the session." + 
"                    </para>" + 
"" + 
"                </listitem>" + 
"                 <listitem>" + 
"                    <para>" + 
"                        If the system property <emphasis>exo.jcr.prohibit.closed.session.usage</emphasis> has not been set and the system property <emphasis>exo.product.developing</emphasis> has been set to <emphasis>true</emphasis>, then a warning will be logged in the log file with the full stack trace in order to help identifying the root cause of the issue. In the stack trace, you will be able to know the call stack that closes the session." + 
"                    </para>" + 
"" + 
"                </listitem>" + 
"                 <listitem>" + 
"                    <para>" + 
"                        If none of the previous system properties have been set, then we will ignore that the issue and let the application use the closed session as it was possible before without doing anything in order to allow applications to migrate step by step." + 
"                    </para>" + 
"" + 
"                </listitem>" + 
"" + 
"            </orderedlist>" + 
"" + 
"        </section> -->" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+19025-572805+%5BLatest%5D&amp;cf_build_id=19025-572805+22+Dec+2013+17%3A56+en-US+%5BLatest%5D&amp;comment=Title%3A+Portal+Configuration+for+JCR%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"			<section id=\"JCR_Configuration2\" remap=\"TID_19026\">" + 
"				<title>JCR Workspace Configuration</title>" + 
"				<para>" + 
"					The JCR Service can use multiple Repositories and each repository can have multiple Workspaces. To configure the workspaces, you need to edit the repository configuration file." + 
"				</para>" + 
"				<para>" + 
"					Configure the workspaces by locating the workspace you need to modify. The workspace is found in <filename><replaceable>JPP_DIST</replaceable>/gatein/gatein.ear/portal.war/WEB-INF/conf/jcr/repository-configuration.xml</filename>." + 
"				</para>" + 
"				<para>" + 
"					The repository configuration supports human-readable value as they are not case-sensitive." + 
"				</para>" + 
"				<para>" + 
"					Complete the appropriate element fields using the following value formats:" + 
"				</para>" + 
"				<variablelist>" + 
"					<varlistentry>" + 
"						<term>Number formats</term>" + 
"						<listitem>" + 
"							<para>" + 
"								<itemizedlist>" + 
"									<listitem>" + 
"										<para>" + 
"											<literal>K</literal> or <literal>KB</literal> for kilobytes." + 
"										</para>" + 
"									</listitem>" + 
"									<listitem>" + 
"										<para>" + 
"											<literal>M</literal> or <literal>MB</literal> for megabytes." + 
"										</para>" + 
"									</listitem>" + 
"									<listitem>" + 
"										<para>" + 
"											<literal>G</literal> or <literal>GB</literal> for gigabytes." + 
"										</para>" + 
"									</listitem>" + 
"									<listitem>" + 
"										<para>" + 
"											<emphasis role=\"bold\">T</emphasis> or <emphasis role=\"bold\">TB</emphasis> for terabytes." + 
"										</para>" + 
"									</listitem>" + 
"									<listitem>" + 
"										<para>" + 
"											Examples: 200K or 200KB; 4M or 4MB; 1.4G or 1.4GB; 10T or 10TB." + 
"										</para>" + 
"									</listitem>" + 
"								</itemizedlist>" + 
"							</para>" + 
"						</listitem>" + 
"					</varlistentry>" + 
"					<varlistentry>" + 
"						<term>Time formats:</term>" + 
"						<listitem>" + 
"							<para>" + 
"								<itemizedlist>" + 
"									<listitem>" + 
"										<para>" + 
"											<emphasis role=\"bold\">ms</emphasis> for milliseconds." + 
"										</para>" + 
"									</listitem>" + 
"									<listitem>" + 
"										<para>" + 
"											<emphasis role=\"bold\">s</emphasis> for seconds." + 
"										</para>" + 
"									</listitem>" + 
"									<listitem>" + 
"										<para>" + 
"											<emphasis role=\"bold\">m</emphasis> for minutes." + 
"										</para>" + 
"									</listitem>" + 
"									<listitem>" + 
"										<para>" + 
"											<emphasis role=\"bold\">h</emphasis> for hours." + 
"										</para>" + 
"									</listitem>" + 
"									<listitem>" + 
"										<para>" + 
"											<emphasis role=\"bold\">d</emphasis> for days." + 
"										</para>" + 
"									</listitem>" + 
"									<listitem>" + 
"										<para>" + 
"											<emphasis role=\"bold\">w</emphasis> for weeks." + 
"										</para>" + 
"									</listitem>" + 
"									<listitem>" + 
"										<para>" + 
"											The default time format is seconds." + 
"										</para>" + 
"									</listitem>" + 
"									<listitem>" + 
"										<para>" + 
"											Examples: 500ms or 500 milliseconds; 20, 20s or 20 seconds; 30m or 30 minutes; 12h or 12 hours; 5d or 5 days; 4w or 4 weeks." + 
"										</para>" + 
"									</listitem>" + 
"								</itemizedlist>" + 
"							</para>" + 
"						</listitem>" + 
"					</varlistentry>" + 
"				</variablelist>" + 
"				<para role=\"RoleCreateBugPara\">" + 
"					<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+19026-572808+%5BLatest%5D&amp;cf_build_id=19026-572808+22+Dec+2013+20%3A28+en-US+%5BLatest%5D&amp;comment=Title%3A+JCR+Workspace+Configuration%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"				</para>" + 
"			</section>" + 
"			<section id=\"Repository_service_configuration_JCR_repositories_configuration\" remap=\"TID_19027\">" + 
"				<title>JCR Repository Service Configuration</title>" + 
"				<para>" + 
"					The JCR Repository service configuration includes declaring repository names, workspace names, security domain name, access control policy, authentication policy name, and so on." + 
"				</para>" + 
"				<programlisting language=\"XML\" role=\"XML\">&lt;!-- Comment #1 --&gt;" + 
"&lt;repository-service default-repository=\"repository\"&gt;" + 
"  &lt;!-- The list of repositories. --&gt;" + 
"  &lt;repositories&gt;" + 
"    &lt;!-- Comment #2. --&gt;" + 
"    &lt;repository name=\"repository\" system-workspace=\"system\" default-workspace=\"portal-system\"&gt;" + 
"      &lt;!-- Comment #3 --&gt;" + 
"      &lt;security-domain&gt;gatein-domain&lt;/security-domain&gt;" + 
"      &lt;!-- Comment #4 --&gt;" + 
"      &lt;access-control&gt;optional&lt;/access-control&gt;" + 
"      &lt;!-- Comment #5 --&gt;" + 
"      &lt;authentication-policy&gt;org.exoplatform.services.jcr.impl.core.access.JAASAuthenticator&lt;/authentication-policy&gt;" + 
"      ..." + 
"      &lt;!-- Comment #6 --&gt;" + 
"      &lt;workspaces&gt;" + 
"      ..." + 
"        &lt;!-- 	Comment #7 --&gt;" + 
"        &lt;workspace name=\"portal-system\"&gt;" + 
"          &lt;!-- Comment #8 --&gt; " + 
"          &lt;container class=\"org.exoplatform.services.jcr.impl.storage.jdbc.optimisation.CQJDBCWorkspaceDataContainer\"&gt;" + 
"            &lt;properties&gt;" + 
"              &lt;property name=\"source-name\" value=\"${gatein.jcr.datasource.name}${container.name.suffix}\"/&gt;" + 
"              &lt;property name=\"dialect\" value=\"${gatein.jcr.datasource.dialect}\"/&gt;" + 
"              &lt;property name=\"multi-db\" value=\"false\"/&gt;" + 
"              &lt;property name=\"update-storage\" value=\"true\"/&gt;" + 
"              &lt;property name=\"max-buffer-size\" value=\"204800\"/&gt;" + 
"              &lt;property name=\"swap-directory\" value=\"${gatein.jcr.data.dir}/swap/portal-system${container.name.suffix}\"/&gt;" + 
"            &lt;/properties&gt; " + 
"            &lt;value-storages&gt;" + 
"              &lt;value-storage id=\"portal-system\" class=\"org.exoplatform.services.jcr.impl.storage.value.fs.TreeFileValueStorage\"&gt;" + 
"                &lt;properties&gt;" + 
"                  &lt;property name=\"path\" value=\"${gatein.jcr.storage.data.dir}/portal-system${container.name.suffix}\"/&gt;" + 
"                &lt;/properties&gt;" + 
"                &lt;filters&gt;" + 
"                  &lt;filter property-type=\"Binary\"/&gt;" + 
"                &lt;/filters&gt;" + 
"              &lt;/value-storage&gt;" + 
"            &lt;/value-storages&gt;" + 
"          &lt;/container&gt;" + 
"          &lt;!-- Comment #9 --&gt;" + 
"          &lt;initializer class=\"org.exoplatform.services.jcr.impl.core.ScratchWorkspaceInitializer\"&gt;" + 
"            &lt;properties&gt;" + 
"              &lt;property name=\"root-nodetype\" value=\"nt:unstructured\"/&gt;" + 
"              &lt;property name=\"root-permissions\" value=\"*:/platform/administrators read;*:/platform/administrators add_node;*:/platform/administrators set_property;*:/platform/administrators remove\"/&gt;" + 
"            &lt;/properties&gt;" + 
"          &lt;/initializer&gt;" + 
"          &lt;!-- Comment #10 --&gt;" + 
"          &lt;cache enabled=\"true\" class=\"org.exoplatform.services.jcr.impl.dataflow.persistent.jbosscache.JBossCacheWorkspaceStorageCache\"&gt;" + 
"            &lt;properties&gt;" + 
"              &lt;property name=\"jbosscache-configuration\" value=\"${gatein.jcr.cache.config}\" /&gt;" + 
"              &lt;property name=\"jgroups-configuration\" value=\"${gatein.jcr.jgroups.config}\" /&gt;" + 
"              &lt;property name=\"jgroups-multiplexer-stack\" value=\"true\" /&gt;" + 
"              &lt;property name=\"jbosscache-cluster-name\" value=\"jcr-${container.name.suffix}-portal-system\" /&gt;" + 
"            &lt;/properties&gt;" + 
"          &lt;/cache&gt;" + 
"          &lt;!-- Comment #11 --&gt;" + 
"          &lt;query-handler class=\"org.exoplatform.services.jcr.impl.core.query.lucene.SearchIndex\"&gt;" + 
"            &lt;properties&gt;" + 
"              &lt;property name=\"index-dir\" value=\"${gatein.jcr.index.data.dir}/portal-system${container.name.suffix}\"/&gt;" + 
"              &lt;property name=\"changesfilter-class\" value=\"${gatein.jcr.index.changefilterclass}\" /&gt;" + 
"              &lt;property name=\"jbosscache-configuration\" value=\"${gatein.jcr.index.cache.config}\" /&gt;" + 
"              &lt;property name=\"jgroups-configuration\" value=\"${gatein.jcr.jgroups.config}\" /&gt;" + 
"              &lt;property name=\"jgroups-multiplexer-stack\" value=\"true\" /&gt;" + 
"              &lt;property name=\"jbosscache-cluster-name\" value=\"jcrindexer-${container.name.suffix}-portal-system\" /&gt;" + 
"              &lt;property name=\"max-volatile-time\" value=\"60\" /&gt;" + 
"            &lt;/properties&gt;" + 
"          &lt;/query-handler&gt;" + 
"          &lt;lock-manager class=\"org.exoplatform.services.jcr.impl.core.lock.jbosscache.CacheableLockManagerImpl\"&gt;" + 
"            &lt;properties&gt;" + 
"              &lt;!-- Comment #12 --&gt;" + 
"              &lt;property name=\"time-out\" value=\"15m\" /&gt;" + 
"              &lt;property name=\"jbosscache-configuration\" value=\"${gatein.jcr.lock.cache.config}\" /&gt;" + 
"              &lt;property name=\"jgroups-configuration\" value=\"${gatein.jcr.jgroups.config}\" /&gt;" + 
"              &lt;property name=\"jgroups-multiplexer-stack\" value=\"true\" /&gt;" + 
"              &lt;property name=\"jbosscache-cluster-name\" value=\"jcrlock-${container.name.suffix}-portal-system\" /&gt;" + 
"              &lt;property name=\"jbosscache-cl-cache.jdbc.table.name\" value=\"jcrlock_portal_system\" /&gt;" + 
"              &lt;property name=\"jbosscache-cl-cache.jdbc.table.create\" value=\"true\" /&gt;" + 
"              &lt;property name=\"jbosscache-cl-cache.jdbc.table.drop\" value=\"false\" /&gt;" + 
"              &lt;property name=\"jbosscache-cl-cache.jdbc.table.primarykey\" value=\"pk\" /&gt;" + 
"              &lt;property name=\"jbosscache-cl-cache.jdbc.fqn.column\" value=\"fqn\" /&gt;" + 
"              &lt;property name=\"jbosscache-cl-cache.jdbc.node.column\" value=\"node\" /&gt;" + 
"              &lt;property name=\"jbosscache-cl-cache.jdbc.parent.column\" value=\"parent\" /&gt;" + 
"              &lt;property name=\"jbosscache-cl-cache.jdbc.datasource\" value=\"${gatein.jcr.datasource.name}${container.name.suffix}\" /&gt;" + 
"            &lt;/properties&gt;" + 
"          &lt;/lock-manager&gt;" + 
"        &lt;/workspace&gt;" + 
"</programlisting>" + 
"				<variablelist>" + 
"					<varlistentry>" + 
"						<term>Comment #1</term>" + 
"						<listitem>" + 
"							<para>" + 
"								The name of the default repository, the one returned by <code> RepositoryService.getRepository()</code>." + 
"							</para>" + 
"						</listitem>" + 
"					</varlistentry>" + 
"					<varlistentry>" + 
"						<term>Comment #2</term>" + 
"						<listitem>" + 
"							<para>" + 
"								The parameters are name of a repository, the name of workspace where <filename>/jcr:system node</filename> is placed and the name of the workspace obtained using Session's <code>login()</code> or <code>login(Credentials)</code> methods (the ones without an explicit workspace name)." + 
"							</para>" + 
"						</listitem>" + 
"					</varlistentry>" + 
"					<varlistentry>" + 
"						<term>Comment #3</term>" + 
"						<listitem>" + 
"							<para>" + 
"								The name of a security domain for JAAS authentication" + 
"							</para>" + 
"						</listitem>" + 
"					</varlistentry>" + 
"					<varlistentry>" + 
"						<term>Comment #4</term>" + 
"						<listitem>" + 
"							<para>" + 
"								The name of an access control policy. There can be 3 types: optional - ACL is created on-demand(default), disable - no access control, mandatory - an ACL is created for each added node(not supported yet)." + 
"							</para>" + 
"						</listitem>" + 
"					</varlistentry>" + 
"					<varlistentry>" + 
"						<term>Comment #5</term>" + 
"						<listitem>" + 
"							<para>" + 
"								The name of an authentication policy class" + 
"							</para>" + 
"						</listitem>" + 
"					</varlistentry>" + 
"					<varlistentry>" + 
"						<term>Comment #6</term>" + 
"						<listitem>" + 
"							<para>" + 
"								The list of workspaces" + 
"							</para>" + 
"						</listitem>" + 
"					</varlistentry>" + 
"					<varlistentry>" + 
"						<term>Comment #7</term>" + 
"						<listitem>" + 
"							<para>" + 
"								The name of the workspace" + 
"							</para>" + 
"						</listitem>" + 
"					</varlistentry>" + 
"					<varlistentry>" + 
"						<term>Comment #8</term>" + 
"						<listitem>" + 
"							<para>" + 
"								Workspace data container (physical storage) configuration" + 
"							</para>" + 
"						</listitem>" + 
"					</varlistentry>" + 
"					<varlistentry>" + 
"						<term>Comment #9</term>" + 
"						<listitem>" + 
"							<para>" + 
"								Workspace initializer configuration" + 
"							</para>" + 
"						</listitem>" + 
"					</varlistentry>" + 
"					<varlistentry>" + 
"						<term>Comment #10</term>" + 
"						<listitem>" + 
"							<para>" + 
"								Workspace storage cache configuration" + 
"							</para>" + 
"						</listitem>" + 
"					</varlistentry>" + 
"					<varlistentry>" + 
"						<term>Comment #11</term>" + 
"						<listitem>" + 
"							<para>" + 
"								Query handler configuration" + 
"							</para>" + 
"						</listitem>" + 
"					</varlistentry>" + 
"					<varlistentry>" + 
"						<term>Comment #12</term>" + 
"						<listitem>" + 
"							<para>" + 
"								The amount of time before the unused global lock is removed." + 
"							</para>" + 
"						</listitem>" + 
"					</varlistentry>" + 
"				</variablelist>" + 
"				<note>" + 
"					<title> session-max-age</title>" + 
"					<para>" + 
"						<literal>session-max-age</literal> This parameter is not shown in the example file above as it is optional. The session-max-age sets the time after which an idle session is removed (called logout). If it is not set up, an idle session will never be removed." + 
"					</para>" + 
"				</note>" + 
"				<para>" + 
"					<literal>lock-remover-max-threads</literal> denotes the number of threads that can serve LockRemover tasks. The default value is of <literal>lock-remover-max-threads</literal> 1. Each workspace has a LockManager. JCR supports Locks with defined lifetime. The LockRemover removes a lock on expiration. LockRemovers is not an independent timer-thread, its a task that is executed every 30 seconds. Such a task is served by ThreadPoolExecutor which may use different number of threads." + 
"				</para>" + 
"				<para role=\"RoleCreateBugPara\">" + 
"					<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+19027-572870+%5BLatest%5D&amp;cf_build_id=19027-572870+23+Dec+2013+16%3A23+en-US+%5BLatest%5D&amp;comment=Title%3A+JCR+Repository+Service+Configuration%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"				</para>" + 
"			</section>" + 
"			<section id=\"Workspace_configuration\" remap=\"TID_19028\">" + 
"				<title>Workspace Configuration Parameters</title>" + 
"				<variablelist>" + 
"					<varlistentry>" + 
"						<term>name</term>" + 
"						<listitem>" + 
"							<para>" + 
"								The name of a workspace." + 
"							</para>" + 
"						</listitem>" + 
"					</varlistentry>" + 
"					<varlistentry>" + 
"						<term>auto-init-root-nodetype</term>" + 
"						<listitem>" + 
"							<para>" + 
"								DEPRECATED in JCR 1.9 (use initializer). The node type for root node initialization." + 
"							</para>" + 
"						</listitem>" + 
"					</varlistentry>" + 
"					<varlistentry>" + 
"						<term>container</term>" + 
"						<listitem>" + 
"							<para>" + 
"								Workspace data container (physical storage) configuration." + 
"							</para>" + 
"						</listitem>" + 
"					</varlistentry>" + 
"					<varlistentry>" + 
"						<term>initializer</term>" + 
"						<listitem>" + 
"							<para>" + 
"								Workspace initializer configuration." + 
"							</para>" + 
"						</listitem>" + 
"					</varlistentry>" + 
"					<varlistentry>" + 
"						<term>cache</term>" + 
"						<listitem>" + 
"							<para>" + 
"								Workspace storage cache configuration." + 
"							</para>" + 
"						</listitem>" + 
"					</varlistentry>" + 
"					<varlistentry>" + 
"						<term>query-handler</term>" + 
"						<listitem>" + 
"							<para>" + 
"								Query handler configuration." + 
"							</para>" + 
"						</listitem>" + 
"					</varlistentry>" + 
"					<varlistentry>" + 
"						<term>auto-init-permissions</term>" + 
"						<listitem>" + 
"							<para>" + 
"								DEPRECATED in JCR 1.9 (use initializer). Default permissions of the root node. It is defined as a set of semicolon-delimited permissions containing a group of space-delimited identities and the type of permission." + 
"							</para>" + 
"							<para>" + 
"								For example, any read; <literal>:/admin read;</literal>:/admin add_node; <literal>:/admin set_property;</literal>:/admin remove means that users from group <literal>admin</literal> have all permissions and other users have only a 'read' permission." + 
"							</para>" + 
"						</listitem>" + 
"					</varlistentry>" + 
"				</variablelist>" + 
"				<para role=\"RoleCreateBugPara\">" + 
"					<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+19028-572874+%5BLatest%5D&amp;cf_build_id=19028-572874+23+Dec+2013+16%3A32+en-US+%5BLatest%5D&amp;comment=Title%3A+Workspace+Configuration+Parameters%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"				</para>" + 
"			</section>" + 
"			<section id=\"Workspace_data_container_configuration\" remap=\"TID_19029\">" + 
"				<title>Workspace Data Container Configuration Parameters</title>" + 
"				<variablelist>" + 
"					<varlistentry>" + 
"						<term>class</term>" + 
"						<listitem>" + 
"							<para>" + 
"								A workspace data container class name." + 
"							</para>" + 
"						</listitem>" + 
"					</varlistentry>" + 
"					<varlistentry>" + 
"						<term>properties</term>" + 
"						<listitem>" + 
"							<para>" + 
"								The list of properties (name-value pairs) for the concrete Workspace data container." + 
"							</para>" + 
"						</listitem>" + 
"					</varlistentry>" + 
"				</variablelist>" + 
"				<variablelist>" + 
"					<title>Parameter Description</title>" + 
"					<varlistentry>" + 
"						<term>trigger_events_for_descendents_on_rename</term>" + 
"						<listitem>" + 
"							<para>" + 
"								Indicates the need to trigger events for descendants on rename or not. It allows to increase performance on rename operation but in same time Observation is not notified. The default value is true" + 
"							</para>" + 
"						</listitem>" + 
"					</varlistentry>" + 
"					<varlistentry>" + 
"						<term>lazy-node-iterator-page-size</term>" + 
"						<listitem>" + 
"							<para>" + 
"								The page size for lazy iterator. Indicates how many nodes can be retrieved from storage per request. The default value is 100" + 
"							</para>" + 
"						</listitem>" + 
"					</varlistentry>" + 
"					<varlistentry>" + 
"						<term>acl-bloomfilter-false-positive-probability</term>" + 
"						<listitem>" + 
"							<para>" + 
"								ACL Bloom-filter desired false positive probability. Range [0..1]. Default value 0.1d." + 
"							</para>" + 
"						</listitem>" + 
"					</varlistentry>" + 
"					<varlistentry>" + 
"						<term>acl-bloomfilter-elements-number</term>" + 
"						<listitem>" + 
"							<para>" + 
"								Expected number of ACL-elements in the Bloom-filter. Default value 1000000." + 
"							</para>" + 
"						</listitem>" + 
"					</varlistentry>" + 
"				</variablelist>" + 
"				<note>" + 
"					<para>" + 
"						Bloom filters are not supported by all the cache implementations so far only the implementation for infinispan supports it." + 
"					</para>" + 
"				</note>" + 
"				<variablelist>" + 
"					<varlistentry>" + 
"						<term>value-storage</term>" + 
"						<listitem>" + 
"							<para>" + 
"								The list of value storage plug-ins." + 
"							</para>" + 
"						</listitem>" + 
"					</varlistentry>" + 
"				</variablelist>" + 
"				<para role=\"RoleCreateBugPara\">" + 
"					<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+19029-572877+%5BLatest%5D&amp;cf_build_id=19029-572877+23+Dec+2013+16%3A49+en-US+%5BLatest%5D&amp;comment=Title%3A+Workspace+Data+Container+Configuration+Parameters%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"				</para>" + 
"			</section>" + 
"			<section id=\"Value_Storage_plug-in_configuration_for_data_container\" remap=\"TID_19030\">" + 
"				<title>Value Storage plug-in Configuration Parameters</title>" + 
"				<note>" + 
"					<para>" + 
"						The value-storage element is optional. If you do not include it, the values will be stored as BLOBs inside the database." + 
"					</para>" + 
"				</note>" + 
"				<variablelist>" + 
"					<varlistentry>" + 
"						<term>value-storage</term>" + 
"						<listitem>" + 
"							<para>" + 
"								Optional value Storage plug-in definition." + 
"							</para>" + 
"						</listitem>" + 
"					</varlistentry>" + 
"					<varlistentry>" + 
"						<term>class</term>" + 
"						<listitem>" + 
"							<para>" + 
"								A value storage plug-in class name (attribute)." + 
"							</para>" + 
"						</listitem>" + 
"					</varlistentry>" + 
"					<varlistentry>" + 
"						<term>properties</term>" + 
"						<listitem>" + 
"							<para>" + 
"								The list of properties (name-value pairs) for a concrete Value Storage plug-in." + 
"							</para>" + 
"						</listitem>" + 
"					</varlistentry>" + 
"					<varlistentry>" + 
"						<term>filters</term>" + 
"						<listitem>" + 
"							<para>" + 
"								The list of filters defining conditions when this plug-in is applicable." + 
"							</para>" + 
"						</listitem>" + 
"					</varlistentry>" + 
"				</variablelist>" + 
"				<para role=\"RoleCreateBugPara\">" + 
"					<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+19030-572878+%5BLatest%5D&amp;cf_build_id=19030-572878+23+Dec+2013+16%3A57+en-US+%5BLatest%5D&amp;comment=Title%3A+Value+Storage+plug-in+Configuration+Parameters%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"				</para>" + 
"			</section>" + 
"			<section id=\"Initializer_configuration_optional\" remap=\"TID_19031\">" + 
"				<title>Initializer Configuration Parameters</title>" + 
"				<variablelist>" + 
"					<varlistentry>" + 
"						<term>class</term>" + 
"						<listitem>" + 
"							<para>" + 
"								Initializer implementation class." + 
"							</para>" + 
"						</listitem>" + 
"					</varlistentry>" + 
"					<varlistentry>" + 
"						<term>properties</term>" + 
"						<listitem>" + 
"							<para>" + 
"								The list of properties (name-value pairs)." + 
"							</para>" + 
"						</listitem>" + 
"					</varlistentry>" + 
"					<varlistentry>" + 
"						<term>root-nodetype</term>" + 
"						<listitem>" + 
"							<para>" + 
"								The node type for root node initialization." + 
"							</para>" + 
"						</listitem>" + 
"					</varlistentry>" + 
"					<varlistentry>" + 
"						<term>root-permissions</term>" + 
"						<listitem>" + 
"							<para>" + 
"								Default permissions of the root node. It is defined as a set of semicolon-delimited permissions containing a group of space-delimited identities such as user, group, and the type of permission. For example any read; <filename>:/admin read;</filename> <filename>:/admin add_node;</filename><filename>:/admin set_property;</filename>:/admin remove means that users from group admin have all permissions and other users have only a read permission." + 
"							</para>" + 
"							<para>" + 
"								Configurable initializer adds a capability to override workspace initial startup procedure used for Clustering. It also replaces workspace element parameters <literal>auto-init-root-nodetype</literal> and <literal>auto-init-permissions</literal> with <literal>root-nodetype</literal> and <literal>root-permissions</literal>." + 
"							</para>" + 
"						</listitem>" + 
"					</varlistentry>" + 
"				</variablelist>" + 
"				<para role=\"RoleCreateBugPara\">" + 
"					<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+19031-572895+%5BLatest%5D&amp;cf_build_id=19031-572895+23+Dec+2013+18%3A08+en-US+%5BLatest%5D&amp;comment=Title%3A+Initializer+Configuration+Parameters%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"				</para>" + 
"			</section>" + 
"			<section id=\"Cache_configuration\" remap=\"TID_19032\">" + 
"				<title>Cache Configuration Parameters</title>" + 
"				<variablelist>" + 
"					<varlistentry>" + 
"						<term>enabled</term>" + 
"						<listitem>" + 
"							<para>" + 
"								Checks if workspace cache is enabled or not." + 
"							</para>" + 
"						</listitem>" + 
"					</varlistentry>" + 
"					<varlistentry>" + 
"						<term>class</term>" + 
"						<listitem>" + 
"							<para>" + 
"								Cache implementation class. The default value is <literal>org.exoplatform.services.jcr.impl.dataflow.persistent.LinkedWorkspaceStorageCacheImpl</literal>.This parameter is optional from JCR version 1.9." + 
"							</para>" + 
"							<para>" + 
"								Cache can be configured to use concrete implementation of WorkspaceStorageCache interface. JCR core has two implementation as:" + 
"							</para>" + 
"							<itemizedlist>" + 
"								<listitem>" + 
"									<para>" + 
"										LinkedWorkspaceStorageCacheImpl, which is the defailt implementation with configurable read behavior and statistic." + 
"									</para>" + 
"								</listitem>" + 
"								<listitem>" + 
"									<para>" + 
"										WorkspaceStorageCacheImpl was used pre 1.9 and can still be used." + 
"									</para>" + 
"								</listitem>" + 
"							</itemizedlist>" + 
"						</listitem>" + 
"					</varlistentry>" + 
"					<varlistentry>" + 
"						<term>properties</term>" + 
"						<listitem>" + 
"							<para>" + 
"								The list of properties (name-value pairs) for Workspace cache." + 
"							</para>" + 
"						</listitem>" + 
"					</varlistentry>" + 
"					<varlistentry>" + 
"						<term>max-size</term>" + 
"						<listitem>" + 
"							<para>" + 
"								Cache maximum size (maxSize prior to v.1.9)." + 
"							</para>" + 
"						</listitem>" + 
"					</varlistentry>" + 
"					<varlistentry>" + 
"						<term>live-time</term>" + 
"						<listitem>" + 
"							<para>" + 
"								Cached item live time (liveTime prior to v.1.9)." + 
"							</para>" + 
"							<para>" + 
"								From 1.9 <literal>LinkedWorkspaceStorageCacheImpl</literal> supports additional optional parameters." + 
"							</para>" + 
"						</listitem>" + 
"					</varlistentry>" + 
"					<varlistentry>" + 
"						<term>statistic-period</term>" + 
"						<listitem>" + 
"							<para>" + 
"								Period (time format) of cache statistic thread execution, the default value is 5 minutes." + 
"							</para>" + 
"						</listitem>" + 
"					</varlistentry>" + 
"					<varlistentry>" + 
"						<term>statistic-log</term>" + 
"						<listitem>" + 
"							<para>" + 
"								If true cache statistic will be printed to default logger (log.info), " + 
"								<remark>" + 
"									Docs: statement not clear \"by default or not\"." + 
"								</remark>" + 
"							</para>" + 
"						</listitem>" + 
"					</varlistentry>" + 
"					<varlistentry>" + 
"						<term>statistic-clean</term>" + 
"						<listitem>" + 
"							<para>" + 
"								<remark>" + 
"									Docs: The statement sounds incomplete \"If true cache statistic will be cleaned after was gathered\"" + 
"								</remark> , " + 
"								<remark>" + 
"									Docs: statement not clear \"by default or not\"." + 
"								</remark>" + 
"							</para>" + 
"						</listitem>" + 
"					</varlistentry>" + 
"					<varlistentry>" + 
"						<term>cleaner-period</term>" + 
"						<listitem>" + 
"							<para>" + 
"								Time period to remove the oldest items. the default time is 20 minutes." + 
"							</para>" + 
"						</listitem>" + 
"					</varlistentry>" + 
"					<varlistentry>" + 
"						<term>blocking-users-count</term>" + 
"						<listitem>" + 
"							<para>" + 
"								Number of concurrent users allowed to read cache storage. The defualt value is 0 which means unlimited." + 
"							</para>" + 
"						</listitem>" + 
"					</varlistentry>" + 
"				</variablelist>" + 
"				<para role=\"RoleCreateBugPara\">" + 
"					<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+19032-572882+%5BLatest%5D&amp;cf_build_id=19032-572882+23+Dec+2013+18%3A01+en-US+%5BLatest%5D&amp;comment=Title%3A+Cache+Configuration+Parameters%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"				</para>" + 
"			</section>" + 
"			<section id=\"Query_Handler_configuration\" remap=\"TID_19033\">" + 
"				<title>Query Handler Configuration Parameters</title>" + 
"				<variablelist>" + 
"					<varlistentry>" + 
"						<term>class</term>" + 
"						<listitem>" + 
"							<para>" + 
"								A Query Handler class name." + 
"							</para>" + 
"						</listitem>" + 
"					</varlistentry>" + 
"					<varlistentry>" + 
"						<term>properties</term>" + 
"						<listitem>" + 
"							<para>" + 
"								The list of properties (name-value pairs) for a Query Handler (indexDir)." + 
"							</para>" + 
"							<para>" + 
"								Properties and advanced features described in Search Configuration." + 
"							</para>" + 
"						</listitem>" + 
"					</varlistentry>" + 
"				</variablelist>" + 
"				<para role=\"RoleCreateBugPara\">" + 
"					<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+19033-572880+%5BLatest%5D&amp;cf_build_id=19033-572880+23+Dec+2013+17%3A01+en-US+%5BLatest%5D&amp;comment=Title%3A+Query+Handler+Configuration+Parameters%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"				</para>" + 
"			</section>" + 
"			<section id=\"Lock_Manager_configuration\" remap=\"TID_19034\">" + 
"				<title>Lock Manager Configuration Parameters</title>" + 
"				<variablelist>" + 
"					<varlistentry>" + 
"						<term>time-out</term>" + 
"						<listitem>" + 
"							<para>" + 
"								Time after which the unused global lock will be removed." + 
"							</para>" + 
"						</listitem>" + 
"					</varlistentry>" + 
"					<varlistentry>" + 
"						<term>persister</term>" + 
"						<listitem>" + 
"							<para>" + 
"								A class for storing lock information for future use. For example, remove lock after jcr restart." + 
"							</para>" + 
"						</listitem>" + 
"					</varlistentry>" + 
"					<varlistentry>" + 
"						<term>path</term>" + 
"						<listitem>" + 
"							<para>" + 
"								A lock folder. Each workspace has its own lock folder." + 
"							</para>" + 
"						</listitem>" + 
"					</varlistentry>" + 
"				</variablelist>" + 
"				<para role=\"RoleCreateBugPara\">" + 
"					<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+19034-572879+%5BLatest%5D&amp;cf_build_id=19034-572879+23+Dec+2013+17%3A00+en-US+%5BLatest%5D&amp;comment=Title%3A+Lock+Manager+Configuration+Parameters%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"				</para>" + 
"			</section>" + 
"		</section>" + 
"	</section>" + 
"	<section id=\"sect-Multi-language_Support\">" + 
"		<title>Multi-language Support</title>" + 
"		<para>" + 
"			Whenever a relational database is used to store multilingual text data in the eXo Java Content Repository the configuration must be adapted to support UTF-8 encoding. Dialect is automatically detected for certified database. You can still enforce it in case of failure." + 
"		</para>" + 
"		<para>" + 
"			The following sections describe enabling UTF-8 support with various databases." + 
"		</para>" + 
"		<note>" + 
"			<itemizedlist>" + 
"				<listitem>" + 
"					<remark>" + 
"						NEEDINFO - FILE PATHS - The path needs to be updated with the equivalent path for JBoss Portal Platform instead of gatein, please see below para. New info required?" + 
"					</remark>" + 
"					<para>" + 
"						The configuration file to be modified for these changes is <filename><replaceable>JPP_HOME</replaceable>/gatein/gatein.ear/portal.war/WEB-INF/conf/jcr/repository-configuration.xml</filename>." + 
"					</para>" + 
"				</listitem>" + 
"				<listitem>" + 
"					<para>" + 
"						The datasource <parameter>jdbcjcr</parameter> used in the following examples can be configured via the <literal>InitialContextInitializer</literal> component." + 
"					</para>" + 
"				</listitem>" + 
"			</itemizedlist>" + 
"		</note>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+19035-565985+%5BLatest%5D&amp;cf_build_id=19035-565985+05+Dec+2013+14%3A39+en-US+%5BLatest%5D&amp;comment=Title%3A+Multi-language+Support%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"		<section id=\"Oracle1\" remap=\"TID_19036\">" + 
"			<title>Oracle</title>" + 
"			<para>" + 
"				In order to run multilanguage JCR on an Oracle backend Unicode encoding for characters set should be applied to the database. Other Oracle globalization parameters do not have any effect. The property to modify is <literal>NLS_CHARACTERSET</literal>." + 
"			</para>" + 
"			<para>" + 
"				The <literal>NLS_CHARACTERSET = AL32UTF8</literal> entry has been successfully tested with many European and Asian languages." + 
"			</para>" + 
"			<para>" + 
"				Example of database configuration:" + 
"			</para>" + 
"			<programlisting>NLS_LANGUAGE             AMERICAN" + 
"NLS_TERRITORY            AMERICA" + 
"NLS_CURRENCY             $" + 
"NLS_ISO_CURRENCY         AMERICA" + 
"NLS_NUMERIC_CHARACTERS   .," + 
"NLS_CHARACTERSET         AL32UTF8" + 
"NLS_CALENDAR             GREGORIAN" + 
"NLS_DATE_FORMAT          DD-MON-RR" + 
"NLS_DATE_LANGUAGE        AMERICAN" + 
"NLS_SORT                 BINARY" + 
"NLS_TIME_FORMAT          HH.MI.SSXFF AM" + 
"NLS_TIMESTAMP_FORMAT     DD-MON-RR HH.MI.SSXFF AM" + 
"NLS_TIME_TZ_FORMAT       HH.MI.SSXFF AM TZR" + 
"NLS_TIMESTAMP_TZ_FORMAT  DD-MON-RR HH.MI.SSXFF AM TZR" + 
"NLS_DUAL_CURRENCY        $" + 
"NLS_COMP                 BINARY" + 
"NLS_LENGTH_SEMANTICS     BYTE" + 
"NLS_NCHAR_CONV_EXCP      FALSE" + 
"NLS_NCHAR_CHARACTERSET   AL16UTF16</programlisting>" + 
"			<!--      <warning>" + 
"            <para>" + 
"                JCR 1.12.x doesn't use NVARCHAR columns, so that the value of the parameter NLS_NCHAR_CHARACTERSET does not matter for JCR." + 
"            </para>" + 
"" + 
"        </warning>      -->" + 
"			<para>" + 
"				Create database with Unicode encoding and use Oracle dialect for the Workspace Container:" + 
"			</para>" + 
"			<programlisting language=\"XML\">&lt;workspace name=\"collaboration\"&gt;" + 
"          &lt;container class=\"org.exoplatform.services.jcr.impl.storage.jdbc.JDBCWorkspaceDataContainer\"&gt;" + 
"            &lt;properties&gt;" + 
"              &lt;property name=\"source-name\" value=\"jdbcjcr\" /&gt;" + 
"              &lt;property name=\"dialect\" value=\"oracle\" /&gt;" + 
"              &lt;property name=\"multi-db\" value=\"false\" /&gt;" + 
"              &lt;property name=\"max-buffer-size\" value=\"200k\" /&gt;" + 
"              &lt;property name=\"swap-directory\" value=\"target/temp/swap/ws\" /&gt;" + 
"            &lt;/properties&gt;" + 
"          ....." + 
"</programlisting>" + 
"			<warning>" + 
"				<title> Warning </title>" + 
"				<para>" + 
"					JCR does not use NVARCHAR columns, so the value of the parameter NLS_NCHAR_CHARACTERSET does not matter for JCR." + 
"				</para>" + 
"			</warning>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+19036-573126+%5BLatest%5D&amp;cf_build_id=19036-573126+24+Dec+2013+20%3A56+en-US+%5BLatest%5D&amp;comment=Title%3A+Oracle%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"		<section id=\"DB2\" remap=\"TID_19037\">" + 
"			<title>DB2</title>" + 
"			<para>" + 
"				DB2 Universal Database (DB2 UDB) supports <ulink url=\"http://publib.boulder.ibm.com/infocenter/db2luw/v9/index.jsp?topic=/com.ibm.db2.udb.admin.doc/doc/c0004821.htm\">UTF-8 and UTF-16/UCS-2</ulink>. When a Unicode database is created, <parameter>CHAR</parameter>, <parameter>VARCHAR</parameter> and <parameter>LONG VARCHAR</parameter> data are stored in UTF-8 form." + 
"			</para>" + 
"			<para>" + 
"				This enables JCR multi-lingual support." + 
"			</para>" + 
"			<para>" + 
"				Below is an example of creating a UTF-8 database using the <parameter>db2</parameter> dialect for a workspace container with DB2 version 9 and higher:" + 
"			</para>" + 
"			<programlisting>DB2 CREATE DATABASE dbname USING CODESET UTF-8 TERRITORY US" + 
"</programlisting>" + 
"			<programlisting language=\"XML\">&lt;workspace name=\"collaboration\"&gt;" + 
"          &lt;container class=\"org.exoplatform.services.jcr.impl.storage.jdbc.JDBCWorkspaceDataContainer\"&gt;" + 
"            &lt;properties&gt;" + 
"              &lt;property name=\"source-name\" value=\"jdbcjcr\" /&gt;" + 
"              &lt;property name=\"dialect\" value=\"db2\" /&gt;" + 
"              &lt;property name=\"multi-db\" value=\"false\" /&gt;" + 
"              &lt;property name=\"max-buffer-size\" value=\"200k\" /&gt;" + 
"              &lt;property name=\"swap-directory\" value=\"target/temp/swap/ws\" /&gt;" + 
"            &lt;/properties&gt;" + 
"          ....." + 
"</programlisting>" + 
"			<note>" + 
"				<para>" + 
"					For DB2 version 8.<replaceable>x</replaceable> support change the property \"dialect\" to db2v8." + 
"				</para>" + 
"			</note>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+19037-565985+%5BLatest%5D&amp;cf_build_id=19037-565985+05+Dec+2013+14%3A39+en-US+%5BLatest%5D&amp;comment=Title%3A+DB2%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"		<section id=\"MySQL1\" remap=\"TID_19038\">" + 
"			<title>MySQL</title>" + 
"			<para>" + 
"				Using JCR with a MySQL-back end requires a special dialect <ulink url=\"http://jira.exoplatform.org/browse/JCR-375\">MySQL-UTF8</ulink> to be used for internationalization support." + 
"			</para>" + 
"			<para>" + 
"				The database default charset should be <parameter>latin1</parameter> so as to use limited index space effectively (767 for <literal>InnoDB</literal>)." + 
"			</para>" + 
"			<para>" + 
"				If the database default charset is multibyte, a JCR database initialization error is encountered concerning index creation failure." + 
"			</para>" + 
"			<para>" + 
"				JCR can work on any single byte default charset of database, with UTF8 supported by MySQL server. However it has only been tested using the <parameter>latin1</parameter> charset." + 
"			</para>" + 
"			<para>" + 
"				An example entry:" + 
"			</para>" + 
"			<programlisting language=\"XML\" role=\"XML\">&lt;workspace name=\"collaboration\"&gt;" + 
"          &lt;container class=\"org.exoplatform.services.jcr.impl.storage.jdbc.JDBCWorkspaceDataContainer\"&gt;" + 
"            &lt;properties&gt;" + 
"              &lt;property name=\"source-name\" value=\"jdbcjcr\" /&gt;" + 
"              &lt;property name=\"dialect\" value=\"mysql-utf8\" /&gt;" + 
"              &lt;property name=\"multi-db\" value=\"false\" /&gt;" + 
"              &lt;property name=\"max-buffer-size\" value=\"200k\" /&gt;" + 
"              &lt;property name=\"swap-directory\" value=\"target/temp/swap/ws\" /&gt;" + 
"            &lt;/properties&gt;" + 
"          ....." + 
"</programlisting>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+19038-565985+%5BLatest%5D&amp;cf_build_id=19038-565985+05+Dec+2013+14%3A39+en-US+%5BLatest%5D&amp;comment=Title%3A+MySQL%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"		<section id=\"PostgreSQL\" remap=\"TID_19039\">" + 
"			<title>PostgreSQL</title>" + 
"			<para>" + 
"				Multilingual support can be enabled with a PostgreSQL-back end in <ulink url=\"http://www.postgresql.org/docs/8.3/interactive/charset.html\">different ways</ulink>:" + 
"			</para>" + 
"			<orderedlist>" + 
"				<listitem>" + 
"					<para>" + 
"						Using the locale features of the operating system to provide locale-specific collation order, number formatting, translated messages, and other aspects." + 
"					</para>" + 
"					<para>" + 
"						UTF-8 is widely used on Linux distributions by default, so it can be useful in such cases." + 
"					</para>" + 
"				</listitem>" + 
"				<listitem>" + 
"					<para>" + 
"						Providing a number of different character sets defined in the PostgreSQL server, including multiple-byte character sets, to support storing text any language, and providing character set translation between client and server." + 
"					</para>" + 
"					<para>" + 
"						Using UTF-8 database charset is recommended as it will allow any-to-any conversations and make this issue transparent for the JCR." + 
"					</para>" + 
"				</listitem>" + 
"			</orderedlist>" + 
"			<para>" + 
"				Example of a database with UTF-8 encoding using PgSQL dialect for the Workspace Container:" + 
"			</para>" + 
"			<programlisting language=\"XML\" role=\"XML\">&lt;workspace name=\"collaboration\"&gt;" + 
"          &lt;container class=\"org.exoplatform.services.jcr.impl.storage.jdbc.JDBCWorkspaceDataContainer\"&gt;" + 
"            &lt;properties&gt;" + 
"              &lt;property name=\"source-name\" value=\"jdbcjcr\" /&gt;" + 
"              &lt;property name=\"dialect\" value=\"pgsql\" /&gt;" + 
"              &lt;property name=\"multi-db\" value=\"false\" /&gt;" + 
"              &lt;property name=\"max-buffer-size\" value=\"200k\" /&gt;" + 
"              &lt;property name=\"swap-directory\" value=\"target/temp/swap/ws\" /&gt;" + 
"            &lt;/properties&gt;" + 
"          ....." + 
"</programlisting>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+19039-565985+%5BLatest%5D&amp;cf_build_id=19039-565985+05+Dec+2013+14%3A39+en-US+%5BLatest%5D&amp;comment=Title%3A+PostgreSQL%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"	</section>" + 
"	<section id=\"sect-Configuring_Search\">" + 
"		<title>Configuring Search</title>" + 
"		<para>" + 
"			The search function in JCR can be configured to perform in specific ways. This section will discuss configuring the search function to improve search performance and results." + 
"		</para>" + 
"		<para>" + 
"			Below is an example of the configuration file that governs search behaviors. See, <xref linkend=\"Global_Search_Index\"/> for how searching operates in JCR and information about customized searches." + 
"		</para>" + 
"		<para>" + 
"			The JCR index configuration file is located at <filename><replaceable>JPP_HOME</replaceable>/gatein/gatein.ear/portal.war/WEB-INF/conf/jcr/repository-configuration.xml</filename>." + 
"		</para>" + 
"		<para>" + 
"			A code example is included below with a list of the configuration parameters shown below that." + 
"		</para>" + 
"		<programlisting language=\"XML\" role=\"XML\">&lt;repository-service default-repository=\"db1\"&gt;" + 
"  &lt;repositories&gt;" + 
"    &lt;repository name=\"db1\" system-workspace=\"ws\" default-workspace=\"ws\"&gt;" + 
"       ...." + 
"      &lt;workspaces&gt;" + 
"        &lt;workspace name=\"ws\"&gt;" + 
"       ...." + 
"          &lt;query-handler class=\"org.exoplatform.services.jcr.impl.core.query.lucene.SearchIndex\"&gt;" + 
"            &lt;properties&gt;" + 
"              &lt;property name=\"index-dir\" value=\"${java.io.tmpdir}/temp/index/db1/ws\" /&gt;" + 
"              &lt;property name=\"synonymprovider-class\" value=\"org.exoplatform.services.jcr.impl.core.query.lucene.PropertiesSynonymProvider\" /&gt;" + 
"              &lt;property name=\"synonymprovider-config-path\" value=\"/synonyms.properties\" /&gt;" + 
"              &lt;property name=\"indexing-config-path\" value=\"/indexing-configuration.xml\" /&gt;" + 
"              &lt;property name=\"query-class\" value=\"org.exoplatform.services.jcr.impl.core.query.QueryImpl\" /&gt;" + 
"            &lt;/properties&gt;" + 
"          &lt;/query-handler&gt;" + 
"        ... " + 
"        &lt;/workspace&gt;" + 
"     &lt;/workspaces&gt;" + 
"    &lt;/repository&gt;        " + 
"  &lt;/repositories&gt;" + 
"&lt;/repository-service&gt;" + 
"</programlisting>" + 
"		<para>" + 
"			The table below outlines <emphasis role=\"bold\">some</emphasis> of the Configuration Parameters available, their default setting, which version of eXo JCR they were implemented in and other useful information (further parameters are explained in <xref linkend=\"Indexer_lock_manager_and_data_container_configuration\"/>" + 
"		</para>" + 
"		<table>" + 
"			<title>Configuration parameters</title>" + 
"			<tgroup cols=\"4\">" + 
"				<colspec colname=\"1\" colwidth=\"90pt\"/>" + 
"				<colspec colname=\"2\" colwidth=\"90pt\"/>" + 
"				<colspec colname=\"3\" colwidth=\"150pt\"/>" + 
"				<colspec colname=\"4\" colwidth=\"50pt\"/>" + 
"				<thead>" + 
"					<row>" + 
"						<entry>" + 
"							<para>" + 
"								Parameter" + 
"							</para>" + 
"						</entry>" + 
"						<entry>" + 
"							<para>" + 
"								Default" + 
"							</para>" + 
"						</entry>" + 
"						<entry>" + 
"							<para>" + 
"								Description" + 
"							</para>" + 
"						</entry>" + 
"						<entry>" + 
"							Implemented in Version" + 
"						</entry>" + 
"					</row>" + 
"				</thead>" + 
"				<tbody>" + 
"					<row>" + 
"						<entry>" + 
"							<para>" + 
"								index-dir" + 
"							</para>" + 
"						</entry>" + 
"						<entry>" + 
"							<para>" + 
"								none" + 
"							</para>" + 
"						</entry>" + 
"						<entry>" + 
"							<para>" + 
"								The location of the index directory. This parameter is mandatory. It is called \"<literal>indexDir</literal>\" in versions prior to eXo JCR version 1.9." + 
"							</para>" + 
"						</entry>" + 
"						<entry>" + 
"							1.0" + 
"						</entry>" + 
"					</row>" + 
"					<row>" + 
"						<entry>" + 
"							<para>" + 
"								use-compoundfile" + 
"							</para>" + 
"						</entry>" + 
"						<entry>" + 
"							<para>" + 
"								true" + 
"							</para>" + 
"						</entry>" + 
"						<entry>" + 
"							<para>" + 
"								Advises lucene to use compound files for the index files." + 
"							</para>" + 
"						</entry>" + 
"						<entry>" + 
"							1.9" + 
"						</entry>" + 
"					</row>" + 
"					<row>" + 
"						<entry>" + 
"							<para>" + 
"								min-merge-docs" + 
"							</para>" + 
"						</entry>" + 
"						<entry>" + 
"							<para>" + 
"								100" + 
"							</para>" + 
"						</entry>" + 
"						<entry>" + 
"							<para>" + 
"								The minimum number of nodes in an index until segments are merged." + 
"							</para>" + 
"						</entry>" + 
"						<entry>" + 
"							1.9" + 
"						</entry>" + 
"					</row>" + 
"					<row>" + 
"						<entry>" + 
"							<para>" + 
"								volatile-idle-time" + 
"							</para>" + 
"						</entry>" + 
"						<entry>" + 
"							3" + 
"						</entry>" + 
"						<entry>" + 
"							<para>" + 
"								Idle time in seconds until the volatile index part is moved to a persistent index even though <literal>minMergeDocs</literal> is not reached." + 
"							</para>" + 
"						</entry>" + 
"						<entry>" + 
"							1.9" + 
"						</entry>" + 
"					</row>" + 
"					<row>" + 
"						<entry>" + 
"							<para>" + 
"								max-merge-docs" + 
"							</para>" + 
"						</entry>" + 
"						<entry>" + 
"							<para>" + 
"								Integer.MAX_VALUE" + 
"							</para>" + 
"						</entry>" + 
"						<entry>" + 
"							<para>" + 
"								The maximum number of nodes in segments that will be merged. The default value changed to <literal>Integer.MAX_VALUE</literal> in eXo JCR version 1.9." + 
"							</para>" + 
"						</entry>" + 
"						<entry>" + 
"							1.9" + 
"						</entry>" + 
"					</row>" + 
"					<row>" + 
"						<entry>" + 
"							<para>" + 
"								merge-factor" + 
"							</para>" + 
"						</entry>" + 
"						<entry>" + 
"							<para>" + 
"								10" + 
"							</para>" + 
"						</entry>" + 
"						<entry>" + 
"							<para>" + 
"								Determines how often segment indices are merged." + 
"							</para>" + 
"						</entry>" + 
"						<entry>" + 
"							1.9" + 
"						</entry>" + 
"					</row>" + 
"					<row>" + 
"						<entry>" + 
"							<para>" + 
"								max-field-length" + 
"							</para>" + 
"						</entry>" + 
"						<entry>" + 
"							<para>" + 
"								10000" + 
"							</para>" + 
"						</entry>" + 
"						<entry>" + 
"							<para>" + 
"								The number of words that are full-text indexed at most per property." + 
"							</para>" + 
"						</entry>" + 
"						<entry>" + 
"							1.9" + 
"						</entry>" + 
"					</row>" + 
"					<row>" + 
"						<entry>" + 
"							<para>" + 
"								cache-size" + 
"							</para>" + 
"						</entry>" + 
"						<entry>" + 
"							<para>" + 
"								1000" + 
"							</para>" + 
"						</entry>" + 
"						<entry>" + 
"							<para>" + 
"								Size of the document number cache. This cache maps UUID to lucene document numbers" + 
"							</para>" + 
"						</entry>" + 
"						<entry>" + 
"							1.9" + 
"						</entry>" + 
"					</row>" + 
"					<row>" + 
"						<entry>" + 
"							<para>" + 
"								force-consistencycheck" + 
"							</para>" + 
"						</entry>" + 
"						<entry>" + 
"							<para>" + 
"								false" + 
"							</para>" + 
"						</entry>" + 
"						<entry>" + 
"							<para>" + 
"								Runs a consistency check on every start up. If false, a consistency check is only performed when the search index detects a prior forced shutdown." + 
"							</para>" + 
"						</entry>" + 
"						<entry>" + 
"							1.9" + 
"						</entry>" + 
"					</row>" + 
"					<row>" + 
"						<entry>" + 
"							<para>" + 
"								auto-repair" + 
"							</para>" + 
"						</entry>" + 
"						<entry>" + 
"							<para>" + 
"								true" + 
"							</para>" + 
"						</entry>" + 
"						<entry>" + 
"							<para>" + 
"								Errors detected by a consistency check are automatically repaired. If false, errors are only written to the log." + 
"							</para>" + 
"						</entry>" + 
"						<entry>" + 
"							1.9" + 
"						</entry>" + 
"					</row>" + 
"					<row>" + 
"						<entry>" + 
"							query-class" + 
"						</entry>" + 
"						<entry>" + 
"							QueryImpl" + 
"						</entry>" + 
"						<entry>" + 
"							<para>" + 
"								Classname that implements the javax.jcr.query.Query interface." + 
"							</para>" + 
"							<para>" + 
"								This class must also extend from the class: <literal>org.exoplatform.services.jcr.impl.core. query.AbstractQueryImpl</literal>." + 
"							</para>" + 
"						</entry>" + 
"						<entry>" + 
"							1.9" + 
"						</entry>" + 
"					</row>" + 
"					<row>" + 
"						<entry>" + 
"							<para>" + 
"								document-order" + 
"							</para>" + 
"						</entry>" + 
"						<entry>" + 
"							<para>" + 
"								true" + 
"							</para>" + 
"						</entry>" + 
"						<entry>" + 
"							<para>" + 
"								If true and the query does not contain an 'order by' clause, result nodes will be in document order. For better performance set to 'false' when queries return many nodes." + 
"							</para>" + 
"						</entry>" + 
"						<entry>" + 
"							1.9" + 
"						</entry>" + 
"					</row>" + 
"					<row>" + 
"						<entry>" + 
"							<para>" + 
"								result-fetch-size" + 
"							</para>" + 
"						</entry>" + 
"						<entry>" + 
"							<para>" + 
"								Integer.MAX_VALUE" + 
"							</para>" + 
"						</entry>" + 
"						<entry>" + 
"							<para>" + 
"								The number of results when a query is executed. Default value: <literal>Integer.MAX_VALUE</literal>." + 
"							</para>" + 
"						</entry>" + 
"						<entry>" + 
"							1.9" + 
"						</entry>" + 
"					</row>" + 
"					<row>" + 
"						<entry>" + 
"							<para>" + 
"								excerptprovider-class" + 
"							</para>" + 
"						</entry>" + 
"						<entry>" + 
"							<para>" + 
"								DefaultXMLExcerpt" + 
"							</para>" + 
"						</entry>" + 
"						<entry>" + 
"							<para>" + 
"								The name of the class that implements <literal>org.exoplatform.services.jcr.impl.core. query.lucene.ExcerptProvider</literal>." + 
"							</para>" + 
"							<para>" + 
"								This should be used for the <literal>rep:excerpt()</literal> function in a query." + 
"							</para>" + 
"						</entry>" + 
"						<entry>" + 
"							1.9" + 
"						</entry>" + 
"					</row>" + 
"					<row>" + 
"						<entry>" + 
"							<para>" + 
"								support-highlighting" + 
"							</para>" + 
"						</entry>" + 
"						<entry>" + 
"							<para>" + 
"								false" + 
"							</para>" + 
"						</entry>" + 
"						<entry>" + 
"							<para>" + 
"								If set to true additional information is stored in the index to support highlighting using the <literal>rep:excerpt()</literal> function." + 
"							</para>" + 
"						</entry>" + 
"						<entry>" + 
"							1.9" + 
"						</entry>" + 
"					</row>" + 
"					<row>" + 
"						<entry>" + 
"							<para>" + 
"								synonymprovider-class" + 
"							</para>" + 
"						</entry>" + 
"						<entry>" + 
"							<para>" + 
"								none" + 
"							</para>" + 
"						</entry>" + 
"						<entry>" + 
"							<para>" + 
"								The name of a class that implements <literal>org.exoplatform.services.jcr.impl.core. query.lucene.SynonymProvider</literal>." + 
"							</para>" + 
"							<para>" + 
"								The default value is null." + 
"							</para>" + 
"						</entry>" + 
"						<entry>" + 
"							1.9" + 
"						</entry>" + 
"					</row>" + 
"					<row>" + 
"						<entry>" + 
"							<para>" + 
"								synonymprovider-config-path" + 
"							</para>" + 
"						</entry>" + 
"						<entry>" + 
"							<para>" + 
"								none" + 
"							</para>" + 
"						</entry>" + 
"						<entry>" + 
"							<para>" + 
"								The path to the synonym provider configuration file. This path is interpreted relative to the path parameter. If there is a path element inside the <literal>SearchIndex</literal> element, then this path is interpreted relative to the root path of the path. Whether this parameter is mandatory depends on the synonym provider implementation. The default value is null." + 
"							</para>" + 
"						</entry>" + 
"						<entry>" + 
"							1.9" + 
"						</entry>" + 
"					</row>" + 
"					<row>" + 
"						<entry>" + 
"							<para>" + 
"								indexing-configuration-path" + 
"							</para>" + 
"						</entry>" + 
"						<entry>" + 
"							<para>" + 
"								none" + 
"							</para>" + 
"						</entry>" + 
"						<entry>" + 
"							<para>" + 
"								The path to the indexing configuration file." + 
"							</para>" + 
"						</entry>" + 
"						<entry>" + 
"							1.9" + 
"						</entry>" + 
"					</row>" + 
"					<row>" + 
"						<entry>" + 
"							<para>" + 
"								indexing-configuration-class" + 
"							</para>" + 
"						</entry>" + 
"						<entry>" + 
"							<para>" + 
"								IndexingConfigurationImpl" + 
"							</para>" + 
"						</entry>" + 
"						<entry>" + 
"							<para>" + 
"								The name of the class that implements <literal>org.exoplatform.services.jcr.impl.core. query.lucene.IndexingConfiguration</literal>." + 
"							</para>" + 
"						</entry>" + 
"						<entry>" + 
"							1.9" + 
"						</entry>" + 
"					</row>" + 
"					<row>" + 
"						<entry>" + 
"							<para>" + 
"								force-consistencycheck" + 
"							</para>" + 
"						</entry>" + 
"						<entry>" + 
"							<para>" + 
"								false" + 
"							</para>" + 
"						</entry>" + 
"						<entry>" + 
"							<para>" + 
"								If set to true a consistency check is performed depending on the parameter <literal>forceConsistencyCheck</literal>. If set to false no consistency check is performed on start up, even if a redo log had been applied." + 
"							</para>" + 
"						</entry>" + 
"						<entry>" + 
"							1.9" + 
"						</entry>" + 
"					</row>" + 
"					<row>" + 
"						<entry>" + 
"							<para>" + 
"								spellchecker-class" + 
"							</para>" + 
"						</entry>" + 
"						<entry>" + 
"							<para>" + 
"								none" + 
"							</para>" + 
"						</entry>" + 
"						<entry>" + 
"							<para>" + 
"								The name of a class that implements <literal>org.exoplatform.services.jcr.impl.core. query.lucene.SpellChecker</literal>." + 
"							</para>" + 
"						</entry>" + 
"						<entry>" + 
"							1.9" + 
"						</entry>" + 
"					</row>" + 
"					<row>" + 
"						<entry>" + 
"							<para>" + 
"								errorlog-size" + 
"							</para>" + 
"						</entry>" + 
"						<entry>" + 
"							<para>" + 
"								50(KB)" + 
"							</para>" + 
"						</entry>" + 
"						<entry>" + 
"							<para>" + 
"								The default size of error log file in KB." + 
"							</para>" + 
"						</entry>" + 
"						<entry>" + 
"							1.9" + 
"						</entry>" + 
"					</row>" + 
"					<row>" + 
"						<entry>" + 
"							<para>" + 
"								upgrade-index" + 
"							</para>" + 
"						</entry>" + 
"						<entry>" + 
"							<para>" + 
"								false" + 
"							</para>" + 
"						</entry>" + 
"						<entry>" + 
"							<para>" + 
"								Allows JCR to convert an existing index into the new format. It is also possible to set this property via system property." + 
"							</para>" + 
"							<para>" + 
"								Indexes prior to eXo JCR 1.12 will not run with eXo JCR 1.12. You must run an automatic migration." + 
"							</para>" + 
"							<para>" + 
"								Start eXo JCR with:" + 
"							</para>" + 
"							<programlisting><command> -Dupgrade-index=true</command></programlisting>" + 
"							<para>" + 
"								The old index format is then converted in the new index format. After the conversion the new format is used." + 
"							</para>" + 
"							<para>" + 
"								On subsequent starts this option is no longer needed. The old index is replaced and a back conversion is not possible" + 
"							</para>" + 
"							<para>" + 
"								It is recommended that a backup of the index be made before conversion. (Only for migrations from JCR 1.9 and later.)" + 
"							</para>" + 
"						</entry>" + 
"						<entry>" + 
"							1.12" + 
"						</entry>" + 
"					</row>" + 
"					<row>" + 
"						<entry>" + 
"							<para>" + 
"								analyzer" + 
"							</para>" + 
"						</entry>" + 
"						<entry>" + 
"							<para>" + 
"								org.apache.lucene.analysis. standard.StandardAnalyzer" + 
"							</para>" + 
"						</entry>" + 
"						<entry>" + 
"							<para>" + 
"								Class name of a lucene analyzer to use for full-text indexing of text." + 
"							</para>" + 
"						</entry>" + 
"						<entry>" + 
"							1.12" + 
"						</entry>" + 
"					</row>" + 
"				</tbody>" + 
"			</tgroup>" + 
"		</table>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+19040-565985+%5BLatest%5D&amp;cf_build_id=19040-565985+05+Dec+2013+14%3A39+en-US+%5BLatest%5D&amp;comment=Title%3A+Configuring+Search%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"		<section id=\"Global_Search_Index\" remap=\"TID_19041\">" + 
"			<title>Global Search Index</title>" + 
"			<para>" + 
"				By default eXo JCR uses the Lucene standard Analyzer to index contents. This analyzer uses some standard filters in the method that analyzes the content" + 
"			</para>" + 
"			<example>" + 
"				<title>Standard Analyzed Filters</title>" + 
"				<programlisting language=\"Java\" role=\"Java\">public TokenStream tokenStream(String fieldName, Reader reader) {" + 
"    StandardTokenizer tokenStream = new StandardTokenizer(reader, replaceInvalidAcronym);" + 
"    tokenStream.setMaxTokenLength(maxTokenLength);" + 
"    // Comment #1" + 
"    TokenStream result = new StandardFilter(tokenStream);" + 
"    // Comment #2" + 
"    result = new LowerCaseFilter(result);" + 
"    // Comment #3" + 
"    result = new StopFilter(result, stopSet);" + 
"    return result;" + 
"  }" + 
"</programlisting>" + 
"				<para>" + 
"					Comment #1: The first filter (StandardFilter) removes possessive apostrophes (<emphasis role=\"bold\">'s</emphasis>) from the end of words and removes periods (<emphasis role=\"bold\">.</emphasis>) from acronyms." + 
"				</para>" + 
"				<para>" + 
"					Comment #2: The second filter (LowerCaseFilter) normalizes token text to lower case." + 
"				</para>" + 
"				<para>" + 
"					Comment #3: The last filter (StopFilter) removes stop words from a token stream. The stop set is defined in the analyzer." + 
"				</para>" + 
"			</example>" + 
"			<para>" + 
"				The global search index is configured in the <filename><replaceable>JPP_HOME</replaceable>/gatein/gatein.ear/portal.war/WEB-INF/conf/jcr/repository-configuration.xml</filename> configuration file within the \"query-handler\" tag." + 
"			</para>" + 
"			<programlisting language=\"XML\" role=\"XML\">&lt;query-handler class=\"org.exoplatform.services.jcr.impl.core.query.lucene.SearchIndex\"&gt;" + 
"</programlisting>" + 
"			<para>" + 
"				The same analyzer should always be used for indexing and for querying in lucene otherwise results may be unpredictable. eXo JCR does this automatically. The StandardAnalyzer (configured by default) can, however, be replaced with another." + 
"			</para>" + 
"			<para>" + 
"				A customized QueryHandler can also be easily created." + 
"			</para>" + 
"			<formalpara id=\"form-Reference_Guide-Global_Search_Index-Customized_Search_Indexes_and_Analyzers\">" + 
"				<title>Customized Search Indexes and Analyzers</title>" + 
"				<para>" + 
"					By default Exo JCR uses the Lucene standard Analyzer to index contents. This analyzer uses some standard filters in the method that analyzes the content:" + 
"				</para>" + 
"			</formalpara>" + 
"			<programlisting language=\"Java\" role=\"Java\">public TokenStream tokenStream(String fieldName, Reader reader) {" + 
"    StandardTokenizer tokenStream = new StandardTokenizer(reader, replaceInvalidAcronym);" + 
"    tokenStream.setMaxTokenLength(maxTokenLength);" + 
"    TokenStream result = new StandardFilter(tokenStream);" + 
"    result = new LowerCaseFilter(result);" + 
"    result = new StopFilter(result, stopSet);" + 
"    return result;" + 
"  }</programlisting>" + 
"			<itemizedlist>" + 
"				<listitem>" + 
"					<para>" + 
"						The first one (StandardFilter) removes 's (as 's in \"Peter's\") from the end of words and removes dots from acronyms." + 
"					</para>" + 
"				</listitem>" + 
"				<listitem>" + 
"					<para>" + 
"						The second one (LowerCaseFilter) normalizes token text to lower case." + 
"					</para>" + 
"				</listitem>" + 
"				<listitem>" + 
"					<para>" + 
"						The last one (StopFilter) removes stop words from a token stream. The stop set is defined in the analyzer." + 
"					</para>" + 
"				</listitem>" + 
"			</itemizedlist>" + 
"			<para>" + 
"				Additional filters can be used in specific cases. The <phrase>ISOLatin1AccentFilter</phrase> filter, for example, which replaces accented characters in the ISO Latin 1 character set (ISO-8859-1) by their unaccented equivalents." + 
"			</para>" + 
"			<para>" + 
"				The <phrase>ISOLatin1AccentFilter</phrase> is not present in the current lucene version used by eXo." + 
"			</para>" + 
"			<para>" + 
"				In order to use a different filter, a new analyzer must be created, as well as new search index to use the analyzer. These are packaged into a jar file, which is then deployed with the application." + 
"			</para>" + 
"			<procedure id=\"proc-Reference_Guide-Global_Search_Index-Create_a_new_filter_analyzer_and_search_index\">" + 
"				<title>Create a new filter, analyzer and search index</title>" + 
"				<step>" + 
"					<para>" + 
"						Create a new filter with the method:" + 
"					</para>" + 
"					<programlisting language=\"Java\" role=\"JAVA\">public final Token next(final Token reusableToken) throws java.io.IOException" + 
"</programlisting>" + 
"					<para>" + 
"						This defines how characters are read and used by the filter." + 
"					</para>" + 
"				</step>" + 
"				<step>" + 
"					<para>" + 
"						Create the analyzer." + 
"					</para>" + 
"					<para>" + 
"						The analyzer must extend <literal>org.apache.lucene.analysis.standard.StandardAnalyzer</literal> and overload the method." + 
"					</para>" + 
"					<para>" + 
"						Use the following to use new filters." + 
"					</para>" + 
"					<programlisting language=\"Java\" role=\"JAVA\">public TokenStream tokenStream(String fieldName, Reader reader)" + 
"</programlisting>" + 
"				</step>" + 
"				<step>" + 
"					<para>" + 
"						To create the new search index, extend <literal>org.exoplatform.services.jcr.impl.core.query.lucene.SearchIndex</literal> and write the constructor to set the correct analyzer." + 
"					</para>" + 
"					<para>" + 
"						Use the method below to return your analyzer:" + 
"					</para>" + 
"					<programlisting language=\"Java\" role=\"JAVA\">public Analyzer getAnalyzer() {" + 
"return MyAnalyzer;" + 
"}" + 
"</programlisting>" + 
"				</step>" + 
"			</procedure>" + 
"			<note>" + 
"				<para>" + 
"					In eXo JCR version 1.12 (and later) the analyzer can be directly set in the configuration. For users with this version the creation of a new SearchIndex for new analyzers is redundant." + 
"				</para>" + 
"			</note>" + 
"			<para>" + 
"				To configure an application to use a new <literal>SearchIndex</literal>, replace the following code:" + 
"			</para>" + 
"			<programlisting language=\"XML\" role=\"XML\">&lt;query-handler class=\"org.exoplatform.services.jcr.impl.core.query.lucene.SearchIndex\"&gt;" + 
"" + 
"</programlisting>" + 
"			<para>" + 
"				in <filename><replaceable>JPP_HOME</replaceable>/gatein/gatein.ear/portal.war/WEB-INF/conf/jcr/repository-configuration.xml</filename> with the new class:" + 
"			</para>" + 
"			<programlisting language=\"XML\" role=\"XML\">&lt;query-handler class=\"mypackage.indexation.MySearchIndex&gt;" + 
"" + 
"</programlisting>" + 
"			<para>" + 
"				To configure an application to use a new analyzer, add the <parameter>analyzer</parameter> parameter to each query-handler configuration in <filename><replaceable>JPP_HOME</replaceable>/gatein/gatein.ear/portal.war/WEB-INF/conf/jcr/repository-configuration.xml</filename>:" + 
"			</para>" + 
"			<programlisting language=\"XML\" role=\"XML\">&lt;query-handler class=\"org.exoplatform.services.jcr.impl.core.query.lucene.SearchIndex\"&gt;" + 
"   &lt;properties&gt;" + 
"      ..." + 
"      &lt;property name=\"analyzer\" value=\"org.exoplatform.services.jcr.impl.core.MyAnalyzer\"/&gt;" + 
"      ..." + 
"   &lt;/properties&gt;" + 
"&lt;/query-handler&gt;" + 
"</programlisting>" + 
"			<para>" + 
"				The new <literal>SearchIndex</literal> will start to index contents with the specified filters when the JCR is next started." + 
"			</para>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+19041-565985+%5BLatest%5D&amp;cf_build_id=19041-565985+05+Dec+2013+14%3A39+en-US+%5BLatest%5D&amp;comment=Title%3A+Global+Search+Index%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"		<section id=\"IndexingConfiguration\" remap=\"TID_19042\">" + 
"			<title>IndexingConfiguration</title>" + 
"			<para>" + 
"				From version 1.9, the default search index implementation in JCR allows user control over which properties of a node are indexed. Different analyzers can also be set for different nodes." + 
"			</para>" + 
"			<para>" + 
"				The configuration parameter is called <literal>indexingConfiguration</literal> and is not set by default. This means all properties of a node are indexed." + 
"			</para>" + 
"			<para>" + 
"				To configure the indexing behavior add a parameter to the query-handler element in your configuration file." + 
"			</para>" + 
"			<programlisting language=\"XML\" role=\"XML\">&lt;param name=\"indexing-configuration-path\" value=\"/indexing_configuration.xml\"/&gt;" + 
"" + 
"</programlisting>" + 
"			<formalpara id=\"form-Reference_Guide-IndexingConfiguration-Node_Scope_Limit\">" + 
"				<title>Node Scope Limit</title>" + 
"				<para>" + 
"					The node scope can be limited so that only certain properties of a node type are indexed. This can optimize the index size." + 
"				</para>" + 
"			</formalpara>" + 
"			<para>" + 
"				With the configuration below only properties named <parameter>Text</parameter> are indexed for <parameter>nt:unstructured</parameter> node types. This configuration also applies to all nodes whose type extends from <parameter>nt:unstructured</parameter>." + 
"			</para>" + 
"			<programlisting language=\"XML\" role=\"XML\">&lt;?xml version=\"1.0\"?&gt;" + 
"&lt;!DOCTYPE configuration SYSTEM \"http://www.exoplatform.org/dtd/indexing-configuration-1.0.dtd\"&gt;" + 
"&lt;configuration xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\"&gt;" + 
"  &lt;index-rule nodeType=\"nt:unstructured\"&gt;" + 
"    &lt;property&gt;Text&lt;/property&gt;" + 
"  &lt;/index-rule&gt;" + 
"&lt;/configuration&gt;" + 
"</programlisting>" + 
"			<note>" + 
"				<title>Namespace Prefixes</title>" + 
"				<para>" + 
"					The <phrase>namespace prefixes</phrase> must be declared throughout the XML file in the configuration element that is being used." + 
"				</para>" + 
"			</note>" + 
"			<formalpara id=\"form-Reference_Guide-IndexingConfiguration-Indexing_Boost_Value\">" + 
"				<title>Indexing Boost Value</title>" + 
"				<para>" + 
"					It is also possible to configure a <phrase>boost value</phrase> for the nodes that match the index rule. The default boost value is 1.0. Higher boost values (a reasonable range is 1.0 - 5.0) will yield a higher score value and appear as more relevant." + 
"				</para>" + 
"			</formalpara>" + 
"			<programlisting language=\"XML\" role=\"XML\">&lt;?xml version=\"1.0\"?&gt;" + 
"&lt;!DOCTYPE configuration SYSTEM \"http://www.exoplatform.org/dtd/indexing-configuration-1.0.dtd\"&gt;" + 
"&lt;configuration xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\"&gt;" + 
"  &lt;index-rule nodeType=\"nt:unstructured\"" + 
"              boost=\"2.0\"&gt;" + 
"    &lt;property&gt;Text&lt;/property&gt;" + 
"  &lt;/index-rule&gt;" + 
"&lt;/configuration&gt;" + 
"</programlisting>" + 
"			<para>" + 
"				If you do not wish to boost the complete node, but only certain properties, you can also provide a boost value for the listed properties:" + 
"			</para>" + 
"			<programlisting language=\"XML\" role=\"XML\">&lt;?xml version=\"1.0\"?&gt;" + 
"&lt;!DOCTYPE configuration SYSTEM \"http://www.exoplatform.org/dtd/indexing-configuration-1.0.dtd\"&gt;" + 
"&lt;configuration xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\"&gt;" + 
"  &lt;index-rule nodeType=\"nt:unstructured\"&gt;" + 
"    &lt;property boost=\"3.0\"&gt;Title&lt;/property&gt;" + 
"    &lt;property boost=\"1.5\"&gt;Text&lt;/property&gt;" + 
"  &lt;/index-rule&gt;" + 
"&lt;/configuration&gt;" + 
"</programlisting>" + 
"			<formalpara id=\"form-Reference_Guide-IndexingConfiguration-Conditional_Index_Rules\">" + 
"				<title>Conditional Index Rules</title>" + 
"				<para>" + 
"					You may also add a <phrase>condition</phrase> to the index rule and have multiple rules with the same nodeType. The first index rule that matches will apply and all remaining ones are ignored:" + 
"				</para>" + 
"			</formalpara>" + 
"			<programlisting language=\"XML\" role=\"XML\">&lt;?xml version=\"1.0\"?&gt;" + 
"&lt;!DOCTYPE configuration SYSTEM \"http://www.exoplatform.org/dtd/indexing-configuration-1.0.dtd\"&gt;" + 
"&lt;configuration xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\"&gt;" + 
"  &lt;index-rule nodeType=\"nt:unstructured\"" + 
"              boost=\"2.0\"" + 
"              condition=\"@priority = 'high'\"&gt;" + 
"    &lt;property&gt;Text&lt;/property&gt;" + 
"  &lt;/index-rule&gt;" + 
"  &lt;index-rule nodeType=\"nt:unstructured\"&gt;" + 
"    &lt;property&gt;Text&lt;/property&gt;" + 
"  &lt;/index-rule&gt;" + 
"&lt;/configuration&gt;" + 
"</programlisting>" + 
"			<para>" + 
"				In the above example the first rule only applies if the <parameter>nt:unstructured</parameter> node has a priority property with a value <parameter>high</parameter>. The condition syntax only supports the equals operator and a string literal." + 
"			</para>" + 
"			<para>" + 
"				Properties may also be referenced on the condition that are not on the current node:" + 
"			</para>" + 
"			<programlisting language=\"XML\" role=\"XML\">&lt;?xml version=\"1.0\"?&gt;" + 
"&lt;!DOCTYPE configuration SYSTEM \"http://www.exoplatform.org/dtd/indexing-configuration-1.0.dtd\"&gt;" + 
"&lt;configuration xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\"&gt;" + 
"  &lt;index-rule nodeType=\"nt:unstructured\"" + 
"              boost=\"2.0\"" + 
"              condition=\"ancestor::*/@priority = 'high'\"&gt;" + 
"    &lt;property&gt;Text&lt;/property&gt;" + 
"  &lt;/index-rule&gt;" + 
"  &lt;index-rule nodeType=\"nt:unstructured\"" + 
"              boost=\"0.5\"" + 
"              condition=\"parent::foo/@priority = 'low'\"&gt;" + 
"    &lt;property&gt;Text&lt;/property&gt;" + 
"  &lt;/index-rule&gt;" + 
"  &lt;index-rule nodeType=\"nt:unstructured\"" + 
"              boost=\"1.5\"" + 
"              condition=\"bar/@priority = 'medium'\"&gt;" + 
"    &lt;property&gt;Text&lt;/property&gt;" + 
"  &lt;/index-rule&gt;" + 
"  &lt;index-rule nodeType=\"nt:unstructured\"&gt;" + 
"    &lt;property&gt;Text&lt;/property&gt;" + 
"  &lt;/index-rule&gt;" + 
"&lt;/configuration&gt;" + 
"</programlisting>" + 
"			<para>" + 
"				The indexing configuration allows the type of a node in the condition to be specified. Please note however that the type match must be exact. It does not consider sub types of the specified node type." + 
"			</para>" + 
"			<programlisting language=\"XML\" role=\"XML\">&lt;?xml version=\"1.0\"?&gt;" + 
"&lt;!DOCTYPE configuration SYSTEM \"http://www.exoplatform.org/dtd/indexing-configuration-1.0.dtd\"&gt;" + 
"&lt;configuration xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\"&gt;" + 
"  &lt;index-rule nodeType=\"nt:unstructured\"" + 
"              boost=\"2.0\"" + 
"              condition=\"element(*, nt:unstructured)/@priority = 'high'\"&gt;" + 
"    &lt;property&gt;Text&lt;/property&gt;" + 
"  &lt;/index-rule&gt;" + 
"&lt;/configuration&gt;" + 
"</programlisting>" + 
"			<formalpara id=\"form-Reference_Guide-IndexingConfiguration-Exclusion_from_the_Node_Scope_Index\">" + 
"				<title>Exclusion from the Node Scope Index</title>" + 
"				<para>" + 
"					All configured properties are full-text indexed by default (if they are of type STRING and included in the node scope index)." + 
"				</para>" + 
"			</formalpara>" + 
"			<para>" + 
"				A node scope search normally finds all nodes of an index. That is to say; <literal>jcr:contains(., 'foo')</literal> returns all nodes that have a string property containing the word '<replaceable>foo</replaceable>'." + 
"			</para>" + 
"			<para>" + 
"				Properties can be explicitly excluded from the node scope index with:" + 
"			</para>" + 
"			<programlisting language=\"XML\" role=\"XML\">&lt;?xml version=\"1.0\"?&gt;" + 
"&lt;!DOCTYPE configuration SYSTEM \"http://www.exoplatform.org/dtd/indexing-configuration-1.0.dtd\"&gt;" + 
"&lt;configuration xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\"&gt;" + 
"  &lt;index-rule nodeType=\"nt:unstructured\"&gt;" + 
"    &lt;property nodeScopeIndex=\"false\"&gt;Text&lt;/property&gt;" + 
"  &lt;/index-rule&gt;" + 
"&lt;/configuration&gt;" + 
"</programlisting>" + 
"			<formalpara id=\"form-Reference_Guide-IndexingConfiguration-Index_Aggregates\">" + 
"				<title>Index Aggregates</title>" + 
"				<para>" + 
"					Sometimes it is useful to include the contents of descendant nodes into a single node to more easily search on content that is scattered across multiple nodes." + 
"				</para>" + 
"			</formalpara>" + 
"			<para>" + 
"				JCR allows the definition of index aggregates based on relative path patterns and primary node types." + 
"			</para>" + 
"			<para>" + 
"				The following example creates an index aggregate on <literal>nt:file</literal> that includes the content of the jcr:content node:" + 
"			</para>" + 
"			<programlisting language=\"XML\" role=\"XML\">&lt;?xml version=\"1.0\"?&gt;" + 
"&lt;!DOCTYPE configuration SYSTEM \"http://www.exoplatform.org/dtd/indexing-configuration-1.0.dtd\"&gt;" + 
"&lt;configuration xmlns:jcr=\"http://www.jcp.org/jcr/1.0\"" + 
"               xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\"&gt;" + 
"  &lt;aggregate primaryType=\"nt:file\"&gt;" + 
"    &lt;include&gt;jcr:content&lt;/include&gt;" + 
"  &lt;/aggregate&gt;" + 
"&lt;/configuration&gt;" + 
"</programlisting>" + 
"			<para>" + 
"				Included nodes can also be restricted to a certain type:" + 
"			</para>" + 
"			<programlisting language=\"XML\" role=\"XML\">&lt;?xml version=\"1.0\"?&gt;" + 
"&lt;!DOCTYPE configuration SYSTEM \"http://www.exoplatform.org/dtd/indexing-configuration-1.0.dtd\"&gt;" + 
"&lt;configuration xmlns:jcr=\"http://www.jcp.org/jcr/1.0\"" + 
"               xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\"&gt;" + 
"  &lt;aggregate primaryType=\"nt:file\"&gt;" + 
"    &lt;include primaryType=\"nt:resource\"&gt;jcr:content&lt;/include&gt;" + 
"  &lt;/aggregate&gt;" + 
"&lt;/configuration&gt;" + 
"</programlisting>" + 
"			<para>" + 
"				The <emphasis role=\"bold\">*</emphasis> wild-card can be used to match all child nodes:" + 
"			</para>" + 
"			<programlisting language=\"XML\" role=\"XML\">&lt;?xml version=\"1.0\"?&gt;" + 
"&lt;!DOCTYPE configuration SYSTEM \"http://www.exoplatform.org/dtd/indexing-configuration-1.0.dtd\"&gt;" + 
"&lt;configuration xmlns:jcr=\"http://www.jcp.org/jcr/1.0\"" + 
"               xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\"&gt;" + 
"  &lt;aggregate primaryType=\"nt:file\"&gt;http://wiki.exoplatform.com/xwiki/bin/edit/JCR/Search+Configuration" + 
"    &lt;include primaryType=\"nt:resource\"&gt;*&lt;/include&gt;" + 
"  &lt;/aggregate&gt;" + 
"&lt;/configuration&gt;" + 
"</programlisting>" + 
"			<para>" + 
"				Nodes to a certain depth below the current node can be included by adding multiple include elements. The <parameter>nt:file</parameter> node may contain a complete XML document under jcr:content for example:" + 
"			</para>" + 
"			<programlisting language=\"XML\" role=\"XML\">&lt;?xml version=\"1.0\"?&gt;" + 
"&lt;!DOCTYPE configuration SYSTEM \"http://www.exoplatform.org/dtd/indexing-configuration-1.0.dtd\"&gt;" + 
"&lt;configuration xmlns:jcr=\"http://www.jcp.org/jcr/1.0\"" + 
"               xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\"&gt;" + 
"  &lt;aggregate primaryType=\"nt:file\"&gt;" + 
"    &lt;include&gt;*&lt;/include&gt;" + 
"    &lt;include&gt;*/*&lt;/include&gt;" + 
"    &lt;include&gt;*/*/*&lt;/include&gt;" + 
"  &lt;/aggregate&gt;" + 
"&lt;/configuration&gt;" + 
"</programlisting>" + 
"			<formalpara id=\"form-Reference_Guide-IndexingConfiguration-Property_Level_Analyzers\">" + 
"				<title>Property-Level Analyzers</title>" + 
"				<para>" + 
"					How a property has to be analyzed can be defined in the following configuration section. If there is an analyzer configuration for a property, this analyzer is used for indexing and searching of this property. For example:" + 
"				</para>" + 
"			</formalpara>" + 
"			<programlisting language=\"XML\" role=\"XML\">&lt;?xml version=\"1.0\"?&gt;" + 
"&lt;!DOCTYPE configuration SYSTEM \"http://www.exoplatform.org/dtd/indexing-configuration-1.0.dtd\"&gt;" + 
"&lt;configuration xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\"&gt;" + 
"  &lt;analyzers&gt; " + 
"        &lt;analyzer class=\"org.apache.lucene.analysis.KeywordAnalyzer\"&gt;" + 
"            &lt;property&gt;mytext&lt;/property&gt;" + 
"        &lt;/analyzer&gt;" + 
"        &lt;analyzer class=\"org.apache.lucene.analysis.WhitespaceAnalyzer\"&gt;" + 
"            &lt;property&gt;mytext2&lt;/property&gt;" + 
"        &lt;/analyzer&gt;" + 
"  &lt;/analyzers&gt; " + 
"&lt;/configuration&gt;" + 
"</programlisting>" + 
"			<para>" + 
"				The configuration above sets lucene <emphasis role=\"bold\">KeywordAnalyzer</emphasis> to index and search the property \"<replaceable>mytext</replaceable>\" across the entire workspace while the \"<replaceable>mytext2</replaceable>\" property is searched with the <emphasis role=\"bold\">WhitespaceAnalyzer</emphasis>." + 
"			</para>" + 
"			<para>" + 
"				The <emphasis role=\"bold\">WhitespaceAnalyzer</emphasis> tokenizes a property, the <emphasis role=\"bold\">KeywordAnalyzer</emphasis> takes the property as a whole." + 
"			</para>" + 
"			<para>" + 
"				Using different analyzers for different languages can be particularly useful." + 
"			</para>" + 
"			<formalpara id=\"form-Reference_Guide-IndexingConfiguration-Characteristics_of_Node_Scope_Searches\">" + 
"				<title>Characteristics of Node Scope Searches</title>" + 
"				<para>" + 
"					Unexpected behavior may be encountered when using analyzers to search within a <emphasis>property</emphasis> compared to searching within a <emphasis>node scope</emphasis>. This is because the node scope always uses the global analyzer." + 
"				</para>" + 
"			</formalpara>" + 
"			<para>" + 
"				For example: the property \"<parameter>mytext</parameter>\" contains the text; \"<emphasis>testing my analyzers</emphasis>\" but no analyzers have been configured for this property (and the default analyzer in SearchIndex has not been changed)." + 
"			</para>" + 
"			<para>" + 
"				If the query is:" + 
"			</para>" + 
"			<programlisting language=\"Java\" role=\"JAVA\">xpath = \"//*[jcr:contains(mytext,'analyzer')]\"" + 
"</programlisting>" + 
"			<para>" + 
"				The <literal>xpath</literal> does not return a result in the node with the property above and default analyzers." + 
"			</para>" + 
"			<para>" + 
"				Also, if a search is done on the node scope as follows:" + 
"			</para>" + 
"			<programlisting language=\"Java\" role=\"JAVA\">xpath = \"//*[jcr:contains(.,'analyzer')]\"" + 
"</programlisting>" + 
"			<para>" + 
"				No result will be returned." + 
"			</para>" + 
"			<para>" + 
"				Only specific analyzers can be set on a node property, and the node scope indexing and analyzing is always done with the globally defined analyzer in the SearchIndex element." + 
"			</para>" + 
"			<para>" + 
"				If the analyzer used to index the \"mytext\" property above is changed to:" + 
"			</para>" + 
"			<programlisting language=\"XML\" role=\"XML\">&lt;analyzer class=\"org.apache.lucene.analysis.Analyzer.GermanAnalyzer\"&gt;" + 
"&lt;property&gt;mytext&lt;/property&gt;" + 
"&lt;/analyzer&gt;" + 
"</programlisting>" + 
"			<para>" + 
"				The search below would return a result because of the word stemming (analyzers - analyzer)." + 
"			</para>" + 
"			<programlisting language=\"Java\" role=\"JAVA\">xpath = \"//*[jcr:contains(mytext,'analyzer')]\"" + 
"</programlisting>" + 
"			<para>" + 
"				The second search in the example:" + 
"			</para>" + 
"			<programlisting language=\"Java\" role=\"JAVA\">xpath = \"//*[jcr:contains(.,'analyzer')]\"" + 
"</programlisting>" + 
"			<para>" + 
"				Would still not give a result, since the node scope is indexed with the global analyzer, which in this case does not take into account any word stemming." + 
"			</para>" + 
"			<para>" + 
"				Be aware that when using analyzers for specific properties, a result may be found in a property for certain search text, but the same search text in the node scope of the property may not find a result." + 
"			</para>" + 
"			<note>" + 
"				<para>" + 
"					Both index rules and index aggregates influence how content is indexed in JCR. If the configuration is changed, the existing content is not automatically re-indexed according to the new rules." + 
"				</para>" + 
"				<para>" + 
"					Content must be manually re-indexed when the configuration is changed." + 
"				</para>" + 
"			</note>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+19042-565985+%5BLatest%5D&amp;cf_build_id=19042-565985+05+Dec+2013+14%3A39+en-US+%5BLatest%5D&amp;comment=Title%3A+IndexingConfiguration%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"		<section id=\"Advanced_features1\" remap=\"TID_19043\">" + 
"			<title>Advanced features</title>" + 
"			<para>" + 
"				eXo JCR supports some advanced features, which are not specified in JSR 170:" + 
"			</para>" + 
"			<itemizedlist>" + 
"				<listitem>" + 
"					<para>" + 
"						Get a text excerpt with <emphasis role=\"bold\">highlighted words</emphasis> that matches the query: <xref linkend=\"DefaultXMLExcerpt\"/>." + 
"					</para>" + 
"				</listitem>" + 
"				<listitem>" + 
"					<para>" + 
"						Search a term and its <emphasis role=\"bold\">synonyms</emphasis>: <xref linkend=\"SynonymSearch\"/>." + 
"					</para>" + 
"				</listitem>" + 
"				<listitem>" + 
"					<para>" + 
"						Search <emphasis role=\"bold\">similar</emphasis> nodes: <xref linkend=\"Similarity\"/>." + 
"					</para>" + 
"				</listitem>" + 
"				<listitem>" + 
"					<para>" + 
"						Check <emphasis role=\"bold\">spelling</emphasis> of a full text query statement: <xref linkend=\"sect-SpellChecker\"/>." + 
"					</para>" + 
"				</listitem>" + 
"				<listitem>" + 
"					<para>" + 
"						Define index <emphasis role=\"bold\">aggregates and rules</emphasis>: IndexingConfiguration." + 
"					</para>" + 
"				</listitem>" + 
"			</itemizedlist>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+19043-565985+%5BLatest%5D&amp;cf_build_id=19043-565985+05+Dec+2013+14%3A39+en-US+%5BLatest%5D&amp;comment=Title%3A+Advanced+features%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"	</section>" + 
"	<section id=\"sect-Configuring_the_JDBC_Data_Container\">" + 
"		<title>Configuring the JDBC Data Container</title>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+19044-565985+%5BLatest%5D&amp;cf_build_id=19044-565985+05+Dec+2013+14%3A39+en-US+%5BLatest%5D&amp;comment=Title%3A+Configuring+the+JDBC+Data+Container%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"		<section id=\"Introduction14\" remap=\"TID_19045\">" + 
"			<title>Introduction</title>" + 
"			<para>" + 
"				eXo JCR persistent data container can work in two configuration modes:" + 
"			</para>" + 
"			<itemizedlist>" + 
"				<listitem>" + 
"					<para>" + 
"						<phrase>Multi-database</phrase>: One database for each workspace (used in standalone eXo JCR service mode)" + 
"					</para>" + 
"				</listitem>" + 
"				<listitem>" + 
"					<para>" + 
"						<phrase>Single-database</phrase>: All workspaces persisted in one database (used in embedded eXo JCR service mode, e.g. in eXo portal)" + 
"					</para>" + 
"				</listitem>" + 
"			</itemizedlist>" + 
"			<para>" + 
"				The data container uses the JDBC driver to communicate with the actual database software, i.e. any JDBC-enabled data storage can be used with eXo JCR implementation." + 
"			</para>" + 
"			<para>" + 
"				Currently the data container is tested with the following RDBMS:" + 
"			</para>" + 
"			<table>" + 
"				<title>Supported databases</title>" + 
"				<tgroup cols=\"2\">" + 
"					<thead>" + 
"						<row>" + 
"							<entry>" + 
"								Database" + 
"							</entry>" + 
"							<entry>" + 
"								Driver Version" + 
"							</entry>" + 
"						</row>" + 
"					</thead>" + 
"					<tbody>" + 
"						<row>" + 
"							<entry>" + 
"								IBM DB2 9.7 (FP5)" + 
"							</entry>" + 
"							<entry>" + 
"								IBM DB2 JDBC Universal Driver Architecture 4.13.80" + 
"							</entry>" + 
"						</row>" + 
"						<row>" + 
"							<entry>" + 
"								Oracle 11g R1 (11.1.0.7.0)" + 
"							</entry>" + 
"							<entry>" + 
"								Oracle JDBC Driver 11.1.0.7" + 
"							</entry>" + 
"						</row>" + 
"						<row>" + 
"							<entry>" + 
"								Oracle 11g R1 RAC (11.1.0.7.0)" + 
"							</entry>" + 
"							<entry>" + 
"								Oracle JDBC Driver 11.1.0.7" + 
"							</entry>" + 
"						</row>" + 
"						<row>" + 
"							<entry>" + 
"								Oracle 11g R2 (11.2.0.3.0)" + 
"							</entry>" + 
"							<entry>" + 
"								Oracle JDBC Driver v11.2.0.3.0" + 
"							</entry>" + 
"						</row>" + 
"						<row>" + 
"							<entry>" + 
"								Oracle 11g R2 RAC (11.2.0.3.0)" + 
"							</entry>" + 
"							<entry>" + 
"								Oracle JDBC Driver v11.2.0.3.0" + 
"							</entry>" + 
"						</row>" + 
"						<row>" + 
"							<entry>" + 
"								MySQL 5.1" + 
"							</entry>" + 
"							<entry>" + 
"								MySQL Connector/J 5.1.21" + 
"							</entry>" + 
"						</row>" + 
"						<row>" + 
"							<entry>" + 
"								MySQL 5.5" + 
"							</entry>" + 
"							<entry>" + 
"								MySQL Connector/J 5.1.21" + 
"							</entry>" + 
"						</row>" + 
"						<row>" + 
"							<entry>" + 
"								Microsoft SQL Server 2008" + 
"							</entry>" + 
"							<entry>" + 
"								Microsoft SQL Server JDBC Driver 3.0.1301.101, Microsoft SQL Server JDBC Driver 4.0.2206.100" + 
"							</entry>" + 
"						</row>" + 
"						<row>" + 
"							<entry>" + 
"								Microsoft SQL Server 2008 R2" + 
"							</entry>" + 
"							<entry>" + 
"								Microsoft SQL Server JDBC Driver 3.0.1301.101, Microsoft SQL Server JDBC Driver 4.0.2206.100" + 
"							</entry>" + 
"						</row>" + 
"						<row>" + 
"							<entry>" + 
"								PostgreSQL 8.4.8" + 
"							</entry>" + 
"							<entry>" + 
"								JDBC4 Postgresql Driver, Version 8.4-703" + 
"							</entry>" + 
"						</row>" + 
"						<row>" + 
"							<entry>" + 
"								PostgreSQL 9.1.0" + 
"							</entry>" + 
"							<entry>" + 
"								JDBC4 Postgresql Driver, Version 9.1-903" + 
"							</entry>" + 
"						</row>" + 
"						<row>" + 
"							<entry>" + 
"								Sybase ASE 15.7" + 
"							</entry>" + 
"							<entry>" + 
"								Sybase jConnect JDBC driver v7" + 
"							</entry>" + 
"						</row>" + 
"					</tbody>" + 
"				</tgroup>" + 
"			</table>" + 
"			<note>" + 
"				<title>Isolation Levels</title>" + 
"				<para>" + 
"					The JCR requires at least the <parameter>READ_COMMITED</parameter> isolation level and other RDBMS configurations can cause some side-effects and issues. So, please, make sure proper isolation level is configured on database server side." + 
"				</para>" + 
"			</note>" + 
"			<note>" + 
"				<para>" + 
"					Another mandatory JCR requirement for underlying databases is case sensitive collation. Microsoft SQL Server 2005 and 2008 customers must configure their server with collation corresponding to operational requirements, while honoring case sensitivity. See the Microsoft SQL Server documentation page \"Selecting a SQL Server Collation\" at <ulink url=\"http://msdn.microsoft.com/en-us/library/ms144250.aspx\"/>" + 
"				</para>" + 
"			</note>" + 
"			<note>" + 
"				<para>" + 
"					Be aware that JCR does not support MyISAM storage engine for the MySQL relational database management system." + 
"				</para>" + 
"			</note>" + 
"			<para>" + 
"				Each database software supports ANSI SQL standards but also has its own specifics. Therefore each database has its own configuration setting in the eXo JCR as a database dialect parameter. More detailed configuration of the database can be set by editing the metadata SQL-script files." + 
"			</para>" + 
"			<para>" + 
"				You can find SQL-scripts in <filename>conf/storage/</filename> directory of the <filename><replaceable>JPP_HOME</replaceable>/modules/org/gatein/lib/main/exo.jcr.component.core-1.15.3.jar</filename> file ." + 
"			</para>" + 
"			<para>" + 
"				The following tables show the correspondence between the scripts and databases:" + 
"			</para>" + 
"			<table>" + 
"				<title>Single-database</title>" + 
"				<tgroup cols=\"2\">" + 
"					<thead>" + 
"						<row>" + 
"							<entry>" + 
"								Database" + 
"							</entry>" + 
"							<entry>" + 
"								Script" + 
"							</entry>" + 
"						</row>" + 
"					</thead>" + 
"					<tbody>" + 
"						<row>" + 
"							<entry>" + 
"								MySQL DB" + 
"							</entry>" + 
"							<entry>" + 
"								<filename>jcr-sjdbc.mysql.sql</filename>" + 
"							</entry>" + 
"						</row>" + 
"						<row>" + 
"							<entry>" + 
"								MySQL DB with utf-8" + 
"							</entry>" + 
"							<entry>" + 
"								<filename>jcr-sjdbc.mysql-utf8.sql</filename>" + 
"							</entry>" + 
"						</row>" + 
"						<row>" + 
"							<entry>" + 
"								PostgresSQL" + 
"							</entry>" + 
"							<entry>" + 
"								<filename>jcr-sjdbc.pqsql.sql</filename>" + 
"							</entry>" + 
"						</row>" + 
"						<row>" + 
"							<entry>" + 
"								Oracle DB" + 
"							</entry>" + 
"							<entry>" + 
"								<filename>jcr-sjdbc.ora.sql</filename>" + 
"							</entry>" + 
"						</row>" + 
"						<row>" + 
"							<entry>" + 
"								DB2 9.7" + 
"							</entry>" + 
"							<entry>" + 
"								<filename>jcr-sjdbc.db2.sql</filename>" + 
"							</entry>" + 
"						</row>" + 
"						<row>" + 
"							<entry>" + 
"								Microsoft SQL Server" + 
"							</entry>" + 
"							<entry>" + 
"								<filename>jcr-sjdbc.mssql.sql</filename>" + 
"							</entry>" + 
"						</row>" + 
"						<row>" + 
"							<entry>" + 
"								Sybase" + 
"							</entry>" + 
"							<entry>" + 
"								<filename>jcr-sjdbc.sybase.sql</filename>" + 
"							</entry>" + 
"						</row>" + 
"						<row>" + 
"							<entry>" + 
"								HSQLDB" + 
"							</entry>" + 
"							<entry>" + 
"								<filename>jcr-sjdbc.sql</filename>" + 
"							</entry>" + 
"						</row>" + 
"					</tbody>" + 
"				</tgroup>" + 
"			</table>" + 
"			<table>" + 
"				<title>Multi-database</title>" + 
"				<tgroup cols=\"2\">" + 
"					<thead>" + 
"						<row>" + 
"							<entry>" + 
"								Database" + 
"							</entry>" + 
"							<entry>" + 
"								Script" + 
"							</entry>" + 
"						</row>" + 
"					</thead>" + 
"					<tbody>" + 
"						<row>" + 
"							<entry>" + 
"								MySQL DB" + 
"							</entry>" + 
"							<entry>" + 
"								<filename>jcr-mjdbc.mysql.sql</filename>" + 
"							</entry>" + 
"						</row>" + 
"						<row>" + 
"							<entry>" + 
"								MySQL DB with utf-8" + 
"							</entry>" + 
"							<entry>" + 
"								<filename>jcr-mjdbc.mysql-utf8.sql</filename>" + 
"							</entry>" + 
"						</row>" + 
"						<row>" + 
"							<entry>" + 
"								PostgresSQL" + 
"							</entry>" + 
"							<entry>" + 
"								<filename>jcr-mjdbc.pqsql.sql</filename>" + 
"							</entry>" + 
"						</row>" + 
"						<row>" + 
"							<entry>" + 
"								Oracle DB" + 
"							</entry>" + 
"							<entry>" + 
"								<filename>jcr-mjdbc.ora.sql</filename>" + 
"							</entry>" + 
"						</row>" + 
"						<row>" + 
"							<entry>" + 
"								DB2 9.7" + 
"							</entry>" + 
"							<entry>" + 
"								<filename>jcr-mjdbc.db2.sql</filename>" + 
"							</entry>" + 
"						</row>" + 
"						<row>" + 
"							<entry>" + 
"								Microsoft SQL Server" + 
"							</entry>" + 
"							<entry>" + 
"								<filename>jcr-mjdbc.mssql.sql</filename>" + 
"							</entry>" + 
"						</row>" + 
"						<row>" + 
"							<entry>" + 
"								Sybase" + 
"							</entry>" + 
"							<entry>" + 
"								<filename>jcr-mjdbc.sybase.sql</filename>" + 
"							</entry>" + 
"						</row>" + 
"						<row>" + 
"							<entry>" + 
"								HSQLDB" + 
"							</entry>" + 
"							<entry>" + 
"								<filename>jcr-mjdbc.sql</filename>" + 
"							</entry>" + 
"						</row>" + 
"					</tbody>" + 
"				</tgroup>" + 
"			</table>" + 
"			<para>" + 
"				If a non-ANSI node name is used, you must use a database with MultiLanguage support. Some JDBC drivers need additional parameters for establishing a Unicode friendly connection. For example under mysql it is necessary to add an additional parameter for the JDBC driver at the end of JDBC URL:" + 
"			</para>" + 
"			<para>" + 
"				There are pre-configured configuration files for HSQLDB located in the <filename>/conf/portal/</filename> and <filename>/conf/standalone/</filename> folders of the <filename>exo.jcr.component.core-1.15.3.jar</filename> file, or within the source distribution of the eXo JCR implementation." + 
"			</para>" + 
"			<example>" + 
"				<title>Example Parameter</title>" + 
"				<programlisting><code>jdbc:mysql://exoua.dnsalias.net/portal?characterEncoding=utf8</code></programlisting>" + 
"			</example>" + 
"			<para>" + 
"				The configuration files are located in service jars <filename>/conf/portal/configuration.xml</filename> (eXo services including JCR Repository Service) and <filename>exo-jcr-config.xml</filename> (repositories configuration) by default. In the portal, the JCR is configured in a portal web application <filename>portal/WEB-INF/conf/jcr/jcr-configuration.xml</filename> (JCR Repository Service and related services) and <filename>repository-configuration.xml</filename> (repositories configuration)." + 
"			</para>" + 
"			<para>" + 
"				Read more about <xref linkend=\"sect-Template_for_JCR_configuration_file\"/>." + 
"			</para>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+19045-565985+%5BLatest%5D&amp;cf_build_id=19045-565985+05+Dec+2013+14%3A39+en-US+%5BLatest%5D&amp;comment=Title%3A+Introduction%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"		<section id=\"Isolated-database_Configuration\" remap=\"TID_23164\">" + 
"			<title>Isolated-database Configuration</title>" + 
"			<para>" + 
"				Isolated-database configuration allows configuring single database for repository, but separate database tables for each workspace." + 
"			</para>" + 
"			<procedure>" + 
"				<title/>" + 
"				<step>" + 
"					<para>" + 
"						Configure the data container in the <literal>org.exoplatform.services.naming.InitialContextInitializer</literal> service. It is the JNDI context initializer, which registers (binds) naming resources (DataSources) for data containers." + 
"					</para>" + 
"					<para>" + 
"						For example:" + 
"					</para>" + 
"					<programlisting language=\"XML\" role=\"XML\">" + 
"  &lt;external-component-plugins&gt;" + 
"    &lt;target-component&gt;org.exoplatform.services.naming.InitialContextInitializer&lt;/target-component&gt;" + 
"    &lt;component-plugin&gt;" + 
"      &lt;name&gt;bind.datasource&lt;/name&gt;" + 
"      &lt;set-method&gt;addPlugin&lt;/set-method&gt;" + 
"      &lt;type&gt;org.exoplatform.services.naming.BindReferencePlugin&lt;/type&gt;" + 
"      &lt;init-params&gt;" + 
"        &lt;value-param&gt;" + 
"          &lt;name&gt;bind-name&lt;/name&gt;" + 
"          &lt;value&gt;jdbcjcr&lt;/value&gt;" + 
"        &lt;/value-param&gt;" + 
"        &lt;value-param&gt;" + 
"          &lt;name&gt;class-name&lt;/name&gt;" + 
"          &lt;value&gt;javax.sql.DataSource&lt;/value&gt;" + 
"        &lt;/value-param&gt;" + 
"        &lt;value-param&gt;" + 
"          &lt;name&gt;factory&lt;/name&gt;" + 
"          &lt;value&gt;org.apache.commons.dbcp.BasicDataSourceFactory&lt;/value&gt;" + 
"        &lt;/value-param&gt;" + 
"        &lt;properties-param&gt;" + 
"          &lt;name&gt;ref-addresses&lt;/name&gt;" + 
"          &lt;description&gt;ref-addresses&lt;/description&gt;" + 
"          &lt;property name=\"driverClassName\" value=\"org.postgresql.Driver\"/&gt;" + 
"          &lt;!-- MVCC configured to prevent possible deadlocks when a global Tx is active --&gt;" + 
"          &lt;property name=\"url\" value=\"jdbc:postgresql://exoua.dnsalias.net/portal\"/&gt;" + 
"          &lt;property name=\"username\" value=\"exoadmin\"/&gt;" + 
"          &lt;property name=\"password\" value=\"exo12321\"/&gt;" + 
"        &lt;/properties-param&gt;" + 
"      &lt;/init-params&gt;" + 
"    &lt;/component-plugin&gt;" + 
"   " + 
"  &lt;/external-component-plugins&gt;" + 
"  </programlisting>" + 
"					<para>" + 
"						The database connection parameters are configured:" + 
"					</para>" + 
"					<itemizedlist>" + 
"						<listitem>" + 
"							<para>" + 
"								<literal>driverClassName</literal>. For example: \"org.hsqldb.jdbcDriver\", \"com.mysql.jdbc.Driver\", \"org.postgresql.Driver\"" + 
"							</para>" + 
"						</listitem>" + 
"						<listitem>" + 
"							<para>" + 
"								<literal>url</literal>. For example: \"jdbc:hsqldb:file:target/temp/data/portal\", \"jdbc:mysql://exoua.dnsalias.net/jcr\"" + 
"							</para>" + 
"						</listitem>" + 
"						<listitem>" + 
"							<para>" + 
"								<literal>username</literal>. For example: \"sa\", \"exoadmin\"" + 
"							</para>" + 
"						</listitem>" + 
"						<listitem>" + 
"							<para>" + 
"								<literal>password</literal>. For example: \"exo12321\"" + 
"							</para>" + 
"						</listitem>" + 
"					</itemizedlist>" + 
"				</step>" + 
"				<step>" + 
"					<para>" + 
"						Configure the repository service. Each workspace will be configured for the same data container." + 
"					</para>" + 
"					<para>" + 
"						For example:" + 
"					</para>" + 
"					<programlisting language=\"XML\" role=\"XML\">" + 
"&lt;workspaces&gt;" + 
"  &lt;workspace name=\"ws\" &gt;" + 
"  <!-- for system storage -->" + 
"    &lt;container class=\"org.exoplatform.services.jcr.impl.storage.jdbc.optimisation.CQJDBCWorkspaceDataContainer\"&gt;" + 
"    &lt;properties&gt;" + 
"      &lt;property name=\"source-name\" value=\"jdbcjcr\"/&gt;" + 
"      &lt;property name=\"db-structure-type\" value=\"isolated\"/&gt;" + 
"      " + 
"    &lt;/properties&gt;" + 
"    &lt;/container&gt;" + 
"    " + 
"  &lt;/workspace&gt;" + 
"  &lt;workspace name=\"ws1\" &gt;" + 
"    &lt;container class=\"org.exoplatform.services.jcr.impl.storage.jdbc.optimisation.CQJDBCWorkspaceDataContainer\"&gt;" + 
"    &lt;properties&gt;" + 
"      &lt;property name=\"source-name\" value=\"jdbcjcr\"/&gt;" + 
"      &lt;property name=\"db-structure-type\" value=\"isolated\"/&gt;" + 
"        " + 
"    &lt;/properties&gt;" + 
"    &lt;/container&gt;" + 
"    " + 
"  &lt;/workspace&gt;" + 
"&lt;/workspaces&gt;" + 
"	" + 
"</programlisting>" + 
"					<para>" + 
"						In this step, you have configured two workspaces which will be persist in different database tables." + 
"					</para>" + 
"				</step>" + 
"			</procedure>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+23164-566688+%5BLatest%5D&amp;cf_build_id=23164-566688+06+Dec+2013+14%3A02+en-US+%5BLatest%5D&amp;comment=Title%3A+Isolated-database+Configuration%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"		<section id=\"Multi-database_Configuration\" remap=\"TID_19046\">" + 
"			<title>Multi-database Configuration</title>" + 
"			<para>" + 
"				You need to configure each workspace in a repository as part of multi-database configuration. Databases may reside on remote servers as required." + 
"			</para>" + 
"			<procedure>" + 
"				<title/>" + 
"				<step>" + 
"					<para>" + 
"						Configure the data containers in the <literal>org.exoplatform.services.naming.InitialContextInitializer</literal> service. It's the JNDI context initializer which registers (binds) naming resources (DataSources) for data containers." + 
"					</para>" + 
"					<para>" + 
"						For example (two data containers <parameter>jdbcjcr</parameter> - local HSQLDB, <parameter>jdbcjcr1</parameter> - remote MySQL):" + 
"					</para>" + 
"					<programlisting language=\"XML\" role=\"XML\">" + 
"  &lt;external-component-plugins&gt;" + 
"    &lt;target-component&gt;org.exoplatform.services.naming.InitialContextInitializer&lt;/target-component&gt;" + 
"    &lt;component-plugin&gt;" + 
"      &lt;name&gt;bind.datasource&lt;/name&gt;" + 
"      &lt;set-method&gt;addPlugin&lt;/set-method&gt;" + 
"      &lt;type&gt;org.exoplatform.services.naming.BindReferencePlugin&lt;/type&gt;" + 
"      &lt;init-params&gt;" + 
"        &lt;value-param&gt;" + 
"          &lt;name&gt;bind-name&lt;/name&gt;" + 
"          &lt;value&gt;jdbcjcr&lt;/value&gt;" + 
"        &lt;/value-param&gt;" + 
"        &lt;value-param&gt;" + 
"          &lt;name&gt;class-name&lt;/name&gt;" + 
"          &lt;value&gt;javax.sql.DataSource&lt;/value&gt;" + 
"        &lt;/value-param&gt;" + 
"        &lt;value-param&gt;" + 
"          &lt;name&gt;factory&lt;/name&gt;" + 
"          &lt;value&gt;org.apache.commons.dbcp.BasicDataSourceFactory&lt;/value&gt;" + 
"        &lt;/value-param&gt;" + 
"        &lt;properties-param&gt;" + 
"          &lt;name&gt;ref-addresses&lt;/name&gt;" + 
"          &lt;description&gt;ref-addresses&lt;/description&gt;" + 
"          &lt;property name=\"driverClassName\" value=\"${all.driverClassName:org.hsqldb.jdbcDriver}\"/&gt;" + 
"          &lt;!-- MVCC configured to prevent possible deadlocks when a global Tx is active --&gt;" + 
"          &lt;property name=\"url\" value=\"${jdbcjcr.url:jdbc:hsqldb:file:target/temp/data/portal;hsqldb.tx=mvcc}\"/&gt;" + 
"          &lt;property name=\"username\" value=\"${jdbcjcr.username:sa}\"/&gt;" + 
"          &lt;property name=\"password\" value=\"${jdbcjcr.password:}\"/&gt;" + 
"        &lt;/properties-param&gt;" + 
"      &lt;/init-params&gt;" + 
"    &lt;/component-plugin&gt;" + 
"    &lt;component-plugin&gt;" + 
"      &lt;name&gt;bind.datasource&lt;/name&gt;" + 
"      &lt;set-method&gt;addPlugin&lt;/set-method&gt;" + 
"      &lt;type&gt;org.exoplatform.services.naming.BindReferencePlugin&lt;/type&gt;" + 
"      &lt;init-params&gt;" + 
"        &lt;value-param&gt;" + 
"          &lt;name&gt;bind-name&lt;/name&gt;" + 
"          &lt;value&gt;jdbcjcr1&lt;/value&gt;" + 
"        &lt;/value-param&gt;" + 
"        &lt;value-param&gt;" + 
"          &lt;name&gt;class-name&lt;/name&gt;" + 
"          &lt;value&gt;javax.sql.DataSource&lt;/value&gt;" + 
"        &lt;/value-param&gt;" + 
"        &lt;value-param&gt;" + 
"          &lt;name&gt;factory&lt;/name&gt;" + 
"          &lt;value&gt;org.apache.commons.dbcp.BasicDataSourceFactory&lt;/value&gt;" + 
"        &lt;/value-param&gt;" + 
"        &lt;properties-param&gt;" + 
"          &lt;name&gt;ref-addresses&lt;/name&gt;" + 
"          &lt;description&gt;ref-addresses&lt;/description&gt;" + 
"          &lt;property name=\"driverClassName\" value=\"${all.driverClassName:org.hsqldb.jdbcDriver}\"/&gt;" + 
"          &lt;property name=\"url\" value=\"${jdbcjcr1.url:jdbc:hsqldb:file:target/temp/data/jcr}\"/&gt;" + 
"          &lt;property name=\"username\" value=\"${jdbcjcr1.username:sa}\"/&gt;" + 
"          &lt;property name=\"password\" value=\"${jdbcjcr1.password:}\"/&gt;" + 
"        &lt;/properties-param&gt;" + 
"      &lt;/init-params&gt;" + 
"    &lt;/component-plugin&gt;" + 
"    &lt;!-- Unnecessary plugins not relevant to this section removed for clarity --&gt;" + 
"  &lt;/external-component-plugins&gt;" + 
"</programlisting>" + 
"					<substeps>" + 
"						<step>" + 
"							<para>" + 
"								Configure the database connection parameters:" + 
"							</para>" + 
"							<itemizedlist>" + 
"								<listitem>" + 
"									<para>" + 
"										<parameter>driverClassName</parameter>, e.g. \"org.hsqldb.jdbcDriver\", \"com.mysql.jdbc.Driver\", \"org.postgresql.Driver\"" + 
"									</para>" + 
"								</listitem>" + 
"								<listitem>" + 
"									<para>" + 
"										<parameter>url</parameter>, e.g. \"jdbc:hsqldb:file:target/temp/data/portal\", \"jdbc:mysql://exoua.dnsalias.net/jcr\"" + 
"									</para>" + 
"								</listitem>" + 
"								<listitem>" + 
"									<para>" + 
"										<parameter>username</parameter>, e.g. \"sa\", \"exoadmin\"" + 
"									</para>" + 
"								</listitem>" + 
"								<listitem>" + 
"									<para>" + 
"										<parameter>password</parameter>, e.g. \"\", \"exo12321\"" + 
"									</para>" + 
"								</listitem>" + 
"							</itemizedlist>" + 
"						</step>" + 
"					</substeps>" + 
"					<para>" + 
"						There can be connection pool configuration parameters (org.apache.commons.dbcp.BasicDataSourceFactory):" + 
"					</para>" + 
"					<itemizedlist>" + 
"						<listitem>" + 
"							<para>" + 
"								<parameter>maxActive</parameter>, e.g. 50" + 
"							</para>" + 
"						</listitem>" + 
"						<listitem>" + 
"							<para>" + 
"								<parameter>maxIdle</parameter>, e.g. 5" + 
"							</para>" + 
"						</listitem>" + 
"						<listitem>" + 
"							<para>" + 
"								<parameter>initialSize</parameter>, e.g. 5" + 
"							</para>" + 
"						</listitem>" + 
"						<listitem>" + 
"							<para>" + 
"								and other according to <ulink url=\"http://jakarta.apache.org/commons/dbcp/configuration.html\">Apache DBCP configuration</ulink>" + 
"							</para>" + 
"						</listitem>" + 
"					</itemizedlist>" + 
"				</step>" + 
"				<step>" + 
"					<para>" + 
"						Configure the repository service. Each workspace will be configured for its own data container." + 
"					</para>" + 
"					<para>" + 
"						For example (two workspaces <parameter>ws</parameter> - jdbcjcr, <parameter>ws1</parameter> - jdbcjcr1):" + 
"					</para>" + 
"					<programlisting language=\"XML\" role=\"XML\">" + 
"&lt;workspaces&gt;" + 
"  &lt;workspace name=\"ws\" auto-init-root-nodetype=\"nt:unstructured\"&gt;" + 
"    &lt;container class=\"org.exoplatform.services.jcr.impl.storage.jdbc.JDBCWorkspaceDataContainer\"&gt;" + 
"    &lt;properties&gt;" + 
"      &lt;property name=\"source-name\" value=\"jdbcjcr\"/&gt;" + 
"      &lt;property name=\"dialect\" value=\"hsqldb\"/&gt;" + 
"      &lt;property name=\"multi-db\" value=\"true\"/&gt;" + 
"      &lt;property name=\"max-buffer-size\" value=\"200K\"/&gt;" + 
"      &lt;property name=\"swap-directory\" value=\"target/temp/swap/ws\"/&gt;   " + 
"    &lt;/properties&gt;" + 
"    &lt;/container&gt;" + 
"    &lt;cache enabled=\"true\"&gt;" + 
"      &lt;properties&gt;" + 
"        &lt;property name=\"max-size\" value=\"10K\"/&gt;&lt;!-- 10Kbytes --&gt;" + 
"        &lt;property name=\"live-time\" value=\"30m\"/&gt;&lt;!-- 30 min --&gt;" + 
"      &lt;/properties&gt;" + 
"    &lt;/cache&gt;" + 
"    &lt;query-handler class=\"org.exoplatform.services.jcr.impl.core.query.lucene.SearchIndex\"&gt;" + 
"    &lt;properties&gt;" + 
"      &lt;property name=\"index-dir\" value=\"target/temp/index\"/&gt;" + 
"    &lt;/properties&gt;" + 
"    &lt;/query-handler&gt;" + 
"    &lt;lock-manager&gt;" + 
"    &lt;time-out&gt;15m&lt;/time-out&gt;&lt;!-- 15 min --&gt;" + 
"    &lt;persister class=\"org.exoplatform.services.jcr.impl.core.lock.FileSystemLockPersister\"&gt;" + 
"      &lt;properties&gt;" + 
"      &lt;property name=\"path\" value=\"target/temp/lock/ws\"/&gt;" + 
"      &lt;/properties&gt;" + 
"    &lt;/persister&gt;" + 
"    &lt;/lock-manager&gt;" + 
"  &lt;/workspace&gt;" + 
"  &lt;workspace name=\"ws1\" auto-init-root-nodetype=\"nt:unstructured\"&gt;" + 
"    &lt;container class=\"org.exoplatform.services.jcr.impl.storage.jdbc.JDBCWorkspaceDataContainer\"&gt;" + 
"    &lt;properties&gt;" + 
"      &lt;property name=\"source-name\" value=\"jdbcjcr1\"/&gt;" + 
"      &lt;property name=\"dialect\" value=\"mysql\"/&gt;" + 
"      &lt;property name=\"multi-db\" value=\"true\"/&gt;" + 
"      &lt;property name=\"max-buffer-size\" value=\"200K\"/&gt;" + 
"      &lt;property name=\"swap-directory\" value=\"target/temp/swap/ws1\"/&gt;   " + 
"    &lt;/properties&gt;" + 
"    &lt;/container&gt;" + 
"    &lt;cache enabled=\"true\"&gt;" + 
"      &lt;properties&gt;" + 
"        &lt;property name=\"max-size\" value=\"10K\"/&gt;" + 
"        &lt;property name=\"live-time\" value=\"5m\"/&gt;" + 
"      &lt;/properties&gt;" + 
"    &lt;/cache&gt;" + 
"    &lt;query-handler class=\"org.exoplatform.services.jcr.impl.core.query.lucene.SearchIndex\"&gt;" + 
"    &lt;properties&gt;" + 
"      &lt;property name=\"index-dir\" value=\"target/temp/index\"/&gt;" + 
"    &lt;/properties&gt;" + 
"    &lt;/query-handler&gt;" + 
"    &lt;lock-manager&gt;" + 
"    &lt;time-out&gt;15m&lt;/time-out&gt;&lt;!-- 15 min --&gt;" + 
"    &lt;persister class=\"org.exoplatform.services.jcr.impl.core.lock.FileSystemLockPersister\"&gt;" + 
"      &lt;properties&gt;" + 
"      &lt;property name=\"path\" value=\"target/temp/lock/ws1\"/&gt;" + 
"      &lt;/properties&gt;" + 
"    &lt;/persister&gt;" + 
"    &lt;/lock-manager&gt;" + 
"  &lt;/workspace&gt;" + 
"&lt;/workspaces&gt;</programlisting>" + 
"					<itemizedlist>" + 
"						<listitem>" + 
"							<para>" + 
"								<parameter>source-name</parameter>: A javax.sql.DataSource name configured in InitialContextInitializer component (was <parameter>sourceName</parameter> prior JCR 1.9);" + 
"							</para>" + 
"						</listitem>" + 
"						<listitem>" + 
"							<para>" + 
"								<parameter>dialect</parameter>: A database dialect, one of <literal>hsqldb</literal>, <literal>mysql</literal>, <literal>mysql-utf8</literal>, <literal>pgsql</literal>, <literal>oracle</literal>, <literal>oracle-oci</literal>, <literal>mssql</literal>, <literal>sybase</literal>, <literal>derby</literal>, <literal>db2</literal>, <literal>db2v8</literal> or <literal>auto</literal> for dialect autodetection;" + 
"							</para>" + 
"						</listitem>" + 
"						<listitem>" + 
"							<para>" + 
"								<parameter>multi-db</parameter>: Enable multi-database container with this parameter (set value \"true\");" + 
"							</para>" + 
"						</listitem>" + 
"						<listitem>" + 
"							<para>" + 
"								<parameter>max-buffer-size: A</parameter> a threshold (in bytes) after which a <literal>javax.jcr.Value</literal> content will be swapped to a file in a temporary storage. A swap for pending changes, for example." + 
"							</para>" + 
"						</listitem>" + 
"						<listitem>" + 
"							<para>" + 
"								<parameter>swap-directory</parameter>: A path in the file system used to swap the pending changes." + 
"							</para>" + 
"						</listitem>" + 
"					</itemizedlist>" + 
"				</step>" + 
"			</procedure>" + 
"			<para>" + 
"				This procedure configures two workspace which will be persistent in two different databases (<emphasis>ws</emphasis> in HSQLDB and <emphasis>ws1</emphasis> in MySQL)." + 
"			</para>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+19046-565985+%5BLatest%5D&amp;cf_build_id=19046-565985+05+Dec+2013+14%3A39+en-US+%5BLatest%5D&amp;comment=Title%3A+Multi-database+Configuration%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"		<section id=\"sect-Single-database_Configuration\">" + 
"			<title>Single-database Configuration</title>" + 
"			<para>" + 
"				Configuring a single-database data container is easier than configuring a multi-database data container as only one naming resource must be configured." + 
"			</para>" + 
"			<example id=\"exam-Reference_Guide-Single_database_Configuration-jdbcjcr_Data_Container\">" + 
"				<title>jdbcjcr Data Container</title>" + 
"				<programlisting language=\"XML\">" + 
"&lt;external-component-plugins&gt;" + 
"    &lt;target-component&gt;org.exoplatform.services.naming.InitialContextInitializer&lt;/target-component&gt;" + 
"    &lt;component-plugin&gt;" + 
"        &lt;name&gt;bind.datasource&lt;/name&gt;" + 
"        &lt;set-method&gt;addPlugin&lt;/set-method&gt;" + 
"        &lt;type&gt;org.exoplatform.services.naming.BindReferencePlugin&lt;/type&gt;" + 
"        &lt;init-params&gt;" + 
"          &lt;value-param&gt;" + 
"            &lt;name&gt;bind-name&lt;/name&gt;" + 
"            &lt;value&gt;jdbcjcr&lt;/value&gt;" + 
"          &lt;/value-param&gt;" + 
"          &lt;value-param&gt;" + 
"            &lt;name&gt;class-name&lt;/name&gt;" + 
"            &lt;value&gt;javax.sql.DataSource&lt;/value&gt;" + 
"          &lt;/value-param&gt;" + 
"          &lt;value-param&gt;" + 
"            &lt;name&gt;factory&lt;/name&gt;" + 
"            &lt;value&gt;org.apache.commons.dbcp.BasicDataSourceFactory&lt;/value&gt;" + 
"          &lt;/value-param&gt;" + 
"          &lt;properties-param&gt;" + 
"            &lt;name&gt;ref-addresses&lt;/name&gt;" + 
"            &lt;description&gt;ref-addresses&lt;/description&gt;" + 
"            &lt;property name=\"driverClassName\" value=\"org.postgresql.Driver\"/&gt;" + 
"            &lt;property name=\"url\" value=\"jdbc:postgresql://exoua.dnsalias.net/portal\"/&gt;" + 
"            &lt;property name=\"username\" value=\"exoadmin\"/&gt;" + 
"            &lt;property name=\"password\" value=\"exo12321\"/&gt;" + 
"            &lt;property name=\"maxActive\" value=\"50\"/&gt;" + 
"            &lt;property name=\"maxIdle\" value=\"5\"/&gt;" + 
"            &lt;property name=\"initialSize\" value=\"5\"/&gt;" + 
"          &lt;/properties-param&gt;" + 
"        &lt;/init-params&gt;" + 
"    &lt;/component-plugin&gt;" + 
"  &lt;/external-component-plugins&gt;</programlisting>" + 
"			</example>" + 
"			<para>" + 
"				Configure repository workspaces with this one database. The <parameter>multi-db</parameter> parameter must be set as <literal>false</literal>." + 
"			</para>" + 
"			<para>" + 
"				For example (two workspaces <parameter>ws</parameter> - <literal>jdbcjcr</literal>, <parameter>ws1</parameter> - <literal>jdbcjcr</literal>):" + 
"			</para>" + 
"			<example id=\"exam-Reference_Guide-Single_database_Configuration-Example\">" + 
"				<title>Example</title>" + 
"				<programlisting language=\"XML\" role=\"XML\">" + 
"&lt;workspaces&gt;" + 
"  &lt;workspace name=\"ws\" auto-init-root-nodetype=\"nt:unstructured\"&gt;" + 
"    &lt;container class=\"org.exoplatform.services.jcr.impl.storage.jdbc.JDBCWorkspaceDataContainer\"&gt;" + 
"    &lt;properties&gt;" + 
"      &lt;property name=\"source-name\" value=\"jdbcjcr\"/&gt;" + 
"      &lt;property name=\"dialect\" value=\"pgsql\"/&gt;" + 
"      &lt;property name=\"multi-db\" value=\"false\"/&gt;" + 
"      &lt;property name=\"max-buffer-size\" value=\"200K\"/&gt;" + 
"      &lt;property name=\"swap-directory\" value=\"target/temp/swap/ws\"/&gt;" + 
"    &lt;/properties&gt;" + 
"    &lt;/container&gt;" + 
"    &lt;cache enabled=\"true\"&gt;" + 
"    &lt;properties&gt;" + 
"      &lt;property name=\"max-size\" value=\"10K\"/&gt;" + 
"      &lt;property name=\"live-time\" value=\"30m\"/&gt;" + 
"    &lt;/properties&gt;" + 
"    &lt;/cache&gt;" + 
"    &lt;query-handler class=\"org.exoplatform.services.jcr.impl.core.query.lucene.SearchIndex\"&gt;" + 
"    &lt;properties&gt;" + 
"      &lt;property name=\"index-dir\" value=\"../temp/index\"/&gt;" + 
"    &lt;/properties&gt;" + 
"    &lt;/query-handler&gt;" + 
"    &lt;lock-manager&gt;" + 
"    &lt;time-out&gt;15m&lt;/time-out&gt;" + 
"    &lt;persister class=\"org.exoplatform.services.jcr.impl.core.lock.FileSystemLockPersister\"&gt;" + 
"      &lt;properties&gt;" + 
"      &lt;property name=\"path\" value=\"target/temp/lock/ws\"/&gt;" + 
"      &lt;/properties&gt;" + 
"    &lt;/persister&gt;" + 
"    &lt;/lock-manager&gt;" + 
"  &lt;/workspace&gt;" + 
"  &lt;workspace name=\"ws1\" auto-init-root-nodetype=\"nt:unstructured\"&gt;" + 
"    &lt;container class=\"org.exoplatform.services.jcr.impl.storage.jdbc.JDBCWorkspaceDataContainer\"&gt;" + 
"    &lt;properties&gt;" + 
"      &lt;property name=\"source-name\" value=\"jdbcjcr\"/&gt;" + 
"      &lt;property name=\"dialect\" value=\"pgsql\"/&gt;" + 
"      &lt;property name=\"multi-db\" value=\"false\"/&gt;" + 
"      &lt;property name=\"max-buffer-size\" value=\"200K\"/&gt;" + 
"      &lt;property name=\"swap-directory\" value=\"target/temp/swap/ws1\"/&gt;" + 
"    &lt;/properties&gt;" + 
"    &lt;/container&gt;" + 
"    &lt;cache enabled=\"true\"&gt;" + 
"    &lt;properties&gt;" + 
"      &lt;property name=\"max-size\" value=\"10K\"/&gt;" + 
"      &lt;property name=\"live-time\" value=\"5m\"/&gt;" + 
"    &lt;/properties&gt;" + 
"    &lt;/cache&gt;" + 
"    &lt;lock-manager&gt;" + 
"    &lt;time-out&gt;15m&lt;/time-out&gt;" + 
"    &lt;persister class=\"org.exoplatform.services.jcr.impl.core.lock.FileSystemLockPersister\"&gt;" + 
"      &lt;properties&gt;" + 
"      &lt;property name=\"path\" value=\"target/temp/lock/ws1\"/&gt;" + 
"      &lt;/properties&gt;" + 
"    &lt;/persister&gt;" + 
"    &lt;/lock-manager&gt;" + 
"  &lt;/workspace&gt;" + 
"&lt;/workspaces&gt;</programlisting>" + 
"			</example>" + 
"			<para>" + 
"				This configures two persistent workspaces in one database (PostgreSQL)." + 
"			</para>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+19047-565985+%5BLatest%5D&amp;cf_build_id=19047-565985+05+Dec+2013+14%3A39+en-US+%5BLatest%5D&amp;comment=Title%3A+Single-database+Configuration%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"			<section id=\"Configuration_Without_DataSource\" remap=\"TID_19048\">" + 
"				<title>Configuration Without DataSource</title>" + 
"				<para>" + 
"					It is possible to configure the repository without binding <literal>javax.sql.DataSource</literal> in the JNDI service if you have a dedicated JDBC driver implementation with special features like XA transactions, statements/connections pooling etc:" + 
"				</para>" + 
"				<procedure>" + 
"					<title/>" + 
"					<step>" + 
"						<para>" + 
"							Remove the configuration in <literal>InitialContextInitializer</literal> for your database and configure a new one directly in the workspace container." + 
"						</para>" + 
"					</step>" + 
"					<step>" + 
"						<para>" + 
"							Remove parameter <parameter>source-name</parameter> and add next lines instead. Describe your values for a JDBC driver, database URL and username." + 
"						</para>" + 
"					</step>" + 
"				</procedure>" + 
"				<warning>" + 
"					<title>Connection Pooling</title>" + 
"					<para>" + 
"						Ensure the JDBC driver provides connection pooling. Connection pooling is strongly recommended for use with the JCR to prevent a database overload." + 
"					</para>" + 
"				</warning>" + 
"				<programlisting language=\"XML\" role=\"XML\">&lt;workspace name=\"ws\" auto-init-root-nodetype=\"nt:unstructured\"&gt;" + 
"  &lt;container class=\"org.exoplatform.services.jcr.impl.storage.jdbc.JDBCWorkspaceDataContainer\"&gt;" + 
"    &lt;properties&gt;" + 
"      &lt;property name=\"dialect\" value=\"hsqldb\"/&gt;" + 
"      &lt;property name=\"driverliteral\" value=\"org.hsqldb.jdbcDriver\"/&gt;" + 
"      &lt;property name=\"url\" value=\"jdbc:hsqldb:file:target/temp/data/portal\"/&gt;" + 
"      &lt;property name=\"username\" value=\"su\"/&gt;" + 
"      &lt;property name=\"password\" value=\"\"/&gt; " + 
"      ......</programlisting>" + 
"				<para role=\"RoleCreateBugPara\">" + 
"					<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+19048-565985+%5BLatest%5D&amp;cf_build_id=19048-565985+05+Dec+2013+14%3A39+en-US+%5BLatest%5D&amp;comment=Title%3A+Configuration+Without+DataSource%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"				</para>" + 
"			</section>" + 
"			<section id=\"Dynamic_Workspace_Creation\" remap=\"TID_19049\">" + 
"				<title>Dynamic Workspace Creation</title>" + 
"				<para>" + 
"					Workspaces can be added dynamically during runtime." + 
"				</para>" + 
"				<para>" + 
"					This can be performed in two steps:" + 
"				</para>" + 
"				<procedure>" + 
"					<title/>" + 
"					<step>" + 
"						<para>" + 
"							<literal>ManageableRepository.configWorkspace(WorkspaceEntry wsConfig)</literal>: Register a new configuration in RepositoryContainer and create a WorkspaceContainer." + 
"						</para>" + 
"					</step>" + 
"					<step>" + 
"						<para>" + 
"							<literal>ManageableRepository.createWorkspace(String workspaceName)</literal>: Creation a new workspace." + 
"						</para>" + 
"					</step>" + 
"				</procedure>" + 
"				<para role=\"RoleCreateBugPara\">" + 
"					<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+19049-565985+%5BLatest%5D&amp;cf_build_id=19049-565985+05+Dec+2013+14%3A39+en-US+%5BLatest%5D&amp;comment=Title%3A+Dynamic+Workspace+Creation%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"				</para>" + 
"			</section>" + 
"		</section>" + 
"		<section id=\"Simple_and_Complex_queries\" remap=\"TID_19050\">" + 
"			<title>Simple and Complex queries</title>" + 
"			<para>" + 
"				eXo JCR provides two ways to interact with the database;" + 
"			</para>" + 
"			<variablelist>" + 
"				<title/>" + 
"				<varlistentry>" + 
"					<term><literal>JDBCStorageConnection</literal></term>" + 
"					<listitem>" + 
"						<para>" + 
"							Which uses simple queries. Simple queries do not use sub queries, left or right joins. They are implemented in such a way as to support as many database dialects as possible." + 
"						</para>" + 
"					</listitem>" + 
"				</varlistentry>" + 
"				<varlistentry>" + 
"					<term><literal>CQJDBCStorageConection</literal></term>" + 
"					<listitem>" + 
"						<para>" + 
"							Which uses complex queries. Complex queries are optimized to reduce the number of database calls." + 
"						</para>" + 
"					</listitem>" + 
"				</varlistentry>" + 
"			</variablelist>" + 
"			<para>" + 
"				Simple queries will be used if you chose <literal>org.exoplatform.services.jcr.impl.storage.jdbc.JDBCWorkspaceDataContainer</literal>:" + 
"			</para>" + 
"			<programlisting language=\"XML\" role=\"XML\">&lt;workspaces&gt;" + 
"  &lt;workspace name=\"ws\" auto-init-root-nodetype=\"nt:unstructured\"&gt;" + 
"    &lt;container class=\"org.exoplatform.services.jcr.impl.storage.jdbc.JDBCWorkspaceDataContainer\"&gt;" + 
"    ..." + 
"  &lt;/workspace&gt;" + 
"&lt;/worksapces&gt;" + 
"</programlisting>" + 
"			<para>" + 
"				Complex queries will be used if you chose <literal>org.exoplatform.services.jcr.impl.storage.jdbc.optimisation.CQJDBCWorkspaceDataContainer</literal>:" + 
"			</para>" + 
"			<programlisting language=\"XML\" role=\"XML\">&lt;workspaces&gt;" + 
"  &lt;workspace name=\"ws\" auto-init-root-nodetype=\"nt:unstructured\"&gt;" + 
"    &lt;container class=\"org.exoplatform.services.jcr.impl.storage.jdbc.optimisation.CQJDBCWorkspaceDataContainer\"&gt;" + 
"    ..." + 
"  &lt;/workspace&gt;" + 
"&lt;/worksapces&gt;</programlisting>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+19050-565994+%5BLatest%5D&amp;cf_build_id=19050-565994+05+Dec+2013+14%3A46+en-US+%5BLatest%5D&amp;comment=Title%3A+Simple+and+Complex+queries%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"		<section id=\"Force_Query_Hints\" remap=\"TID_19051\">" + 
"			<title>Force Query Hints</title>" + 
"			<para>" + 
"				Some databases, such as Oracle and MySQL, support hints to increase query performance. The eXo JCR has separate Complex Query implementations for the Oracle database dialect, which uses query hints to increase performance for few important queries." + 
"			</para>" + 
"			<para>" + 
"				To enable this option, use the following configuration property:" + 
"			</para>" + 
"			<programlisting language=\"XML\" role=\"XML\">&lt;workspace name=\"ws\" auto-init-root-nodetype=\"nt:unstructured\"&gt;" + 
"  &lt;container class=\"org.exoplatform.services.jcr.impl.storage.jdbc.JDBCWorkspaceDataContainer\"&gt;" + 
"    &lt;properties&gt;" + 
"      &lt;property name=\"dialect\" value=\"oracle\"/&gt;" + 
"      &lt;property name=\"force.query.hints\" value=\"true\" /&gt;" + 
"      ......</programlisting>" + 
"			<para>" + 
"				Query hints are only used for Complex Queries with the Oracle dialect. For all other dialects this parameter is ignored." + 
"			</para>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+19051-565994+%5BLatest%5D&amp;cf_build_id=19051-565994+05+Dec+2013+14%3A46+en-US+%5BLatest%5D&amp;comment=Title%3A+Force+Query+Hints%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"		<section id=\"Notes_for_Microsoft_Windows_Users\" remap=\"TID_19052\">" + 
"			<title>Notes for Microsoft Windows Users</title>" + 
"			<para>" + 
"				The current configuration of eXo JCR uses <ulink url=\"http://commons.apache.org/dbcp/\">Apache DBCP</ulink> connection pool (<literal>org.apache.commons.dbcp.BasicDataSourceFactory</literal>)." + 
"			</para>" + 
"			<para>" + 
"				It is possible to set a high value for the <parameter>maxActive</parameter> parameter in the <filename>configuration.xml</filename> file. This creates a high use of TCP/IP ports from a client machine inside the pool (the JDBC driver, for example). As a result, the data container can throw exceptions like \"<emphasis>Address already in use</emphasis>\"." + 
"			</para>" + 
"			<para>" + 
"				To solve this problem, you must configure the client's machine networking software to use shorter timeouts for open TCP/IP ports." + 
"			</para>" + 
"			<para>" + 
"				This is done by editing two registry keys within the <parameter>HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Services\\Tcpip\\Parameters</parameter> node. Both of these keys are unset by default. To set the keys as required:" + 
"			</para>" + 
"			<procedure>" + 
"				<title/>" + 
"				<step>" + 
"					<para>" + 
"						Set the <parameter>MaxUserPort</parameter> registry key to <parameter>=dword:00001b58</parameter>. This sets the maximum of open ports to 7000 or higher (the default is 5000)." + 
"					</para>" + 
"				</step>" + 
"				<step>" + 
"					<para>" + 
"						Set <parameter>TcpTimedWaitDelay</parameter> to <parameter>=dword:0000001e</parameter>. This sets <parameter>TIME_WAIT</parameter> parameter to 30 seconds (the default is 240)." + 
"					</para>" + 
"				</step>" + 
"			</procedure>" + 
"			<example id=\"exam-Reference_Guide-Notes_for_Microsoft_Windows_users-Sample_Registry_File\">" + 
"				<title>Sample Registry File</title>" + 
"				<programlisting>Windows Registry Editor Version 5.00" + 
"" + 
"[HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Services\\Tcpip\\Parameters]" + 
"\"MaxUserPort\"=dword:00001b58" + 
"\"TcpTimedWaitDelay\"=dword:0000001e</programlisting>" + 
"			</example>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+19052-565994+%5BLatest%5D&amp;cf_build_id=19052-565994+05+Dec+2013+14%3A46+en-US+%5BLatest%5D&amp;comment=Title%3A+Notes+for+Microsoft+Windows+Users%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"	</section>" + 
"	<section id=\"sect-External_Value_Storages\">" + 
"		<title>External Value Storages</title>" + 
"		<para>" + 
"			JCR values are stored in the Workspace Data container by default. The eXo JCR offers an additional option of storing JCR values separately from the Workspace Data container which can help keep Binary Large Objects (BLOBs) separate." + 
"		</para>" + 
"		<!--     <para>" + 
"            Value storage configuration is a part of the repository configuration. Refer to <xref linkend=\"sect-Reference_Guide-JCR_configuration-Example_of_the_portal_system_workspace\" /> for more details." + 
"        </para>     -->" + 
"		<para>" + 
"			Tree-based storage is recommended in most cases." + 
"		</para>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+19053-565994+%5BLatest%5D&amp;cf_build_id=19053-565994+05+Dec+2013+14%3A46+en-US+%5BLatest%5D&amp;comment=Title%3A+External+Value+Storages%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"		<section id=\"Tree_File_Value_Storage\" remap=\"TID_19054\">" + 
"			<title>Tree File Value Storage</title>" + 
"			<para>" + 
"				Tree File Value Storage holds values in tree-like file system files. <property>Path</property> property points to the root directory to store the files." + 
"			</para>" + 
"			<para>" + 
"				This is a recommended type of external storage because it can contain large amount of files limited only by disk/volume free space." + 
"			</para>" + 
"			<para>" + 
"				However, using Tree File Value Storage can result in a higher time on value deletion, due to the removal of unused tree-nodes." + 
"			</para>" + 
"			<example>" + 
"				<title>Tree File Value Storage Configuration</title>" + 
"				<programlisting language=\"XML\" role=\"XML\">     &lt;workspace name=\"backup\"&gt;" + 
"      &lt;container class=\"org.exoplatform.services.jcr.impl.storage.jdbc.optimisation.CQJDBCWorkspaceDataContainer\"&gt;" + 
"       &lt;properties&gt;" + 
"        &lt;property name=\"source-name\" value=\"jdbcjcr\" /&gt;" + 
"        &lt;property name=\"multi-db\" value=\"false\" /&gt;" + 
"        &lt;property name=\"update-storage\" value=\"false\" /&gt;" + 
"        &lt;property name=\"max-buffer-size\" value=\"200k\" /&gt;" + 
"        &lt;property name=\"swap-directory\" value=\"../temp/swap/backup\" /&gt;" + 
"       &lt;/properties&gt;" + 
"       &lt;value-storages&gt;" + 
"        &lt;value-storage id=\"draft\" class=\"org.exoplatform.services.jcr.impl.storage.value.fs.TreeFileValueStorage\"&gt;" + 
"         &lt;properties&gt;" + 
"          &lt;property name=\"path\" value=\"../temp/values/backup\" /&gt;" + 
"         &lt;/properties&gt;" + 
"         &lt;filters&gt;" + 
"          &lt;filter property-type=\"Binary\" /&gt;" + 
"         &lt;/filters&gt;" + 
"        &lt;/value-storage&gt;" + 
"       &lt;/value-storages&gt;" + 
"      &lt;/container&gt;" + 
"      &lt;initializer class=\"org.exoplatform.services.jcr.impl.core.ScratchWorkspaceInitializer\"&gt;" + 
"       &lt;properties&gt;" + 
"        &lt;property name=\"root-nodetype\" value=\"nt:unstructured\" /&gt;" + 
"       &lt;/properties&gt;" + 
"      &lt;/initializer&gt;" + 
"      &lt;cache enabled=\"true\" class=\"org.exoplatform.services.jcr.impl.dataflow.persistent.LinkedWorkspaceStorageCacheImpl\"&gt;" + 
"       &lt;properties&gt;" + 
"        &lt;property name=\"max-size\" value=\"10k\" /&gt;" + 
"        &lt;property name=\"live-time\" value=\"1h\" /&gt;" + 
"       &lt;/properties&gt;" + 
"      &lt;/cache&gt;" + 
"      &lt;query-handler class=\"org.exoplatform.services.jcr.impl.core.query.lucene.SearchIndex\"&gt;" + 
"       &lt;properties&gt;" + 
"        &lt;property name=\"index-dir\" value=\"../temp/jcrlucenedb/backup\" /&gt;" + 
"       &lt;/properties&gt;" + 
"      &lt;/query-handler&gt;" + 
"     &lt;/workspace&gt;" + 
"    &lt;/workspaces&gt;" + 
"   &lt;/repository&gt;" + 
"  &lt;/repositories&gt;" + 
"&lt;/repository-service&gt;" + 
"</programlisting>" + 
"				<para>" + 
"					Comment #1: The <emphasis role=\"bold\">id</emphasis> is the value storage unique identifier, used for linking with properties stored in a workspace container." + 
"				</para>" + 
"				<para>" + 
"					Comment #2: the <emphasis role=\"bold\">path</emphasis> is a location where value files will be stored." + 
"				</para>" + 
"			</example>" + 
"			<para>" + 
"				Each file value storage can have the <function>filters</function> for incoming values. A filter can match values by <property>property-type</property>, <property>property-name</property>, <property>ancestor-path</property>. It can also match the size of values stored (<property>min-value-size</property>) in bytes." + 
"			</para>" + 
"			<para>" + 
"				In the previous example a filter with <property>property-type</property> and <property>min-value-size</property> has been used. This results in storage for binary values with size greater of 1MB." + 
"			</para>" + 
"			<para>" + 
"				It is recommended that properties with large values are stored in file value storage only." + 
"			</para>" + 
"			<para>" + 
"				This example shows a value storage with different locations for large files (<property>min-value-size</property> a 20Mb-sized filter)." + 
"			</para>" + 
"			<para>" + 
"				A value storage uses ORed logic in the process of filter selection. This means the first filter in the list will be called first and if it is not matched the next will be called, and so on." + 
"			</para>" + 
"			<para>" + 
"				In this example a value matches the 20MB filter <property>min-value-size</property> and will be stored in the path \"<literal>data/20Mvalues</literal>\". All other filters will be stored in \"<literal>data/values</literal>\"." + 
"			</para>" + 
"			<programlisting language=\"XML\" role=\"XML\">&lt;value-storages&gt;" + 
"  &lt;value-storage id=\"Storage #1\" class=\"org.exoplatform.services.jcr.impl.storage.value.fs.TreeFileValueStorage\"&gt;" + 
"    &lt;properties&gt;" + 
"      &lt;property name=\"path\" value=\"data/20Mvalues\"/&gt;" + 
"    &lt;/properties&gt;" + 
"    &lt;filters&gt;" + 
"      &lt;filter property-type=\"Binary\" min-value-size=\"20M\"/&gt;" + 
"    &lt;/filters&gt;" + 
"  &lt;value-storage&gt;" + 
"  &lt;value-storage id=\"Storage #2\" class=\"org.exoplatform.services.jcr.impl.storage.value.fs.TreeFileValueStorage\"&gt;" + 
"    &lt;properties&gt;" + 
"      &lt;property name=\"path\" value=\"data/values\"/&gt;" + 
"    &lt;/properties&gt;" + 
"    &lt;filters&gt;" + 
"      &lt;filter property-type=\"Binary\" min-value-size=\"1M\"/&gt;" + 
"    &lt;/filters&gt;" + 
"  &lt;value-storage&gt;" + 
"&lt;value-storages&gt;" + 
"</programlisting>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+19054-565994+%5BLatest%5D&amp;cf_build_id=19054-565994+05+Dec+2013+14%3A46+en-US+%5BLatest%5D&amp;comment=Title%3A+Tree+File+Value+Storage%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"		<section id=\"Disabling_Value_Storage\" remap=\"TID_19055\">" + 
"			<title>Disabling Value Storage</title>" + 
"			<para>" + 
"				The JCR allows you to disable value storage by adding the following property into its configuration." + 
"			</para>" + 
"			<programlisting language=\"XML\">&lt;property name=\"enabled\" value=\"false\" /&gt;</programlisting>" + 
"			<warning>" + 
"				<title>Warning</title>" + 
"				<para>" + 
"					It is recommended that this functionality be used for internal and testing purpose only, and with caution, as all stored values will be inaccessible." + 
"				</para>" + 
"			</warning>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+19055-565994+%5BLatest%5D&amp;cf_build_id=19055-565994+05+Dec+2013+14%3A46+en-US+%5BLatest%5D&amp;comment=Title%3A+Disabling+Value+Storage%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"	</section>" + 
"	<section id=\"Workspace_Data_Container\" remap=\"TID_19056\">" + 
"		<title>Workspace Data Container</title>" + 
"		<!-- Source: http://docs.jboss.org/exojcr/1.15.4-GA/developer/en-US/html_single/#JCR.WorkspacePersistenceStorage -->" + 
"		<para>" + 
"			Each Workspace of the JCR has its own persistent storage to hold that workspace's items data. The eXo JCR can be configured so that it can use one or more workspaces that are logical units of the repository content." + 
"		</para>" + 
"		<para>" + 
"			The physical data storage mechanism is configured using mandatory &lt;container&gt; element. The type of container is described in the attribute <parameter>class</parameter> by specifying the fully qualified name of the <classname>org.exoplatform.services.jcr.storage</classname> subclass." + 
"		</para>" + 
"		<example>" + 
"			<title>Physical Data Storage Configuration</title>" + 
"			<programlisting language=\"XML\"><![CDATA[<container class=\"org.exoplatform.services.jcr.impl.storage.jdbc.optimisation.CQJDBCWorkspaceDataContainer\">" + 
"  <properties>" + 
"    <property name=\"source-name\" value=\"jdbcjcr1\"/>" + 
"    <property name=\"dialect\" value=\"hsqldb\"/>" + 
"    <property name=\"multi-db\" value=\"true\"/>" + 
"    <property name=\"max-buffer-size\" value=\"200K\"/>" + 
"    <property name=\"swap-directory\" value=\"target/temp/swap/ws\"/>" + 
"    <property name=\"lazy-node-iterator-page-size\" value=\"50\"/>" + 
"    <property name=\"acl-bloomfilter-false-positive-probability\" value=\"0.1d\"/>" + 
"    <property name=\"acl-bloomfilter-elements-number\" value=\"1000000\"/>" + 
"    <property name=\"check-sns-new-connection\" value=\"false\"/>" + 
"    <property name=\"batch-size\" value=\"1000\"/>" + 
"  </properties>]]></programlisting>" + 
"		</example>" + 
"		<variablelist>" + 
"			<title>Standard Workspace Data Container Properties</title>" + 
"			<varlistentry>" + 
"				<term>max-buffer-size</term>" + 
"				<listitem>" + 
"					<para>" + 
"						Default value is <code>200K</code>." + 
"					</para>" + 
"					<para>" + 
"						Specifies the maximum buffer size for the container. If a value size is greater than this setting, it is spooled to a temporary file as defined in &lt;swap-directory&gt;." + 
"					</para>" + 
"				</listitem>" + 
"			</varlistentry>" + 
"			<varlistentry>" + 
"				<term>swap-directory</term>" + 
"				<listitem>" + 
"					<para>" + 
"						Default value is <code>java.io.tmpdir</code>." + 
"					</para>" + 
"					<para>" + 
"						Specifies the location where the value will be spooled if no value storage is configured but a <literal>max-buffer-size</literal> is exceeded." + 
"					</para>" + 
"				</listitem>" + 
"			</varlistentry>" + 
"			<varlistentry>" + 
"				<term>lazy-node-iterator-page-size</term>" + 
"				<listitem>" + 
"					<para>" + 
"						Default value is <code>100</code>." + 
"					</para>" + 
"					<para>" + 
"						Specifies the page size and the number of nodes that are retrieved from persistent storage at once." + 
"					</para>" + 
"				</listitem>" + 
"			</varlistentry>" + 
"			<varlistentry>" + 
"				<term>acl-bloomfilter-false-positive-probability</term>" + 
"				<listitem>" + 
"					<para>" + 
"						Default value is <code>0.1d</code>." + 
"					</para>" + 
"					<para>" + 
"						Specifies the ACL Bloom-filter desired false positive probability. Range [0..1]." + 
"					</para>" + 
"				</listitem>" + 
"			</varlistentry>" + 
"			<varlistentry>" + 
"				<term>acl-bloomfilter-elements-number</term>" + 
"				<listitem>" + 
"					<para>" + 
"						Default value is <code>1000000</code>." + 
"					</para>" + 
"					<para>" + 
"						Specifies the expected number of ACL-elements in the Bloom-filter." + 
"					</para>" + 
"					<para>" + 
"						<note>" + 
"							<para>" + 
"								Bloom filters are used to avoid reading nodes that definitely do not have ACL. Infinispan is the only cache implementation that currently supports Bloom filters. See <ulink url=\"http://en.wikipedia.org/wiki/Bloom_filter\"/> for an overview of what bloom filters are." + 
"							</para>" + 
"						</note>" + 
"					</para>" + 
"				</listitem>" + 
"			</varlistentry>" + 
"			<varlistentry>" + 
"				<term>check-sns-new-connection</term>" + 
"				<listitem>" + 
"					<para>" + 
"						Default value is <code>false</code>." + 
"					</para>" + 
"					<para>" + 
"						Specifies whether to create a connection for checking if an older same-name sibling exists." + 
"					</para>" + 
"				</listitem>" + 
"			</varlistentry>" + 
"			<varlistentry>" + 
"				<term>max-descendant-nodes-allowed-on-move</term>" + 
"				<listitem>" + 
"					<para>" + 
"						Default value is <code>100</code>." + 
"					</para>" + 
"					<para>" + 
"						Specifies the maximum amount of descendant nodes allowed before determining whether descendant items are included into the changes log, allowing for the best possible performance regardless of the total amount of sub-nodes." + 
"					</para>" + 
"					<para>" + 
"						This parameter is only used when <code>trigger-events-for-descendants-on-move</code> or <code>trigger-events-for-descendants-on-rename</code> is not set." + 
"					</para>" + 
"				</listitem>" + 
"			</varlistentry>" + 
"			<varlistentry>" + 
"				<term>trigger-events-for-descendants-on-rename</term>" + 
"				<listitem>" + 
"					<para>" + 
"						Specifies whether each descendant item must be included in the changes log in case of a rename." + 
"					</para>" + 
"					<para>" + 
"						When this parameter is not set, the application will rely on the <code>max-descendant-nodes-allowed-on-move</code> parameter to handle whether or not descendant items are added to the changes log. If this parameter is not set but the parameter <code>trigger-events-for-descendants-on-move</code> is set, it will have the same value." + 
"					</para>" + 
"					<para>" + 
"						If set to <code>false</code>, performance on rename operations will increase on source parent nodes with a large number of sub-nodes but will decrease on parent nodes with a small number of sub-nodes." + 
"					</para>" + 
"					<para>" + 
"						If set to <code>true</code>, performance will decrease for a large number of sub-nodes and increase for a small number of sub-nodes." + 
"					</para>" + 
"				</listitem>" + 
"			</varlistentry>" + 
"			<varlistentry>" + 
"				<term>trigger-events-for-descendants-on-move</term>" + 
"				<listitem>" + 
"					<para>" + 
"						When this parameter is not set, the application will rely on the <code>max-descendant-nodes-allowed-on-move</code> parameter to handle whether or not descendant items are added to the changes log." + 
"					</para>" + 
"					<para>" + 
"						Specifies whether each descendant item must be included in the changes log in case of a move." + 
"					</para>" + 
"					<para>" + 
"						If set to <code>false</code>, performance on move operations will increase on source parent nodes with a large number of sub-nodes but will decrease on parent nodes with a small number of sub-nodes." + 
"					</para>" + 
"					<para>" + 
"						If set to <code>true</code>, performance will decrease for a large number of sub-nodes and increase for a small number of sub-nodes." + 
"					</para>" + 
"				</listitem>" + 
"			</varlistentry>" + 
"		</variablelist>" + 
"		<para>" + 
"			The eXo JCR has a JDBC-based, relational database, production ready <emphasis role=\"bold\">Workspace Data Container</emphasis>." + 
"		</para>" + 
"		<variablelist>" + 
"			<title>JDBC Workspace Data Container Properties</title>" + 
"			<varlistentry>" + 
"				<term>source-name</term>" + 
"				<listitem>" + 
"					<para>" + 
"						Mandatory parameter, which specifies the JDBC data source name (registered in JDNI by InitialContextInitializer)." + 
"					</para>" + 
"				</listitem>" + 
"			</varlistentry>" + 
"			<varlistentry>" + 
"				<term>dialect</term>" + 
"				<listitem>" + 
"					<para>" + 
"						Default value is <code>auto</code>." + 
"					</para>" + 
"					<remark>" + 
"						BZ#976332 - NEEDINFO - There were more dialects in the community docs, so I included them. I have a feeling that some are not supported in production environments. Any remarks about this" + 
"					</remark>" + 
"					<para>" + 
"						The database dialect, which can be one of the following values: \"auto\", \"hsqldb\", \"h2\", \"mysql\", \"mysql-myisam\", \"mysql-utf8\", \"mysql-myisam-utf8\", \"pgsql\", \"pgsql-scs\", \"oracle\", \"oracle-oci\", \"mssql\", \"sybase\", \"derby\", \"db2\" ,\"db2-mys\", \"db2v8\" hsqldb, mysql, mysql-utf8, pgsql, oracle, oracle-oci," + 
"					</para>" + 
"				</listitem>" + 
"			</varlistentry>" + 
"			<varlistentry>" + 
"				<term>db-structure-type</term>" + 
"				<listitem>" + 
"					<note>" + 
"						<para>" + 
"							This parameter supersedes multi-db" + 
"						</para>" + 
"					</note>" + 
"					<para>" + 
"						Mandatory parameter, which specifies the structure of the database container. Supported values include: \"\"isolated\", \"multi\", and \"single\"." + 
"					</para>" + 
"				</listitem>" + 
"			</varlistentry>" + 
"			<varlistentry>" + 
"				<term>db-tablename-suffix</term>" + 
"				<listitem>" + 
"					<para>" + 
"						Specifies the workspace name appended to tables. If db-structure-type is set to <code>isolated</code>, tables used by the repository service have the following values:" + 
"					</para>" + 
"					<itemizedlist>" + 
"						<listitem>" + 
"							<para>" + 
"								<code>JCR_I${db-tablename-suffix}</code> for items." + 
"							</para>" + 
"						</listitem>" + 
"						<listitem>" + 
"							<para>" + 
"								<code>JCR_V${db-tablename-suffix}</code> for values." + 
"							</para>" + 
"						</listitem>" + 
"						<listitem>" + 
"							<para>" + 
"								<code>JCR_R${db-tablename-suffix}</code> for references." + 
"							</para>" + 
"						</listitem>" + 
"					</itemizedlist>" + 
"				</listitem>" + 
"			</varlistentry>" + 
"		</variablelist>" + 
"		<para>" + 
"			Workspace Data Container <emphasis>may</emphasis> support external storages for <literal>javax.jcr.Value</literal> (for example, BLOB values) using the optional element <literal>value-storages</literal>." + 
"		</para>" + 
"		<para>" + 
"			The Data Container will attempt to read or write a value using the underlying value storage plug-in if the filter criteria matches the current property." + 
"		</para>" + 
"		<example>" + 
"			<title>External Value Storage Configuration</title>" + 
"			<programlisting language=\"XML\"><![CDATA[<value-storages>" + 
"  <value-storage id=\"Storage #1\" class=\"org.exoplatform.services.jcr.impl.storage.value.fs.TreeFileValueStorage\">" + 
"    <properties>" + 
"      <property name=\"path\" value=\"data/values\"/>" + 
"    </properties>" + 
"    <filters>" + 
"     <filter property-type=\"Binary\" min-value-size=\"1M\"/><!-- Values greater than 1Mbyte -->" + 
"    </filters>" + 
"<!-- content removed for readability -->" + 
"</value-storages>]]></programlisting>" + 
"		</example>" + 
"		<para>" + 
"			<literal>value-storage</literal> is the subclass of <literal>org.exoplatform.services.jcr.storage.value.ValueStoragePlugin</literal> and <literal>properties</literal> are optional plug-in specific parameters." + 
"		</para>" + 
"		<para>" + 
"			<literal>filters</literal>: Each file value storage can have the filter(s) for incoming values. If there are several filter criteria, they all have to match (AND-Condition)." + 
"		</para>" + 
"		<para>" + 
"			A filter can match values by property type (property-type), property name (property-name), ancestor path (ancestor-path) and/or the size of values stored (min-value-size, e.g. 1M, 4.2G, 100 (bytes))." + 
"		</para>" + 
"		<para>" + 
"			In a code sample, we use a filter with property-type and min-value-size only. That means that the storage is only for binary values whose size is greater than 1Mbyte." + 
"		</para>" + 
"		<para>" + 
"			It is recommended that you store properties with large values in a file value storage only." + 
"		</para>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+19056-565994+%5BLatest%5D&amp;cf_build_id=19056-565994+05+Dec+2013+14%3A46+en-US+%5BLatest%5D&amp;comment=Title%3A+Workspace+Data+Container%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"	</section>" + 
"	<section id=\"sect-Configuring_the_Cluster\">" + 
"		<title>Configuring the Cluster</title>" + 
"		<remark>" + 
"			DOCS NOTE - QE NOTE - jmorgan -This section could be a candidate for the Admin and Config Guide, JCR section (which would need to be newly added)." + 
"		</remark>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+19057-565994+%5BLatest%5D&amp;cf_build_id=19057-565994+05+Dec+2013+14%3A46+en-US+%5BLatest%5D&amp;comment=Title%3A+Configuring+the+Cluster%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"		<section id=\"sect-Launching_Cluster\">" + 
"			<title>Launching Cluster</title>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+19058-565994+%5BLatest%5D&amp;cf_build_id=19058-565994+05+Dec+2013+14%3A46+en-US+%5BLatest%5D&amp;comment=Title%3A+Launching+Cluster%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"			<section id=\"Configuring_JCR_to_use_external_configuration\" remap=\"TID_19059\">" + 
"				<title>Configuring JCR to use external configuration</title>" + 
"				<procedure>" + 
"					<step>" + 
"						<para>" + 
"							Create a new configuration file (for example, <filename>exo-jcr-configuration.xml</filename>), according to the formatting in <xref linkend=\"exam-External_Configuration\"/>" + 
"						</para>" + 
"						<example id=\"exam-External_Configuration\">" + 
"							<title>External Configuration</title>" + 
"							<programlisting language=\"XML\">&lt;repository-service default-repository=\"repository1\"&gt;" + 
"   &lt;repositories&gt;" + 
"      &lt;repository name=\"repository1\" system-workspace=\"ws1\" default-workspace=\"ws1\"&gt;" + 
"         &lt;security-domain&gt;exo-domain&lt;/security-domain&gt;" + 
"         &lt;access-control&gt;optional&lt;/access-control&gt;" + 
"         &lt;authentication-policy&gt;org.exoplatform.services.jcr.impl.core.access.JAASAuthenticator&lt;/authentication-policy&gt;" + 
"         &lt;workspaces&gt;" + 
"            &lt;workspace name=\"ws1\"&gt;" + 
"               &lt;container class=\"org.exoplatform.services.jcr.impl.storage.jdbc.optimisation.CQJDBCWorkspaceDataContainer\"&gt;" + 
"                  &lt;properties&gt;" + 
"                     &lt;property name=\"source-name\" value=\"jdbcjcr\" /&gt;" + 
"                     &lt;property name=\"dialect\" value=\"oracle\" /&gt;" + 
"                     &lt;property name=\"multi-db\" value=\"false\" /&gt;" + 
"                     &lt;property name=\"update-storage\" value=\"false\" /&gt;" + 
"                     &lt;property name=\"max-buffer-size\" value=\"200k\" /&gt;" + 
"                     &lt;property name=\"swap-directory\" value=\"../temp/swap/production\" /&gt;" + 
"                  &lt;/properties&gt;" + 
"                  &lt;value-storages&gt;" + 
"                  &lt;!-- Comment #1 --&gt;" + 
"                  &lt;/value-storages&gt;" + 
"               &lt;/container&gt;" + 
"               &lt;initializer class=\"org.exoplatform.services.jcr.impl.core.ScratchWorkspaceInitializer\"&gt;" + 
"                  &lt;properties&gt;" + 
"                     &lt;property name=\"root-nodetype\" value=\"nt:unstructured\" /&gt;" + 
"                  &lt;/properties&gt;" + 
"               &lt;/initializer&gt;" + 
"               &lt;cache enabled=\"true\" class=\"org.exoplatform.services.jcr.impl.dataflow.persistent.jbosscache.JBossCacheWorkspaceStorageCache\"&gt;" + 
"               &lt;!-- Comment #2 --&gt;     " + 
"               &lt;/cache&gt;" + 
"               &lt;query-handler class=\"org.exoplatform.services.jcr.impl.core.query.lucene.SearchIndex\"&gt;" + 
"               &lt;!-- Comment #3 --&gt;" + 
"               &lt;/query-handler&gt;" + 
"               &lt;lock-manager class=\"org.exoplatform.services.jcr.impl.core.lock.jbosscache.CacheableLockManagerImpl\"&gt;" + 
"               &lt;!-- Comment #4 --&gt; " + 
"               &lt;/lock-manager&gt;" + 
"            &lt;/workspace&gt;" + 
"            &lt;workspace name=\"ws2\"&gt;" + 
"                        ..." + 
"            &lt;/workspace&gt;" + 
"            &lt;workspace name=\"wsN\"&gt;" + 
"                        ..." + 
"            &lt;/workspace&gt;" + 
"         &lt;/workspaces&gt;" + 
"      &lt;/repository&gt;" + 
"   &lt;/repositories&gt;" + 
"&lt;/repository-service&gt;</programlisting>" + 
"							<para>" + 
"								Comment #1: See the Value Storage example in <xref linkend=\"Configuration_Guidelines\"/>." + 
"							</para>" + 
"							<para>" + 
"								Comment #2: See the Cache Configuration example in <xref linkend=\"Configuration_Guidelines\"/>." + 
"							</para>" + 
"							<para>" + 
"								Comment #3: See the Indexer Configuration example in <xref linkend=\"Configuration_Guidelines\"/>." + 
"							</para>" + 
"							<para>" + 
"								Comment #4: See the Lock Manager Configuration example in <xref linkend=\"Configuration_Guidelines\"/>." + 
"							</para>" + 
"						</example>" + 
"					</step>" + 
"					<step>" + 
"						<para>" + 
"							Update the <parameter>RepositoryServiceConfiguration</parameter> configuration in the <filename>exo-configuration.xml</filename> to reference your file." + 
"						</para>" + 
"						<programlisting language=\"XML\">&lt;component&gt;" + 
"   &lt;key&gt;org.exoplatform.services.jcr.config.RepositoryServiceConfiguration&lt;/key&gt;" + 
"   &lt;type&gt;org.exoplatform.services.jcr.impl.config.RepositoryServiceConfigurationImpl&lt;/type&gt;" + 
"   &lt;init-params&gt;" + 
"      &lt;value-param&gt;" + 
"         &lt;name&gt;conf-path&lt;/name&gt;" + 
"         &lt;description&gt;JCR configuration file&lt;/description&gt;" + 
"         &lt;value&gt;exo-jcr-configuration.xml&lt;/value&gt;" + 
"      &lt;/value-param&gt;" + 
"   &lt;/init-params&gt;" + 
"&lt;/component&gt;</programlisting>" + 
"					</step>" + 
"				</procedure>" + 
"				<para role=\"RoleCreateBugPara\">" + 
"					<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+19059-565994+%5BLatest%5D&amp;cf_build_id=19059-565994+05+Dec+2013+14%3A46+en-US+%5BLatest%5D&amp;comment=Title%3A+Configuring+JCR+to+use+external+configuration%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"				</para>" + 
"			</section>" + 
"		</section>" + 
"		<section id=\"sect-Requirements\">" + 
"			<title>Requirements</title>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+19060-565994+%5BLatest%5D&amp;cf_build_id=19060-565994+05+Dec+2013+14%3A46+en-US+%5BLatest%5D&amp;comment=Title%3A+Requirements%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"			<section id=\"Environment_requirements\" remap=\"TID_19061\">" + 
"				<title>Environment requirements</title>" + 
"				<itemizedlist>" + 
"					<listitem>" + 
"						<para>" + 
"							Every node of the cluster <emphasis role=\"bold\">must</emphasis> have the same mounted Network File System (<abbrev>NFS</abbrev>) with the read and write permissions on it." + 
"						</para>" + 
"					</listitem>" + 
"					<listitem>" + 
"						<para>" + 
"							Every node of cluster <emphasis role=\"bold\">must</emphasis> use the same database." + 
"						</para>" + 
"					</listitem>" + 
"					<listitem>" + 
"						<para>" + 
"							The same Clusters on different nodes <emphasis role=\"bold\">must</emphasis> have the same names." + 
"						</para>" + 
"						<example id=\"exam-Reference_Guide-Environment_requirements-Example\">" + 
"							<title>Example</title>" + 
"							<para>" + 
"								If the <emphasis>Indexer</emphasis> cluster in the <emphasis>production</emphasis> workspace on the first node is named <literal>production_indexer_cluster</literal>, then <emphasis>indexer</emphasis> clusters in the <emphasis>production</emphasis> workspace on all other nodes <emphasis role=\"bold\">must</emphasis> also be named <literal>production_indexer_cluster</literal>." + 
"							</para>" + 
"						</example>" + 
"					</listitem>" + 
"				</itemizedlist>" + 
"				<para role=\"RoleCreateBugPara\">" + 
"					<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+19061-565994+%5BLatest%5D&amp;cf_build_id=19061-565994+05+Dec+2013+14%3A46+en-US+%5BLatest%5D&amp;comment=Title%3A+Environment+requirements%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"				</para>" + 
"			</section>" + 
"			<section id=\"Configuration_Guidelines\" remap=\"TID_19062\">" + 
"				<title>Configuration Guidelines</title>" + 
"				<para>" + 
"					The configuration of every workspace in the repository must contain the following elements:" + 
"				</para>" + 
"				<example id=\"exam-Value_Storage_Configuration\">" + 
"					<title>Value Storage configuration</title>" + 
"					<programlisting language=\"XML\" role=\"XML\">&lt;value-storages&gt;" + 
"   &lt;value-storage id=\"system\" class=\"org.exoplatform.services.jcr.impl.storage.value.fs.TreeFileValueStorage\"&gt;" + 
"      &lt;properties&gt;" + 
"         &lt;property name=\"path\" value=\"/mnt/tornado/temp/values/production\" /&gt;    &lt;!--path within NFS where ValueStorage will hold it's data--&gt;" + 
"      &lt;/properties&gt;" + 
"      &lt;filters&gt;" + 
"         &lt;filter property-type=\"Binary\" /&gt;" + 
"      &lt;/filters&gt;" + 
"   &lt;/value-storage&gt;" + 
"&lt;/value-storages&gt;</programlisting>" + 
"				</example>" + 
"				<example id=\"exam-Cache_Configuration\">" + 
"					<title>Cache Configuration</title>" + 
"					<programlisting language=\"XML\" role=\"XML\">&lt;cache enabled=\"true\" class=\"org.exoplatform.services.jcr.impl.dataflow.persistent.jbosscache.JBossCacheWorkspaceStorageCache\"&gt;" + 
"   &lt;properties&gt;" + 
"      &lt;property name=\"jbosscache-configuration\" value=\"jar:/conf/portal/test-jbosscache-data.xml\" /&gt;     &lt;!--    path to JBoss Cache configuration for data storage --&gt;" + 
"      &lt;property name=\"jgroups-configuration\" value=\"jar:/conf/portal/udp-mux.xml\" /&gt;                     &lt;!--    path to JGroups configuration --&gt;" + 
"      &lt;property name=\"jbosscache-cluster-name\" value=\"JCR_Cluster_cache_production\" /&gt;                   &lt;!--    JBoss Cache data storage cluster name --&gt;" + 
"      &lt;property name=\"jgroups-multiplexer-stack\" value=\"true\" /&gt;" + 
"   &lt;/properties&gt;" + 
"&lt;/cache&gt;</programlisting>" + 
"				</example>" + 
"				<example id=\"exam-Indexer_Configuration\">" + 
"					<title>Indexer Configuration</title>" + 
"					<programlisting language=\"XML\" role=\"XML\">&lt;query-handler class=\"org.exoplatform.services.jcr.impl.core.query.lucene.SearchIndex\"&gt;" + 
"   &lt;properties&gt;" + 
"      &lt;property name=\"changesfilter-class\" value=\"org.exoplatform.services.jcr.impl.core.query.jbosscache.JBossCacheIndexChangesFilter\" /&gt;" + 
"      &lt;property name=\"index-dir\" value=\"/mnt/tornado/temp/jcrlucenedb/production\" /&gt;                       &lt;!--    path within NFS where ValueStorage will hold it's data --&gt;" + 
"      &lt;property name=\"jbosscache-configuration\" value=\"jar:/conf/portal/test-jbosscache-indexer.xml\" /&gt;    &lt;!--    path to JBoss Cache configuration for indexer --&gt;" + 
"      &lt;property name=\"jgroups-configuration\" value=\"jar:/conf/portal/udp-mux.xml\" /&gt;                       &lt;!--    path to JGroups configuration --&gt;" + 
"      &lt;property name=\"jbosscache-cluster-name\" value=\"JCR_Cluster_indexer_production\" /&gt;                   &lt;!--    JBoss Cache indexer cluster name --&gt;" + 
"      &lt;property name=\"jgroups-multiplexer-stack\" value=\"true\" /&gt;" + 
"   &lt;/properties&gt;" + 
"&lt;/query-handler&gt;</programlisting>" + 
"				</example>" + 
"				<example id=\"exam-Lock_Manager_Configuration\">" + 
"					<title>Lock Manager Configuration</title>" + 
"					<programlisting language=\"XML\" role=\"XML\">&lt;lock-manager class=\"org.exoplatform.services.jcr.impl.core.lock.jbosscache.CacheableLockManagerImpl\"&gt;" + 
"   &lt;properties&gt;" + 
"      &lt;property name=\"time-out\" value=\"15m\" /&gt;" + 
"      &lt;property name=\"jbosscache-configuration\" value=\"jar:/conf/portal/test-jbosscache-lock.xml\" /&gt;       &lt;!--    path to JBoss Cache configuration for lock manager --&gt;" + 
"      &lt;property name=\"jgroups-configuration\" value=\"jar:/conf/portal/udp-mux.xml\" /&gt;                       &lt;!--    path to JGroups configuration --&gt;" + 
"      &lt;property name=\"jgroups-multiplexer-stack\" value=\"true\" /&gt;" + 
"      &lt;property name=\"jbosscache-cluster-name\" value=\"JCR_Cluster_lock_production\" /&gt;                      &lt;!--    JBoss Cache locks cluster name --&gt;" + 
"                     " + 
"      &lt;property name=\"jbosscache-cl-cache.jdbc.table.name\" value=\"jcrlocks_production\"/&gt;                   &lt;!--    the name of the DB table where lock's data will be stored --&gt;" + 
"      &lt;property name=\"jbosscache-cl-cache.jdbc.table.create\" value=\"true\"/&gt;" + 
"      &lt;property name=\"jbosscache-cl-cache.jdbc.table.drop\" value=\"false\"/&gt;" + 
"      &lt;property name=\"jbosscache-cl-cache.jdbc.table.primarykey\" value=\"jcrlocks_production_pk\"/&gt;" + 
"      &lt;property name=\"jbosscache-cl-cache.jdbc.fqn.column\" value=\"fqn\"/&gt;" + 
"      &lt;property name=\"jbosscache-cl-cache.jdbc.node.column\" value=\"node\"/&gt;" + 
"      &lt;property name=\"jbosscache-cl-cache.jdbc.parent.column\" value=\"parent\"/&gt;" + 
"      &lt;property name=\"jbosscache-cl-cache.jdbc.datasource\" value=\"jdbcjcr\"/&gt;" + 
"   &lt;/properties&gt;" + 
"&lt;/lock-manager&gt;</programlisting>" + 
"				</example>" + 
"				<para role=\"RoleCreateBugPara\">" + 
"					<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+19062-565994+%5BLatest%5D&amp;cf_build_id=19062-565994+05+Dec+2013+14%3A46+en-US+%5BLatest%5D&amp;comment=Title%3A+Configuration+Guidelines%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"				</para>" + 
"			</section>" + 
"		</section>" + 
"	</section>" + 
"	<section id=\"sect-Configuring_JBoss_Cache\">" + 
"		<title>Configuring JBoss Cache</title>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+19063-565994+%5BLatest%5D&amp;cf_build_id=19063-565994+05+Dec+2013+14%3A46+en-US+%5BLatest%5D&amp;comment=Title%3A+Configuring+JBoss+Cache%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"		<section id=\"Indexer_lock_manager_and_data_container_configuration\" remap=\"TID_19064\">" + 
"			<title>Indexer, lock manager and data container configuration</title>" + 
"			<para>" + 
"				Each mentioned component uses instances of the JBoss Cache product for caching in clustered environment. So every element has its own transport and has to be configured correctly. As usual, workspaces have similar configuration differing only in cluster-names (and, possibly, some other parameters). The simplest way to configure them is to define their own configuration files for each component in each workspace:" + 
"			</para>" + 
"			<programlisting language=\"XML\" role=\"XML\">&lt;property name=\"jbosscache-configuration\" value=\"conf/standalone" + 
"        /test-jbosscache-lock-db1-ws1.xml\" /&gt;</programlisting>" + 
"			<para>" + 
"				But if there are few workspaces, configuring them in such a way can be painful and hard-manageable. eXo JCR offers a template-based configuration for JBoss Cache instances. You can have one template for Lock Manager, one for Indexer and one for data container and use them in all the workspaces, defining the map of substitution parameters in a main configuration file. Just simply define ${jbosscache-&lt;parameter name&gt;} inside xml-template and list correct value in JCR configuration file just below \"jbosscache-configuration\", as shown:" + 
"			</para>" + 
"			<para>" + 
"				Template:" + 
"			</para>" + 
"			<programlisting language=\"XML\" role=\"XML\">..." + 
"&lt;clustering mode=\"replication\" clusterName=\"${jbosscache-cluster-name}\"&gt;" + 
"  &lt;stateRetrieval timeout=\"20000\" fetchInMemoryState=\"false\" /&gt;" + 
"...</programlisting>" + 
"			<para>" + 
"				and JCR configuration file:" + 
"			</para>" + 
"			<programlisting language=\"XML\" role=\"XML\">..." + 
"&lt;property name=\"jbosscache-configuration\" value=\"jar:/conf/portal/jbosscache-lock.xml\" /&gt;" + 
"&lt;property name=\"jbosscache-cluster-name\" value=\"JCR-cluster-locks-db1-ws\" /&gt;" + 
"...</programlisting>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+19064-565994+%5BLatest%5D&amp;cf_build_id=19064-565994+05+Dec+2013+14%3A46+en-US+%5BLatest%5D&amp;comment=Title%3A+Indexer%2C+lock+manager+and+data+container+configuration%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"		<section id=\"JGroups_configuration\" remap=\"TID_19065\">" + 
"			<title>JGroups configuration</title>" + 
"			<para>" + 
"				JGroups is used by JBoss Cache for network communications and transport in a clustered environment. If the property is defined in component configuration, it will be injected into the JBoss Cache instance on start up." + 
"			</para>" + 
"			<programlisting language=\"XML\" role=\"XML\">&lt;property name=\"jgroups-configuration\" value=\"your/path/to/modified-udp.xml\" /&gt;</programlisting>" + 
"			<para>" + 
"				As outlined above, each component (lock manager, data container and query handler) for each workspace requires its own clustered environment. In other words, they have their own clusters with unique names." + 
"			</para>" + 
"			<para>" + 
"				Each cluster should, by default, perform multi-casts on a separate port. This configuration leads to much unnecessary overhead on cluster. This is why JGroups offers a multiplexer feature, providing ability to use one single channel for set of clusters." + 
"			</para>" + 
"			<para>" + 
"				The multiplexer reduces network overheads and increase performance and stability of application. To enable multiplexer stack, you should define appropriate configuration file (<filename>upd-mux.xml</filename> is pre-shipped one with eXo JCR) and set \"jgroups-multiplexer-stack\" into \"true\"." + 
"			</para>" + 
"			<programlisting language=\"XML\" role=\"XML\">&lt;property name=\"jgroups-configuration\" value=\"jar:/conf/portal/udp-mux.xml\" /&gt;" + 
"&lt;property name=\"jgroups-multiplexer-stack\" value=\"true\" /&gt;</programlisting>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+19065-565994+%5BLatest%5D&amp;cf_build_id=19065-565994+05+Dec+2013+14%3A46+en-US+%5BLatest%5D&amp;comment=Title%3A+JGroups+configuration%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"		<section id=\"Sharing_JBoss_Cache_instances\" remap=\"TID_19066\">" + 
"			<title>Sharing JBoss Cache instances</title>" + 
"			<para>" + 
"				As a single JBoss Cache instance can be demanding on resources, and the default setup will have an instance each for the indexer, the lock manager and the data container on each workspace, an environment that uses multiple workspace may benefit from sharing a JBoss Cache instance between several instances of the same type (the lock manager instance, for example)." + 
"			</para>" + 
"			<para>" + 
"				This feature is disabled by default and can be enabled at the component configuration level by setting the <parameter>jbosscache-shareable</parameter> property to <literal>true</literal>:" + 
"			</para>" + 
"			<programlisting language=\"XML\" role=\"XML\">&lt;property name=\"jbosscache-shareable\" value=\"true\" /&gt;</programlisting>" + 
"			<para>" + 
"				Once enabled, this feature will allow the JBoss Cache instance used by a component to be re-used by another components of the same type with the same JBoss Cache configuration (with the exception of the eviction configuration, which can differ)." + 
"			</para>" + 
"			<para>" + 
"				This means that all the parameters of type <parameter>jbosscache-<replaceable>&lt;PARAM_NAME&gt;</replaceable></parameter> must be identical between the components of same type of different workspaces." + 
"			</para>" + 
"			<para>" + 
"				Therefore, if you can use the same values for the parameters in each workspace, you only need three JBoss Cache instances (one instance each for the indexer, lock manager and data container) running at once. This can relieve resource stress significantly." + 
"			</para>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+19066-565994+%5BLatest%5D&amp;cf_build_id=19066-565994+05+Dec+2013+14%3A46+en-US+%5BLatest%5D&amp;comment=Title%3A+Sharing+JBoss+Cache+instances%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"		<section id=\"sect-Shipped_JBoss_Cache_configuration_templates\">" + 
"			<title>Shipped JBoss Cache configuration templates</title>" + 
"			<para>" + 
"				The eXo JCR implementation is shipped with ready-to-use JBoss Cache configuration templates for JCR's components. They are located in <filename><replaceable>JPP_HOME</replaceable>/gatein/gatein.ear/portal.war/WEB-INF/conf/jcr/jbosscache</filename> directory, inside either the <filename>cluster</filename> or <filename>local</filename> directory." + 
"			</para>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+19067-565994+%5BLatest%5D&amp;cf_build_id=19067-565994+05+Dec+2013+14%3A46+en-US+%5BLatest%5D&amp;comment=Title%3A+Shipped+JBoss+Cache+configuration+templates%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"			<section id=\"Data_container_template\" remap=\"TID_19068\">" + 
"				<title>Data container template</title>" + 
"				<para>" + 
"					The data container template is <filename>config.xml</filename>:" + 
"				</para>" + 
"				<programlisting language=\"XML\" role=\"XML\">&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;" + 
"&lt;jbosscache xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns=\"urn:jboss:jbosscache-core:config:3.1\"&gt;" + 
"" + 
"   &lt;locking useLockStriping=\"false\" concurrencyLevel=\"50000\" lockParentForChildInsertRemove=\"false\"" + 
"      lockAcquisitionTimeout=\"20000\" /&gt;" + 
"" + 
"   &lt;clustering mode=\"replication\" clusterName=\"${jbosscache-cluster-name}\"&gt;" + 
"      &lt;stateRetrieval timeout=\"20000\" fetchInMemoryState=\"false\" /&gt;" + 
"      &lt;jgroupsConfig multiplexerStack=\"jcr.stack\" /&gt;" + 
"      &lt;sync /&gt;" + 
"   &lt;/clustering&gt;" + 
"" + 
"   &lt;!-- Eviction configuration --&gt;" + 
"   &lt;eviction wakeUpInterval=\"5000\"&gt;" + 
"      &lt;default algorithmClass=\"org.jboss.cache.eviction.LRUAlgorithm\"" + 
"         actionPolicyClass=\"org.exoplatform.services.jcr.impl.dataflow.persistent.jbosscache.ParentNodeEvictionActionPolicy\"" + 
"         eventQueueSize=\"1000000\"&gt;" + 
"         &lt;property name=\"maxNodes\" value=\"1000000\" /&gt;" + 
"         &lt;property name=\"timeToLive\" value=\"120000\" /&gt;" + 
"      &lt;/default&gt;" + 
"   &lt;/eviction&gt;" + 
"&lt;/jbosscache&gt;</programlisting>" + 
"				<para role=\"RoleCreateBugPara\">" + 
"					<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+19068-565994+%5BLatest%5D&amp;cf_build_id=19068-565994+05+Dec+2013+14%3A46+en-US+%5BLatest%5D&amp;comment=Title%3A+Data+container+template%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"				</para>" + 
"			</section>" + 
"			<section id=\"Lock_manager_template\" remap=\"TID_19069\">" + 
"				<title>Lock manager template</title>" + 
"				<para>" + 
"					The lock manager template is <filename>lock-config.xml</filename>:" + 
"				</para>" + 
"				<programlisting language=\"XML\">&lt;jbosscache xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns=\"urn:jboss:jbosscache-core:config:3.1\"&gt;" + 
"" + 
"   &lt;locking useLockStriping=\"false\" concurrencyLevel=\"500\" lockParentForChildInsertRemove=\"false\"" + 
"      lockAcquisitionTimeout=\"20000\" /&gt;" + 
"" + 
"   &lt;loaders passivation=\"false\" shared=\"true\"&gt;" + 
"   &lt;!-- All the data of the JCR locks needs to be loaded at startup --&gt;" + 
"   &lt;preload&gt;" + 
"     &lt;node fqn=\"/\" /&gt;" + 
"  &lt;/preload&gt;   " + 
"      &lt;!--" + 
"For another cache-loader class you should use another template with" + 
"cache-loader specific parameters" + 
"--&gt;" + 
"      &lt;loader class=\"org.exoplatform.services.jcr.impl.core.lock.jbosscache.JDBCCacheLoader\" async=\"false\" fetchPersistentState=\"false\"" + 
"         ignoreModifications=\"false\" purgeOnStartup=\"false\"&gt;" + 
"         &lt;properties&gt;" + 
"            cache.jdbc.table.name=${jbosscache-cl-cache.jdbc.table.name}" + 
"            cache.jdbc.table.create=${jbosscache-cl-cache.jdbc.table.create}" + 
"            cache.jdbc.table.drop=${jbosscache-cl-cache.jdbc.table.drop}" + 
"            cache.jdbc.table.primarykey=${jbosscache-cl-cache.jdbc.table.primarykey}" + 
"            cache.jdbc.fqn.column=${jbosscache-cl-cache.jdbc.fqn.column}" + 
"            cache.jdbc.fqn.type=${jbosscache-cl-cache.jdbc.fqn.type}" + 
"            cache.jdbc.node.column=${jbosscache-cl-cache.jdbc.node.column}" + 
"            cache.jdbc.node.type=${jbosscache-cl-cache.jdbc.node.type}" + 
"            cache.jdbc.parent.column=${jbosscache-cl-cache.jdbc.parent.column}" + 
"            cache.jdbc.datasource=${jbosscache-cl-cache.jdbc.datasource}" + 
"&lt;/properties&gt;" + 
"      &lt;/loader&gt;" + 
"   &lt;/loaders&gt;" + 
"&lt;/jbosscache&gt;" + 
"</programlisting>" + 
"				<para role=\"RoleCreateBugPara\">" + 
"					<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+19069-565994+%5BLatest%5D&amp;cf_build_id=19069-565994+05+Dec+2013+14%3A46+en-US+%5BLatest%5D&amp;comment=Title%3A+Lock+manager+template%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"				</para>" + 
"			</section>" + 
"			<section id=\"Query_handler_indexer_template\" remap=\"TID_19070\">" + 
"				<title>Query handler (indexer) template</title>" + 
"				<para>" + 
"					The query handler template is called <filename>indexer-config.xml</filename>:" + 
"				</para>" + 
"				<programlisting language=\"XML\">&lt;jbosscache xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns=\"urn:jboss:jbosscache-core:config:3.1\"&gt;" + 
"" + 
"   &lt;locking useLockStriping=\"false\" concurrencyLevel=\"500\" lockParentForChildInsertRemove=\"false\"" + 
"      lockAcquisitionTimeout=\"20000\" /&gt;" + 
"   &lt;!-- Configure the TransactionManager --&gt;" + 
"   &lt;transaction transactionManagerLookupClass=\"org.jboss.cache.transaction.JBossStandaloneJTAManagerLookup\" /&gt;" + 
"" + 
"   &lt;clustering mode=\"replication\" clusterName=\"${jbosscache-cluster-name}\"&gt;" + 
"      &lt;stateRetrieval timeout=\"20000\" fetchInMemoryState=\"false\" /&gt;" + 
"      &lt;sync /&gt;" + 
"   &lt;/clustering&gt;" + 
"&lt;/jbosscache&gt;" + 
"</programlisting>" + 
"				<para role=\"RoleCreateBugPara\">" + 
"					<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+19070-566001+%5BLatest%5D&amp;cf_build_id=19070-566001+05+Dec+2013+14%3A53+en-US+%5BLatest%5D&amp;comment=Title%3A+Query+handler+%28indexer%29+template%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"				</para>" + 
"			</section>" + 
"		</section>" + 
"	</section>" + 
"	<section id=\"sect-LockManager\">" + 
"		<title>LockManager</title>" + 
"		<para>" + 
"			The LockManager stores lock objects. It can lock or release objects as required. It is also responsible for removing stale locks." + 
"		</para>" + 
"		<para>" + 
"			The LockManager in the portal is implemented with <classname>org.exoplatform.services.jcr.impl.core.lock.jbosscache.CacheableLockManagerImpl</classname>." + 
"		</para>" + 
"		<para>" + 
"			It is enabled by adding <literal>lock-manager-configuration</literal> to <literal>workspace-configuration</literal>." + 
"		</para>" + 
"		<para>" + 
"			For example:" + 
"		</para>" + 
"		<programlisting language=\"XML\" role=\"XML\">&lt;workspace name=\"ws\"&gt;" + 
"   ..." + 
"   &lt;lock-manager class=\"org.exoplatform.services.jcr.impl.core.lock.jbosscache.CacheableLockManagerImpl\"&gt;" + 
"      &lt;properties&gt;" + 
"         &lt;property name=\"time-out\" value=\"15m\" /&gt;" + 
"         ..." + 
"      &lt;/properties&gt;" + 
"   &lt;/lock-manager&gt;               " + 
"   ..." + 
"&lt;/workspace&gt;" + 
"</programlisting>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+19071-566001+%5BLatest%5D&amp;cf_build_id=19071-566001+05+Dec+2013+14%3A53+en-US+%5BLatest%5D&amp;comment=Title%3A+LockManager%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"		<section id=\"sect-CacheableLockManagerImpl\">" + 
"			<title>CacheableLockManagerImpl</title>" + 
"			<para>" + 
"				<code>CacheableLockManagerImpl</code> stores lock objects in JBoss-cache, which implements JDBCCacheLoader to store locks in a database. Locks can be replicated, and can affect an entire cluster rather than a single node." + 
"			</para>" + 
"			<para>" + 
"				The length of time LockManager allows a lock to remain in place can be configured with the <code>time-out</code> property." + 
"			</para>" + 
"			<para>" + 
"				The LockRemover thread periodically polls LockManager for locks that have passed the timeout limit and must be removed." + 
"			</para>" + 
"			<para>" + 
"				The timeout for LockRemover is set as follows (the default value is 30m):" + 
"			</para>" + 
"			<programlisting language=\"XML\">" + 
"&lt;properties&gt;" + 
"   &lt;property name=\"time-out\" value=\"10m\" /&gt;" + 
"&lt;/properties&gt;</programlisting>" + 
"			<para>" + 
"				There are a number of ways to configure <classname>CacheableLockManagerImpl</classname>. Each involves configuring JBoss Cache and JDBCCacheLoader." + 
"			</para>" + 
"			<itemizedlist>" + 
"				<listitem>" + 
"					<para>" + 
"						<xref linkend=\"Simple_JBoss_Cache_Configuration\"/>" + 
"					</para>" + 
"				</listitem>" + 
"				<listitem>" + 
"					<para>" + 
"						<xref linkend=\"Template_JBoss_Cache_Configuration\"/>" + 
"					</para>" + 
"				</listitem>" + 
"			</itemizedlist>" + 
"			<para>" + 
"				See <ulink url=\"http://community.jboss.org/wiki/JBossCacheJDBCCacheLoader\"/> for more information about JBoss Cache and JDBCCacheLoader." + 
"			</para>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+19072-566001+%5BLatest%5D&amp;cf_build_id=19072-566001+05+Dec+2013+14%3A53+en-US+%5BLatest%5D&amp;comment=Title%3A+CacheableLockManagerImpl%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"			<section id=\"Simple_JBoss_Cache_Configuration\" remap=\"TID_19073\">" + 
"				<title>Simple JBoss Cache Configuration</title>" + 
"				<para>" + 
"					One method to configure the LockManager is to put a JBoss Cache configuration file path into <classname>CacheableLockManagerImpl</classname>." + 
"				</para>" + 
"				<note>" + 
"					<para>" + 
"						This is not the most efficient method for configuring the LockManager as it requires a JBoss Cache configuration file for each LockManager configuration in each workspace of each repository. The configuration set up can subsequently become quite difficult to manage." + 
"					</para>" + 
"					<para>" + 
"						This method is useful if a single, specially configured LockManager is required." + 
"					</para>" + 
"				</note>" + 
"				<para>" + 
"					The required configuration is shown in <xref linkend=\"exam-LockManager_Simple_Configuration\"/>." + 
"				</para>" + 
"				<example id=\"exam-LockManager_Simple_Configuration\">" + 
"					<title>LockManager Simple Configuration</title>" + 
"					<programlisting language=\"XML\"><![CDATA[<lock-manager class=\"org.exoplatform.services.jcr.impl.core.lock.jbosscache.CacheableLockManagerImpl\">" + 
"   <properties>" + 
"     <property name=\"time-out\" value=\"15m\" />" + 
"     <property name=\"jbosscache-configuration\" value=\"conf/standalone/cluster/test-jbosscache-lock-config.xml\" />" + 
"   </properties>" + 
"</lock-manager>]]>" + 
"		</programlisting>" + 
"				</example>" + 
"				<para>" + 
"					Sample content of the <filename>jbosscache-lock-config.xml</filename> file specified in the <code>jbosscache-configuration</code> property is shown in <xref linkend=\"exam-jbosscache_lock_config_xml\"/>." + 
"				</para>" + 
"				<example id=\"exam-jbosscache_lock_config_xml\">" + 
"					<title>Sample Content of the jbosscache-lock-config.xml File</title>" + 
"					<programlisting language=\"XML\"><![CDATA[" + 
"<jbosscache xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns=\"urn:jboss:jbosscache-core:config:3.2\">" + 
"" + 
" <locking useLockStriping=\"false\" concurrencyLevel=\"50000\" lockParentForChildInsertRemove=\"false\" lockAcquisitionTimeout=\"20000\" />" + 
" <!-- Comment #1 -->" + 
" <clustering mode=\"replication\" clusterName=\"JBoss-Cache-Lock-Cluster_Name\">" + 
"  <stateRetrieval timeout=\"20000\" fetchInMemoryState=\"false\" nonBlocking=\"true\" />" + 
"  <jgroupsConfig>" + 
"" + 
"   <TCP bind_addr=\"127.0.0.1\" start_port=\"9800\" loopback=\"true\" recv_buf_size=\"20000000\" send_buf_size=\"640000\" discard_incompatible_packets=\"true\"" + 
"     max_bundle_size=\"64000\" max_bundle_timeout=\"30\" use_incoming_packet_handler=\"true\" enable_bundling=\"false\" use_send_queues=\"false\" sock_conn_timeout=\"300\"" + 
"     skip_suspected_members=\"true\" use_concurrent_stack=\"true\" thread_pool.enabled=\"true\" thread_pool.min_threads=\"1\" thread_pool.max_threads=\"25\"" + 
"     thread_pool.keep_alive_time=\"5000\" thread_pool.queue_enabled=\"false\" thread_pool.queue_max_size=\"100\" thread_pool.rejection_policy=\"run\"" + 
"     oob_thread_pool.enabled=\"true\" oob_thread_pool.min_threads=\"1\" oob_thread_pool.max_threads=\"8\" oob_thread_pool.keep_alive_time=\"5000\"" + 
"     oob_thread_pool.queue_enabled=\"false\" oob_thread_pool.queue_max_size=\"100\" oob_thread_pool.rejection_policy=\"run\" />" + 
"    <MPING timeout=\"2000\" num_initial_members=\"2\" mcast_port=\"34540\" bind_addr=\"127.0.0.1\" mcast_addr=\"224.0.0.1\" />" + 
"" + 
"   <MERGE2 max_interval=\"30000\" min_interval=\"10000\" />" + 
"   <FD_SOCK />" + 
"   <FD max_tries=\"5\" shun=\"true\" timeout=\"10000\" />" + 
"   <VERIFY_SUSPECT timeout=\"1500\" />" + 
"   <pbcast.NAKACK discard_delivered_msgs=\"true\" gc_lag=\"0\" retransmit_timeout=\"300,600,1200,2400,4800\" use_mcast_xmit=\"false\" />" + 
"   <UNICAST timeout=\"300,600,1200,2400,3600\" />" + 
"   <pbcast.STABLE desired_avg_gossip=\"50000\" max_bytes=\"400000\" stability_delay=\"1000\" />" + 
"   <pbcast.GMS join_timeout=\"5000\" print_local_addr=\"true\" shun=\"false\" view_ack_collection_timeout=\"5000\" view_bundling=\"true\" />" + 
"   <FRAG2 frag_size=\"60000\" />" + 
"   <pbcast.STREAMING_STATE_TRANSFER />" + 
"  <pbcast.FLUSH timeout=\"0\" />" + 
"" + 
"  </jgroupsConfig" + 
"" + 
"  <sync />" + 
" </clustering>" + 
"" + 
" <loaders passivation=\"false\" shared=\"true\">" + 
"  <preload>" + 
"   <node fqn=\"/\" />" + 
"  </preload>" + 
"  <loader class=\"org.jboss.cache.loader.JDBCCacheLoader\" async=\"false\" fetchPersistentState=\"false\" ignoreModifications=\"false\" purgeOnStartup=\"false\">" + 
"   <properties>" + 
"    <!-- Comment #2 -->" + 
"    cache.jdbc.table.name=jcrlocks_ws" + 
"    cache.jdbc.table.create=true" + 
"    cache.jdbc.table.drop=false" + 
"    cache.jdbc.table.primarykey=jcrlocks_ws_pk" + 
"    cache.jdbc.fqn.column=fqn" + 
"    <!-- Comment #3 -->" + 
"    cache.jdbc.fqn.type=VARCHAR(512)" + 
"    cache.jdbc.node.column=node" + 
"    <!-- Comment #3 -->" + 
"    cache.jdbc.node.type=<BLOB>  " + 
"    cache.jdbc.parent.column=parent" + 
"    cache.jdbc.datasource=jdbcjcr" + 
"   </properties>" + 
"  </loader>" + 
"" + 
" </loaders>" + 
"" + 
"</jbosscache>]]>" + 
"		</programlisting>" + 
"					<para>" + 
"						Comment #1: The cluster name at <code>clustering mode=\"replication\" clusterName=\"JBoss-Cache-Lock-Cluster_Name\"</code> must be unique;" + 
"					</para>" + 
"					<para>" + 
"						Comment #2: The <code>cache.jdbc.table.name</code> must be unique per datasource." + 
"					</para>" + 
"					<para>" + 
"						Comment #3: The <code>cache.jdbc.node.type</code> and <code>cache.jdbc.fqn.type</code> parameters must be configured according to the database in use. See <xref linkend=\"Data_Types_in_Different_Databases\"/> for information about data types." + 
"					</para>" + 
"				</example>" + 
"				<table id=\"Data_Types_in_Different_Databases\">" + 
"					<title>Data Types in Different Databases</title>" + 
"					<tgroup cols=\"3\">" + 
"						<thead>" + 
"							<row>" + 
"								<entry>" + 
"									DataBase name" + 
"								</entry>" + 
"								<entry>" + 
"									Node data type" + 
"								</entry>" + 
"								<entry>" + 
"									FQN data type" + 
"								</entry>" + 
"							</row>" + 
"						</thead>" + 
"						<tbody>" + 
"							<row>" + 
"								<entry>" + 
"									default" + 
"								</entry>" + 
"								<entry>" + 
"									BLOB" + 
"								</entry>" + 
"								<entry>" + 
"									VARCHAR(512)" + 
"								</entry>" + 
"							</row>" + 
"							<row>" + 
"								<entry>" + 
"									HSSQL" + 
"								</entry>" + 
"								<entry>" + 
"									OBJECT" + 
"								</entry>" + 
"								<entry>" + 
"									VARCHAR(512)" + 
"								</entry>" + 
"							</row>" + 
"							<row>" + 
"								<entry>" + 
"									MySQL" + 
"								</entry>" + 
"								<entry>" + 
"									LONGBLOB" + 
"								</entry>" + 
"								<entry>" + 
"									VARCHAR(512)" + 
"								</entry>" + 
"							</row>" + 
"							<row>" + 
"								<entry>" + 
"									ORACLE" + 
"								</entry>" + 
"								<entry>" + 
"									BLOB" + 
"								</entry>" + 
"								<entry>" + 
"									VARCHAR2(512)" + 
"								</entry>" + 
"							</row>" + 
"							<row>" + 
"								<entry>" + 
"									PostgreSQL" + 
"								</entry>" + 
"								<entry>" + 
"									bytea" + 
"								</entry>" + 
"								<entry>" + 
"									VARCHAR(512)" + 
"								</entry>" + 
"							</row>" + 
"							<row>" + 
"								<entry>" + 
"									MSSQL" + 
"								</entry>" + 
"								<entry>" + 
"									VARBINARY(MAX)" + 
"								</entry>" + 
"								<entry>" + 
"									VARCHAR(512)" + 
"								</entry>" + 
"							</row>" + 
"							<row>" + 
"								<entry>" + 
"									DB2" + 
"								</entry>" + 
"								<entry>" + 
"									BLOB" + 
"								</entry>" + 
"								<entry>" + 
"									VARCHAR(512)" + 
"								</entry>" + 
"							</row>" + 
"							<row>" + 
"								<entry>" + 
"									Sybase" + 
"								</entry>" + 
"								<entry>" + 
"									IMAGE" + 
"								</entry>" + 
"								<entry>" + 
"									VARCHAR(512)" + 
"								</entry>" + 
"							</row>" + 
"						</tbody>" + 
"					</tgroup>" + 
"				</table>" + 
"				<para role=\"RoleCreateBugPara\">" + 
"					<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+19073-566001+%5BLatest%5D&amp;cf_build_id=19073-566001+05+Dec+2013+14%3A53+en-US+%5BLatest%5D&amp;comment=Title%3A+Simple+JBoss+Cache+Configuration%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"				</para>" + 
"			</section>" + 
"			<section id=\"Template_JBoss_Cache_Configuration\" remap=\"TID_19074\">" + 
"				<title>Template JBoss Cache Configuration</title>" + 
"				<para>" + 
"					Another method to configure LockManager is to use a JBoss Cache configuration template for all LockManagers." + 
"				</para>" + 
"				<para>" + 
"					Below is an example <filename>test-jbosscache-lock.xml</filename> template file:" + 
"				</para>" + 
"				<programlisting language=\"XML\">&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;" + 
"&lt;jbosscache xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns=\"urn:jboss:jbosscache-core:config:3.1\"&gt;" + 
"" + 
"   &lt;locking useLockStriping=\"false\" concurrencyLevel=\"50000\" lockParentForChildInsertRemove=\"false\"" + 
"      lockAcquisitionTimeout=\"20000\" /&gt;" + 
"" + 
"   &lt;clustering mode=\"replication\" clusterName=\"${jbosscache-cluster-name}\"&gt;" + 
"      &lt;stateRetrieval timeout=\"20000\" fetchInMemoryState=\"false\" /&gt;" + 
"      &lt;jgroupsConfig multiplexerStack=\"jcr.stack\" /&gt;" + 
"      &lt;sync /&gt;" + 
"   &lt;/clustering&gt;" + 
"" + 
"   &lt;loaders passivation=\"false\" shared=\"true\"&gt;" + 
"      &lt;!-- All the data of the JCR locks must be loaded at startup --&gt;" + 
"      &lt;preload&gt;" + 
"         &lt;node fqn=\"/\" /&gt;" + 
"      &lt;/preload&gt;  " + 
"      &lt;!--" + 
"      For another cache-loader class, use another template with" + 
"      cache-loader specific parameters" + 
"      --&gt;" + 
"      &lt;loader class=\"org.jboss.cache.loader.JDBCCacheLoader\" async=\"false\" fetchPersistentState=\"false\"" + 
"         ignoreModifications=\"false\" purgeOnStartup=\"false\"&gt;" + 
"         &lt;!-- All the configurable parameters in this file are populated with templates which will be replaced with LockManager configuration parameters. --&gt;" + 
"         &lt;properties&gt;         " + 
"            cache.jdbc.table.name=${jbosscache-cl-cache.jdbc.table.name}" + 
"            cache.jdbc.table.create=${jbosscache-cl-cache.jdbc.table.create}" + 
"            cache.jdbc.table.drop=${jbosscache-cl-cache.jdbc.table.drop}" + 
"            cache.jdbc.table.primarykey=${jbosscache-cl-cache.jdbc.table.primarykey}" + 
"            cache.jdbc.fqn.column=${jbosscache-cl-cache.jdbc.fqn.column}" + 
"            cache.jdbc.fqn.type=${jbosscache-cl-cache.jdbc.fqn.type}" + 
"            cache.jdbc.node.column=${jbosscache-cl-cache.jdbc.node.column}" + 
"            cache.jdbc.node.type=${jbosscache-cl-cache.jdbc.node.type}" + 
"            cache.jdbc.parent.column=${jbosscache-cl-cache.jdbc.parent.column}" + 
"            cache.jdbc.datasource=${jbosscache-cl-cache.jdbc.datasource}" + 
"         &lt;/properties&gt;" + 
"      &lt;/loader&gt;" + 
"   &lt;/loaders&gt;" + 
"&lt;/jbosscache&gt;</programlisting>" + 
"				<para>" + 
"					The parameters that populate the above file are described in <xref linkend=\"exam-JBoss_Cache_Config_Parameters\"/>:" + 
"				</para>" + 
"				<example id=\"exam-JBoss_Cache_Config_Parameters\">" + 
"					<title>JBoss Cache Configuration Parameters</title>" + 
"					<programlisting language=\"XML\">&lt;lock-manager class=\"org.exoplatform.services.jcr.impl.core.lock.jbosscache.CacheableLockManagerImpl\"&gt;" + 
"   &lt;properties&gt;" + 
"      &lt;property name=\"time-out\" value=\"15m\" /&gt;" + 
"      &lt;property name=\"jbosscache-configuration\" value=\"test-jbosscache-lock.xml\" /&gt;" + 
"      &lt;!-- Comment #1 --&gt;" + 
"      &lt;property name=\"jgroups-configuration\" value=\"udp-mux.xml\" /&gt;" + 
"      &lt;property name=\"jgroups-multiplexer-stack\" value=\"true\" /&gt;" + 
"      &lt;property name=\"jbosscache-cluster-name\" value=\"JCR-cluster-locks-ws\" /&gt;" + 
"      &lt;property name=\"jbosscache-cl-cache.jdbc.table.name\" value=\"jcrlocks_ws\" /&gt;" + 
"      &lt;property name=\"jbosscache-cl-cache.jdbc.table.create\" value=\"true\" /&gt;" + 
"      &lt;property name=\"jbosscache-cl-cache.jdbc.table.drop\" value=\"false\" /&gt;" + 
"      &lt;property name=\"jbosscache-cl-cache.jdbc.table.primarykey\" value=\"jcrlocks_ws_pk\" /&gt;" + 
"      &lt;!-- Comment #2 --&gt;" + 
"      &lt;property name=\"jbosscache-cl-cache.jdbc.fqn.column\" value=\"fqn\" /&gt;" + 
"      &lt;property name=\"jbosscache-cl-cache.jdbc.fqn.type\" value=\"AUTO\"/&gt;" + 
"      &lt;property name=\"jbosscache-cl-cache.jdbc.node.column\" value=\"node\" /&gt;" + 
"      &lt;!-- Comment #2 --&gt;" + 
"      &lt;property name=\"jbosscache-cl-cache.jdbc.node.type\" value=\"AUTO\"/&gt;" + 
"      &lt;property name=\"jbosscache-cl-cache.jdbc.parent.column\" value=\"parent\" /&gt;" + 
"      &lt;property name=\"jbosscache-cl-cache.jdbc.datasource\" value=\"jdbcjcr\" /&gt;" + 
"   &lt;/properties&gt;" + 
"&lt;/lock-manager&gt;" + 
"</programlisting>" + 
"					<para>" + 
"						Comment #1: The <literal>jgroups-configuration</literal> has been moved to a separate configuration file (<filename>udp-mux.xml</filename>, shown below). In this case the <filename>udp-mux.xml</filename> is a common configuration for all JGroup components (QueryHandler, cache, LockManager), but this is not a requirement of the configuration method." + 
"					</para>" + 
"					<para>" + 
"						Comment #2: The <parameter>jbosscache-cl-cache.jdbc.fqn.column</parameter> and <parameter>jbosscache-cl-cache.jdbc.node.type</parameter> parameters are not explicitly defined as <parameter>cache.jdbc.fqn.type</parameter> and <parameter>cache.jdbc.node.type</parameter> are defined in the JBoss Cache configuration." + 
"					</para>" + 
"				</example>" + 
"				<para>" + 
"					<filename>udp-mux.xml</filename>:" + 
"				</para>" + 
"				<programlisting language=\"XML\">&lt;protocol_stacks&gt;" + 
"   &lt;stack name=\"jcr.stack\"&gt;" + 
"      &lt;config&gt;" + 
"         &lt;UDP mcast_addr=\"228.10.10.10\" mcast_port=\"45588\" tos=\"8\" ucast_recv_buf_size=\"20000000\"" + 
"            ucast_send_buf_size=\"640000\" mcast_recv_buf_size=\"25000000\" mcast_send_buf_size=\"640000\" loopback=\"false\"" + 
"            discard_incompatible_packets=\"true\" max_bundle_size=\"64000\" max_bundle_timeout=\"30\"" + 
"            use_incoming_packet_handler=\"true\" ip_ttl=\"2\" enable_bundling=\"true\" enable_diagnostics=\"true\"" + 
"            thread_naming_pattern=\"cl\" use_concurrent_stack=\"true\" thread_pool.enabled=\"true\" thread_pool.min_threads=\"2\"" + 
"            thread_pool.max_threads=\"8\" thread_pool.keep_alive_time=\"5000\" thread_pool.queue_enabled=\"true\"" + 
"            thread_pool.queue_max_size=\"1000\" thread_pool.rejection_policy=\"discard\" oob_thread_pool.enabled=\"true\"" + 
"            oob_thread_pool.min_threads=\"1\" oob_thread_pool.max_threads=\"8\" oob_thread_pool.keep_alive_time=\"5000\"" + 
"            oob_thread_pool.queue_enabled=\"false\" oob_thread_pool.queue_max_size=\"100\" oob_thread_pool.rejection_policy=\"Run\" /&gt;" + 
"" + 
"         &lt;PING timeout=\"2000\" num_initial_members=\"3\" /&gt;" + 
"         &lt;MERGE2 max_interval=\"30000\" min_interval=\"10000\" /&gt;" + 
"         &lt;FD_SOCK /&gt;" + 
"         &lt;FD timeout=\"10000\" max_tries=\"5\" shun=\"true\" /&gt;" + 
"         &lt;VERIFY_SUSPECT timeout=\"1500\" /&gt;" + 
"         &lt;BARRIER /&gt;" + 
"         &lt;pbcast.NAKACK use_stats_for_retransmission=\"false\" exponential_backoff=\"150\" use_mcast_xmit=\"true\"" + 
"            gc_lag=\"0\" retransmit_timeout=\"50,300,600,1200\" discard_delivered_msgs=\"true\" /&gt;" + 
"         &lt;UNICAST timeout=\"300,600,1200\" /&gt;" + 
"         &lt;pbcast.STABLE stability_delay=\"1000\" desired_avg_gossip=\"50000\" max_bytes=\"1000000\" /&gt;" + 
"         &lt;VIEW_SYNC avg_send_interval=\"60000\" /&gt;" + 
"         &lt;pbcast.GMS print_local_addr=\"true\" join_timeout=\"3000\" shun=\"false\" view_bundling=\"true\" /&gt;" + 
"         &lt;FC max_credits=\"500000\" min_threshold=\"0.20\" /&gt;" + 
"         &lt;FRAG2 frag_size=\"60000\" /&gt;" + 
"         &lt;!--pbcast.STREAMING_STATE_TRANSFER /--&gt;" + 
"         &lt;pbcast.STATE_TRANSFER /&gt;" + 
"         &lt;!-- pbcast.FLUSH  /--&gt;" + 
"      &lt;/config&gt;" + 
"   &lt;/stack&gt;" + 
"&lt;/protocol_stacks&gt;" + 
"</programlisting>" + 
"				<para role=\"RoleCreateBugPara\">" + 
"					<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+19074-566001+%5BLatest%5D&amp;cf_build_id=19074-566001+05+Dec+2013+14%3A53+en-US+%5BLatest%5D&amp;comment=Title%3A+Template+JBoss+Cache+Configuration%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"				</para>" + 
"			</section>" + 
"			<section id=\"Lock_Migration\" remap=\"TID_19075\">" + 
"				<title>Lock Migration</title>" + 
"				<para>" + 
"					There are three options available:" + 
"				</para>" + 
"				<variablelist id=\"vari-Reference_Guide-Lock_migration_from_1.12.x-Lock_Migration_Options\">" + 
"					<title>Lock Migration Options</title>" + 
"					<varlistentry>" + 
"						<term>When new Shareable Cache feature is not going to be used and all locks should be kept after migration.</term>" + 
"						<listitem>" + 
"							<procedure>" + 
"								<title/>" + 
"								<step>" + 
"									<para>" + 
"										Ensure that the same lock tables are used in configuration" + 
"									</para>" + 
"								</step>" + 
"								<step>" + 
"									<para>" + 
"										Start the server" + 
"									</para>" + 
"								</step>" + 
"							</procedure>" + 
"						</listitem>" + 
"					</varlistentry>" + 
"					<varlistentry>" + 
"						<term>When new Shareable Cache feature is not going to be used and all locks should be removed after migration.</term>" + 
"						<listitem>" + 
"							<procedure>" + 
"								<title/>" + 
"								<step>" + 
"									<para>" + 
"										Ensure that the same lock tables used in configuration" + 
"									</para>" + 
"								</step>" + 
"								<step>" + 
"									<para>" + 
"										Start the sever WITH system property:" + 
"									</para>" + 
"									<programlisting>-Dorg.exoplatform.jcr.locks.force.remove=true" + 
"</programlisting>" + 
"								</step>" + 
"								<step>" + 
"									<para>" + 
"										Stop the server" + 
"									</para>" + 
"								</step>" + 
"								<step>" + 
"									<para>" + 
"										Start the server WITHOUT system property:" + 
"									</para>" + 
"									<programlisting>-Dorg.exoplatform.jcr.locks.force.remove" + 
"</programlisting>" + 
"								</step>" + 
"							</procedure>" + 
"						</listitem>" + 
"					</varlistentry>" + 
"					<varlistentry>" + 
"						<term>When new Shareable Cache feature will be used (in this case all locks are removed after migration).</term>" + 
"						<listitem>" + 
"							<procedure>" + 
"								<title/>" + 
"								<step>" + 
"									<para>" + 
"										Start the sever WITH system property:" + 
"									</para>" + 
"									<programlisting>-Dorg.exoplatform.jcr.locks.force.remove=true" + 
"</programlisting>" + 
"								</step>" + 
"								<step>" + 
"									<para>" + 
"										Stop the server." + 
"									</para>" + 
"								</step>" + 
"								<step>" + 
"									<para>" + 
"										Start the server WITHOUT system property:" + 
"									</para>" + 
"									<programlisting>-Dorg.exoplatform.jcr.locks.force.remove" + 
"</programlisting>" + 
"								</step>" + 
"								<step>" + 
"									<title>Optional:</title>" + 
"									<para>" + 
"										Manually remove old tables for lock." + 
"									</para>" + 
"								</step>" + 
"							</procedure>" + 
"						</listitem>" + 
"					</varlistentry>" + 
"				</variablelist>" + 
"				<para role=\"RoleCreateBugPara\">" + 
"					<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+19075-566001+%5BLatest%5D&amp;cf_build_id=19075-566001+05+Dec+2013+14%3A53+en-US+%5BLatest%5D&amp;comment=Title%3A+Lock+Migration%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"				</para>" + 
"			</section>" + 
"		</section>" + 
"	</section>" + 
"	<section id=\"sect-Configuring_QueryHandler\">" + 
"		<title>Configuring QueryHandler</title>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+19076-566001+%5BLatest%5D&amp;cf_build_id=19076-566001+05+Dec+2013+14%3A53+en-US+%5BLatest%5D&amp;comment=Title%3A+Configuring+QueryHandler%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"		<section id=\"Indexing_in_clustered_environment\" remap=\"TID_19077\">" + 
"			<title>JCR Indexing</title>" + 
"			<para>" + 
"				JCR offers specific indexing strategies for both standalone and clustered environments. This ensure that JCR use the advantages of running in a single JVM as well as do the best to use all resources available in cluster. JCR uses Lucene library as underlying search and indexing engine, but it has several limitations that greatly reduce possibilities and limits the usage of cluster advantages. That's why eXo JCR offers two strategies that are suitable for it's own usecases. They are clustered with shared index and clustered with local indexes. Each one has it's pros and cons." + 
"			</para>" + 
"			<para>" + 
"				Stanadlone strategy provides a stack of indexes to achieve greater performance within single JVM." + 
"			</para>" + 
"			<figure>" + 
"				<title>Standalone Index Diagram</title>" + 
"				<mediaobject>" + 
"					<imageobject>" + 
"						<imagedata align=\"center\" fileref=\"images/3955.png\" width=\"444\"/>" + 
"					</imageobject>" + 
"					<textobject>" + 
"						<phrase>Diagram explaining the Standalone Index.</phrase>" + 
"					</textobject>" + 
"				</mediaobject>" + 
"			</figure>" + 
"			<para>" + 
"				It combines in-memory buffer index directory with delayed file-system flushing. This index is called \"Volatile\" and it is invoked in searches also. Within some conditions volatile index is flushed to the persistent storage (file system) as new index directory. This allows to achieve great results for write operations." + 
"			</para>" + 
"			<para>" + 
"				Clustered implementation with local indexes combines in-memory buffer index directory with delayed file-system flushing. This index is called \"Volatile\" and it is invoked in searches also. Within some conditions volatile index is flushed to the persistent storage (file system) as new index directory. This allows to achieve great results for write operations." + 
"			</para>" + 
"			<figure>" + 
"				<title>Local Index Diagram</title>" + 
"				<mediaobject>" + 
"					<imageobject>" + 
"						<imagedata align=\"center\" fileref=\"images/3100.png\" width=\"444\"/>" + 
"					</imageobject>" + 
"					<textobject>" + 
"						<phrase>Diagram explaining the Local Index, which has a local file system for each JCR.</phrase>" + 
"					</textobject>" + 
"				</mediaobject>" + 
"			</figure>" + 
"			<para>" + 
"				As this implementation designed for clustered environment it has additional mechanisms for data delivery within cluster. Actual text extraction jobs done on the same node that does content operations (i.e. write operation). Prepared \"documents\" (Lucene term that means block of data ready for indexing) are replicated withing cluster nodes and processed by local indexes. So each cluster instance has the same index content. When new node joins the cluster it has no initial index, so it must be created. There are some supported ways of doing this operation. The simplest is to simply copy the index manually but this is not intended for use. If no initial index found JCR uses automated scenarios. They are controlled via configuration (see \"index-recovery-mode\" parameter) offering full re-indexing from database or copying from another cluster node." + 
"			</para>" + 
"			<para>" + 
"				For some reasons having a multiple index copies on each instance can be costly. So shared index can be used instead (see diagram below)." + 
"			</para>" + 
"			<figure>" + 
"				<title>Shared Index Diagram</title>" + 
"				<mediaobject>" + 
"					<imageobject>" + 
"						<imagedata align=\"center\" fileref=\"images/3099.png\" width=\"444\"/>" + 
"					</imageobject>" + 
"					<textobject>" + 
"						<phrase>Diagram explaining a shared index, which has a shared file system across all JCR instances.</phrase>" + 
"					</textobject>" + 
"				</mediaobject>" + 
"			</figure>" + 
"			<para>" + 
"				This indexing strategy combines advantages of in-memory index along with shared persistent index offering \"near\" real time search capabilities. This means that newly added content is accessible via search practically immediately. This strategy allows nodes to index data in their own volatile (in-memory) indexes, but persistent indexes are managed by single \"coordinator\" node only. Each cluster instance has a read access for shared index to perform queries combining search results found in own in-memory index also. Take in account that shared folder must be configured in your system environment (i.e. mounted NFS folder). But this strategy in some extremely rare cases can have a bit different volatile indexes within cluster instances for a while. In a few seconds they will be updated." + 
"			</para>" + 
"			<para>" + 
"				Shared index is consistent and stable enough, but slow, while local index is fast, but requires much time for re-synchronization, when cluster node is leaving a cluster for a small period of time. RSync-based index solves this problem along with local file system advantages in term of speed." + 
"			</para>" + 
"			<figure>" + 
"				<title>RSync-based Index Diagram</title>" + 
"				<mediaobject>" + 
"					<imageobject>" + 
"						<imagedata align=\"center\" fileref=\"images/3954.png\" width=\"444\"/>" + 
"					</imageobject>" + 
"					<textobject>" + 
"						<phrase>Diagram explaining a R-Sync index.</phrase>" + 
"					</textobject>" + 
"				</mediaobject>" + 
"			</figure>" + 
"			<para>" + 
"				This strategy is the same shared index, but stores actual data on local file system, instead of shared. Eventually triggering a synchronization job, that woks on the level of file blocks, synchronizing only modified data. Diagram shows it in action. Only single node in the cluster is responsible for modifying index files, this is the Coordinator node. When data persisted, corresponding command fired, starting synchronization jobs all over the cluster." + 
"			</para>" + 
"			<para>" + 
"				See more about <xref linkend=\"sect-Configuring_Search\"/> ." + 
"			</para>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+19077-566001+%5BLatest%5D&amp;cf_build_id=19077-566001+05+Dec+2013+14%3A53+en-US+%5BLatest%5D&amp;comment=Title%3A+JCR+Indexing%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"		<section id=\"sect-Configuration\">" + 
"			<title>Configuration</title>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+19078-566001+%5BLatest%5D&amp;cf_build_id=19078-566001+05+Dec+2013+14%3A53+en-US+%5BLatest%5D&amp;comment=Title%3A+Configuration%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"			<section id=\"Query-handler_configuration_overview\" remap=\"TID_19079\">" + 
"				<title>Query-handler configuration overview</title>" + 
"				<para>" + 
"					Configuration example:" + 
"				</para>" + 
"				<programlisting language=\"XML\">&lt;workspace name=\"ws\"&gt;" + 
"   &lt;query-handler class=\"org.exoplatform.services.jcr.impl.core.query.lucene.SearchIndex\"&gt;" + 
"      &lt;properties&gt;" + 
"         &lt;property name=\"index-dir\" value=\"shareddir/index/db1/ws\" /&gt;" + 
"         &lt;property name=\"changesfilter-class\"" + 
"            value=\"org.exoplatform.services.jcr.impl.core.query.jbosscache.JBossCacheIndexChangesFilter\" /&gt;" + 
"         &lt;property name=\"jbosscache-configuration\" value=\"jbosscache-indexer.xml\" /&gt;" + 
"         &lt;property name=\"jgroups-configuration\" value=\"udp-mux.xml\" /&gt;" + 
"         &lt;property name=\"jgroups-multiplexer-stack\" value=\"true\" /&gt;" + 
"         &lt;property name=\"jbosscache-cluster-name\" value=\"JCR-cluster-indexer-ws\" /&gt;" + 
"         &lt;property name=\"max-volatile-time\" value=\"60\" /&gt;" + 
"         &lt;property name=\"rdbms-reindexing\" value=\"true\" /&gt;" + 
"         &lt;property name=\"reindexing-page-size\" value=\"1000\" /&gt;" + 
"         &lt;property name=\"index-recovery-mode\" value=\"from-coordinator\" /&gt;" + 
"         &lt;property name=\"index-recovery-filter\" value=\"org.exoplatform.services.jcr.impl.core.query.lucene.DocNumberRecoveryFilter\" /&gt;" + 
"      &lt;/properties&gt;" + 
"   &lt;/query-handler&gt;" + 
"&lt;/workspace&gt;" + 
"</programlisting>" + 
"				<table id=\"tabl-Reference_Guide-Query_handler_configuration_overview-Configuration_properties\">" + 
"					<title>Configuration properties</title>" + 
"					<tgroup cols=\"2\">" + 
"						<thead>" + 
"							<row>" + 
"								<entry>" + 
"									Property name" + 
"								</entry>" + 
"								<entry>" + 
"									Description" + 
"								</entry>" + 
"							</row>" + 
"						</thead>" + 
"						<tbody>" + 
"							<row>" + 
"								<entry>" + 
"									index-dir" + 
"								</entry>" + 
"								<entry>" + 
"									path to index" + 
"								</entry>" + 
"							</row>" + 
"							<row>" + 
"								<entry>" + 
"									changesfilter-class" + 
"								</entry>" + 
"								<entry>" + 
"									template of JBoss-cache configuration for all query-handlers in repository" + 
"								</entry>" + 
"							</row>" + 
"							<row>" + 
"								<entry>" + 
"									jbosscache-configuration" + 
"								</entry>" + 
"								<entry>" + 
"									template of JBoss-cache configuration for all query-handlers in repository" + 
"								</entry>" + 
"							</row>" + 
"							<row>" + 
"								<entry>" + 
"									jgroups-configuration" + 
"								</entry>" + 
"								<entry>" + 
"									jgroups-configuration is template configuration for all components (search, cache, locks) [Add link to document describing template configurations]" + 
"								</entry>" + 
"							</row>" + 
"							<row>" + 
"								<entry>" + 
"									jgroups-multiplexer-stack" + 
"								</entry>" + 
"								<entry>" + 
"									[TODO about jgroups-multiplexer-stack - add link to JBoss doc]" + 
"								</entry>" + 
"							</row>" + 
"							<row>" + 
"								<entry>" + 
"									jbosscache-cluster-name" + 
"								</entry>" + 
"								<entry>" + 
"									cluster name (must be unique)" + 
"								</entry>" + 
"							</row>" + 
"							<row>" + 
"								<entry>" + 
"									max-volatile-time" + 
"								</entry>" + 
"								<entry>" + 
"									max time to live for Volatile Index" + 
"								</entry>" + 
"							</row>" + 
"							<row>" + 
"								<entry>" + 
"									rdbms-reindexing" + 
"								</entry>" + 
"								<entry>" + 
"									indicate that need to use rdbms reindexing mechanism if possible, the default value is true" + 
"								</entry>" + 
"							</row>" + 
"							<row>" + 
"								<entry>" + 
"									reindexing-page-size" + 
"								</entry>" + 
"								<entry>" + 
"									maximum amount of nodes which can be retrieved from storage for re-indexing purpose, the default value is 100" + 
"								</entry>" + 
"							</row>" + 
"							<row>" + 
"								<entry>" + 
"									index-recovery-mode" + 
"								</entry>" + 
"								<entry>" + 
"									If the parameter has been set to <command>from-indexing</command>, so a full indexing will be automatically launched (default behavior), if the parameter has been set to <command>from-coordinator</command>, the index will be retrieved from coordinator" + 
"								</entry>" + 
"							</row>" + 
"							<row>" + 
"								<entry>" + 
"									index-recovery-filter" + 
"								</entry>" + 
"								<entry>" + 
"									Defines implementation class or classes of RecoveryFilters, the mechanism of index synchronization for Local Index strategy." + 
"								</entry>" + 
"							</row>" + 
"							<row>" + 
"								<entry>" + 
"									async-reindexing" + 
"								</entry>" + 
"								<entry>" + 
"									Controls the process of re-indexing on JCR's startup. If this flag is set, indexing will be launched asynchronously, without blocking the JCR. Default is \"<literal>false</literal>\"." + 
"								</entry>" + 
"							</row>" + 
"						</tbody>" + 
"					</tgroup>" + 
"				</table>" + 
"				<formalpara id=\"form-Reference_Guide-Query_handler_configuration_overview-Improving_Query_Performance_With_postgreSQL_and_rdbms_reindexing\">" + 
"					<title>Improving Query Performance With <literal>postgreSQL</literal> and <parameter>rdbms-reindexing</parameter></title>" + 
"					<para>" + 
"						If you use <literal>postgreSQL</literal> and <parameter>rdbms-reindexing</parameter> is set to <literal>true</literal>, the performance of the queries used while indexing can be improved by:" + 
"					</para>" + 
"				</formalpara>" + 
"				<procedure>" + 
"					<title/>" + 
"					<step>" + 
"						<para>" + 
"							Set the parameter \"<parameter>enable_seqscan</parameter>\" to \"<literal>off</literal>\"" + 
"						</para>" + 
"						<para>" + 
"							<emphasis role=\"bold\">OR</emphasis>" + 
"						</para>" + 
"						<para>" + 
"							Set \"<parameter>default_statistics_target</parameter>\" to at least \"<literal>50</literal>\"." + 
"						</para>" + 
"					</step>" + 
"					<step>" + 
"						<para>" + 
"							Restart DB server and make analyze of the JCR_SVALUE (or JCR_MVALUE) table." + 
"						</para>" + 
"					</step>" + 
"				</procedure>" + 
"				<formalpara id=\"form-Reference_Guide-Query_handler_configuration_overview-Improving_Query_Performance_With_DB2_and_rdbms_reindexing\">" + 
"					<title>Improving Query Performance With <literal>DB2</literal> and <parameter>rdbms-reindexing</parameter></title>" + 
"					<para>" + 
"						If you use <literal>DB2</literal> and <parameter>rdbms-reindexing</parameter> is set to <literal>true</literal>, the performance of the queries used while indexing can be improved by:" + 
"					</para>" + 
"				</formalpara>" + 
"				<procedure>" + 
"					<title/>" + 
"					<step>" + 
"						<para>" + 
"							Make statistics on tables by running the following for <literal>JCR_SITEM</literal> (or <literal>JCR_MITEM</literal>) and <literal>JCR_SVALUE</literal> (or <literal>JCR_MVALUE</literal>) tables:" + 
"						</para>" + 
"						<programlisting><code>RUNSTATS ON TABLE &lt;scheme&gt;.&lt;table&gt; WITH DISTRIBUTION AND INDEXES ALL</code></programlisting>" + 
"					</step>" + 
"				</procedure>" + 
"				<para role=\"RoleCreateBugPara\">" + 
"					<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+19079-566001+%5BLatest%5D&amp;cf_build_id=19079-566001+05+Dec+2013+14%3A53+en-US+%5BLatest%5D&amp;comment=Title%3A+Query-handler+configuration+overview%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"				</para>" + 
"			</section>" + 
"			<section id=\"Cluster-ready_indexing\" remap=\"TID_19080\">" + 
"				<title>Cluster-ready indexing</title>" + 
"				<para>" + 
"					For both cluster-ready implementations JBoss Cache, JGroups and Changes Filter values must be defined. Shared index requires some kind of remote or shared file system to be attached in a system (i.e. NFS, SMB or etc). Indexing directory (\"indexDir\" value) must point to it. Setting \"changesfilter-class\" to \"org.exoplatform.services.jcr.impl.core.query.jbosscache.JBossCacheIndexChangesFilter\" will enable shared index implementation." + 
"				</para>" + 
"				<programlisting language=\"XML\" role=\"XML\">&lt;workspace name=\"ws\"&gt;" + 
"   &lt;query-handler class=\"org.exoplatform.services.jcr.impl.core.query.lucene.SearchIndex\"&gt;" + 
"      &lt;properties&gt;" + 
"         &lt;property name=\"index-dir\" value=\"/mnt/nfs_drive/index/db1/ws\" /&gt;" + 
"         &lt;property name=\"changesfilter-class\"" + 
"            value=\"org.exoplatform.services.jcr.impl.core.query.jbosscache.JBossCacheIndexChangesFilter\" /&gt;" + 
"         &lt;property name=\"jbosscache-configuration\" value=\"jbosscache-indexer.xml\" /&gt;" + 
"         &lt;property name=\"jgroups-configuration\" value=\"udp-mux.xml\" /&gt;" + 
"         &lt;property name=\"jgroups-multiplexer-stack\" value=\"true\" /&gt;" + 
"         &lt;property name=\"jbosscache-cluster-name\" value=\"JCR-cluster-indexer-ws\" /&gt;" + 
"         &lt;property name=\"max-volatile-time\" value=\"60\" /&gt;" + 
"         &lt;property name=\"rdbms-reindexing\" value=\"true\" /&gt;" + 
"         &lt;property name=\"reindexing-page-size\" value=\"1000\" /&gt;" + 
"         &lt;property name=\"index-recovery-mode\" value=\"from-coordinator\" /&gt;" + 
"      &lt;/properties&gt;" + 
"   &lt;/query-handler&gt;" + 
"&lt;/workspace&gt;</programlisting>" + 
"				<para>" + 
"					In order to use cluster-ready strategy based on local indexes, when each node has own copy of index on local file system, the following configuration must be applied. Indexing directory must point to any folder on local file system and \"changesfilter-class\" must be set to \"org.exoplatform.services.jcr.impl.core.query.jbosscache.LocalIndexChangesFilter\"." + 
"				</para>" + 
"				<programlisting language=\"XML\" role=\"XML\">&lt;workspace name=\"ws\"&gt;" + 
"   &lt;query-handler class=\"org.exoplatform.services.jcr.impl.core.query.lucene.SearchIndex\"&gt;" + 
"      &lt;properties&gt;" + 
"         &lt;property name=\"index-dir\" value=\"/mnt/nfs_drive/index/db1/ws\" /&gt;" + 
"         &lt;property name=\"changesfilter-class\"" + 
"            value=\"org.exoplatform.services.jcr.impl.core.query.jbosscache.LocalIndexChangesFilter\" /&gt;" + 
"         &lt;property name=\"jbosscache-configuration\" value=\"jbosscache-indexer.xml\" /&gt;" + 
"         &lt;property name=\"jgroups-configuration\" value=\"udp-mux.xml\" /&gt;" + 
"         &lt;property name=\"jgroups-multiplexer-stack\" value=\"true\" /&gt;" + 
"         &lt;property name=\"jbosscache-cluster-name\" value=\"JCR-cluster-indexer-ws\" /&gt;" + 
"         &lt;property name=\"max-volatile-time\" value=\"60\" /&gt;" + 
"         &lt;property name=\"rdbms-reindexing\" value=\"true\" /&gt;" + 
"         &lt;property name=\"reindexing-page-size\" value=\"1000\" /&gt;" + 
"         &lt;property name=\"index-recovery-mode\" value=\"from-coordinator\" /&gt;" + 
"      &lt;/properties&gt;" + 
"   &lt;/query-handler&gt;" + 
"&lt;/workspace&gt;" + 
"</programlisting>" + 
"				<para role=\"RoleCreateBugPara\">" + 
"					<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+19080-566001+%5BLatest%5D&amp;cf_build_id=19080-566001+05+Dec+2013+14%3A53+en-US+%5BLatest%5D&amp;comment=Title%3A+Cluster-ready+indexing%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"				</para>" + 
"			</section>" + 
"			<section id=\"Local_Index_Recovery_Filters\" remap=\"TID_19081\">" + 
"				<title>Local Index Recovery Filters</title>" + 
"				<para>" + 
"					A common usecase for all cluster-ready applications is a hot joining and leaving of processing units. All nodes that are joining a cluster for the first time or nodes joining after some downtime, must be in a synchronized state." + 
"				</para>" + 
"				<para>" + 
"					When using shared value storages, databases and indexes, cluster nodes are synchronized at any given time. But is not the case when a local index strategy is used." + 
"				</para>" + 
"				<para>" + 
"					If a new node joins a cluster, without an index it is retrieved or recreated. Nodes can be also be restarted and thus the index is not empty. By default, even though the existing index is thought to be up to date, it can be outdated." + 
"				</para>" + 
"				<para>" + 
"					The portal JCR offers a mechanism called <literal>RecoveryFilters</literal> that will automatically retrieve index for the joining node on start up. This feature is a set of filters that can be defined via <literal>QueryHandler</literal> configuration:" + 
"				</para>" + 
"				<programlisting language=\"XML\">&lt;property name=\"index-recovery-filter\" value=\"org.exoplatform.services.jcr.impl.core.query.lucene.DocNumberRecoveryFilter\" /&gt;</programlisting>" + 
"				<para>" + 
"					Filter numbers are not limited so they can be combined:" + 
"				</para>" + 
"				<programlisting language=\"XML\">&lt;property name=\"index-recovery-filter\" value=\"org.exoplatform.services.jcr.impl.core.query.lucene.DocNumberRecoveryFilter\" /&gt;" + 
"    &lt;property name=\"index-recovery-filter\" value=\"org.exoplatform.services.jcr.impl.core.query.lucene.SystemPropertyRecoveryFilter\" /&gt;" + 
"</programlisting>" + 
"				<para>" + 
"					If any one returns fires, the index is re-synchronized. This feature uses standard index recovery mode defined by previously described parameter (can be \"from-indexing\" (default) or \"from-coordinator\")" + 
"				</para>" + 
"				<programlisting language=\"XML\">&lt;property name=\"index-recovery-mode\" value=\"from-coordinator\" /&gt;" + 
"</programlisting>" + 
"				<para>" + 
"					There are multiple filter implementations:" + 
"				</para>" + 
"				<variablelist id=\"vari-Reference_Guide-Local_Index_Recovery_Filters-org.exoplatform.services.jcr.impl.core.query.lucene.DummyRecoveryFilter\">" + 
"					<varlistentry>" + 
"						<term>org.exoplatform.services.jcr.impl.core.query.lucene.DummyRecoveryFilter</term>" + 
"						<listitem>" + 
"							<para>" + 
"								Always returns true, for cases when index must be force resynchronized (recovered) each time." + 
"							</para>" + 
"						</listitem>" + 
"					</varlistentry>" + 
"					<varlistentry>" + 
"						<term>org.exoplatform.services.jcr.impl.core.query.lucene.SystemPropertyRecoveryFilter</term>" + 
"						<listitem>" + 
"							<para>" + 
"								Returns value of system property \"<literal>org.exoplatform.jcr.recoveryfilter.forcereindexing</literal>\". So index recovery can be controlled from the top without changing documentation using system properties." + 
"							</para>" + 
"						</listitem>" + 
"					</varlistentry>" + 
"					<varlistentry>" + 
"						<term>org.exoplatform.services.jcr.impl.core.query.lucene.ConfigurationPropertyRecoveryFilter</term>" + 
"						<listitem>" + 
"							<para>" + 
"								Returns value of <literal>QueryHandler</literal> configuration property \"<literal>index-recovery-filter-forcereindexing</literal>\". So index recovery can be controlled from configuration separately for each workspace. For example:" + 
"							</para>" + 
"							<programlisting language=\"XML\">&lt;property name=\"index-recovery-filter\" value=\"org.exoplatform.services.jcr.impl.core.query.lucene.ConfigurationPropertyRecoveryFilter\" /&gt;" + 
"    &lt;property name=\"index-recovery-filter-forcereindexing\" value=\"true\" /&gt;" + 
"</programlisting>" + 
"						</listitem>" + 
"					</varlistentry>" + 
"					<varlistentry>" + 
"						<term>org.exoplatform.services.jcr.impl.core.query.lucene.DocNumberRecoveryFilter</term>" + 
"						<listitem>" + 
"							<para>" + 
"								Checks the number of documents in index on coordinator side and self-side. It returns <literal>true</literal> if the count differs." + 
"							</para>" + 
"							<para>" + 
"								The advantage of this filter compared to others, is that it will skip reindexing for workspaces where the index was not modified." + 
"							</para>" + 
"							<para>" + 
"								For example; if there is ten repositories with three workspaces in each and only one is heavily used in the cluster, this filter will only reindex those workspaces that have been changed, without affecting other indexes." + 
"							</para>" + 
"							<para>" + 
"								This greatly reduces start up time." + 
"							</para>" + 
"						</listitem>" + 
"					</varlistentry>" + 
"				</variablelist>" + 
"				<para role=\"RoleCreateBugPara\">" + 
"					<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+19081-566001+%5BLatest%5D&amp;cf_build_id=19081-566001+05+Dec+2013+14%3A53+en-US+%5BLatest%5D&amp;comment=Title%3A+Local+Index+Recovery+Filters%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"				</para>" + 
"			</section>" + 
"			<section id=\"JBoss-Cache_template_configuration\" remap=\"TID_19082\">" + 
"				<title>JBoss-Cache template configuration</title>" + 
"				<para>" + 
"					JBoss-Cache template configuration for query handler is about the same for both clustered strategies." + 
"				</para>" + 
"				<example>" + 
"					<title>jbosscache-indexer.xml</title>" + 
"					<programlisting language=\"XML\" role=\"XML\">&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;" + 
"&lt;jbosscache xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns=\"urn:jboss:jbosscache-core:config:3.1\"&gt;" + 
"   &lt;locking useLockStriping=\"false\" concurrencyLevel=\"50000\" lockParentForChildInsertRemove=\"false\"" + 
"      lockAcquisitionTimeout=\"20000\" /&gt;" + 
"   &lt;!-- Configure the TransactionManager --&gt;" + 
"   &lt;transaction transactionManagerLookupClass=\"org.jboss.cache.transaction.JBossStandalone" + 
"            JTAManagerLookup\" /&gt;" + 
"   &lt;clustering mode=\"replication\" clusterName=\"${jbosscache-cluster-name}\"&gt;" + 
"      &lt;stateRetrieval timeout=\"20000\" fetchInMemoryState=\"false\" /&gt;" + 
"      &lt;jgroupsConfig multiplexerStack=\"jcr.stack\" /&gt;" + 
"      &lt;sync /&gt;" + 
"   &lt;/clustering&gt;" + 
"   &lt;!-- Eviction configuration --&gt;" + 
"   &lt;eviction wakeUpInterval=\"5000\"&gt;" + 
"      &lt;default algorithmClass=\"org.jboss.cache.eviction.FIFOAlgorithm\" eventQueueSize=\"1000000\"&gt;" + 
"         &lt;property name=\"maxNodes\" value=\"10000\" /&gt;" + 
"         &lt;property name=\"minTimeToLive\" value=\"60000\" /&gt;" + 
"      &lt;/default&gt;" + 
"   &lt;/eviction&gt;" + 
"&lt;/jbosscache&gt;</programlisting>" + 
"				</example>" + 
"				<para>" + 
"					For more information about template configuration, see <xref linkend=\"sect-Configuring_JBoss_Cache\"/>." + 
"				</para>" + 
"				<para role=\"RoleCreateBugPara\">" + 
"					<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+19082-566001+%5BLatest%5D&amp;cf_build_id=19082-566001+05+Dec+2013+14%3A53+en-US+%5BLatest%5D&amp;comment=Title%3A+JBoss-Cache+template+configuration%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"				</para>" + 
"			</section>" + 
"		</section>" + 
"		<section id=\"sect-Asynchronous_Re-indexing\">" + 
"			<title>Asynchronous Re-indexing</title>" + 
"			<para>" + 
"				Managing a large data set using a JCR in a production environment at times requires special operations with Indexes, stored on File System. One of those maintenance operations is a recreation of it. Also called \"re-indexing\". There are various usecases when it's important to do. They include hardware faults, hard restarts, data-corruption, migrations and JCR updates that brings new features related to index. Usually index re-creation requested on server's startup or in runtime." + 
"			</para>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+19083-566001+%5BLatest%5D&amp;cf_build_id=19083-566001+05+Dec+2013+14%3A53+en-US+%5BLatest%5D&amp;comment=Title%3A+Asynchronous+Re-indexing%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"			<section id=\"On_startup_indexing\" remap=\"TID_19084\">" + 
"				<title>On startup indexing</title>" + 
"				<para>" + 
"					A common usecase for updating and re-creating the index is to stop the server and manually remove indexes for workspaces requiring it. When the server is re-started, the missing indexes are automatically recovered by re-indexing." + 
"				</para>" + 
"				<para>" + 
"					The eXo JCR Supports direct RDBMS re-indexing, which can be faster than ordinary and can be configured via <literal>QueryHandler</literal> parameter <parameter>rdbms-reindexing</parameter> set to <literal>true</literal>." + 
"				</para>" + 
"				<para>" + 
"					A new feature is asynchronous indexing on startup. Usually startup is blocked until the indexing process is finished. This block can take any period of time, depending on amount of data persisted in repositories. But this can be resolved by using an asynchronous approaches of startup indexation." + 
"				</para>" + 
"				<para>" + 
"					Essentially, all indexing operations are performed in the background without blocking the repository. This is controlled by the value of the <parameter>async-reindexing</parameter> parameter in <literal>QueryHandler</literal> configuration." + 
"				</para>" + 
"				<para>" + 
"					With asynchronous indexation active, the JCR starts with no active indexes present. Queries on JCR still can be executed without exceptions, but no results will be returned until index creation completed." + 
"				</para>" + 
"				<para>" + 
"					The index state check is accomplished via <literal>QueryManagerImpl</literal>:" + 
"				</para>" + 
"				<para>" + 
"					<programlisting lang=\"java\">boolean online = ((QueryManagerImpl)Workspace.getQueryManager()).getQueryHandeler().isOnline();</programlisting>" + 
"				</para>" + 
"				<para>" + 
"					The <emphasis role=\"bold\">OFFLINE</emphasis> state means that the index is currently re-creating. When the state is changed, a corresponding log event is printed. When the background index task starts the index is switched to <emphasis role=\"bold\">OFFLINE</emphasis>, with following log event :" + 
"				</para>" + 
"				<programlisting>[INFO] Setting index OFFLINE (repository/production[system]).</programlisting>" + 
"				<para>" + 
"					When the indexing process is finished, the following two events are logged :" + 
"				</para>" + 
"				<programlisting>[INFO] Created initial index for 143018 nodes (repository/production[system])." + 
"[INFO] Setting index ONLINE (repository/production[system]).</programlisting>" + 
"				<para>" + 
"					Those two log lines indicates the end of process for workspace given in brackets. Calling isOnline() as mentioned above, will also return true." + 
"				</para>" + 
"				<para role=\"RoleCreateBugPara\">" + 
"					<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+19084-566001+%5BLatest%5D&amp;cf_build_id=19084-566001+05+Dec+2013+14%3A53+en-US+%5BLatest%5D&amp;comment=Title%3A+On+startup+indexing%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"				</para>" + 
"			</section>" + 
"			<section id=\"Hot_Asynchronous_Workspace_Re-indexing_using_JMX\" remap=\"TID_19085\">" + 
"				<title>Hot Asynchronous Workspace Re-indexing using JMX</title>" + 
"				<para>" + 
"					Some hard system faults, errors during upgrades, migration issues and some other factors may corrupt the index. Current versions of JCR supports <emphasis role=\"bold\">Hot Asynchronous Workspace Reindexing</emphasis> feature. It allows Service Administrators to launch the process in background without stopping or blocking the whole application by using any JMX-compatible console." + 
"				</para>" + 
"				<figure>" + 
"					<title id=\"jmx-jconsole\">JMX Jconsole</title>" + 
"					<mediaobject>" + 
"						<imageobject>" + 
"							<imagedata align=\"center\" fileref=\"images/2867.png\"/>" + 
"						</imageobject>" + 
"						<textobject>" + 
"							<phrase>The JMX Jconsole, with the SystemSearchManager Operations MBean displayed. The mouse is clicking the void reindex option.</phrase>" + 
"						</textobject>" + 
"					</mediaobject>" + 
"				</figure>" + 
"				<para>" + 
"					The server can continue working as expected while the index is recreated." + 
"				</para>" + 
"				<para>" + 
"					This depends on the flag <parameter>allow queries</parameter> being passed via JMX interface to the reindex operation invocation. If the flag is set, the application continues working." + 
"				</para>" + 
"				<para>" + 
"					However, there is one critical limitation users must be aware of; <emphasis>the index is frozen while the background task is running</emphasis>." + 
"				</para>" + 
"				<para>" + 
"					This means that queries are performed on a version of the index present at the moment the indexing task is started, and that data written into the repository after startup will not be available through the search until process completes." + 
"				</para>" + 
"				<para>" + 
"					Data added during re-indexation is also indexed, but will be available only when reindexing is complete. The JCR makes a snapshot of indexes at the invocation of the asynchronous indexing task and uses that snapshot for searches." + 
"				</para>" + 
"				<para>" + 
"					When the operation is finished, the stale index is replaced by the newly created index, which included any newly added data." + 
"				</para>" + 
"				<para>" + 
"					If the <parameter>allow queries</parameter> flag is set to <literal>false</literal>, then all queries will throw an exception while task is running. The current state can be acquired using the following JMX operation:" + 
"				</para>" + 
"				<itemizedlist>" + 
"					<listitem>" + 
"						<para>" + 
"							getHotReindexingState() - returns information about latest invocation: start time, if in progress or finish time if done." + 
"						</para>" + 
"					</listitem>" + 
"				</itemizedlist>" + 
"				<para role=\"RoleCreateBugPara\">" + 
"					<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+19085-566001+%5BLatest%5D&amp;cf_build_id=19085-566001+05+Dec+2013+14%3A53+en-US+%5BLatest%5D&amp;comment=Title%3A+Hot+Asynchronous+Workspace+Re-indexing+using+JMX%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"				</para>" + 
"			</section>" + 
"			<section id=\"Notices\" remap=\"TID_19086\">" + 
"				<title>Notices</title>" + 
"				<para>" + 
"					Hot re-indexing via JMX cannot be launched if the index is already in offline mode. This means that the index is currently involved in some other operations, such as re-indexing at startup, copying in cluster to another node or whatever." + 
"				</para>" + 
"				<para>" + 
"					Also; <emphasis>Hot Asynchronous Reindexing via JMX</emphasis> and <literal>on startup</literal> reindexing are different features. So you can't get the state of startup reindexing using command <code>getHotReindexingState</code> in JMX interface, but there are some common JMX operations:" + 
"				</para>" + 
"				<itemizedlist>" + 
"					<listitem>" + 
"						<para>" + 
"							getIOMode - returns current index IO mode (READ_ONLY / READ_WRITE), belongs to clustered configuration states;" + 
"						</para>" + 
"					</listitem>" + 
"					<listitem>" + 
"						<para>" + 
"							getState - returns current state: ONLINE / OFFLINE." + 
"						</para>" + 
"					</listitem>" + 
"				</itemizedlist>" + 
"				<para role=\"RoleCreateBugPara\">" + 
"					<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+19086-566001+%5BLatest%5D&amp;cf_build_id=19086-566001+05+Dec+2013+14%3A53+en-US+%5BLatest%5D&amp;comment=Title%3A+Notices%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"				</para>" + 
"			</section>" + 
"		</section>" + 
"		<section id=\"sect-Advanced_tuning\">" + 
"			<title>Advanced tuning</title>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+19087-566001+%5BLatest%5D&amp;cf_build_id=19087-566001+05+Dec+2013+14%3A53+en-US+%5BLatest%5D&amp;comment=Title%3A+Advanced+tuning%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"			<section id=\"Lucene_tuning\" remap=\"TID_19088\">" + 
"				<title>Lucene tuning</title>" + 
"				<para>" + 
"					As mentioned, JCR Indexing is based on the Lucene indexing library as the underlying search engine. It uses Directories to store index and manages access to index by Lock Factories." + 
"				</para>" + 
"				<para>" + 
"					By default, the JCR implementation uses optimal combination of Directory implementation and Lock Factory implementation." + 
"				</para>" + 
"				<para>" + 
"					The <literal>SimpleFSDirectory</literal> is used in Windows environments and the <literal>NIOFSDirectory</literal> implementation is used in non-Windows systems." + 
"				</para>" + 
"				<para>" + 
"					<literal>NativeFSLockFactory</literal> is an optimal solution for a wide variety of cases including clustered environment with NFS shared resources." + 
"				</para>" + 
"				<para>" + 
"					But those defaults can be overridden in the system properties." + 
"				</para>" + 
"				<para>" + 
"					Two properties: <literal>org.exoplatform.jcr.lucene.store.FSDirectoryLockFactoryClass</literal> and <literal>org.exoplatform.jcr.lucene.FSDirectory.class</literal> control (and change) the default behavior." + 
"				</para>" + 
"				<para>" + 
"					The first defines the implementation of abstract Lucene <literal>LockFactory</literal> class and the second sets implementation class for <literal>FSDirectory</literal> instances." + 
"				</para>" + 
"				<important>" + 
"					<para>" + 
"						While the JCR allows users to change implementation classes of Lucene internals, it does not guarantee the stability and functionality of those changes." + 
"					</para>" + 
"				</important>" + 
"				<para>" + 
"					For more information, see the Lucene documentation located at <ulink url=\"http://lucene.apache.org/core/documentation.html\"/>." + 
"				</para>" + 
"				<para role=\"RoleCreateBugPara\">" + 
"					<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+19088-566001+%5BLatest%5D&amp;cf_build_id=19088-566001+05+Dec+2013+14%3A53+en-US+%5BLatest%5D&amp;comment=Title%3A+Lucene+tuning%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"				</para>" + 
"			</section>" + 
"		</section>" + 
"	</section>" + 
"	<section id=\"JBossTransactionsService\" remap=\"TID_19089\">" + 
"		<title>JBossTransactionsService</title>" + 
"		<para>" + 
"			JBossTransactionsService implements eXo TransactionService and provides access to <ulink url=\"http://www.jboss.org/jbosstm/\">JBoss Transaction Service (JBossTS)</ulink> JTA implementation via eXo container dependency." + 
"		</para>" + 
"		<para>" + 
"			TransactionService used in JCR cache <emphasis>org.exoplatform.services.jcr.impl.dataflow.persistent.jbosscache.JBossCacheWorkspaceStorageCache</emphasis> implementation." + 
"		</para>" + 
"		<example>" + 
"			<title>JBossTransactionsService Configuration Example</title>" + 
"			<programlisting language=\"XML\" role=\"XML\">  &lt;component&gt;" + 
"    &lt;key&gt;org.exoplatform.services.transaction.TransactionService&lt;/key&gt;" + 
"    &lt;type&gt;org.exoplatform.services.transaction.jbosscache.JBossTransactionsService&lt;/type&gt;" + 
"    &lt;init-params&gt;" + 
"      &lt;value-param&gt;" + 
"        &lt;name&gt;timeout&lt;/name&gt;" + 
"        &lt;value&gt;3000&lt;/value&gt;" + 
"      &lt;/value-param&gt;" + 
"    &lt;/init-params&gt;   " + 
"  &lt;/component&gt;</programlisting>" + 
"			<para>" + 
"				timeout - XA transaction timeout in seconds" + 
"			</para>" + 
"		</example>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+19089-566001+%5BLatest%5D&amp;cf_build_id=19089-566001+05+Dec+2013+14%3A53+en-US+%5BLatest%5D&amp;comment=Title%3A+JBossTransactionsService%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"	</section>" + 
"	<section id=\"sect-JCR_Query_Use-cases\">" + 
"		<title>JCR Query Use-cases</title>" + 
"		<para>" + 
"			The JCR supports two query languages; JCR and XPath. A query, whether XPath or SQL, specifies a subset of nodes within a workspace, called the result set. The result set constitutes all the nodes in the workspace that meet the constraints stated in the query." + 
"		</para>" + 
"		<example id=\"exam-Reference_Guide-Query_Lifecycle-Query_Creation_and_Execution-SQL\">" + 
"			<title>SQL Query Creation and Execution</title>" + 
"			<programlisting language=\"Java\" role=\"Java\">// get QueryManager" + 
"QueryManager queryManager = workspace.getQueryManager(); " + 
"// make SQL query" + 
"Query query = queryManager.createQuery(\"SELECT * FROM nt:base \", Query.SQL);" + 
"// execute query" + 
"QueryResult result = query.execute();</programlisting>" + 
"		</example>" + 
"		<example id=\"exam-Reference_Guide-Query_Lifecycle-Query_Creation_and_Execution-XPath\">" + 
"			<title>XPath Query Creation and Execution</title>" + 
"			<programlisting language=\"Java\" role=\"Java\">// get QueryManager" + 
"QueryManager queryManager = workspace.getQueryManager(); " + 
"// make XPath query" + 
"Query query = queryManager.createQuery(\"//element(*,nt:base)\", Query.XPATH);" + 
"// execute query" + 
"QueryResult result = query.execute();</programlisting>" + 
"		</example>" + 
"		<example>" + 
"			<title>Query Result Processing</title>" + 
"			<programlisting language=\"Java\" role=\"Java\">// fetch query result" + 
"QueryResult result = query.execute();</programlisting>" + 
"			<para>" + 
"				To fetch the nodes:" + 
"			</para>" + 
"			<programlisting language=\"Java\" role=\"Java\">NodeIterator it = result.getNodes();</programlisting>" + 
"			<para>" + 
"				The results can be formatted in a table:" + 
"			</para>" + 
"			<programlisting language=\"Java\" role=\"Java\">// get column names" + 
"String[] columnNames = result.getColumnNames();" + 
"// get column rows" + 
"RowIterator rowIterator = result.getRows();" + 
"while(rowIterator.hasNext()){" + 
"   // get next row" + 
"   Row row = rowIterator.nextRow();" + 
"   // get all values of row" + 
"   Value[] values = row.getValues();" + 
"}</programlisting>" + 
"		</example>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+19090-566004+%5BLatest%5D&amp;cf_build_id=19090-566004+05+Dec+2013+14%3A59+en-US+%5BLatest%5D&amp;comment=Title%3A+JCR+Query+Use-cases%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"		<section id=\"Caching_Problems\" remap=\"TID_1909\">" + 
"			<title>Caching Problems</title>" + 
"			<para>" + 
"				<note>" + 
"					<para>" + 
"						This topic has no XML content, and is included here as a placeholder." + 
"					</para>" + 
"				</note>" + 
"			</para>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+1909-61308+%5BLatest%5D&amp;cf_build_id=1909-61308+15+Apr+2012+15%3A53+en-US+%5BLatest%5D&amp;comment=Title%3A+Caching+Problems%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"	</section>" + 
"	<section id=\"sect-Searching_Repository_Content\">" + 
"		<title>Searching Repository Content</title>" + 
"		<para>" + 
"			You can find the JCR configuration file here: <filename><replaceable>JPP_DIST</replaceable>/gatein/gatein.ear/portal.war/portal/WEB-INF/conf/jcr/repository-configuration.xml</filename>." + 
"		</para>" + 
"		<para>" + 
"			See <xref linkend=\"sect-Configuring_Search\"/> for more information about index configuration." + 
"		</para>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+19092-566004+%5BLatest%5D&amp;cf_build_id=19092-566004+05+Dec+2013+14%3A59+en-US+%5BLatest%5D&amp;comment=Title%3A+Searching+Repository+Content%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"		<section id=\"Bi-directional_RangeIterator\" remap=\"TID_19093\">" + 
"			<title>Bi-directional RangeIterator</title>" + 
"			<para>" + 
"				<literal>QueryResult.getNodes()</literal> will return bi-directional <literal>NodeIterator</literal> implementation." + 
"			</para>" + 
"			<note>" + 
"				<para>" + 
"					Bi-directional NodeIterator is <emphasis role=\"bold\">not supported</emphasis> in two cases:" + 
"				</para>" + 
"				<orderedlist>" + 
"					<listitem>" + 
"						<para>" + 
"							SQL query: select * from nt:base" + 
"						</para>" + 
"					</listitem>" + 
"					<listitem>" + 
"						<para>" + 
"							XPath query: //* ." + 
"						</para>" + 
"					</listitem>" + 
"				</orderedlist>" + 
"			</note>" + 
"			<para>" + 
"				<literal>TwoWayRangeIterator</literal> interface:" + 
"			</para>" + 
"			<programlisting language=\"Java\" role=\"Java\">/**" + 
" * Skip a number of elements in the iterator." + 
" * " + 
" * @param skipNum the non-negative number of elements to skip" + 
" * @throws java.util.NoSuchElementException if skipped past the first element" + 
" *           in the iterator." + 
" */" + 
"public void skipBack(long skipNum);</programlisting>" + 
"			<para>" + 
"				Usage:" + 
"			</para>" + 
"			<programlisting language=\"Java\" role=\"Java\">NodeIterator iter = queryResult.getNodes();" + 
"while (iter.hasNext()) {" + 
"  if (skipForward) {" + 
"    iter.skip(10); // Skip 10 nodes in forward direction" + 
"  } else if (skipBack) {" + 
"    TwoWayRangeIterator backIter = (TwoWayRangeIterator) iter; " + 
"    backIter.skipBack(10); // Skip 10 nodes back " + 
"  }" + 
"  ......." + 
"}</programlisting>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+19093-566004+%5BLatest%5D&amp;cf_build_id=19093-566004+05+Dec+2013+14%3A59+en-US+%5BLatest%5D&amp;comment=Title%3A+Bi-directional+RangeIterator%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"		<section id=\"Fuzzy_Searches\" remap=\"TID_19094\">" + 
"			<title>Fuzzy Searches</title>" + 
"			<para>" + 
"				The portal JCR supports features such as Lucene Fuzzy Searches. To perform a fuzzy search, form your query like the one below:" + 
"			</para>" + 
"			<programlisting language=\"Java\" role=\"Java\">QueryManager qman = session.getWorkspace().getQueryManager();" + 
"Query q = qman.createQuery(\"select * from nt:base where contains(field, 'ccccc~')\", Query.SQL);" + 
"QueryResult res = q.execute();</programlisting>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+19094-566004+%5BLatest%5D&amp;cf_build_id=19094-566004+05+Dec+2013+14%3A59+en-US+%5BLatest%5D&amp;comment=Title%3A+Fuzzy+Searches%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"		<section id=\"SynonymSearch\" remap=\"TID_19095\">" + 
"			<title>SynonymSearch</title>" + 
"			<para>" + 
"				Searching with synonyms is integrated in the <literal>jcr:contains()</literal> function and uses the same syntax as synonym searches in web search engines (Google, for example). If a search term is prefixed by a tilde symbol ( ~ ), synonyms of the search term are taken into consideration. For example:" + 
"			</para>" + 
"			<programlisting>SQL: select * from nt:resource where contains(., '~parameter')" + 
"" + 
"XPath: //element(*, nt:resource)[jcr:contains(., '~parameter')</programlisting>" + 
"			<para>" + 
"				This feature is disabled by default and you need to add a configuration parameter to the query-handler element in your JCR configuration file to enable it." + 
"			</para>" + 
"			<programlisting language=\"XML\" role=\"XML\">&lt;param  name=\"synonymprovider-config-path\" value=\"..you path to configuration file.....\"/&gt;" + 
"&lt;param  name=\"synonymprovider-class\" value=\"org.exoplatform.services.jcr.impl.core.query.lucene.PropertiesSynonymProvider\"/&gt;</programlisting>" + 
"			<programlisting language=\"XML\" role=\"XML\">/**" + 
" * &lt;code&gt;SynonymProvider&lt;/code&gt; defines an interface for a component that" + 
" * returns synonyms for a given term." + 
" */" + 
"public interface SynonymProvider {" + 
"" + 
"   /**" + 
"    * Initializes the synonym provider and passes the file system resource to" + 
"    * the synonym provider configuration defined by the configuration value of" + 
"    * the &lt;code&gt;synonymProviderConfigPath&lt;/code&gt; parameter. The resource may be" + 
"    * &lt;code&gt;null&lt;/code&gt; if the configuration parameter is not set." + 
"    *" + 
"    * @param fsr the file system resource to the synonym provider" + 
"    *            configuration." + 
"    * @throws IOException if an error occurs while initializing the synonym" + 
"    *                     provider." + 
"    */" + 
"   public void initialize(InputStream fsr) throws IOException;" + 
"" + 
"   /**" + 
"    * Returns an array of terms that are considered synonyms for the given" + 
"    * &lt;code&gt;term&lt;/code&gt;." + 
"    *" + 
"    * @param term a search term." + 
"    * @return an array of synonyms for the given &lt;code&gt;term&lt;/code&gt; or an empty" + 
"    *         array if no synonyms are known." + 
"    */" + 
"   public String[] getSynonyms(String term);" + 
"}</programlisting>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+19095-566004+%5BLatest%5D&amp;cf_build_id=19095-566004+05+Dec+2013+14%3A59+en-US+%5BLatest%5D&amp;comment=Title%3A+SynonymSearch%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"		<section id=\"sect-Highlighting\">" + 
"			<title>Highlighting</title>" + 
"			<para>" + 
"				An <literal>ExcerptProvider</literal> retrieves text excerpts for a node in the query result and marks up the words in the text that match the query terms." + 
"			</para>" + 
"			<para>" + 
"				By default, match highlighting is disabled because as it requires that additional information is written to the search index." + 
"			</para>" + 
"			<para>" + 
"				To enable this feature, you need to add a configuration parameter to the <parameter>query-handler</parameter> element in your JCR configuration file:" + 
"			</para>" + 
"			<programlisting language=\"XML\" role=\"XML\">&lt;param name=\"support-highlighting\" value=\"true\"/&gt;</programlisting>" + 
"			<para>" + 
"				Additionally, there is a parameter that controls the format of the excerpt created. In JCR 1.9, the default is set to <literal>org.exoplatform.services.jcr.impl.core.query.lucene.DefaultHTMLExcerpt</literal>. The configuration parameter for this setting is:" + 
"			</para>" + 
"			<programlisting language=\"XML\" role=\"XML\">&lt;param name=\"excerptprovider-class\" value=\"org.exoplatform.services.jcr.impl.core.query.lucene.DefaultXMLExcerpt\"/&gt;</programlisting>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+19096-566004+%5BLatest%5D&amp;cf_build_id=19096-566004+05+Dec+2013+14%3A59+en-US+%5BLatest%5D&amp;comment=Title%3A+Highlighting%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"			<section id=\"DefaultXMLExcerpt\" remap=\"TID_19097\">" + 
"				<title>DefaultXMLExcerpt</title>" + 
"				<para>" + 
"					This excerpt provider creates an XML fragment of the following form:" + 
"				</para>" + 
"				<programlisting language=\"XML\" role=\"XML\">&lt;excerpt&gt;" + 
"    &lt;fragment&gt;" + 
"        &lt;highlight&gt;exoplatform&lt;/highlight&gt; implements both the mandatory" + 
"        XPath and optional SQL &lt;highlight&gt;query&lt;/highlight&gt; syntax." + 
"    &lt;/fragment&gt;" + 
"    &lt;fragment&gt;" + 
"        Before parsing the XPath &lt;highlight&gt;query&lt;/highlight&gt; in" + 
"        &lt;highlight&gt;exoplatform&lt;/highlight&gt;, the statement is surrounded" + 
"    &lt;/fragment&gt;" + 
"&lt;/excerpt&gt;</programlisting>" + 
"				<para role=\"RoleCreateBugPara\">" + 
"					<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+19097-566004+%5BLatest%5D&amp;cf_build_id=19097-566004+05+Dec+2013+14%3A59+en-US+%5BLatest%5D&amp;comment=Title%3A+DefaultXMLExcerpt%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"				</para>" + 
"			</section>" + 
"			<section id=\"DefaultHTMLExcerpt\" remap=\"TID_19098\">" + 
"				<title>DefaultHTMLExcerpt</title>" + 
"				<para>" + 
"					This excerpt provider creates an HTML fragment of the following form:" + 
"				</para>" + 
"				<programlisting language=\"HTML\" role=\"HTML\">&lt;div&gt;" + 
"    &lt;span&gt;" + 
"        &lt;strong&gt;exoplatform&lt;/strong&gt; implements both the mandatory XPath" + 
"        and optional SQL &lt;strong&gt;query&lt;/strong&gt; syntax." + 
"    &lt;/span&gt;" + 
"    &lt;span&gt;" + 
"        Before parsing the XPath &lt;strong&gt;query&lt;/strong&gt; in" + 
"        &lt;strong&gt;exoplatform&lt;/strong&gt;, the statement is surrounded" + 
"    &lt;/span&gt;" + 
"&lt;/div&gt;</programlisting>" + 
"				<para role=\"RoleCreateBugPara\">" + 
"					<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+19098-566004+%5BLatest%5D&amp;cf_build_id=19098-566004+05+Dec+2013+14%3A59+en-US+%5BLatest%5D&amp;comment=Title%3A+DefaultHTMLExcerpt%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"				</para>" + 
"			</section>" + 
"			<section id=\"Usage1\" remap=\"TID_19099\">" + 
"				<title>Usage</title>" + 
"				<para>" + 
"					If you are using XPath, you must use the <code>rep:excerpt()</code> function in the last location step, just like you would select properties:" + 
"				</para>" + 
"				<programlisting language=\"Java\" role=\"Java\">QueryManager qm = session.getWorkspace().getQueryManager();" + 
"Query q = qm.createQuery(\"//*[jcr:contains(., 'exoplatform')]/(@Title|rep:excerpt(.))\", Query.XPATH);" + 
"QueryResult result = q.execute();" + 
"for (RowIterator it = result.getRows(); it.hasNext(); ) {" + 
"   Row r = it.nextRow();" + 
"   Value title = r.getValue(\"Title\");" + 
"   Value excerpt = r.getValue(\"rep:excerpt(.)\");" + 
"}</programlisting>" + 
"				<para>" + 
"					The above code searches for nodes that contain the word <emphasis>exoplatform</emphasis> and then gets the value of the <parameter>Title</parameter> property and an excerpt for each resultant node." + 
"				</para>" + 
"				<para>" + 
"					It is also possible to use a relative path in the call <code>Row.getValue()</code> while the query statement still remains the same. Also, you may use a relative path to a string property. The returned value will then be an excerpt based on string value of the property." + 
"				</para>" + 
"				<para>" + 
"					Both available excerpt providers will create fragments of about 150 characters and up to three fragments." + 
"				</para>" + 
"				<para>" + 
"					In SQL, the function is called <code>excerpt()</code> without the rep prefix, but the column in the <literal>RowIterator</literal> will nonetheless be labelled <code>rep:excerpt(.)</code>." + 
"				</para>" + 
"				<programlisting language=\"Java\" role=\"Java\">QueryManager qm = session.getWorkspace().getQueryManager();" + 
"Query q = qm.createQuery(\"select excerpt(.) from nt:resource where contains(., 'exoplatform')\", Query.SQL);" + 
"QueryResult result = q.execute();" + 
"for (RowIterator it = result.getRows(); it.hasNext(); ) {" + 
"   Row r = it.nextRow();" + 
"   Value excerpt = r.getValue(\"rep:excerpt(.)\");" + 
"}</programlisting>" + 
"				<para role=\"RoleCreateBugPara\">" + 
"					<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+19099-466560+%5BSpecified%5D&amp;cf_build_id=19099-466560+19+Jun+2013+14%3A55+en-US+%5BSpecified%5D&amp;comment=Title%3A+Usage%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"				</para>" + 
"			</section>" + 
"		</section>" + 
"		<section id=\"sect-SpellChecker\">" + 
"			<title>SpellChecker</title>" + 
"			<para>" + 
"				The lucene based query handler implementation supports a pluggable spell-checker mechanism. By default, spell checking is not available, it must be configured first." + 
"			</para>" + 
"			<para>" + 
"				Information about the <parameter>spellCheckerClass</parameter> parameter is available in <xref linkend=\"sect-Configuring_Search\"/>" + 
"			</para>" + 
"			<para>" + 
"				The JCR currently provides an implementation class which uses the <ulink url=\"http://wiki.apache.org/jakarta-lucene/SpellChecker\">lucene-spellchecker</ulink>." + 
"			</para>" + 
"			<para>" + 
"				The dictionary is derived from the fulltext, indexed content of the workspace and updated periodically. You can configure the refresh interval by picking one of the available inner classes of <literal>org.exoplatform.services.jcr.impl.core.query.lucene.spell.LuceneSpellChecker</literal>:" + 
"			</para>" + 
"			<itemizedlist>" + 
"				<listitem>" + 
"					<para>" + 
"						<literal>OneMinuteRefreshInterval</literal>" + 
"					</para>" + 
"				</listitem>" + 
"				<listitem>" + 
"					<para>" + 
"						<literal>FiveMinutesRefreshInterval</literal>" + 
"					</para>" + 
"				</listitem>" + 
"				<listitem>" + 
"					<para>" + 
"						<literal>ThirtyMinutesRefreshInterval</literal>" + 
"					</para>" + 
"				</listitem>" + 
"				<listitem>" + 
"					<para>" + 
"						<literal>OneHourRefreshInterval</literal>" + 
"					</para>" + 
"				</listitem>" + 
"				<listitem>" + 
"					<para>" + 
"						<literal>SixHoursRefreshInterval</literal>" + 
"					</para>" + 
"				</listitem>" + 
"				<listitem>" + 
"					<para>" + 
"						<literal>TwelveHoursRefreshInterval</literal>" + 
"					</para>" + 
"				</listitem>" + 
"				<listitem>" + 
"					<para>" + 
"						<literal>OneDayRefreshInterval</literal>" + 
"					</para>" + 
"				</listitem>" + 
"			</itemizedlist>" + 
"			<para>" + 
"				For example, if you want a refresh interval of six hours, the class name would be; <literal>org.exoplatform.services.jcr.impl.core.query.lucene.spell.LuceneSpellChecker$SixHoursRefreshInterval</literal>." + 
"			</para>" + 
"			<para>" + 
"				If you use <literal>org.exoplatform.services.jcr.impl.core.query.lucene.spell.LuceneSpellChecker</literal>, the refresh interval will be one hour." + 
"			</para>" + 
"			<para>" + 
"				The spell checker dictionary is stored as a lucene index under <filename>&lt;index-dir&gt;/spellchecker</filename>. If this index does not exist, a background thread will create it on start up. Similarly, the dictionary refresh is also done in a background thread so as not to block regular queries." + 
"			</para>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+19100-566004+%5BLatest%5D&amp;cf_build_id=19100-566004+05+Dec+2013+14%3A59+en-US+%5BLatest%5D&amp;comment=Title%3A+SpellChecker%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"			<section id=\"Usage2\" remap=\"TID_19101\">" + 
"				<title>Usage</title>" + 
"				<para>" + 
"					You can spell check a fulltext statement either with an XPath or a SQL query:" + 
"				</para>" + 
"				<programlisting language=\"Java\" role=\"Java\">// rep:spellcheck('explatform') will always evaluate to true" + 
"Query query = qm.createQuery(\"/jcr:root[rep:spellcheck('explatform')]/(rep:spellcheck())\", Query.XPATH);" + 
"RowIterator rows = query.execute().getRows();" + 
"// the above query will always return the root node no matter what string we check" + 
"Row r = rows.nextRow();" + 
"// get the result of the spell checking" + 
"Value v = r.getValue(\"rep:spellcheck()\");" + 
"if (v == null) {" + 
"   // no suggestion returned, the spelling is correct or the spell checker" + 
"   // does not know how to correct it." + 
"} else {" + 
"   String suggestion = v.getString();" + 
"}</programlisting>" + 
"				<para>" + 
"					And the same using SQL:" + 
"				</para>" + 
"				<programlisting language=\"Java\" role=\"Java\">// SPELLCHECK('exoplatform') will always evaluate to true" + 
"Query query = qm.createQuery(\"SELECT rep:spellcheck() FROM nt:base WHERE jcr:path = '/' AND SPELLCHECK('explatform')\", Query.SQL);" + 
"RowIterator rows = query.execute().getRows();" + 
"// the above query will always return the root node no matter what string we check" + 
"Row r = rows.nextRow();" + 
"// get the result of the spell checking" + 
"Value v = r.getValue(\"rep:spellcheck()\");" + 
"if (v == null) {" + 
"   // no suggestion returned, the spelling is correct or the spell checker" + 
"   // does not know how to correct it." + 
"} else {" + 
"   String suggestion = v.getString();" + 
"}</programlisting>" + 
"				<para role=\"RoleCreateBugPara\">" + 
"					<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+19101-566004+%5BLatest%5D&amp;cf_build_id=19101-566004+05+Dec+2013+14%3A59+en-US+%5BLatest%5D&amp;comment=Title%3A+Usage%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"				</para>" + 
"			</section>" + 
"		</section>" + 
"		<section id=\"Similarity\" remap=\"TID_19102\">" + 
"			<title>Similarity</title>" + 
"			<para>" + 
"				Starting with version, 1.12 JCR allows you to search for nodes that are similar to an existing node." + 
"			</para>" + 
"			<para>" + 
"				Similarity is determined by looking up terms that are common to nodes. There are some conditions that must be met for a term to be considered. This is required to limit the number possibly relevant terms." + 
"			</para>" + 
"			<para>" + 
"				To be considered, terms must:" + 
"			</para>" + 
"			<itemizedlist>" + 
"				<listitem>" + 
"					<para>" + 
"						Be at least four characters long." + 
"					</para>" + 
"				</listitem>" + 
"				<listitem>" + 
"					<para>" + 
"						Occur at least twice in the source node." + 
"					</para>" + 
"				</listitem>" + 
"				<listitem>" + 
"					<para>" + 
"						Occur in at least five other nodes." + 
"					</para>" + 
"				</listitem>" + 
"			</itemizedlist>" + 
"			<note>" + 
"				<title>Note</title>" + 
"				<para>" + 
"					The similarity function requires that the support Hightlighting is enabled. Please make sure that you have the following parameter set for the query handler in your <filename>workspace.xml</filename>." + 
"				</para>" + 
"				<programlisting language=\"XML\" role=\"XML\">&lt;param name=\"support-highlighting\" value=\"true\"/&gt;</programlisting>" + 
"			</note>" + 
"			<para>" + 
"				The functions (<code>rep:similar()</code> in XPath and <code>similar()</code> in SQL) have two arguments:" + 
"			</para>" + 
"			<variablelist>" + 
"				<varlistentry>" + 
"					<term>relativePath</term>" + 
"					<listitem>" + 
"						<para>" + 
"							A relative path to a descendant node or a period (<literal>.</literal>) for the current node." + 
"						</para>" + 
"					</listitem>" + 
"				</varlistentry>" + 
"				<varlistentry>" + 
"					<term>absoluteStringPath</term>" + 
"					<listitem>" + 
"						<para>" + 
"							A string literal that contains the path to the node for which to find similar nodes." + 
"						</para>" + 
"					</listitem>" + 
"				</varlistentry>" + 
"			</variablelist>" + 
"			<warning>" + 
"				<title>Warning</title>" + 
"				<para>" + 
"					Relative path is not supported yet." + 
"				</para>" + 
"			</warning>" + 
"			<example id=\"exam-Reference_Guide-Similarity-Example\">" + 
"				<title>Example</title>" + 
"				<programlisting>//element(*, nt:resource)[rep:similar(., '/parentnode/node.txt/jcr:content')]</programlisting>" + 
"				<para>" + 
"					Finds <literal>nt:resource</literal> nodes, which are similar to node by path <filename>/parentnode/node.txt/jcr:content</filename>." + 
"				</para>" + 
"			</example>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+19102-566004+%5BLatest%5D&amp;cf_build_id=19102-566004+05+Dec+2013+14%3A59+en-US+%5BLatest%5D&amp;comment=Title%3A+Similarity%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"	</section>" + 
"	<section id=\"sect-Full_Text_Search_And_Affecting_Settings\">" + 
"		<title>Full Text Search And Affecting Settings</title>" + 
"		<formalpara id=\"form-Reference_Guide-Fulltext_Search_And_Affecting_Settings-Property_content_indexing\">" + 
"			<title>Property content indexing</title>" + 
"			<para>" + 
"				Each property of a node (if it is indexable) is processed with the Lucene analyzer and stored in the Lucene index. This is called indexing of a property. It allows fulltext searching of these indexed properties." + 
"			</para>" + 
"		</formalpara>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+19103-566004+%5BLatest%5D&amp;cf_build_id=19103-566004+05+Dec+2013+14%3A59+en-US+%5BLatest%5D&amp;comment=Title%3A+Full+Text+Search+And+Affecting+Settings%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"		<section id=\"Lucene_Analyzers\" remap=\"TID_19104\">" + 
"			<title>Lucene Analyzers</title>" + 
"			<para>" + 
"				The purpose of analyzers is to transform all strings stored in the index into a well-defined condition. The same analyzer(s) is/are used when searching in order to adapt the query string to the index reality." + 
"			</para>" + 
"			<para>" + 
"				Therefore, performing the same query using different analyzers can return different results." + 
"			</para>" + 
"			<para>" + 
"				This example illustrates how the same string is transformed by different analyzers." + 
"			</para>" + 
"			<table>" + 
"				<title>\"The quick brown fox jumped over the lazy dogs\"</title>" + 
"				<tgroup cols=\"2\">" + 
"					<thead>" + 
"						<row>" + 
"							<entry>" + 
"								Analyzer" + 
"							</entry>" + 
"							<entry>" + 
"								Parsed" + 
"							</entry>" + 
"						</row>" + 
"					</thead>" + 
"					<tbody>" + 
"						<row>" + 
"							<entry>" + 
"								org.apache.lucene.analysis.WhitespaceAnalyzer" + 
"							</entry>" + 
"							<entry>" + 
"								[The] [quick] [brown] [fox] [jumped] [over] [the] [lazy] [dogs]" + 
"							</entry>" + 
"						</row>" + 
"						<row>" + 
"							<entry>" + 
"								org.apache.lucene.analysis.SimpleAnalyzer" + 
"							</entry>" + 
"							<entry>" + 
"								[the] [quick] [brown] [fox] [jumped] [over] [the] [lazy] [dogs]" + 
"							</entry>" + 
"						</row>" + 
"						<row>" + 
"							<entry>" + 
"								org.apache.lucene.analysis.StopAnalyzer" + 
"							</entry>" + 
"							<entry>" + 
"								[quick] [brown] [fox] [jumped] [over] [lazy] [dogs]" + 
"							</entry>" + 
"						</row>" + 
"						<row>" + 
"							<entry>" + 
"								org.apache.lucene.analysis.standard.StandardAnalyzer" + 
"							</entry>" + 
"							<entry>" + 
"								[quick] [brown] [fox] [jumped] [over] [lazy] [dogs]" + 
"							</entry>" + 
"						</row>" + 
"						<row>" + 
"							<entry>" + 
"								org.apache.lucene.analysis.snowball.SnowballAnalyzer" + 
"							</entry>" + 
"							<entry>" + 
"								[quick] [brown] [fox] [jump] [over] [lazi] [dog]" + 
"							</entry>" + 
"						</row>" + 
"						<row>" + 
"							<entry>" + 
"								org.apache.lucene.analysis.standard.StandardAnalyzer (configured without stop word - jcr default analyzer)" + 
"							</entry>" + 
"							<entry>" + 
"								[the] [quick] [brown] [fox] [jumped] [over] [the] [lazy] [dogs]" + 
"							</entry>" + 
"						</row>" + 
"					</tbody>" + 
"				</tgroup>" + 
"			</table>" + 
"			<table>" + 
"				<title>\"XY&amp;Z Corporation - xyz@example.com\"</title>" + 
"				<tgroup cols=\"2\">" + 
"					<thead>" + 
"						<row>" + 
"							<entry>" + 
"								Analyzer" + 
"							</entry>" + 
"							<entry>" + 
"								Parsed" + 
"							</entry>" + 
"						</row>" + 
"					</thead>" + 
"					<tbody>" + 
"						<row>" + 
"							<entry>" + 
"								org.apache.lucene.analysis.WhitespaceAnalyzer" + 
"							</entry>" + 
"							<entry>" + 
"								[XY&amp;Z] [Corporation] [-] [xyz@example.com]" + 
"							</entry>" + 
"						</row>" + 
"						<row>" + 
"							<entry>" + 
"								org.apache.lucene.analysis.SimpleAnalyzer" + 
"							</entry>" + 
"							<entry>" + 
"								[xy] [z] [corporation] [xyz] [example] [com]" + 
"							</entry>" + 
"						</row>" + 
"						<row>" + 
"							<entry>" + 
"								org.apache.lucene.analysis.StopAnalyzer" + 
"							</entry>" + 
"							<entry>" + 
"								[xy] [z] [corporation] [xyz] [example] [com]" + 
"							</entry>" + 
"						</row>" + 
"						<row>" + 
"							<entry>" + 
"								org.apache.lucene.analysis.standard.StandardAnalyzer" + 
"							</entry>" + 
"							<entry>" + 
"								[xy&amp;z] [corporation] [xyz@example] [com]" + 
"							</entry>" + 
"						</row>" + 
"						<row>" + 
"							<entry>" + 
"								org.apache.lucene.analysis.snowball.SnowballAnalyzer" + 
"							</entry>" + 
"							<entry>" + 
"								[xy&amp;z] [corpor] [xyz@exampl] [com]" + 
"							</entry>" + 
"						</row>" + 
"						<row>" + 
"							<entry>" + 
"								org.apache.lucene.analysis.standard.StandardAnalyzer (configured without stop word - jcr default analyzer)" + 
"							</entry>" + 
"							<entry>" + 
"								[xy&amp;z] [corporation] [xyz@example] [com]" + 
"							</entry>" + 
"						</row>" + 
"					</tbody>" + 
"				</tgroup>" + 
"			</table>" + 
"			<note>" + 
"				<para>" + 
"					<literal>StandardAnalyzer</literal> is the default analyzer in the portal JCR search engine. But it does not use stop words." + 
"				</para>" + 
"			</note>" + 
"			<itemizedlist role=\"see-also-list\">" + 
"				<title>See Also:</title>" + 
"				<listitem>" + 
"					<para>" + 
"						<xref linkend=\"sect-Configuring_Search\" xrefstyle=\"see-also\"/>" + 
"					</para>" + 
"				</listitem>" + 
"			</itemizedlist>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+19104-566004+%5BLatest%5D&amp;cf_build_id=19104-566004+05+Dec+2013+14%3A59+en-US+%5BLatest%5D&amp;comment=Title%3A+Lucene+Analyzers%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"		<section id=\"Property_Indexing\" remap=\"TID_19105\">" + 
"			<title>Property Indexing</title>" + 
"			<para>" + 
"				Different properties are indexed in different ways and this affects whether it can be searched via fulltext by property or not." + 
"			</para>" + 
"			<para>" + 
"				Only two property types are indexed as fulltext searchable: <parameter>STRING</parameter> and <parameter>BINARY</parameter>." + 
"			</para>" + 
"			<table id=\"tabl-Reference_Guide-Property_Indexing-Fulltext_search_by_different_properties\">" + 
"				<title>Fulltext search by different properties</title>" + 
"				<tgroup cols=\"3\">" + 
"					<thead>" + 
"						<row>" + 
"							<entry>" + 
"								Property Type" + 
"							</entry>" + 
"							<entry>" + 
"								Fulltext search by all properties" + 
"							</entry>" + 
"							<entry>" + 
"								Fulltext search by exact property" + 
"							</entry>" + 
"						</row>" + 
"					</thead>" + 
"					<tbody>" + 
"						<row>" + 
"							<entry>" + 
"								STRING" + 
"							</entry>" + 
"							<entry>" + 
"								YES" + 
"							</entry>" + 
"							<entry>" + 
"								YES" + 
"							</entry>" + 
"						</row>" + 
"						<row>" + 
"							<entry>" + 
"								BINARY" + 
"							</entry>" + 
"							<entry>" + 
"								YES" + 
"							</entry>" + 
"							<entry>" + 
"								NO" + 
"							</entry>" + 
"						</row>" + 
"					</tbody>" + 
"				</tgroup>" + 
"			</table>" + 
"			<para>" + 
"				For example, the <literal>jcr:data</literal> property (which is <parameter>BINARY</parameter>) will not be found with a query structured as:" + 
"			</para>" + 
"			<programlisting>SELECT * FROM nt:resource WHERE CONTAINS(jcr:data, 'some string')</programlisting>" + 
"			<para>" + 
"				This is because, <parameter>BINARY</parameter> is not searchable by fulltext search by exact property." + 
"			</para>" + 
"			<para>" + 
"				However, the following query <emphasis>will</emphasis> return some results (provided, of course they node contains the targeted data):" + 
"			</para>" + 
"			<programlisting>SELECT * FROM nt:resource WHERE CONTAINS( * , 'some string')</programlisting>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+19105-566004+%5BLatest%5D&amp;cf_build_id=19105-566004+05+Dec+2013+14%3A59+en-US+%5BLatest%5D&amp;comment=Title%3A+Property+Indexing%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"		<section id=\"Different_Analyzers\" remap=\"TID_19106\">" + 
"			<title>Different Analyzers</title>" + 
"			<para>" + 
"				First of all, we will fill repository by nodes with mixin type 'mix:title' and different values of 'jcr:description' property." + 
"			</para>" + 
"			<programlisting>root" + 
"  ├── document1 (mix:title) jcr:description = \"The quick brown fox jumped over the lazy dogs\"" + 
"  ├── document2 (mix:title) jcr:description = \"Brown fox live in forest.\"" + 
"  └── document3 (mix:title) jcr:description = \"Fox is a nice animal.\"" + 
"</programlisting>" + 
"			<para>" + 
"				This example shows different Analyzers in action. The first instance uses base JCR settings, so the string; \"<emphasis>The quick brown fox jumped over the lazy dogs</emphasis>\" will be transformed to the set; <emphasis role=\"bold\">{[the] [quick] [brown] [fox] [jumped] [over] [the] [lazy] [dogs] }</emphasis>." + 
"			</para>" + 
"			<programlisting language=\"Java\" role=\"Java\">// make SQL query" + 
"QueryManager queryManager = workspace.getQueryManager();" + 
"String sqlStatement = \"SELECT * FROM mix:title WHERE CONTAINS(jcr:description, 'the')\";" + 
"// create query" + 
"Query query = queryManager.createQuery(sqlStatement, Query.SQL);" + 
"// execute query and fetch result" + 
"QueryResult result = query.execute();</programlisting>" + 
"			<para>" + 
"				The <literal>NodeIterator</literal> will return <emphasis>document1</emphasis>." + 
"			</para>" + 
"			<para>" + 
"				However, if the default analyzer is changed to <literal>org.apache.lucene.analysis.StopAnalyzer</literal>, the repository populated again (the new Analyzer must process node properties) and the same query run, it will return nothing, because stop words like \"<emphasis>the</emphasis>\" will be excluded from parsed string set." + 
"			</para>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+19106-566004+%5BLatest%5D&amp;cf_build_id=19106-566004+05+Dec+2013+14%3A59+en-US+%5BLatest%5D&amp;comment=Title%3A+Different+Analyzers%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"	</section>" + 
"	<section id=\"sect-WebDAV\">" + 
"		<title>WebDAV</title>" + 
"		<para>" + 
"			The <application>WebDAV</application> protocol enables you to use third party tools to communicate with hierarchical content servers via the HTTP protocol. It is possible to add and remove documents or a set of documents from a path on the server." + 
"		</para>" + 
"		<para>" + 
"			<application>DeltaV</application> is an extension of the WebDav protocol that allows managing document versioning. The <emphasis>Locking</emphasis> feature guarantees protection against multiple access when writing resources. The ordering support allows changing the position of the resource in the list and sort the directory to make the directory tree viewed conveniently. The full-text search makes it easy to find the necessary documents. You can search by using two languages: SQL and XPATH." + 
"		</para>" + 
"		<para>" + 
"			In the eXo JCR, the WebDAV layer (based on the code taken from the extension modules of the reference implementation) is plugged in on top of our JCR implementation. This makes it possible to browse a workspace using the third party tools regardless of operating system environments. You can use a Java WebDAV client, such as <application>DAVExplorer</application> or <application>Internet Explorer</application> using <menuchoice><guimenu>File</guimenu><guimenuitem>Open as a Web Folder</guimenuitem></menuchoice>." + 
"		</para>" + 
"		<para>" + 
"			WebDav is an extension of the REST service. To get the WebDav server ready, you must deploy the REST application. Then, you can access any workspaces of your repository by using the following URL:" + 
"		</para>" + 
"		<para>" + 
"			<ulink type=\"http\" url=\"http://host:port/portal/rest/private/jcr/{RepositoryName}/{WorkspaceName}/{Path}\"/>" + 
"		</para>" + 
"		<para>" + 
"			When accessing the WebDAV server via <ulink type=\"http\" url=\"http://localhost:8080/rest/jcr/repository/production\"/>, you can substitute <ulink type=\"http\" url=\"http://localhost:8080/rest/jcr/repository/production\">production</ulink> with <ulink type=\"http\" url=\"http://localhost:8080/rest/jcr/repository/collaboration\">collaboration</ulink>." + 
"		</para>" + 
"		<para>" + 
"			You will be asked to enter your login credentials. These will then be checked by using the organization service that can be implemented thanks to an InMemory (dummy) module or a DB module or an LDAP one and the JCR user session will be created with the correct JCR Credentials." + 
"		</para>" + 
"		<note>" + 
"			<title>Note:</title>" + 
"			<para>" + 
"				If you try the \"in ECM\" option, add \"@ecm\" to the user's password. Alternatively, you may modify jaas.conf by adding the <emphasis role=\"bold\">domain=ecm</emphasis> option as follows:" + 
"			</para>" + 
"			<programlisting>exo-domain {" + 
"     org.exoplatform.services.security.jaas.BasicLoginModule required domain=ecm;" + 
"};</programlisting>" + 
"		</note>" + 
"		<example>" + 
"			<title>WebDAV Configuration</title>" + 
"			<para>" + 
"				The WebDAV configuration file:" + 
"			</para>" + 
"			<programlisting language=\"XML\" role=\"XML\">&lt;component&gt;" + 
"  &lt;key&gt;org.exoplatform.services.webdav.WebDavServiceImpl&lt;/key&gt;" + 
"  &lt;type&gt;org.exoplatform.services.webdav.WebDavServiceImpl&lt;/type&gt;" + 
"  &lt;init-params&gt;" + 
"" + 
"    &lt;!-- this parameter indicates the default login and password values" + 
"         used as credentials for accessing the repository --&gt;" + 
"    &lt;!-- value-param&gt;" + 
"      &lt;name&gt;default-identity&lt;/name&gt;" + 
"      &lt;value&gt;admin:admin&lt;/value&gt;    " + 
"    &lt;/value-param --&gt;" + 
"" + 
"    &lt;!-- this is the value of WWW-Authenticate header --&gt;" + 
"    &lt;value-param&gt;" + 
"      &lt;name&gt;auth-header&lt;/name&gt;" + 
"      &lt;value&gt;Basic realm=\"eXo-Platform Webdav Server 1.6.1\"&lt;/value&gt;" + 
"    &lt;/value-param&gt;" + 
"" + 
"    &lt;!-- default node type which is used for the creation of collections --&gt;" + 
"    &lt;value-param&gt;" + 
"      &lt;name&gt;def-folder-node-type&lt;/name&gt;" + 
"      &lt;value&gt;nt:folder&lt;/value&gt;" + 
"    &lt;/value-param&gt;" + 
"" + 
"    &lt;!-- default node type which is used for the creation of files --&gt;" + 
"    &lt;value-param&gt;" + 
"      &lt;name&gt;def-file-node-type&lt;/name&gt;" + 
"      &lt;value&gt;nt:file&lt;/value&gt;" + 
"    &lt;/value-param&gt;" + 
"" + 
"    &lt;!-- if MimeTypeResolver can't find the required mime type, " + 
"         which conforms with the file extension, and the mimeType header is absent" + 
"         in the HTTP request header, this parameter is used " + 
"         as the default mime type--&gt;" + 
"    &lt;value-param&gt;" + 
"      &lt;name&gt;def-file-mimetype&lt;/name&gt;" + 
"      &lt;value&gt;application/octet-stream&lt;/value&gt;" + 
"    &lt;/value-param&gt;" + 
"" + 
"    &lt;!-- This parameter indicates one of the three cases when you update the content of the resource by PUT command." + 
"         In case of \"create-version\", PUT command creates the new version of the resource if this resource exists." + 
"         In case of \"replace\" - if the resource exists, PUT command updates the content of the resource and its last modification date." + 
"         In case of \"add\", the PUT command tries to create the new resource with the same name (if the parent node allows same-name siblings).--&gt;" + 
"" + 
"    &lt;value-param&gt;" + 
"      &lt;name&gt;update-policy&lt;/name&gt;" + 
"      &lt;value&gt;create-version&lt;/value&gt;" + 
"      &lt;!--value&gt;replace&lt;/value --&gt;" + 
"      &lt;!-- value&gt;add&lt;/value --&gt;" + 
"    &lt;/value-param&gt;" + 
"" + 
"    &lt;!--" + 
"        This parameter determines how service responds to a method that attempts to modify file content." + 
"        In case of \"checkout-checkin\" value, when a modification request is applied to a checked-in version-controlled resource, the request is automatically preceded by a checkout and followed by a checkin operation." + 
"        In case of \"checkout\" value, when a modification request is applied to a checked-in version-controlled resource, the request is automatically preceded by a checkout operation." + 
"    --&gt;         " + 
"    &lt;value-param&gt;" + 
"      &lt;name&gt;auto-version&lt;/name&gt;" + 
"      &lt;value&gt;checkout-checkin&lt;/value&gt;" + 
"      &lt;!--value&gt;checkout&lt;/value --&gt;" + 
"    &lt;/value-param&gt;" + 
"" + 
"    &lt;!--" + 
"        This parameter is responsible for managing Cache-Control header value which will be returned to the client." + 
"        You can use patterns like \"text/*\", \"image/*\" or wildcard to define the type of content." + 
"    --&gt;  " + 
"    &lt;value-param&gt;" + 
"      &lt;name&gt;cache-control&lt;/name&gt;" + 
"      &lt;value&gt;text/xml,text/html:max-age=3600;image/png,image/jpg:max-age=1800;*/*:no-cache;&lt;/value&gt;" + 
"    &lt;/value-param&gt;" + 
"    " + 
"    &lt;!--" + 
"        This parameter determines the absolute path to the folder icon file, which is shown" + 
"        during WebDAV view of the contents" + 
"    --&gt;" + 
"    &lt;value-param&gt;" + 
"      &lt;name&gt;folder-icon-path&lt;/name&gt;" + 
"      &lt;value&gt;/absolute/path/to/file&lt;/value&gt;" + 
"    &lt;/value-param&gt;" + 
"" + 
"  &lt;/init-params&gt;" + 
"&lt;/component&gt;</programlisting>" + 
"		</example>" + 
"		<table>" + 
"			<title>Corresponding WebDAV and JCR Actions</title>" + 
"			<tgroup cols=\"2\">" + 
"				<thead>" + 
"					<row>" + 
"						<entry>" + 
"							WebDav" + 
"						</entry>" + 
"						<entry>" + 
"							JCR" + 
"						</entry>" + 
"					</row>" + 
"				</thead>" + 
"				<tbody>" + 
"					<row>" + 
"						<entry>" + 
"							COPY" + 
"						</entry>" + 
"						<entry>" + 
"							Workspace.copy(...)" + 
"						</entry>" + 
"					</row>" + 
"					<row>" + 
"						<entry>" + 
"							DELETE" + 
"						</entry>" + 
"						<entry>" + 
"							Node.remove()" + 
"						</entry>" + 
"					</row>" + 
"					<row>" + 
"						<entry>" + 
"							GET" + 
"						</entry>" + 
"						<entry>" + 
"							Node.getProperty(...); Property.getValue()" + 
"						</entry>" + 
"					</row>" + 
"					<row>" + 
"						<entry>" + 
"							HEAD" + 
"						</entry>" + 
"						<entry>" + 
"							Node.getProperty(...); Property.getLength()" + 
"						</entry>" + 
"					</row>" + 
"					<row>" + 
"						<entry>" + 
"							MKCOL" + 
"						</entry>" + 
"						<entry>" + 
"							Node.addNode(...)" + 
"						</entry>" + 
"					</row>" + 
"					<row>" + 
"						<entry>" + 
"							MOVE" + 
"						</entry>" + 
"						<entry>" + 
"							Session.move(...) or Workspace.move(...)" + 
"						</entry>" + 
"					</row>" + 
"					<row>" + 
"						<entry>" + 
"							PROPFIND" + 
"						</entry>" + 
"						<entry>" + 
"							Session.getNode(...); Node.getNode(...); Node.getNodes(...); Node.getProperties()" + 
"						</entry>" + 
"					</row>" + 
"					<row>" + 
"						<entry>" + 
"							PROPPATCH" + 
"						</entry>" + 
"						<entry>" + 
"							Node.setProperty(...); Node.getProperty(...).remove()" + 
"						</entry>" + 
"					</row>" + 
"					<row>" + 
"						<entry>" + 
"							PUT" + 
"						</entry>" + 
"						<entry>" + 
"							Node.addNode(\"node\",\"nt:file\"); Node.setProperty(\"jcr:data\", \"data\")" + 
"						</entry>" + 
"					</row>" + 
"					<row>" + 
"						<entry>" + 
"							CHECKIN" + 
"						</entry>" + 
"						<entry>" + 
"							Node.checkin()" + 
"						</entry>" + 
"					</row>" + 
"					<row>" + 
"						<entry>" + 
"							CHECKOUT" + 
"						</entry>" + 
"						<entry>" + 
"							Node.checkout()" + 
"						</entry>" + 
"					</row>" + 
"					<row>" + 
"						<entry>" + 
"							REPORT" + 
"						</entry>" + 
"						<entry>" + 
"							Node.getVersionHistory(); VersionHistory.getAllVersions(); Version.getProperties()" + 
"						</entry>" + 
"					</row>" + 
"					<row>" + 
"						<entry>" + 
"							RESTORE" + 
"						</entry>" + 
"						<entry>" + 
"							Node.restore(...)" + 
"						</entry>" + 
"					</row>" + 
"					<row>" + 
"						<entry>" + 
"							UNCHECKOUT" + 
"						</entry>" + 
"						<entry>" + 
"							Node.restore(...)" + 
"						</entry>" + 
"					</row>" + 
"					<row>" + 
"						<entry>" + 
"							VERSION-CONTROL" + 
"						</entry>" + 
"						<entry>" + 
"							Node.addMixin(\"mix:versionable\")" + 
"						</entry>" + 
"					</row>" + 
"					<row>" + 
"						<entry>" + 
"							LOCK" + 
"						</entry>" + 
"						<entry>" + 
"							Node.lock(...)" + 
"						</entry>" + 
"					</row>" + 
"					<row>" + 
"						<entry>" + 
"							UNLOCK" + 
"						</entry>" + 
"						<entry>" + 
"							Node.unlock()" + 
"						</entry>" + 
"					</row>" + 
"					<row>" + 
"						<entry>" + 
"							ORDERPATCH" + 
"						</entry>" + 
"						<entry>" + 
"							Node.orderBefore(...)" + 
"						</entry>" + 
"					</row>" + 
"					<row>" + 
"						<entry>" + 
"							SEARCH" + 
"						</entry>" + 
"						<entry>" + 
"							Workspace.getQueryManager(); QueryManager.createQuery(); Query.execute()" + 
"						</entry>" + 
"					</row>" + 
"				</tbody>" + 
"			</tgroup>" + 
"		</table>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+19107-566004+%5BLatest%5D&amp;cf_build_id=19107-566004+05+Dec+2013+14%3A59+en-US+%5BLatest%5D&amp;comment=Title%3A+WebDAV%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"		<section id=\"WebDAV_Considerations\" remap=\"TID_19108\">" + 
"			<title>WebDAV Considerations</title>" + 
"			<para>" + 
"				There are some restrictions for WebDAV in different operating systems." + 
"			</para>" + 
"			<formalpara id=\"form-Reference_Guide-WebDAV_Considerations-Windows_7\">" + 
"				<title>Windows 7</title>" + 
"				<para>" + 
"					When attempting to set up a web folder through <guilabel>Add a Network Location</guilabel> or <guilabel>Map a Network Drive</guilabel> through <guilabel>My Computer</guilabel>, an error message stating <guilabel>The folder you entered does not appear to be valid. Please choose another</guilabel> or <guilabel>Windows cannot access … Check the spelling of the name. Otherwise, there might be …</guilabel> may be encountered. These errors may appear when you are using SSL or non-SSL." + 
"				</para>" + 
"			</formalpara>" + 
"			<para>" + 
"				To fix this, do as follows:" + 
"			</para>" + 
"			<procedure>" + 
"				<step>" + 
"					<para>" + 
"						Go to Windows Registry Editor." + 
"					</para>" + 
"				</step>" + 
"				<step>" + 
"					<para>" + 
"						Find a key: \\HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlset\\services\\WebClient\\Parameters\\BasicAuthLevel ." + 
"					</para>" + 
"				</step>" + 
"				<step>" + 
"					<para>" + 
"						Change the value to 2." + 
"					</para>" + 
"				</step>" + 
"			</procedure>" + 
"			<formalpara id=\"form-Reference_Guide-WebDAV_Considerations-Microsoft_Office_2010\">" + 
"				<title>Microsoft Office 2010</title>" + 
"				<para>" + 
"					If you have:" + 
"				</para>" + 
"			</formalpara>" + 
"			<itemizedlist>" + 
"				<listitem>" + 
"					<para>" + 
"						Microsoft Office 2007/2010 applications installed on a client computer AND..." + 
"					</para>" + 
"				</listitem>" + 
"				<listitem>" + 
"					<para>" + 
"						The client computer is connected to a web server configured for Basic authentication VIA..." + 
"					</para>" + 
"				</listitem>" + 
"				<listitem>" + 
"					<para>" + 
"						A connection that does not use Secure Sockets Layer (SSL) AND..." + 
"					</para>" + 
"				</listitem>" + 
"				<listitem>" + 
"					<para>" + 
"						You try to access an Office file that is stored on the remote server..." + 
"					</para>" + 
"				</listitem>" + 
"				<listitem>" + 
"					<para>" + 
"						You might experience the following symptoms when you try to open or to download the file:" + 
"					</para>" + 
"					<itemizedlist>" + 
"						<listitem>" + 
"							<para>" + 
"								The Office file does not open or download." + 
"							</para>" + 
"						</listitem>" + 
"						<listitem>" + 
"							<para>" + 
"								You do not receive a Basic authentication password prompt when you try to open or to download the file." + 
"							</para>" + 
"						</listitem>" + 
"						<listitem>" + 
"							<para>" + 
"								You do not receive an error message when you try to open the file. The associated Office application starts. However, the selected file does not open." + 
"							</para>" + 
"						</listitem>" + 
"					</itemizedlist>" + 
"				</listitem>" + 
"			</itemizedlist>" + 
"			<para>" + 
"				These outcomes can be circumvented by enabling Basic authentication on the client machine." + 
"			</para>" + 
"			<procedure>" + 
"				<title>Enabling Basic Authentication on the Client Computer</title>" + 
"				<step>" + 
"					<para>" + 
"						Click Start, type <literal>regedit</literal> in the Start Search box, and then press Enter." + 
"					</para>" + 
"				</step>" + 
"				<step>" + 
"					<para>" + 
"						Locate and then click the following registry subkey:" + 
"					</para>" + 
"					<para>" + 
"						<envar>" + 
"							HKEY_CURRENT_USER\\Software\\Microsoft\\Office\\14.0\\Common\\Internet" + 
"						</envar>" + 
"					</para>" + 
"				</step>" + 
"				<step>" + 
"					<para>" + 
"						On the <guilabel>Edit</guilabel> menu, point to <guilabel>New</guilabel>, and then click <guilabel>DWORD Value</guilabel>." + 
"					</para>" + 
"				</step>" + 
"				<step>" + 
"					<para>" + 
"						Type <literal>BasicAuthLevel</literal>, and then press <keycap>Enter</keycap>." + 
"					</para>" + 
"				</step>" + 
"				<step>" + 
"					<para>" + 
"						Right-click <literal>BasicAuthLevel</literal>, and then click <guilabel>Modify</guilabel>." + 
"					</para>" + 
"				</step>" + 
"				<step>" + 
"					<para>" + 
"						In the Value data box, type <literal>2</literal>, and then click <guilabel>OK</guilabel>." + 
"					</para>" + 
"				</step>" + 
"			</procedure>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+19108-566004+%5BLatest%5D&amp;cf_build_id=19108-566004+05+Dec+2013+14%3A59+en-US+%5BLatest%5D&amp;comment=Title%3A+WebDAV+Considerations%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"	</section>" + 
"	<section id=\"FTP\" remap=\"TID_19109\">" + 
"		<title>FTP</title>" + 
"		<para>" + 
"			The JCR-FTP Server operates as an FTP server with access to a content stored in JCR repositories in the form of <literal>nt:file/nt:folder</literal> nodes or their successors. The client of an executed Server can be any FTP client. The FTP server is supported by a standard configuration which can be changed as required." + 
"		</para>" + 
"		<variablelist id=\"vari-Reference_Guide-Configuration_Parameters-Parameters\">" + 
"			<title>Configuration Parameters</title>" + 
"			<varlistentry>" + 
"				<term>command-port:</term>" + 
"				<listitem>" + 
"					<programlisting language=\"XML\" role=\"XML\">&lt;value-param&gt;" + 
"   &lt;name&gt;command-port&lt;/name&gt;" + 
"   &lt;value&gt;21&lt;/value&gt;" + 
"&lt;/value-param&gt;</programlisting>" + 
"					<para>" + 
"						The value of the command channel port. The value '<literal>21</literal>' is default." + 
"					</para>" + 
"					<para>" + 
"						If you have already other FTP server installed in your system, this parameter needs to be changed (to <literal>2121</literal>, for example) to avoid conflicts or if the port is protected." + 
"					</para>" + 
"				</listitem>" + 
"			</varlistentry>" + 
"			<varlistentry>" + 
"				<term>data-min-port and data-max-port</term>" + 
"				<listitem>" + 
"					<programlisting language=\"XML\" role=\"XML\">&lt;value-param&gt;" + 
"   &lt;name&gt;data-min-port&lt;/name&gt;" + 
"   &lt;value&gt;52000&lt;/value&gt;" + 
"&lt;/value-param&gt;</programlisting>" + 
"					<programlisting language=\"XML\" role=\"XML\">&lt;value-param&gt;" + 
"   &lt;name&gt;data-max-port&lt;/name&gt;" + 
"   &lt;value&gt;53000&lt;/value&gt;" + 
"&lt;/value-param&gt;</programlisting>" + 
"					<para>" + 
"						These two parameters indicate the minimum and maximum values of the range of ports, used by the server. The usage of the additional data channel is required by the FTP protocol, which is used to transfer the contents of files and the listing of catalogues. This range of ports should be free from listening by other server-programs." + 
"					</para>" + 
"				</listitem>" + 
"			</varlistentry>" + 
"			<varlistentry>" + 
"				<term>system</term>" + 
"				<listitem>" + 
"					<programlisting language=\"XML\" role=\"XML\">&lt;value-param&gt;" + 
"   &lt;name&gt;system&lt;/name&gt;" + 
"" + 
"   &lt;value&gt;Windows_NT&lt;/value&gt;" + 
"     or" + 
"   &lt;value&gt;UNIX Type: L8&lt;/value&gt;" + 
"&lt;/value-param&gt;</programlisting>" + 
"					<para>" + 
"						Types of formats of listing of catalogues which are supported." + 
"					</para>" + 
"				</listitem>" + 
"			</varlistentry>" + 
"			<varlistentry>" + 
"				<term>client-side-encoding</term>" + 
"				<listitem>" + 
"					<programlisting language=\"XML\" role=\"XML\">&lt;value-param&gt;" + 
"   &lt;name&gt;client-side-encoding&lt;/name&gt;" + 
"      " + 
"   &lt;value&gt;windows-1251&lt;/value&gt;" + 
"     or" + 
"   &lt;value&gt;KOI8-R&lt;/value&gt;" + 
"     " + 
"&lt;/value-param&gt;</programlisting>" + 
"					<para>" + 
"						This parameter specifies the coding which is used for dialogue with the client." + 
"					</para>" + 
"				</listitem>" + 
"			</varlistentry>" + 
"			<varlistentry>" + 
"				<term>def-folder-node-type</term>" + 
"				<listitem>" + 
"					<programlisting language=\"XML\" role=\"XML\">&lt;value-param&gt;" + 
"   &lt;name&gt;def-folder-node-type&lt;/name&gt;" + 
"   &lt;value&gt;nt:folder&lt;/value&gt;" + 
"&lt;/value-param&gt;</programlisting>" + 
"					<para>" + 
"						This parameter specifies the type of a node, when an FTP-folder is created." + 
"					</para>" + 
"				</listitem>" + 
"			</varlistentry>" + 
"			<varlistentry>" + 
"				<term>def-file-node-type</term>" + 
"				<listitem>" + 
"					<programlisting language=\"XML\" role=\"XML\">&lt;value-param&gt;" + 
"   &lt;name&gt;def-file-node-type&lt;/name&gt;" + 
"   &lt;value&gt;nt:file&lt;/value&gt;" + 
"&lt;/value-param&gt;</programlisting>" + 
"					<para>" + 
"						This parameter specifies the type of a node, when an FTP-file is created." + 
"					</para>" + 
"				</listitem>" + 
"			</varlistentry>" + 
"			<varlistentry>" + 
"				<term>def-file-mime-type</term>" + 
"				<listitem>" + 
"					<programlisting language=\"XML\" role=\"XML\">&lt;value-param&gt;" + 
"   &lt;name&gt;def-file-mime-type&lt;/name&gt;                 " + 
"   &lt;value&gt;application/zip&lt;/value&gt;" + 
"&lt;/value-param&gt;</programlisting>" + 
"					<para>" + 
"						The mime type of a created file is chosen by using its file extension. In case, a server cannot find the corresponding mime type, this value is used." + 
"					</para>" + 
"				</listitem>" + 
"			</varlistentry>" + 
"			<varlistentry>" + 
"				<term>cache-folder-name</term>" + 
"				<listitem>" + 
"					<programlisting language=\"XML\" role=\"XML\">&lt;value-param&gt;" + 
"   &lt;name&gt;cache-folder-name&lt;/name&gt;" + 
"   &lt;value&gt;../temp/ftp_cache&lt;/value&gt;" + 
"&lt;/value-param&gt;</programlisting>" + 
"					<para>" + 
"						The Path of the cache folder." + 
"					</para>" + 
"				</listitem>" + 
"			</varlistentry>" + 
"			<varlistentry>" + 
"				<term>upload-speed-limit</term>" + 
"				<listitem>" + 
"					<programlisting language=\"XML\" role=\"XML\">&lt;value-param&gt;" + 
"   &lt;name&gt;upload-speed-limit&lt;/name&gt;           " + 
"   &lt;value&gt;20480&lt;/value&gt;" + 
"&lt;/value-param&gt;</programlisting>" + 
"					<para>" + 
"						Restriction of the upload speed. It is measured in bytes." + 
"					</para>" + 
"				</listitem>" + 
"			</varlistentry>" + 
"			<varlistentry>" + 
"				<term>download-speed-limit</term>" + 
"				<listitem>" + 
"					<programlisting language=\"XML\" role=\"XML\">&lt;value-param&gt;" + 
"   &lt;name&gt;download-speed-limit&lt;/name&gt;" + 
"   &lt;value&gt;20480&lt;/value&gt;          " + 
"&lt;/value-param&gt;</programlisting>" + 
"					<para>" + 
"						Restriction of the download speed. It is measured in bytes." + 
"					</para>" + 
"				</listitem>" + 
"			</varlistentry>" + 
"			<varlistentry>" + 
"				<term>timeout</term>" + 
"				<listitem>" + 
"					<programlisting language=\"XML\" role=\"XML\">&lt;value-param&gt;" + 
"   &lt;name&gt;timeout&lt;/name&gt;" + 
"   &lt;value&gt;60&lt;/value&gt;" + 
"&lt;/value-param&gt;</programlisting>" + 
"					<para>" + 
"						Defines the value of a timeout." + 
"					</para>" + 
"				</listitem>" + 
"			</varlistentry>" + 
"		</variablelist>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+19109-466560+%5BSpecified%5D&amp;cf_build_id=19109-466560+19+Jun+2013+14%3A55+en-US+%5BSpecified%5D&amp;comment=Title%3A+FTP%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"	</section>" + 
"	<section id=\"sect-Use_External_Backup_Tool\">" + 
"		<title>Use External Backup Tool</title>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+19110-566009+%5BLatest%5D&amp;cf_build_id=19110-566009+05+Dec+2013+15%3A06+en-US+%5BLatest%5D&amp;comment=Title%3A+Use+External+Backup+Tool%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"		<section id=\"Repository_Suspending\" remap=\"TID_19111\">" + 
"			<title>Repository Suspending</title>" + 
"			<para>" + 
"				To have the repository content consistent with the search index and value storage, the repository must be suspended. This means all working threads are suspended until a resume operation is performed. The index will be flushed." + 
"			</para>" + 
"			<para>" + 
"				JCR provides ability to suspend repository via JMX." + 
"			</para>" + 
"			<figure>" + 
"				<title id=\"repositorysuspendcontroller\">Repository Suspend Controller</title>" + 
"				<mediaobject>" + 
"					<imageobject>" + 
"						<imagedata fileref=\"images/2911.png\" width=\"444\"/>" + 
"					</imageobject>" + 
"					<textobject>" + 
"						<phrase>The JMX console with the RepositorySuspendController MBean options displayed.</phrase>" + 
"					</textobject>" + 
"				</mediaobject>" + 
"			</figure>" + 
"			<para>" + 
"				To suspend repository you need to invoke the <literal>suspend()</literal> operation. The returned result will be \"<emphasis>suspended</emphasis>\" if everything passed successfully." + 
"			</para>" + 
"			<para>" + 
"				An \"<emphasis>undefined</emphasis>\" result means not all components were successfully suspended. Review the stack traces in the console to pinpoint the cause." + 
"			</para>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+19111-566009+%5BLatest%5D&amp;cf_build_id=19111-566009+05+Dec+2013+15%3A06+en-US+%5BLatest%5D&amp;comment=Title%3A+Repository+Suspending%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"		<section id=\"Backup_Considerations\" remap=\"TID_19112\">" + 
"			<title>Backup Considerations</title>" + 
"			<para>" + 
"				You can backup your content manually or by using third part software. You should back up:" + 
"			</para>" + 
"			<itemizedlist>" + 
"				<listitem>" + 
"					<para>" + 
"						Database." + 
"					</para>" + 
"				</listitem>" + 
"				<listitem>" + 
"					<para>" + 
"						Lucene index." + 
"					</para>" + 
"				</listitem>" + 
"				<listitem>" + 
"					<para>" + 
"						Value storage (if configured)." + 
"					</para>" + 
"				</listitem>" + 
"			</itemizedlist>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+19112-566009+%5BLatest%5D&amp;cf_build_id=19112-566009+05+Dec+2013+15%3A06+en-US+%5BLatest%5D&amp;comment=Title%3A+Backup+Considerations%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"		<section id=\"Repository_Resuming\" remap=\"TID_19113\">" + 
"			<title>Repository Resuming</title>" + 
"			<para>" + 
"				Once a backup is done you need to invoke the <literal>resume()</literal> operation to switch the repository back to on-line. The returned result will be \"<emphasis>on-line</emphasis>\"." + 
"			</para>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+19113-566009+%5BLatest%5D&amp;cf_build_id=19113-566009+05+Dec+2013+15%3A06+en-US+%5BLatest%5D&amp;comment=Title%3A+Repository+Resuming%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"	</section>" + 
"	<section id=\"sect-eXo_JCR_statistics\">" + 
"		<title>eXo JCR statistics</title>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+19114-566009+%5BLatest%5D&amp;cf_build_id=19114-566009+05+Dec+2013+15%3A06+en-US+%5BLatest%5D&amp;comment=Title%3A+eXo+JCR+statistics%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"		<section id=\"Statistics_on_the_Database_Access_Layer\" remap=\"TID_19115\">" + 
"			<title>Statistics on the Database Access Layer</title>" + 
"			<para>" + 
"				In order to have a better idea of the time spent into the database access layer, it can be useful to get some statistics on that part of the code, knowing that most of the time spent into eXo JCR is mainly the database access." + 
"			</para>" + 
"			<para>" + 
"				These statistics will then allow you to identify, without using any profiler, what is abnormally slow in this layer which could help diagnose, and fix, a problem." + 
"			</para>" + 
"			<para>" + 
"				If you use " + 
"				<envar>" + 
"					org.exoplatform.services.jcr.impl.storage.jdbc.optimisation.CQJDBCWorkspaceDataContainer" + 
"				</envar> or " + 
"				<envar>" + 
"					org.exoplatform.services.jcr.impl.storage.jdbc.JDBCWorkspaceDataContainer" + 
"				</envar> as " + 
"				<envar>" + 
"					WorkspaceDataContainer" + 
"				</envar>, you can get statistics on the time spent into the database access layer." + 
"			</para>" + 
"			<para>" + 
"				The database access layer (in eXo JCR) is represented by the methods of the interface " + 
"				<envar>" + 
"					org.exoplatform.services.jcr.storage.WorkspaceStorageConnection" + 
"				</envar>, so for all the methods defined in this interface, we can have the following figures:" + 
"			</para>" + 
"			<itemizedlist>" + 
"				<listitem>" + 
"					<para>" + 
"						The minimum time spent into the method." + 
"					</para>" + 
"				</listitem>" + 
"				<listitem>" + 
"					<para>" + 
"						The maximum time spent into the method." + 
"					</para>" + 
"				</listitem>" + 
"				<listitem>" + 
"					<para>" + 
"						The average time spent into the method." + 
"					</para>" + 
"				</listitem>" + 
"				<listitem>" + 
"					<para>" + 
"						The total amount of time spent into the method." + 
"					</para>" + 
"				</listitem>" + 
"				<listitem>" + 
"					<para>" + 
"						The total amount of time the method has been called." + 
"					</para>" + 
"				</listitem>" + 
"			</itemizedlist>" + 
"			<para>" + 
"				Those figures are also available globally for all the methods which gives us the global behavior of this layer." + 
"			</para>" + 
"			<para>" + 
"				To enable the statistics, set the JVM parameter called <parameter>JDBCWorkspaceDataContainer.statistics.enabled</parameter> to <emphasis>true</emphasis>. The corresponding CSV file is <filename>StatisticsJDBCStorageConnection-${creation-timestamp}.csv</filename>." + 
"			</para>" + 
"			<para>" + 
"				For more details about how CSV files are managed, see the section dedicated to the statistics manager." + 
"			</para>" + 
"			<para>" + 
"				The format of each column header is <replaceable>${method-alias}</replaceable>-<replaceable>${metric-alias}</replaceable>. The metric alias are described in the statistics manager section." + 
"			</para>" + 
"			<para>" + 
"				The name of the category of statistics corresponding to these statistics is <literal>JDBCStorageConnection</literal>, this name is mostly needed to access to the statistics through JMX." + 
"			</para>" + 
"			<table id=\"tabl-Reference_Guide-Statistics_on_the_Database_Access_Layer-Method_Alias\">" + 
"				<title>Method Alias</title>" + 
"				<tgroup cols=\"2\">" + 
"					<tbody>" + 
"						<row>" + 
"							<entry>" + 
"								global" + 
"							</entry>" + 
"							<entry>" + 
"								This is the alias for all the methods." + 
"							</entry>" + 
"						</row>" + 
"						<row>" + 
"							<entry>" + 
"								getItemDataById" + 
"							</entry>" + 
"							<entry>" + 
"								This is the alias for the method <emphasis>getItemData(String identifier).</emphasis>" + 
"							</entry>" + 
"						</row>" + 
"						<row>" + 
"							<entry>" + 
"								getItemDataByNodeDataNQPathEntry" + 
"							</entry>" + 
"							<entry>" + 
"								This is the alias for the method <emphasis>getItemData(NodeData parentData, QPathEntry name).</emphasis>" + 
"							</entry>" + 
"						</row>" + 
"						<row>" + 
"							<entry>" + 
"								getChildNodesData" + 
"							</entry>" + 
"							<entry>" + 
"								This is the alias for the method <emphasis>getChildNodesData(NodeData parent).</emphasis>" + 
"							</entry>" + 
"						</row>" + 
"						<row>" + 
"							<entry>" + 
"								getChildNodesCount" + 
"							</entry>" + 
"							<entry>" + 
"								This is the alias for the method <emphasis>getChildNodesCount(NodeData parent).</emphasis>" + 
"							</entry>" + 
"						</row>" + 
"						<row>" + 
"							<entry>" + 
"								getChildPropertiesData" + 
"							</entry>" + 
"							<entry>" + 
"								This is the alias for the method <emphasis>getChildPropertiesData(NodeData parent).</emphasis>" + 
"							</entry>" + 
"						</row>" + 
"						<row>" + 
"							<entry>" + 
"								listChildPropertiesData" + 
"							</entry>" + 
"							<entry>" + 
"								This is the alias for the method <emphasis>listChildPropertiesData(NodeData parent).</emphasis>" + 
"							</entry>" + 
"						</row>" + 
"						<row>" + 
"							<entry>" + 
"								getReferencesData" + 
"							</entry>" + 
"							<entry>" + 
"								This is the alias for the method <emphasis>getReferencesData(String nodeIdentifier).</emphasis>" + 
"							</entry>" + 
"						</row>" + 
"						<row>" + 
"							<entry>" + 
"								commit" + 
"							</entry>" + 
"							<entry>" + 
"								This is the alias for the method <emphasis>commit().</emphasis>" + 
"							</entry>" + 
"						</row>" + 
"						<row>" + 
"							<entry>" + 
"								addNodeData" + 
"							</entry>" + 
"							<entry>" + 
"								This is the alias for the method <emphasis>add(NodeData data).</emphasis>" + 
"							</entry>" + 
"						</row>" + 
"						<row>" + 
"							<entry>" + 
"								addPropertyData" + 
"							</entry>" + 
"							<entry>" + 
"								This is the alias for the method <emphasis>add(PropertyData data).</emphasis>" + 
"							</entry>" + 
"						</row>" + 
"						<row>" + 
"							<entry>" + 
"								updateNodeData" + 
"							</entry>" + 
"							<entry>" + 
"								This is the alias for the method <emphasis>update(NodeData data).</emphasis>" + 
"							</entry>" + 
"						</row>" + 
"						<row>" + 
"							<entry>" + 
"								updatePropertyData" + 
"							</entry>" + 
"							<entry>" + 
"								This is the alias for the method <emphasis>update(PropertyData data).</emphasis>" + 
"							</entry>" + 
"						</row>" + 
"						<row>" + 
"							<entry>" + 
"								deleteNodeData" + 
"							</entry>" + 
"							<entry>" + 
"								This is the alias for the method <emphasis>delete(NodeData data).</emphasis>" + 
"							</entry>" + 
"						</row>" + 
"						<row>" + 
"							<entry>" + 
"								deletePropertyData" + 
"							</entry>" + 
"							<entry>" + 
"								This is the alias for the method <emphasis>delete(PropertyData data).</emphasis>" + 
"							</entry>" + 
"						</row>" + 
"						<row>" + 
"							<entry>" + 
"								renameNodeData" + 
"							</entry>" + 
"							<entry>" + 
"								This is the alias for the method <emphasis>rename(NodeData data).</emphasis>" + 
"							</entry>" + 
"						</row>" + 
"						<row>" + 
"							<entry>" + 
"								rollback" + 
"							</entry>" + 
"							<entry>" + 
"								This is the alias for the method <emphasis>rollback().</emphasis>" + 
"							</entry>" + 
"						</row>" + 
"						<row>" + 
"							<entry>" + 
"								isOpened" + 
"							</entry>" + 
"							<entry>" + 
"								This is the alias for the method <emphasis>isOpened().</emphasis>" + 
"							</entry>" + 
"						</row>" + 
"						<row>" + 
"							<entry>" + 
"								close" + 
"							</entry>" + 
"							<entry>" + 
"								This is the alias for the method <emphasis>close().</emphasis>" + 
"							</entry>" + 
"						</row>" + 
"					</tbody>" + 
"				</tgroup>" + 
"			</table>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+19115-566009+%5BLatest%5D&amp;cf_build_id=19115-566009+05+Dec+2013+15%3A06+en-US+%5BLatest%5D&amp;comment=Title%3A+Statistics+on+the+Database+Access+Layer%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"		<section id=\"Statistics_on_the_JCR_API_Accesses\" remap=\"TID_19116\">" + 
"			<title>Statistics on the JCR API Accesses</title>" + 
"			<para>" + 
"				In order to know exactly how your application uses eXo JCR, it can be beneficial to register all the JCR API access requests in order to easily create a real life test scenario based on pure JCR calls, and also to tune the JCR to better fit operational requirements." + 
"			</para>" + 
"			<para>" + 
"				To allow you to specify which part of eXo JCR to monitor without applying any changes to existing code or building anything, use the Load-time Weaving proposed by AspectJ." + 
"			</para>" + 
"			<para>" + 
"				To enable this feature, you will have to add in your classpath the following jar files:" + 
"			</para>" + 
"			<itemizedlist>" + 
"				<listitem>" + 
"					<para>" + 
"						<emphasis>exo.jcr.component.statistics-X.Y.Z</emphasis>.jar corresponding to your eXo JCR version that you can get from the JBoss maven repository <ulink url=\"https://repository.jboss.org/nexus/content/groups/public/org/exoplatform/jcr/exo.jcr.component.statistics/\"/>." + 
"					</para>" + 
"				</listitem>" + 
"				<listitem>" + 
"					<para>" + 
"						aspectjrt-1.6.8.jar, which can be obtained from <ulink url=\"http://repo2.maven.org/maven2/org/aspectj/aspectjrt\"/>." + 
"					</para>" + 
"				</listitem>" + 
"			</itemizedlist>" + 
"			<para>" + 
"				The <filename>aspectjweaver-1.6.8.jar</filename> is also required. This file is available from the main maven repository located at <ulink url=\"http://repo2.maven.org/maven2/org/aspectj/aspectjweaver\"/>." + 
"			</para>" + 
"			<para>" + 
"				To enable the statistics on the JCR API accesses, add the JVM parameter <parameter>-javaagent:${pathto}/aspectjweaver-1.6.8.jar</parameter> to the command line. See <ulink url=\"http://www.eclipse.org/aspectj/doc/released/devguide/ltw-configuration.html\"/> for more information." + 
"			</para>" + 
"			<para>" + 
"				By default, the configuration collects statistics on all methods of the internal interfaces <literal>org.exoplatform.services.jcr.core.ExtendedSession</literal> and <literal>org.exoplatform.services.jcr.core.ExtendedNode</literal>, and the JCR API interface <literal>javax.jcr.Property</literal>." + 
"			</para>" + 
"			<para>" + 
"				To add or remove monitored interfaces, two configuration files bundled into the jar <filename>exo.jcr.component.statistics-X.Y.Z.jar</filename> must be changed. The files are <filename>conf/configuration.xml</filename> and <filename>META-INF/aop.xml</filename>." + 
"			</para>" + 
"			<para>" + 
"				The file content below is the content of <filename>conf/configuration.xml</filename> that must be modified to add or remove the fully qualified name of the interfaces to monitor, into the list of parameter values of the init param called <literal>targetInterfaces</literal>." + 
"			</para>" + 
"			<programlisting language=\"XML\">&lt;configuration xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://www.exoplaform.org/xml/ns/kernel_1_2.xsd http://www.exoplaform.org/xml/ns/kernel_1_2.xsd\"" + 
" xmlns=\"http://www.exoplaform.org/xml/ns/kernel_1_2.xsd\"&gt;" + 
"" + 
" &lt;component&gt;" + 
"   &lt;type&gt;org.exoplatform.services.jcr.statistics.JCRAPIAspectConfig&lt;/type&gt;" + 
"   &lt;init-params&gt;" + 
"     &lt;values-param&gt;" + 
"       &lt;name&gt;targetInterfaces&lt;/name&gt;" + 
"       &lt;value&gt;org.exoplatform.services.jcr.core.ExtendedSession&lt;/value&gt;" + 
"       &lt;value&gt;org.exoplatform.services.jcr.core.ExtendedNode&lt;/value&gt;" + 
"       &lt;value&gt;javax.jcr.Property&lt;/value&gt;" + 
"     &lt;/values-param&gt;" + 
"   &lt;/init-params&gt;" + 
"  &lt;/component&gt;" + 
"&lt;/configuration&gt;</programlisting>" + 
"			<para>" + 
"				The file content below is the content of <filename>META-INF/aop.xml</filename> that must be modified to add or remove the fully qualified name of the interfaces to monitor, into the expression filter of the pointcut called <literal>JCRAPIPointcut</literal>." + 
"			</para>" + 
"			<para>" + 
"				By default only JCR API calls from the <literal>exoplatform</literal> packages are taken into account. This filter can be modified to add other package names." + 
"			</para>" + 
"			<important>" + 
"				<para>" + 
"					This feature will affect the performance of eXo JCR. It must be used with caution." + 
"				</para>" + 
"			</important>" + 
"			<programlisting language=\"XML\" role=\"XML\">&lt;aspectj&gt;" + 
"  &lt;aspects&gt;" + 
"    &lt;concrete-aspect name=\"org.exoplatform.services.jcr.statistics.JCRAPIAspectImpl\" extends=\"org.exoplatform.services.jcr.statistics.JCRAPIAspect\"&gt;" + 
"      &lt;pointcut name=\"JCRAPIPointcut\"" + 
"        expression=\"(target(org.exoplatform.services.jcr.core.ExtendedSession) || target(org.exoplatform.services.jcr.core.ExtendedNode) || target(javax.jcr.Property)) &amp;&amp; call(public * *(..))\" /&gt;" + 
"    &lt;/concrete-aspect&gt;" + 
"  &lt;/aspects&gt;" + 
"  &lt;weaver options=\"-XnoInline\"&gt;" + 
"    &lt;include within=\"org.exoplatform..*\" /&gt;" + 
"  &lt;/weaver&gt;" + 
"&lt;/aspectj&gt;</programlisting>" + 
"			<para>" + 
"				The corresponding CSV files are of type <filename>Statistics<replaceable>${interface-name}</replaceable>-<replaceable>${creation-timestamp}</replaceable>.csv</filename> for more details about how the <emphasis>CSV</emphasis> files are managed, see the section dedicated to the statistics manager." + 
"			</para>" + 
"			<para>" + 
"				The format of each column header is <replaceable>${method-alias}</replaceable>-<replaceable>${metric-alias}</replaceable>. The method alias will be of type <replaceable>${method-name}(semicolon-delimited-list-of-parameter-types-to-be-compatible-with-the-CSV-format)</replaceable>." + 
"			</para>" + 
"			<para>" + 
"				The metric alias are described in the statistics manager section." + 
"			</para>" + 
"			<para>" + 
"				The name of the category of statistics corresponding to these statistics is the simple name of the monitored interface (e.g. <literal>ExtendedSession</literal> for <literal>org.exoplatform.services.jcr.core.ExtendedSession</literal>), this name is mostly needed to access to the statistics through JMX." + 
"			</para>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+19116-566009+%5BLatest%5D&amp;cf_build_id=19116-566009+05+Dec+2013+15%3A06+en-US+%5BLatest%5D&amp;comment=Title%3A+Statistics+on+the+JCR+API+Accesses%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"		<section id=\"Statistics_Manager\" remap=\"TID_19117\">" + 
"			<title>Statistics Manager</title>" + 
"			<para>" + 
"				The statistics manager manages all the statistics provided by eXo JCR, it is responsible of printing the data into the CSV files and also exposing the statistics through JMX and/or Rest." + 
"			</para>" + 
"			<para>" + 
"				The statistics manager will create all the CSV files for each category of statistics that it manages, the format of those files is <emphasis>Statistics${category-name}-${creation-timestamp}.csv</emphasis>. Those files will be created into the user directory if it is possible otherwise it will create them into the temporary directory. The format of those files is " + 
"				<envar>" + 
"					CSV" + 
"				</envar> (i.e. Comma-Separated Values), one new line will be added regularly (every 5 seconds by default) and one last line will be added at JVM exit. Each line, will be composed of the 5 figures described below for each method and globally for all the methods." + 
"			</para>" + 
"			<para>" + 
"				<table id=\"tabl-Reference_Guide-Statistics_Manager-Metric_Alias\">" + 
"					<title>Metric Alias</title>" + 
"					<tgroup cols=\"2\">" + 
"						<tbody>" + 
"							<row>" + 
"								<entry>" + 
"									Min" + 
"								</entry>" + 
"								<entry>" + 
"									The minimum time spent into the method expressed in milliseconds." + 
"								</entry>" + 
"							</row>" + 
"							<row>" + 
"								<entry>" + 
"									Max" + 
"								</entry>" + 
"								<entry>" + 
"									The maximum time spent into the method expressed in milliseconds." + 
"								</entry>" + 
"							</row>" + 
"							<row>" + 
"								<entry>" + 
"									Total" + 
"								</entry>" + 
"								<entry>" + 
"									The total amount of time spent into the method expressed in milliseconds." + 
"								</entry>" + 
"							</row>" + 
"							<row>" + 
"								<entry>" + 
"									Avg" + 
"								</entry>" + 
"								<entry>" + 
"									The average time spent into the method expressed in milliseconds." + 
"								</entry>" + 
"							</row>" + 
"							<row>" + 
"								<entry>" + 
"									Times" + 
"								</entry>" + 
"								<entry>" + 
"									The total amount of times the method has been called." + 
"								</entry>" + 
"							</row>" + 
"						</tbody>" + 
"					</tgroup>" + 
"				</table> You can disable the persistence of the statistics by setting the JVM parameter called <parameter>JCRStatisticsManager.persistence.enabled</parameter> to <literal>false</literal>. It is set to <literal>true</literal> by default." + 
"			</para>" + 
"			<para>" + 
"				You can also define the period of time between each record (that is, line of data into the file) by setting the JVM parameter called <parameter>JCRStatisticsManager.persistence.timeout</parameter> to your expected value expressed in milliseconds. It is set to <literal>5000</literal> by default." + 
"			</para>" + 
"			<para>" + 
"				You can also access to the statistics via JMX. The available methods are:" + 
"			</para>" + 
"			<para>" + 
"				<table id=\"tabl-Reference_Guide-Statistics_Manager-JMX_Methods\">" + 
"					<title>JMX Methods</title>" + 
"					<tgroup cols=\"2\">" + 
"						<tbody>" + 
"							<row>" + 
"								<entry>" + 
"									getMin" + 
"								</entry>" + 
"								<entry>" + 
"									Give the minimum time spent into the method corresponding to the given category name and statistics name. The expected arguments are the name of the category of statistics (<literal>JDBCStorageConnection</literal> for example) and the name of the expected method or global for the global value." + 
"								</entry>" + 
"							</row>" + 
"							<row>" + 
"								<entry>" + 
"									getMax" + 
"								</entry>" + 
"								<entry>" + 
"									Give the maximum time spent into the method corresponding to the given category name and statistics name. The expected arguments are the name of the category of statistics and the name of the expected method or global for the global value." + 
"								</entry>" + 
"							</row>" + 
"							<row>" + 
"								<entry>" + 
"									getTotal" + 
"								</entry>" + 
"								<entry>" + 
"									Give the total amount of time spent into the method corresponding to the given category name and statistics name. The expected arguments are the name of the category of statistics and the name of the expected method or global for the global value." + 
"								</entry>" + 
"							</row>" + 
"							<row>" + 
"								<entry>" + 
"									getAvg" + 
"								</entry>" + 
"								<entry>" + 
"									Give the average time spent into the method corresponding to the given category name and statistics name. The expected arguments are the name of the category of statistics and the name of the expected method or global for the global value." + 
"								</entry>" + 
"							</row>" + 
"							<row>" + 
"								<entry>" + 
"									getTimes" + 
"								</entry>" + 
"								<entry>" + 
"									Give the total amount of times the method has been called corresponding to the given category name and statistics name. The expected arguments are the name of the category of statistics (e.g. JDBCStorageConnection) and the name of the expected method or global for the global value." + 
"								</entry>" + 
"							</row>" + 
"							<row>" + 
"								<entry>" + 
"									reset" + 
"								</entry>" + 
"								<entry>" + 
"									Reset the statistics for the given category name and statistics name. The expected arguments are the name of the category of statistics and the name of the expected method or global for the global value." + 
"								</entry>" + 
"							</row>" + 
"							<row>" + 
"								<entry>" + 
"									resetAll" + 
"								</entry>" + 
"								<entry>" + 
"									Reset all the statistics for the given category name. The expected argument is the name of the category of statistics (e.g. JDBCStorageConnection)." + 
"								</entry>" + 
"							</row>" + 
"						</tbody>" + 
"					</tgroup>" + 
"				</table> The full name of the related MBean is <literal>xo:service=statistic, view=jcr</literal>." + 
"			</para>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+19117-566009+%5BLatest%5D&amp;cf_build_id=19117-566009+05+Dec+2013+15%3A06+en-US+%5BLatest%5D&amp;comment=Title%3A+Statistics+Manager%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"	</section>" + 
"	<section id=\"sect-Checking_Repository_Integrity_and_Consistency\">" + 
"		<title>Checking Repository Integrity and Consistency</title>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+19118-566009+%5BLatest%5D&amp;cf_build_id=19118-566009+05+Dec+2013+15%3A06+en-US+%5BLatest%5D&amp;comment=Title%3A+Checking+Repository+Integrity+and+Consistency%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"		<section id=\"JMX-based_consistency_tool\" remap=\"TID_19119\">" + 
"			<title>JMX-based consistency tool</title>" + 
"			<para>" + 
"				It is important to check the integrity and consistency of system regularly, especially if there is no, or stale, backups. The portal JCR implementation offers an innovative JMX-based complex checking tool." + 
"			</para>" + 
"			<para>" + 
"				During an inspection, the tool checks every major JCR component, such as persistent data layer and the index. The persistent layer includes JDBC Data Container and Value-Storages if they are configured." + 
"			</para>" + 
"			<para>" + 
"				The database is verified using the set of complex specialized domain-specific queries. The Value Storage tool checks the existence of, and access to, each file." + 
"			</para>" + 
"			<para>" + 
"				Access to the check tool is exposed via the JMX interface, with the following operations available:" + 
"			</para>" + 
"			<table id=\"tabl-Reference_Guide-JMX_based_consistency_tool-Available_methods\">" + 
"				<title>Available methods</title>" + 
"				<tgroup cols=\"2\">" + 
"					<tbody>" + 
"						<row>" + 
"							<entry>" + 
"								<code>checkRepositoryDataConsistency()</code>" + 
"							</entry>" + 
"							<entry>" + 
"								Inspect full repository data (db, value storage and search index)" + 
"							</entry>" + 
"						</row>" + 
"						<row>" + 
"							<entry>" + 
"								<code>checkRepositoryDataBaseConsistency()</code>" + 
"							</entry>" + 
"							<entry>" + 
"								Inspect only DB" + 
"							</entry>" + 
"						</row>" + 
"						<row>" + 
"							<entry>" + 
"								<code>checkRepositoryValueStorageConsistency()</code>" + 
"							</entry>" + 
"							<entry>" + 
"								Inspect only ValueStorage" + 
"							</entry>" + 
"						</row>" + 
"						<row>" + 
"							<entry>" + 
"								<code>checkRepositorySearchIndexConsistency()</code>" + 
"							</entry>" + 
"							<entry>" + 
"								Inspect only SearchIndex" + 
"							</entry>" + 
"						</row>" + 
"					</tbody>" + 
"				</tgroup>" + 
"			</table>" + 
"			<para>" + 
"				All inspection activities and corrupted data details are stored in a file in the <filename>app</filename> directory and named as per the following convention: <code>report-<replaceable>&lt;repository name&gt;</replaceable>-<replaceable>dd-MMM-yy-HH-mm</replaceable>.txt</code>." + 
"			</para>" + 
"			<para>" + 
"				The path to the file will be returned in result message also at the end of the inspection." + 
"			</para>" + 
"			<note>" + 
"				<para>" + 
"					There are three types of inconsistency (Warning, Error and Index) and two of them are critical (Errors and Index):" + 
"				</para>" + 
"				<itemizedlist>" + 
"					<listitem>" + 
"						<para>" + 
"							Index faults are marked as \"Reindex\" and can be fixed by re-indexing the workspace." + 
"						</para>" + 
"					</listitem>" + 
"					<listitem>" + 
"						<para>" + 
"							Errors can only be fixed manually." + 
"						</para>" + 
"					</listitem>" + 
"					<listitem>" + 
"						<para>" + 
"							Warnings can be a normal situation in some cases and usually production system will still remain fully functional." + 
"						</para>" + 
"					</listitem>" + 
"				</itemizedlist>" + 
"			</note>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+19119-566009+%5BLatest%5D&amp;cf_build_id=19119-566009+05+Dec+2013+15%3A06+en-US+%5BLatest%5D&amp;comment=Title%3A+JMX-based+consistency+tool%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"	</section>" + 
"	<section id=\"sect-JCR_Performance_Tuning_Guide\">" + 
"		<title>JCR Performance Tuning Guide</title>" + 
"		<para>" + 
"			This section will show you various ways of improving JCR performance." + 
"		</para>" + 
"		<para>" + 
"			It is intended for Administrators and others who want to use the JCR features more efficiently." + 
"		</para>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+19120-566009+%5BLatest%5D&amp;cf_build_id=19120-566009+05+Dec+2013+15%3A06+en-US+%5BLatest%5D&amp;comment=Title%3A+JCR+Performance+Tuning+Guide%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"		<section id=\"sect-JCR_Performance_and_Scalability\">" + 
"			<title>JCR Performance and Scalability</title>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+19121-566009+%5BLatest%5D&amp;cf_build_id=19121-566009+05+Dec+2013+15%3A06+en-US+%5BLatest%5D&amp;comment=Title%3A+JCR+Performance+and+Scalability%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"			<section id=\"Cluster_configuration\" remap=\"TID_19122\">" + 
"				<title>Cluster configuration</title>" + 
"				<para>" + 
"					<xref linkend=\"table-EC2_network_1Gbit\"/> contains details about the configuration of the cluster used in benchmark testing." + 
"				</para>" + 
"				<note>" + 
"					<para>" + 
"						NFS and statistics (cacti snmp) server were located on one physical server." + 
"					</para>" + 
"				</note>" + 
"				<table id=\"table-EC2_network_1Gbit\">" + 
"					<title>EC2 network: 1Gbit</title>" + 
"					<tgroup cols=\"2\">" + 
"						<colspec colname=\"1\"/>" + 
"						<colspec colname=\"2\"/>" + 
"						<thead>" + 
"							<row>" + 
"								<entry>" + 
"									Servers hardware" + 
"								</entry>" + 
"								<entry>" + 
"									Specification" + 
"								</entry>" + 
"							</row>" + 
"						</thead>" + 
"						<tbody>" + 
"							<row>" + 
"								<entry>" + 
"									RAM" + 
"								</entry>" + 
"								<entry>" + 
"									7.5 GB" + 
"								</entry>" + 
"							</row>" + 
"							<row>" + 
"								<entry>" + 
"									Processors" + 
"								</entry>" + 
"								<entry>" + 
"									4 EC2 Compute Units (2 virtual cores with 2 EC2 Compute Units each)" + 
"								</entry>" + 
"							</row>" + 
"							<row>" + 
"								<entry>" + 
"									Storage" + 
"								</entry>" + 
"								<entry>" + 
"									850 GB (2×420 GB plus 10 GB root partition)" + 
"								</entry>" + 
"							</row>" + 
"							<row>" + 
"								<entry>" + 
"									Architecture" + 
"								</entry>" + 
"								<entry>" + 
"									64-bit" + 
"								</entry>" + 
"							</row>" + 
"							<row>" + 
"								<entry>" + 
"									I/O Performance" + 
"								</entry>" + 
"								<entry>" + 
"									High" + 
"								</entry>" + 
"							</row>" + 
"							<row>" + 
"								<entry>" + 
"									API name" + 
"								</entry>" + 
"								<entry>" + 
"									<literal>m1.large</literal>" + 
"								</entry>" + 
"							</row>" + 
"						</tbody>" + 
"					</tgroup>" + 
"				</table>" + 
"				<para>" + 
"					The configuration used to achieve this benchmark is as follows: <code>JAVA_OPTS: -Dprogram.name=run.sh -server -Xms4g -Xmx4g -XX:MaxPermSize=512m -Dorg.jboss.resolver.warning=true -Dsun.rmi.dgc.client.gcInterval=3600000 -Dsun.rmi.dgc.server.gcInterval=3600000 -XX:+UseParallelGC -Djava.net.preferIPv4Stack=true</code>" + 
"				</para>" + 
"				<para role=\"RoleCreateBugPara\">" + 
"					<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+19122-566009+%5BLatest%5D&amp;cf_build_id=19122-566009+05+Dec+2013+15%3A06+en-US+%5BLatest%5D&amp;comment=Title%3A+Cluster+configuration%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"				</para>" + 
"			</section>" + 
"			<section id=\"JCR_Clustered_Performance\" remap=\"TID_19123\">" + 
"				<title>JCR Clustered Performance</title>" + 
"				<para>" + 
"					Benchmark test using WebDAV (Complex read/write load test (benchmark)) with 20K same file. To obtain per-operation results we have used custom output from the test case threads to CSV file." + 
"				</para>" + 
"				<para>" + 
"					<citetitle>Read operation</citetitle>: " + 
"					<simplelist>" + 
"						<member>" + 
"							Warm-up iterations: 100" + 
"						</member>" + 
"						<member>" + 
"							Run iterations: 2000" + 
"						</member>" + 
"						<member>" + 
"							Background writing threads: 25" + 
"						</member>" + 
"						<member>" + 
"							Reading threads: 225" + 
"						</member>" + 
"					</simplelist>" + 
"				</para>" + 
"				<figure>" + 
"					<title id=\"perf_EC2_result\">EC2 Performance Results - 225/25 threads</title>" + 
"					<mediaobject>" + 
"						<imageobject>" + 
"							<imagedata fileref=\"images/2902.jpg\"/>" + 
"						</imageobject>" + 
"						<textobject>" + 
"							<phrase>Bar graph, displaying the cluster size on the horizontal axis, and Threads Per Second (TPS) indicated in increments of 200 on the vertical axis, with a top value of 2800 TPS.</phrase>" + 
"						</textobject>" + 
"					</mediaobject>" + 
"				</figure>" + 
"				<table>" + 
"					<title>EC2 Performance Results - 225/25 Bar Graph Details</title>" + 
"					<tgroup cols=\"4\">" + 
"						<thead>" + 
"							<row>" + 
"								<entry>" + 
"									Nodes count" + 
"								</entry>" + 
"								<entry>" + 
"									TPS" + 
"								</entry>" + 
"								<entry>" + 
"									Responses &gt;2s" + 
"								</entry>" + 
"								<entry>" + 
"									Responses &gt;4s" + 
"								</entry>" + 
"							</row>" + 
"						</thead>" + 
"						<tbody>" + 
"							<row>" + 
"								<entry>" + 
"									1" + 
"								</entry>" + 
"								<entry>" + 
"									523" + 
"								</entry>" + 
"								<entry>" + 
"									6.87%" + 
"								</entry>" + 
"								<entry>" + 
"									1.27%" + 
"								</entry>" + 
"							</row>" + 
"							<row>" + 
"								<entry>" + 
"									2" + 
"								</entry>" + 
"								<entry>" + 
"									1754" + 
"								</entry>" + 
"								<entry>" + 
"									0.64%" + 
"								</entry>" + 
"								<entry>" + 
"									0.08%" + 
"								</entry>" + 
"							</row>" + 
"							<row>" + 
"								<entry>" + 
"									3" + 
"								</entry>" + 
"								<entry>" + 
"									2388" + 
"								</entry>" + 
"								<entry>" + 
"									0.49%" + 
"								</entry>" + 
"								<entry>" + 
"									0.09%" + 
"								</entry>" + 
"							</row>" + 
"							<row>" + 
"								<entry>" + 
"									4" + 
"								</entry>" + 
"								<entry>" + 
"									2706" + 
"								</entry>" + 
"								<entry>" + 
"									0.46%" + 
"								</entry>" + 
"								<entry>" + 
"									0.1%" + 
"								</entry>" + 
"							</row>" + 
"						</tbody>" + 
"					</tgroup>" + 
"				</table>" + 
"				<para>" + 
"					<citetitle>Read operation with more threads</citetitle>:" + 
"				</para>" + 
"				<simplelist>" + 
"					<member>" + 
"						Warm-up iterations: 100" + 
"					</member>" + 
"					<member>" + 
"						Run iterations: 2000" + 
"					</member>" + 
"					<member>" + 
"						Background writing threads: 50" + 
"					</member>" + 
"					<member>" + 
"						Reading threads: 450" + 
"					</member>" + 
"				</simplelist>" + 
"				<figure>" + 
"					<title id=\"perf_EC2_result2\">EC2 Performance Results - 450/50 threads</title>" + 
"					<mediaobject>" + 
"						<imageobject>" + 
"							<imagedata fileref=\"images/2903.jpg\"/>" + 
"						</imageobject>" + 
"						<textobject>" + 
"							<phrase>Bar graph, displaying the cluster size on the horizontal axis, and Threads Per Second (TPS) indicated in increments of 200 on the vertical axis, with a top value of 2800 TPS.</phrase>" + 
"						</textobject>" + 
"					</mediaobject>" + 
"				</figure>" + 
"				<table>" + 
"					<title>EC2 Performance Results - 450/50 Bar Graph Details</title>" + 
"					<tgroup cols=\"4\">" + 
"						<thead>" + 
"							<row>" + 
"								<entry>" + 
"									Nodes count" + 
"								</entry>" + 
"								<entry>" + 
"									tps" + 
"								</entry>" + 
"								<entry>" + 
"									Responses &gt;2s" + 
"								</entry>" + 
"								<entry>" + 
"									Responses &gt;4s" + 
"								</entry>" + 
"							</row>" + 
"						</thead>" + 
"						<tbody>" + 
"							<row>" + 
"								<entry>" + 
"									1" + 
"								</entry>" + 
"								<entry>" + 
"									116" + 
"								</entry>" + 
"								<entry>" + 
"									?" + 
"								</entry>" + 
"								<entry>" + 
"									?" + 
"								</entry>" + 
"							</row>" + 
"							<row>" + 
"								<entry>" + 
"									2" + 
"								</entry>" + 
"								<entry>" + 
"									1558" + 
"								</entry>" + 
"								<entry>" + 
"									6.1%" + 
"								</entry>" + 
"								<entry>" + 
"									0.6%" + 
"								</entry>" + 
"							</row>" + 
"							<row>" + 
"								<entry>" + 
"									3" + 
"								</entry>" + 
"								<entry>" + 
"									2242" + 
"								</entry>" + 
"								<entry>" + 
"									3.1%" + 
"								</entry>" + 
"								<entry>" + 
"									0.38%" + 
"								</entry>" + 
"							</row>" + 
"							<row>" + 
"								<entry>" + 
"									4" + 
"								</entry>" + 
"								<entry>" + 
"									2756" + 
"								</entry>" + 
"								<entry>" + 
"									2.2%" + 
"								</entry>" + 
"								<entry>" + 
"									0.41%" + 
"								</entry>" + 
"							</row>" + 
"						</tbody>" + 
"					</tgroup>" + 
"				</table>" + 
"				<para role=\"RoleCreateBugPara\">" + 
"					<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+19123-566009+%5BLatest%5D&amp;cf_build_id=19123-566009+05+Dec+2013+15%3A06+en-US+%5BLatest%5D&amp;comment=Title%3A+JCR+Clustered+Performance%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"				</para>" + 
"			</section>" + 
"		</section>" + 
"		<section id=\"sect-Performance_Tuning_Guide\">" + 
"			<title>Performance Tuning Guide</title>" + 
"			<!--           <section id=\"sect-Reference_Guide-Performance_Tuning_Guide-JVM_parameters\">" + 
"            <title>JVM parameters</title>" + 
"             <para>" + 
"                <citetitle>PermGen space size</citetitle>" + 
"            </para>" + 
"             <para>" + 
"                If you intend to use Infinispan, you will have to increase the PermGen size to at least 256 Mo due to the latest versions of JGroups that are needed by Infinispan (please note that Infinspan is only dedicated to the community for now, no support will be provided). In case, you intend to use JBoss Cache, you can keep on using JGroups 2.6.13.GA which means that you don't need to increase the PermGen size." + 
"            </para>" + 
"" + 
"        </section>      -->" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+19124-566009+%5BLatest%5D&amp;cf_build_id=19124-566009+05+Dec+2013+15%3A06+en-US+%5BLatest%5D&amp;comment=Title%3A+Performance+Tuning+Guide%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"			<section id=\"JBoss_Enterprise_Application_Platform_6_Tuning\" remap=\"TID_19125\">" + 
"				<title>JBoss Enterprise Application Platform 6 Tuning</title>" + 
"				<para>" + 
"					You can use <parameter>maxThreads</parameter> parameter to increase maximum amount of threads that can be launched in AS instance. This can improve performance if you need a high level of concurrency. also you can use <code>-XX:+UseParallelGC</code> java directory to use parallel garbage collector." + 
"				</para>" + 
"				<note>" + 
"					<title>Note</title>" + 
"					<para>" + 
"						Beware of setting <parameter>maxThreads</parameter> too big, this can cause <exceptionname>OutOfMemoryError</exceptionname>. We've got it with <code>maxThreads=1250</code> on such machine:" + 
"					</para>" + 
"					<simplelist>" + 
"						<member>" + 
"							7.5 GB memory" + 
"						</member>" + 
"						<member>" + 
"							4 EC2 Compute Units (2 virtual cores with 2 EC2 Compute Units each)" + 
"						</member>" + 
"						<member>" + 
"							850 GB instance storage (2×420 GB plus 10 GB root partition)" + 
"						</member>" + 
"						<member>" + 
"							64-bit platform" + 
"						</member>" + 
"						<member>" + 
"							I/O Performance: High" + 
"						</member>" + 
"						<member>" + 
"							API name: m1.large" + 
"						</member>" + 
"						<member>" + 
"							java -Xmx 4g" + 
"						</member>" + 
"					</simplelist>" + 
"				</note>" + 
"				<para role=\"RoleCreateBugPara\">" + 
"					<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+19125-566009+%5BLatest%5D&amp;cf_build_id=19125-566009+05+Dec+2013+15%3A06+en-US+%5BLatest%5D&amp;comment=Title%3A+JBoss+Enterprise+Application+Platform+6+Tuning%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"				</para>" + 
"			</section>" + 
"			<section id=\"JCR_Cache_Tuning\" remap=\"TID_19126\">" + 
"				<title>JCR Cache Tuning</title>" + 
"				<para>" + 
"					<citetitle>Cache size</citetitle>" + 
"				</para>" + 
"				<para>" + 
"					JCR-cluster implementation is built using JBoss Cache as distributed, replicated cache. But there is one particularity related to remove action in it. Speed of this operation depends on the actual size of cache. As many nodes are currently in cache as much time is needed to remove one particular node (subtree) from it." + 
"				</para>" + 
"				<para>" + 
"					<citetitle>Eviction</citetitle>" + 
"				</para>" + 
"				<para>" + 
"					Manipulations with eviction <parameter>wakeUpInterval</parameter> value does not affect on performance. Performance results with values from 500 up to 3000 are approximately equal." + 
"				</para>" + 
"				<para>" + 
"					<citetitle>Transaction Timeout</citetitle>" + 
"				</para>" + 
"				<para>" + 
"					Using short timeout for long transactions such as Export/Import, removing huge subtree defined timeout may cause <exceptionname>TransactionTimeoutException</exceptionname>." + 
"				</para>" + 
"				<para role=\"RoleCreateBugPara\">" + 
"					<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+19126-566009+%5BLatest%5D&amp;cf_build_id=19126-566009+05+Dec+2013+15%3A06+en-US+%5BLatest%5D&amp;comment=Title%3A+JCR+Cache+Tuning%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"				</para>" + 
"			</section>" + 
"			<section id=\"Clustering_Tuning\" remap=\"TID_19127\">" + 
"				<title>Clustering Tuning</title>" + 
"				<para>" + 
"					For performance it is better to have a load-balancer, DB server and shared NFS on different computers. If in some reasons you see that one node gets more load than others you can decrease this load using load value in load balancer." + 
"				</para>" + 
"				<para>" + 
"					<citetitle>JGroups configuration</citetitle>" + 
"				</para>" + 
"				<para>" + 
"					It's recommended to use \"multiplexer stack\" feature present in JGroups. It is set by default in eXo JCR and offers higher performance in cluster, using less network connections also. If there are two or more clusters in your network, please check that they use different ports and different cluster names." + 
"				</para>" + 
"				<para>" + 
"					<citetitle>Write performance in cluster</citetitle>" + 
"				</para>" + 
"				<para>" + 
"					Exo JCR implementation uses Lucene indexing engine to provide search capabilities. But Lucene brings some limitations for write operations: it can perform indexing only in one thread. That is why write performance in cluster is not higher than in singleton environment. Data is indexed on coordinator node, so increasing write-load on cluster may lead to ReplicationTimeout exception. It occurs because writing threads queue in the indexer and under high load timeout for replication to coordinator will be exceeded." + 
"				</para>" + 
"				<para>" + 
"					Taking in consideration this fact, it is recommended to exceed <parameter>replTimeout</parameter> value in cache configurations in case of high write-load." + 
"				</para>" + 
"				<para>" + 
"					<citetitle>Replication timeout</citetitle>" + 
"				</para>" + 
"				<para>" + 
"					Some operations may take too much time. So if you get <exceptionname>ReplicationTimeoutException</exceptionname> try increasing replication timeout:" + 
"				</para>" + 
"				<programlisting language=\"XML\" role=\"XML\">   &lt;clustering mode=\"replication\" clusterName=\"${jbosscache-cluster-name}\"&gt;" + 
"      ..." + 
"      &lt;sync replTimeout=\"60000\" /&gt;" + 
"   &lt;/clustering&gt;" + 
"</programlisting>" + 
"				<para>" + 
"					value is set in milliseconds." + 
"				</para>" + 
"				<para role=\"RoleCreateBugPara\">" + 
"					<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+19127-566009+%5BLatest%5D&amp;cf_build_id=19127-566009+05+Dec+2013+15%3A06+en-US+%5BLatest%5D&amp;comment=Title%3A+Clustering+Tuning%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"				</para>" + 
"			</section>" + 
"		</section>" + 
"	</section>" + 
"	<section id=\"sect-eXo_JCR-1\">" + 
"		<title>eXo JCR</title>" + 
"		<section id=\"Declaring_the_Datasources_in_the_Application_Server\" remap=\"TID_19131\">" + 
"			<title>Declaring the Datasources in the Application Server</title>" + 
"			<remark>" + 
"				NEEDINFO - FILE PATHS - I know this isn't right. Where do these get deployed again?" + 
"			</remark>" + 
"			<para>" + 
"				To declare the datasources using a JBoss application server, deploy a <literal>ds</literal> file (<filename><replaceable>XXX</replaceable>-ds.xml</filename>) into the <emphasis>deploy</emphasis> directory of the appropriate server profile (<filename>/server/<replaceable>PROFILE</replaceable>/deploy</filename>, for example)." + 
"			</para>" + 
"			<para>" + 
"				This file configures all datasources which the portal needs (there should be four specifically named: <emphasis>jdbcjcr_portal</emphasis>, <emphasis>jdbcjcr_portal-sample</emphasis>, <emphasis>jdbcidm_portal</emphasis> and <emphasis>jdbcidm_sample-portal</emphasis>)." + 
"			</para>" + 
"			<para>" + 
"				For example:" + 
"			</para>" + 
"			<programlisting language=\"XML\" role=\"XML\">&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;" + 
"&lt;datasources&gt;" + 
"   &lt;no-tx-datasource&gt;" + 
"      &lt;jndi-name&gt;jdbcjcr_portal&lt;/jndi-name&gt;" + 
"      &lt;connection-url&gt;jdbc:hsqldb:${jboss.server.data.dir}/data/jdbcjcr_portal&lt;/connection-url&gt;" + 
"      &lt;driver-class&gt;org.hsqldb.jdbcDriver&lt;/driver-class&gt;" + 
"      &lt;user-name&gt;sa&lt;/user-name&gt;" + 
"      &lt;password&gt;&lt;/password&gt;" + 
"   &lt;/no-tx-datasource&gt;" + 
"" + 
"   &lt;no-tx-datasource&gt;" + 
"      &lt;jndi-name&gt;jdbcjcr_sample-portal&lt;/jndi-name&gt;" + 
"      &lt;connection-url&gt;jdbc:hsqldb:${jboss.server.data.dir}/data/jdbcjcr_sample-portal&lt;/connection-url&gt;" + 
"      &lt;driver-class&gt;org.hsqldb.jdbcDriver&lt;/driver-class&gt;" + 
"      &lt;user-name&gt;sa&lt;/user-name&gt;" + 
"      &lt;password&gt;&lt;/password&gt;" + 
"   &lt;/no-tx-datasource&gt;" + 
"" + 
"   &lt;no-tx-datasource&gt;" + 
"      &lt;jndi-name&gt;jdbcidm_portal&lt;/jndi-name&gt;" + 
"      &lt;connection-url&gt;jdbc:hsqldb:${jboss.server.data.dir}/data/jdbcidm_portal&lt;/connection-url&gt;" + 
"      &lt;driver-class&gt;org.hsqldb.jdbcDriver&lt;/driver-class&gt;" + 
"      &lt;user-name&gt;sa&lt;/user-name&gt;" + 
"      &lt;password&gt;&lt;/password&gt;" + 
"   &lt;/no-tx-datasource&gt;" + 
"" + 
"   &lt;no-tx-datasource&gt;" + 
"      &lt;jndi-name&gt;jdbcidm_sample-portal&lt;/jndi-name&gt;" + 
"      &lt;connection-url&gt;jdbc:hsqldb:${jboss.server.data.dir}/data/jdbcidm_sample-portal&lt;/connection-url&gt;" + 
"      &lt;driver-class&gt;org.hsqldb.jdbcDriver&lt;/driver-class&gt;" + 
"      &lt;user-name&gt;sa&lt;/user-name&gt;" + 
"      &lt;password&gt;&lt;/password&gt;" + 
"   &lt;/no-tx-datasource&gt;" + 
"&lt;/datasources&gt;</programlisting>" + 
"			<remark>" + 
"				NEEDINFO - QE NOTE - jmorgan -I have had a look at the link to the community docs, but I can't find any reference to local-tx-datasource in the JBoss EAP 6 Docs. Has this been deprecated, and if so, with what?" + 
"			</remark>" + 
"			<para>" + 
"				The properties can be set for datasource can be found at <ulink url=\"http://docs.jboss.org/jbossas/docs/Server_Configuration_Guide/4/html/Connectors_on_JBoss-Configuring_JDBC_DataSources.html#Configuring_JDBC_DataSources-The_non_transactional_DataSource_configuration_schema\"/>" + 
"			</para>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+19131-566013+%5BLatest%5D&amp;cf_build_id=19131-566013+05+Dec+2013+15%3A12+en-US+%5BLatest%5D&amp;comment=Title%3A+Declaring+the+Datasources+in+the+Application+Server%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"		<section id=\"Do_Not_Bind_Datasources_Explicitly\" remap=\"TID_19132\">" + 
"			<title>Do Not Bind Datasources Explicitly</title>" + 
"			<para>" + 
"				Do not let the portal explicitly bind datasources." + 
"			</para>" + 
"			<remark>" + 
"				NEEDINFO - FILE PATHS - I think some of the values have changed in the referenced file when I look at the new file below. New info required?" + 
"			</remark>" + 
"			<para>" + 
"				Edit the <filename><replaceable>JPP_HOME</replaceable>/standalone/configuration/gatein/configuration.properties</filename> and comment out the following rows in the JCR section:" + 
"			</para>" + 
"			<programlisting>#gatein.jcr.datasource.driver=org.hsqldb.jdbcDriver" + 
"#gatein.jcr.datasource.url=jdbc:hsqldb:file:${gatein.db.data.dir}/data/jdbcjcr_${name}" + 
"#gatein.jcr.datasource.username=sa" + 
"#gatein.jcr.datasource.password=</programlisting>" + 
"			<para>" + 
"				Comment out the following lines in the IDM section:" + 
"			</para>" + 
"			<programlisting>#gatein.idm.datasource.driver=org.hsqldb.jdbcDriver" + 
"#gatein.idm.datasource.url=jdbc:hsqldb:file:${gatein.db.data.dir}/data/jdbcidm_${name}" + 
"#gatein.idm.datasource.username=sa" + 
"#gatein.idm.datasource.password=</programlisting>" + 
"			<para>" + 
"				Open the <filename>jcr-configuration.xml</filename> and <filename>idm-configuration.xml</filename> files and comment out references to the plug-in <literal>InitialContextInitializer</literal>." + 
"			</para>" + 
"			<programlisting language=\"XML\">&lt;!-- Commented because, Datasources are declared and bound by AS, not in eXo --&gt;" + 
"&lt;!--" + 
"&lt;external-component-plugins&gt;" + 
"    [...]" + 
"&lt;/external-component-plugins&gt;" + 
"--&gt;</programlisting>" + 
"			<para role=\"RoleCreateBugPara\">" + 
"				<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+19132-566013+%5BLatest%5D&amp;cf_build_id=19132-566013+05+Dec+2013+15%3A12+en-US+%5BLatest%5D&amp;comment=Title%3A+Do+Not+Bind+Datasources+Explicitly%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"			</para>" + 
"		</section>" + 
"	</section>" + 
"</appendix>" + 
"	<appendix id=\"appe-Quickstarts\">" + 
"	<title>Quickstarts</title>" + 
"	<section id=\"Quickstarts1\" remap=\"TID_19133\">" + 
"		<title>Quickstarts</title>" + 
"		<para>" + 
"			Quickstarts provide small, specific, working examples that can be used as a reference for your own project." + 
"		</para>" + 
"		<para>" + 
"			The Quickstarts can be obtained using the methods described in this appendix." + 
"		</para>" + 
"		<!--# Section comment as per the SME feedback, refer BZ#912678" + 
" <section id=\"sid-55378941_Appendix-Quickstarts-GitHub\">" + 
"      " + 
"       <title>GitHub</title>" + 
"      <remark>FIXME: Which git repo are customers to use?</remark>" + 
"      <para>Issue the following command</para>" + 
"      <informalexample>" + 
"        <programlisting>git clone https://github.com/gatein/gatein-portal-quickstart.git</programlisting>" + 
"      </informalexample>" + 
"      <para>... and switch to the branch compatible with your JBoss Portal Platform version.</para>" + 
"    </section> -->" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+19133-566013+%5BLatest%5D&amp;cf_build_id=19133-566013+05+Dec+2013+15%3A12+en-US+%5BLatest%5D&amp;comment=Title%3A+Quickstarts%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"	</section>" + 
"	<section id=\"Quickstarts_Downloads_Page\" remap=\"TID_19134\">" + 
"		<title>Quickstarts Downloads Page</title>" + 
"		<para>" + 
"			A zip archive containing all Quickstarts can be downloaded from the Red Hat JBoss Portal Downloads page, located at <ulink url=\"https://access.redhat.com/jbossnetwork/restricted/listSoftware.html?downloadType=distributions&amp;product=jbportal&amp;version=6.1.0\"/>." + 
"		</para>" + 
"		<note>" + 
"			<para>" + 
"				For information on using the WOLF repository, see the <filename>readme</filename> file packaged with the quickstarts." + 
"			</para>" + 
"		</note>" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+19134-566013+%5BLatest%5D&amp;cf_build_id=19134-566013+05+Dec+2013+15%3A12+en-US+%5BLatest%5D&amp;comment=Title%3A+Quickstarts+Downloads+Page%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"	</section>" + 
"	<section id=\"JBoss_Developer_Studio_or_Eclipse_with_JBoss_Tools\" remap=\"TID_19135\">" + 
"		<title>JBoss Developer Studio or Eclipse with JBoss Tools</title>" + 
"		<procedure>" + 
"			<title>Launching JBoss Tools with Eclipse or JBoss Developer Studio</title>" + 
"			<step>" + 
"				<para>" + 
"					In the Workbench, go to <menuchoice><guimenu>File</guimenu><guimenu>New</guimenu><guimenu>Example...</guimenu><guimenu>JBoss Tools</guimenu><guimenu>Project Examples</guimenu></menuchoice>." + 
"				</para>" + 
"			</step>" + 
"			<step>" + 
"				<!-- This reference to JPP should remain as it is a community branding thing -->" + 
"				<para>" + 
"					In the New Project Example dialog, select the Site <code>JBoss Community JBoss Portal Platform Examples</code> from the drop down menu." + 
"				</para>" + 
"			</step>" + 
"			<step>" + 
"				<para>" + 
"					Select one of the available Quickstarts, for example <code>Simplest Hello World Portlet</code>." + 
"				</para>" + 
"			</step>" + 
"			<step>" + 
"				<para>" + 
"					Click <code>Finish</code> and the example project will be imported into your workspace." + 
"				</para>" + 
"			</step>" + 
"		</procedure>" + 
"		<note>" + 
"			<para>" + 
"				For more information on how to use and deploy quickstarts, see the <filename>readme</filename> file packaged with the quickstart." + 
"			</para>" + 
"		</note>" + 
"		<!-- <para>" + 
" The new runtime environment allows to deploy quickstarts directly from IDE to JBoss Portal Platform." + 
" </para>" + 
" " + 
" <para> Example:</para>" + 
" <para> Window -> Preferences -> Server -> Runtime Environments then click Add... and choose JBoss EAP 6.x from JBoss Enterprise Middleware folder.</para>" + 
" " + 
" <note>" + 
"  <para>" + 
"  Set JPP_HOME as home directory." + 
"  </para>" + 
" </note> -->" + 
"		<para role=\"RoleCreateBugPara\">" + 
"			<ulink url=\"https://bugzilla.redhat.com/enter_bug.cgi?cf_environment=Build+Name%3A+22538%2C+Development+Guide-6.1.1-6.1.1%0ABuild+Date%3A+24-12-2013+21%3A00%3A57%0ATopic+ID%3A+19135-566013+%5BLatest%5D&amp;cf_build_id=19135-566013+05+Dec+2013+15%3A12+en-US+%5BLatest%5D&amp;comment=Title%3A+JBoss+Developer+Studio+or+Eclipse+with+JBoss+Tools%0A%0ADescribe+the+issue%3A%0A%0A%0ASuggestions+for+improvement%3A%0A%0A%0AAdditional+information%3A&amp;product=JBoss+Enterprise+Portal+Platform+6&amp;component=docs-Developer_Guide&amp;version=6.1.1\">Report a bug</ulink>" + 
"		</para>" + 
"	</section>" + 
"</appendix>" + 
"</part>" + 
"	<chapter><title>Compiler Output</title><itemizedlist id=\"TagErrorXRef1909\"><title>Topic ID 1909</title><listitem><para>INFO: Caching Problems</para></listitem>" + 
"<listitem><para>INFO: Uncategorised: Administrator, Needs Editing  Topic Lifecycle: IA Triage  Topic Types: Reference  Topic Lifecycle: IA Rejected  Concerns: Troubleshooting </para></listitem>" + 
"<listitem><para>INFO: <ulink url=\"http://topika.ecs.eng.bne.redhat.com:8080/pressgang-ccms-ui/#SearchResultsAndTopicView;query;topicIds=1909\">Topic URL</ulink></para></listitem>" + 
"<listitem><para>WARNING: This topic has no XML data</para></listitem>" + 
"</itemizedlist><glossary><title>Compiler Glossary</title><glossentry><glossterm>\"This topic has no XML data\"</glossterm><glossdef><itemizedlist><listitem><para>The topic doesn't have any XML Content to display.</para></listitem><listitem><para>To fix this warning, open the topic URL and add some content.</para></listitem></itemizedlist></glossdef></glossentry><glossentry><glossterm>\"This topic contains an invalid element that can't be converted into a DOM Element.\"</glossterm><glossdef><itemizedlist><listitem><para>The topic XML contains invalid elements that cannot be successfully converted in DOM elements.</para></listitem><listitem><para>To fix this error please remove or correct any invalid XML elements or entities.</para></listitem></itemizedlist></glossdef></glossentry><glossentry><glossterm>\"This topic doesn't have well-formed xml.\"</glossterm><glossdef><itemizedlist><listitem><para>The topic XML is not well-formed XML and maybe missing opening or closing element statements.</para></listitem><listitem><para>To fix this error please ensure that all XML elements having an opening and closing statement and all XML reserved characters are represented as XML entities.</para></listitem></itemizedlist></glossdef></glossentry><glossentry><glossterm>\"This topic has invalid Docbook XML.\"</glossterm><glossdef><itemizedlist><listitem><para>The topic XML is not valid against the Docbook 4.5 DTD.</para></listitem><listitem><para>To fix this error please ensure that all XML elements are valid Docbook elements . Also check to ensure all XML sub elements are valid for the root XML element.</para></listitem></itemizedlist></glossdef></glossentry><glossentry><glossterm>\"This topic has invalid Injection Points.\"</glossterm><glossdef><itemizedlist><listitem><para>The topic XML contains Injection Points that cannot be resolved into links.</para></listitem><listitem><para>To fix this error please ensure that all the topics referred to by Injection Points are included in the build and/or have adequate relationships.</para></listitem></itemizedlist></glossdef></glossentry><glossentry><glossterm>\"... is possibly an invalid custom Injection Point.\"</glossterm><glossdef><itemizedlist><listitem><para>The XML comment mentioned has been identified as a possible custom Injection Point, that is incorrectly referenced.</para></listitem><listitem><para>To fix this error please ensure that the type is valid, a colon is used to separate the IDs from the type and only topic IDs are used in the ID list.</para></listitem></itemizedlist></glossdef></glossentry></glossary></chapter>" + 
"	<appendix id=\"appe-Development_Guide-Revision_History\">" + 
"	<title>Revision History</title>" + 
"	<simpara>" + 
"		<revhistory>" + 
"			<revision>" + 
"				<revnumber>6.0.0-1</revnumber><date>Tue Dec 24 2013</date>" + 
"				<author>" + 
"					<firstname>CS Builder</firstname><surname>Robot</surname><email>robot@dev.null.com</email>" + 
"				</author>" + 
"				<revdescription>" + 
"					<simplelist>" + 
"						<member>" + 
"							Built from Content Specification: 22538, Revision: 572901" + 
"						</member>" + 
"					</simplelist>" + 
"				</revdescription>" + 
"			</revision>" + 
"		</revhistory>" + 
"	</simpara>" + 
"</appendix>" + 
"</book>
